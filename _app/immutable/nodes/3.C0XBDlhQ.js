var ua=Object.defineProperty;var ca=Object.getPrototypeOf;var da=Reflect.get;var bs=s=>{throw TypeError(s)};var va=(s,t,r)=>t in s?ua(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var ps=(s,t,r)=>va(s,typeof t!="symbol"?t+"":t,r),Dr=(s,t,r)=>t.has(s)||bs("Cannot "+r);var m=(s,t,r)=>(Dr(s,t,"read from private field"),r?r.call(s):t.get(s)),Q=(s,t,r)=>t.has(s)?bs("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,r),ht=(s,t,r,a)=>(Dr(s,t,"write to private field"),a?a.call(s,r):t.set(s,r),r),Oe=(s,t,r)=>(Dr(s,t,"access private method"),r);var ys=(s,t,r,a)=>({set _(n){ht(s,t,n,r)},get _(){return m(s,t,a)}}),_s=(s,t,r)=>da(ca(s),r,t);import{f as I,a as S,c as Zr,t as or}from"../chunks/DU_35SlH.js";import{T as fa,O as Cs,Z as ha,e as d,p as mt,c as p,s as _,r as g,g as e,t as re,a as bt,f as _e,b as E,aw as It,ax as ga,d as Pe,u as se,ay as ma,K as nt,az as ba,Y as js,aA as ur,au as pa,n as ya}from"../chunks/CbIHRuBd.js";import{d as mr,s as we,e as Mt}from"../chunks/DlWyvDRc.js";import{i as Z}from"../chunks/D6ufbTq8.js";import{e as $e,i as Hr,a as _a,c as wa,d as Ns,s as Ur,S as kr,f as Fe,r as Tt,b as Ot}from"../chunks/B9TR6BhL.js";import{p as it,r as qs,b as Xr,s as xa,a as Sa}from"../chunks/CPeILaI9.js";import{s as ka,g as za}from"../chunks/Bes194aw.js";import{o as $r,t as Pa,b as lt,c as Aa,a as Ls,d as ar,e as nr,f as Wr,g as Fr,h as ws,i as xs,j as Ss,k as ks,m as Ea,n as zs,p as Ia,q as Ta,r as Kr,u as Oa,s as Ps,v as Ma}from"../chunks/DSVuhxqL.js";import{a as As,o as Js}from"../chunks/BpPUMrln.js";import{d as Re,c as Ds}from"../chunks/tsPM7QKs.js";var gt,Ct,vr,Er,Ws;const Ir=class Ir{constructor(t){Q(this,Er);Q(this,gt,new WeakMap);Q(this,Ct);Q(this,vr);ht(this,vr,t)}observe(t,r){var a=m(this,gt).get(t)||new Set;return a.add(r),m(this,gt).set(t,a),Oe(this,Er,Ws).call(this).observe(t,m(this,vr)),()=>{var n=m(this,gt).get(t);n.delete(r),n.size===0&&(m(this,gt).delete(t),m(this,Ct).unobserve(t))}}};gt=new WeakMap,Ct=new WeakMap,vr=new WeakMap,Er=new WeakSet,Ws=function(){return m(this,Ct)??ht(this,Ct,new ResizeObserver(t=>{for(var r of t){Ir.entries.set(r.target,r);for(var a of m(this,gt).get(r.target)||[])a(r)}}))},ps(Ir,"entries",new WeakMap);let Br=Ir;var Ra=new Br({box:"border-box"});function Es(s,t,r){var a=Ra.observe(s,()=>r(s[t]));fa(()=>(Cs(()=>r(s[t])),a))}function Ca(s,t,r,a,n){var f=()=>{a(r[s])};r.addEventListener(t,f),f(),(r===document.body||r===window||r===document)&&ha(()=>{r.removeEventListener(t,f)})}function ir(s){d(s,s.v+1)}const ja=()=>{const s=ka;return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},updated:s.updated}},Na={subscribe(s){return ja().page.subscribe(s)}},Is=(s,t)=>t.highlight(t.set.seed,t.set.skills.map(r=>r.passive));var qa=(s,t)=>$r(Aa(t.jewel,t.conqueror,t.set)),La=I("<li> </li>"),Ja=I('<div class="mt-2"><span> </span> <ul class="list-disc pl-6 font-bold"></ul></div>'),Da=I('<div class="my-2 border-white/50 border p-2 flex flex-col cursor-pointer" role="button" tabindex="0"><div class="flex flex-row justify-between"><button class="px-3 invisible">Trade</button> <div class="font-bold text-orange-500 text-center"> </div> <button class="px-3 bg-blue-500/40 rounded">Trade</button></div> <!></div>');function Ts(s,t){mt(t,!0);var r=Da();r.__click=[Is,t],r.__keydown=[Is,t];var a=p(r),n=_(p(a),2),f=p(n);g(n);var c=_(n,2);c.__click=[qa,t],g(a);var y=_(a,2);$e(y,17,()=>t.set.skills,o=>o.passive,(o,u)=>{var h=Ja(),b=p(h),k=p(b);g(b);var z=_(b,2);$e(z,20,()=>Object.keys(e(u).stats),v=>v,(v,F)=>{var P=La(),K=p(P,!0);g(P),re(R=>we(K,R),[()=>Pa(F,e(u).stats[F])]),S(v,P)}),g(z),g(h),re(()=>we(k,`${lt.nodes[e(u).passive].name??""} (${e(u).passive??""})`)),S(o,h)}),g(r),re(()=>we(f,`Seed ${t.set.seed??""} (weight ${t.set.weight??""}) Stat Total: ${t.set.statTotal??""}`)),S(s,r),bt()}mr(["click","keydown"]);var Wa=(s,t,r)=>e(t)===String(r)?d(t,""):d(t,String(r),!0),Fa=I("<div><!></div>"),Ka=I('<div class="flex flex-col overflow-auto min-h-[200px] mb-2"></div>'),Ya=I('<button class="text-lg w-full p-2 px-4 rounded flex flex-row justify-between mb-2" style="background-color: rgba(107, 114, 128, 0.3);"><span> </span> <span> </span></button> <!>',1),Ga=I('<div class="flex flex-col overflow-auto"></div>'),Ha=I("<div><!></div>"),Ua=I('<div class="mt-4 flex flex-col overflow-auto"></div>');function Xa(s,t){mt(t,!0);let r=it(t,"groupResults",3,!0),a=E("");var n=Zr(),f=_e(n);{var c=o=>{var u=Ga();$e(u,20,()=>Object.keys(t.searchResults.grouped).map(h=>parseInt(h,10)).sort((h,b)=>h-b).reverse(),h=>h,(h,b)=>{var k=Ya(),z=_e(k);z.__click=[Wa,a,b];var v=p(z),F=p(v);g(v);var P=_(v,2),K=p(P,!0);g(P),g(z);var R=_(z,2);{var q=w=>{var ae=Ka();$e(ae,21,()=>t.searchResults.grouped[b],Hr,(j,Ye)=>{var Ce=Fa(),L=p(Ce);Ts(L,{get set(){return e(Ye)},get highlight(){return t.highlight},get jewel(){return t.jewel},get conqueror(){return t.conqueror}}),g(Ce),S(j,Ce)}),g(ae),S(w,ae)};Z(R,w=>{e(a)===String(b)&&w(q)})}re(w=>{we(F,`${b??""} Match${b>1?"es":""} [${t.searchResults.grouped[b].length??""}]`),we(K,w)},[()=>e(a)===String(b)?"^":"V"]),S(h,k)}),g(u),S(o,u)},y=o=>{var u=Ua();$e(u,21,()=>t.searchResults.raw,Hr,(h,b)=>{var k=Ha(),z=p(k);Ts(z,{get set(){return e(b)},get highlight(){return t.highlight},get jewel(){return t.jewel},get conqueror(){return t.conqueror}}),g(k),S(h,k)}),g(u),S(o,u)};Z(f,o=>{r()?o(c):o(y,!1)})}S(s,n),bt()}mr(["click"]);const Ba=s=>{const t=s*2,r=t>>16&255,a=t>>8&255,n=t&255;return[r,a,n]},Va=([s,t,r])=>{const a=(s<<16|t<<8|r)/2;return a%1?0:a},Qa=["filter","shadowBlur","globalCompositeOperation","globalAlpha","fillStyle","strokeStyle"],Za=(s,t,{rgbToId:r=Va,idToRgb:a=Ba}={})=>{const n=s.getContext("2d",t),f=new OffscreenCanvas(s.width,s.height),c=f.getContext("2d",{willReadFrequently:!1,alpha:!1});return new Proxy(n,{get(y,o){const{width:u,height:h}=s;if((u!==f.width||h!==f.height)&&(f.width=u,f.height=h),o==="getLayerIdAt")return(k,z)=>{const[v,F,P]=c.getImageData(k,z,1,1).data;return r([v,F,P])};if(o==="setCurrentLayerId")return k=>{const[z,v,F]=a(k),P=`rgb(${z},${v},${F})`;c.fillStyle=P,c.strokeStyle=P};const b=y[o];return typeof b!="function"?b:(...k)=>{let z=o,v=k;return o==="drawImage"&&(z="fillRect",v=k.slice(-4)),c[z](...v),Reflect.apply(b,y,k)}},set(y,o,u){return y[o]=u,Qa.includes(o)||(c[o]=u),!0}})};var Qe,Ze,at,jt,Ar;const es=class es extends Map{constructor(r){super();Q(this,jt);Q(this,Qe,new Map);Q(this,Ze,It(0));Q(this,at,It(0));if(r){for(var[a,n]of r)super.set(a,n);m(this,at).v=super.size}}has(r){var a=m(this,Qe),n=a.get(r);if(n===void 0){var f=super.get(r);if(f!==void 0)n=It(0),a.set(r,n);else return e(m(this,Ze)),!1}return e(n),!0}forEach(r,a){Oe(this,jt,Ar).call(this),super.forEach(r,a)}get(r){var a=m(this,Qe),n=a.get(r);if(n===void 0){var f=super.get(r);if(f!==void 0)n=It(0),a.set(r,n);else{e(m(this,Ze));return}}return e(n),super.get(r)}set(r,a){var b;var n=m(this,Qe),f=n.get(r),c=super.get(r),y=super.set(r,a),o=m(this,Ze);if(f===void 0)n.set(r,It(0)),d(m(this,at),super.size),ir(o);else if(c!==a){ir(f);var u=o.reactions===null?null:new Set(o.reactions),h=u===null||!((b=f.reactions)!=null&&b.every(k=>u.has(k)));h&&ir(o)}return y}delete(r){var a=m(this,Qe),n=a.get(r),f=super.delete(r);return n!==void 0&&(a.delete(r),d(m(this,at),super.size),d(n,-1),ir(m(this,Ze))),f}clear(){if(super.size!==0){super.clear();var r=m(this,Qe);d(m(this,at),0);for(var a of r.values())d(a,-1);ir(m(this,Ze)),r.clear()}}keys(){return e(m(this,Ze)),super.keys()}values(){return Oe(this,jt,Ar).call(this),super.values()}entries(){return Oe(this,jt,Ar).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return e(m(this,at)),super.size}};Qe=new WeakMap,Ze=new WeakMap,at=new WeakMap,jt=new WeakSet,Ar=function(){e(m(this,Ze));var r=m(this,Qe);if(m(this,at).v!==r.size)for(var a of _s(es.prototype,this,"keys").call(this))r.has(a)||r.set(a,It(0));for(var[,n]of m(this,Qe))e(n)};let cr=es;const $a=s=>{if(window.TouchEvent&&s instanceof TouchEvent){const{left:a,top:n}=s.target.getBoundingClientRect(),{clientX:f,clientY:c}=s.changedTouches[0];return{x:f-a,y:c-n}}const{offsetX:t,offsetY:r}=s;return{x:t,y:r}},Os=(s,t)=>{var r,a;s instanceof MouseEvent&&((r=s.target)==null||r.dispatchEvent(new PointerEvent(`layer.pointer${t}`,s)),(a=s.target)==null||a.dispatchEvent(new MouseEvent(`layer.mouse${t}`,s)))},en=["onclick","oncontextmenu","ondblclick","onauxclick","onmousedown","onmouseenter","onmouseleave","onmouseup","onmousemove","onwheel","ontouchstart","ontouchcancel","ontouchend","ontouchmove","onpointerenter","onpointerleave","onpointerdown","onpointerup","onpointermove","onpointercancel","onlayer.mouseenter","onlayer.mouseleave","onlayer.pointerenter","onlayer.pointerleave","onfocus","onblur","onfullscreenchange","onfullscreenerror","onscroll","oncut","oncopy","onpaste","onkeydown","onkeypress","onkeyup","onmouseover","onmouseout","onselect","ondrag","ondragend","ondragenter","ondragstart","ondragleave","ondragover","ondrop","onpointerover","onpointerout","ongotpointercapture","onlostpointercapture"],tn=s=>console.warn("[svelte-canvas] %s",s),Fs=Symbol("register"),rn=s=>ga(Fs)(s);var Nt,qt,Lt,Tr,Or,fr,kt,Ke,Jt,Dt,hr,Wt,gr,he,Ks,Ys,Gs,Hs,Vr,Us,Xs;class sn{constructor(t){Q(this,he);Q(this,Nt,new cr);Q(this,qt,new cr);Q(this,Lt,new cr);Q(this,Tr,1);Q(this,Or,Date.now());Q(this,fr,E(0));Q(this,kt);Q(this,Ke);Q(this,Jt);Q(this,Dt);Q(this,hr,E(Pe([])));Q(this,Wt,E(0));Q(this,gr,se(()=>m(this,Lt).get(e(m(this,Wt)))));ht(this,Ke,t),ma(Fs,this.register.bind(this))}init(t,r){ht(this,kt,t),Oe(this,he,Hs).call(this,r),nt(()=>Oe(this,he,Vr).call(this)),nt(()=>Oe(this,he,Gs).call(this)),nt(()=>(e(m(this,fr)),Oe(this,he,Us).call(this))),As(()=>Oe(this,he,Xs).call(this))}redraw(){ba(m(this,fr))}register({setup:t,render:r,...a}){const n=Oe(this,he,Ks).call(this);return t&&m(this,Nt).set(n,t),m(this,qt).set(n,r),Object.keys(a).length&&(m(this,Ke).layerEvents?m(this,Lt).set(n,a):tn("Canvas must have layerEvents={true} in order to use layer-level event handlers")),As(()=>Oe(this,he,Ys).call(this,n)),n}createEventHandlers(){const t=n=>{const f=`on${n.type}`,c=m(this,Ke).handlers[f];c==null||c(n)},r=n=>{const{pixelRatio:f}=m(this,Ke),{x:c,y}=$a(n);if(["touchstart","pointermove"].includes(n.type)){const h=m(this,kt).getLayerIdAt(c*f,y*f);e(m(this,Wt))!==h&&(Os(n,"leave"),d(m(this,Wt),h,!0),Os(n,"enter"))}if(!e(m(this,gr)))return;const o=`on${n.type.replace("layer.","")}`,u=e(m(this,gr))[o];u==null||u({x:c,y,originalEvent:n})},a=n=>{t(n),m(this,Ke).layerEvents&&r(n)};return en.reduce((n,f)=>({...n,[f]:a}),{})}}Nt=new WeakMap,qt=new WeakMap,Lt=new WeakMap,Tr=new WeakMap,Or=new WeakMap,fr=new WeakMap,kt=new WeakMap,Ke=new WeakMap,Jt=new WeakMap,Dt=new WeakMap,hr=new WeakMap,Wt=new WeakMap,gr=new WeakMap,he=new WeakSet,Ks=function(){return ys(this,Tr)._++},Ys=function(t){m(this,qt).delete(t),m(this,Lt).delete(t)},Gs=function(){const{onresize:t,width:r,height:a,pixelRatio:n}=m(this,Ke);t==null||t({width:r,height:a,pixelRatio:n})},Hs=function(t){const r=()=>{const a=[...t.children];d(m(this,hr),a.map(n=>+n.dataset.layerId),!0)};ht(this,Dt,new MutationObserver(()=>r())),m(this,Dt).observe(t,{childList:!0}),r()},Vr=function(){m(this,Ke).autoplay?(Cs(()=>this.redraw()),ht(this,Jt,requestAnimationFrame(()=>Oe(this,he,Vr).call(this)))):cancelAnimationFrame(m(this,Jt))},Us=function(){var o,u,h;const t=m(this,kt),{width:r,height:a,pixelRatio:n,autoclear:f}=m(this,Ke),c=Date.now()-m(this,Or),y={context:t,width:r,height:a,time:c};t.setTransform(n,0,0,n,0,0),f&&t.clearRect(0,0,r,a);for(const[b,k]of m(this,Nt))k(y),m(this,Nt).delete(b);for(const b of e(m(this,hr)))(u=(o=m(this,kt)).setCurrentLayerId)==null||u.call(o,b),(h=m(this,qt).get(b))==null||h(y)},Xs=function(){var t;typeof window>"u"||((t=m(this,Dt))==null||t.disconnect(),cancelAnimationFrame(m(this,Jt)))};/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function an(s,t){var r=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(r!=null){var a,n,f,c,y=[],o=!0,u=!1;try{if(f=(r=r.call(s)).next,t===0){if(Object(r)!==r)return;o=!1}else for(;!(o=(a=f.call(r)).done)&&(y.push(a.value),y.length!==t);o=!0);}catch(h){u=!0,n=h}finally{try{if(!o&&r.return!=null&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw n}}return y}}function Ms(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),r.push.apply(r,a)}return r}function Me(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ms(Object(r),!0).forEach(function(a){nn(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Ms(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function nn(s,t,r){return t=gn(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function ln(s,t){if(s==null)return{};var r={},a=Object.keys(s),n,f;for(f=0;f<a.length;f++)n=a[f],!(t.indexOf(n)>=0)&&(r[n]=s[n]);return r}function on(s,t){if(s==null)return{};var r=ln(s,t),a,n;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(s);for(n=0;n<f.length;n++)a=f[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function Rs(s,t){return cn(s)||an(s,t)||Bs(s,t)||fn()}function zr(s){return un(s)||dn(s)||Bs(s)||vn()}function un(s){if(Array.isArray(s))return Qr(s)}function cn(s){if(Array.isArray(s))return s}function dn(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Bs(s,t){if(s){if(typeof s=="string")return Qr(s,t);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qr(s,t)}}function Qr(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=s[r];return a}function vn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hn(s,t){if(typeof s!="object"||s===null)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function gn(s){var t=hn(s,"string");return typeof t=="symbol"?t:String(t)}function dr(s){var t=s.sizes.shift(),r=Math.max(Math.ceil(t[0]),1),a=Math.max(Math.ceil(t[1]),1),n=[r-1,a-1,1,1],f=Date.now(),c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,y,o;c?(y=new OffscreenCanvas(1,1),o=new OffscreenCanvas(r,a)):(y=document.createElement("canvas"),y.width=1,y.height=1,o=document.createElement("canvas"),o.width=r,o.height=a);var u=y.getContext("2d"),h=o.getContext("2d");h&&(h.fillRect.apply(h,n),u.drawImage(o,r-1,a-1,1,1,0,0,1,1));var b=u&&u.getImageData(0,0,1,1).data[3]!==0,k=Date.now()-f;return[y,o].forEach(function(z){z.height=0,z.width=0}),c?(postMessage({width:r,height:a,benchmark:k,isTestPass:b}),!b&&s.sizes.length&&dr(s)):b?s.onSuccess(r,a,k):(s.onError(r,a,k),s.sizes.length&&dr(s)),b}var Yr={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},mn=["onError","onSuccess"],Rt={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},lr={};function Gr(s){var t=s.width===s.height,r=s.height===1,a=s.width===1,n=[];if(!s.width||!s.height)s.sizes.forEach(function(h){var b=t||r?h:1,k=t||a?h:1;n.push([b,k])});else for(var f=s.min||Rt.min,c=s.step||Rt.step,y=Math.max(s.width,s.height);y>=f;){var o=t||r?y:1,u=t||a?y:1;n.push([o,u]),y-=c}return n}function Pr(s){var t=window&&"HTMLCanvasElement"in window,r=window&&"OffscreenCanvas"in window,a=Date.now(),n=s.onError,f=s.onSuccess,c=on(s,mn),y=null;if(!t)return!1;if(s.useWorker&&r){var o=`
            var canvasTest = `.concat(dr.toString(),`;
            onmessage = function(e) {
                canvasTest(e.data);
            };
        `),u=new Blob([o],{type:"application/javascript"}),h=URL.createObjectURL(u);y=new Worker(h),URL.revokeObjectURL(h),y.onmessage=function(b){var k=b.data,z=k.width,v=k.height,F=k.benchmark,P=k.isTestPass;P?(lr[a].onSuccess(z,v,F),delete lr[a]):lr[a].onError(z,v,F)}}if(s.usePromise)return new Promise(function(b,k){var z=Me(Me({},s),{},{onError:function(K,R,q){var w;if(s.sizes.length===0)w=!0;else{var ae=s.sizes.slice(-1),j=Rs(ae,1),Ye=Rs(j[0],2),Ce=Ye[0],L=Ye[1];w=K===Ce&&R===L}n(K,R,q),w&&k({width:K,height:R,benchmark:q})},onSuccess:function(K,R,q){f(K,R,q),b({width:K,height:R,benchmark:q})}});if(y){var v=z.onError,F=z.onSuccess;lr[a]={onError:v,onSuccess:F},y.postMessage(c)}else dr(z)});if(y)lr[a]={onError:n,onSuccess:f},y.postMessage(c);else return dr(s)}var bn={maxArea:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Gr({width:t.max,height:t.max,min:t.min,step:t.step,sizes:zr(Yr.area)}),a=Me(Me(Me({},Rt),t),{},{sizes:r});return Pr(a)},maxHeight:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Gr({width:1,height:t.max,min:t.min,step:t.step,sizes:zr(Yr.height)}),a=Me(Me(Me({},Rt),t),{},{sizes:r});return Pr(a)},maxWidth:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Gr({width:t.max,height:1,min:t.min,step:t.step,sizes:zr(Yr.width)}),a=Me(Me(Me({},Rt),t),{},{sizes:r});return Pr(a)},test:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Me(Me({},Rt),t);return r.sizes=zr(r.sizes),r.width&&r.height&&(r.sizes=[[r.width,r.height]]),Pr(r)}};const pn=(s,t,r,a=.1)=>{if(typeof window>"u")return r;for(;!bn.test({sizes:[[s*r,t*r]]});)r-=a;return r};var yn=I("<canvas></canvas> <div><!></div>",1);function _n(s,t){mt(t,!0);let r=it(t,"style",3,""),a=it(t,"autoplay",3,!1),n=it(t,"autoclear",3,!0),f=it(t,"layerEvents",3,!1),c=qs(t,["$$slots","$$events","$$legacy","width","height","pixelRatio","class","style","autoplay","autoclear","layerEvents","onresize","contextSettings","children"]),y,o,u,h=E(2),b=E(0),k=E(0);const z=se(()=>t.width??e(b)),v=se(()=>t.height??e(k)),F=se(()=>e(h)&&t.pixelRatio==="auto"?pn(e(z),e(v),e(h)):t.pixelRatio&&t.pixelRatio!=="auto"?t.pixelRatio:e(h)),P=new sn({get width(){return e(z)},get height(){return e(v)},get pixelRatio(){return e(F)},get autoplay(){return a()},get autoclear(){return n()},get layerEvents(){return f()},get onresize(){return t.onresize},handlers:c});Js(()=>{f()?o=Za(y,t.contextSettings):o=y.getContext("2d",t.contextSettings),P.init(o,u)});const K=()=>P.redraw();var R=yn(),q=_e(R);_a(q,j=>({class:t.class,width:e(z)*e(F),height:e(v)*e(F),style:r(),...j,[wa]:{width:t.width?`${t.width}px`:"100%",height:t.height?`${t.height}px`:"100%"}}),[()=>P.createEventHandlers()]),Xr(q,j=>y=j,()=>y);var w=_(q,2);Ns(w,"",{},{display:"none"});var ae=p(w);return Ls(ae,()=>t.children??js),g(w),Xr(w,j=>u=j,()=>u),Ca("devicePixelRatio","resize",ur,j=>d(h,j,!0)),Es(q,"clientWidth",j=>d(b,j)),Es(q,"clientHeight",j=>d(k,j)),S(s,R),bt({redraw:K,get canvas(){return y},set canvas(j){y=j},get context(){return o},set context(j){o=j}})}var wn=I("<div></div>");function xn(s,t){mt(t,!0);const r=qs(t,["$$slots","$$events","$$legacy"]),a=rn(r);var n=wn();re(()=>Ur(n,"data-layer-id",a)),S(s,n),bt()}var Sn=I("<div><!> <!></div>");function kn(s,t){mt(t,!0);const r=()=>window.performance.now();let a=it(t,"highlighted",19,()=>[]),n=it(t,"disabled",19,()=>[]),f=it(t,"highlightJewels",3,!1);const c=[427,320,226,227,323,422,329],y="25px Roboto Mono",o="17px Roboto Mono";let u=E(10),h=E(0),b=E(0);const k=se(()=>Ia/e(u)),z=2.6,v={},F={},P=(i,T,J,H=!1,ne=!1)=>{let D=H?Ea[T]:zs[T];!D&&H&&(D=zs[T]);const je=D.filename;je in(H?F:v)||((H?F:v)[je]=new Image,(H?F:v)[je].src=je);const Y=D.coords[T],Ge=Y.w/e(u)*z,Ne=Y.h/e(u)*z,O=J.x-Ge/2,x=J.y-Ne/2;let X=x;ne&&(X=x-Ne/2),i.drawImage((H?F:v)[je],Y.x,Y.y,Y.w,Y.h,O,X,Ge,Ne),ne&&(i.save(),i.translate(O,x),i.rotate(Math.PI),i.drawImage((H?F:v)[je],Y.x,Y.y,Y.w,Y.h,-Ge,-(Ne/2),Ge,-Ne),i.restore())},K=(i,T,J)=>{const H=[];let ne="";return i.split(" ").forEach(D=>{T.measureText(ne+D).width<J?ne+=" "+D:(H.push(ne.trim()),ne=D)}),ne.length>0&&H.push(ne.trim()),H};let R=E(Pe({x:Number.MIN_VALUE,y:Number.MIN_VALUE})),q=E("unset"),w=E(void 0);const ae=se(()=>({context:i,width:T,height:J})=>{var Ne;const H=window.performance.now();i.clearRect(0,0,T,J),i.fillStyle="#080c11",i.fillRect(0,0,T,J);const ne={};Object.keys(Fr).forEach(O=>{const x=parseInt(O),X=Fr[x],W=ws(X.x,X.y,e(h),e(b),e(u)),ue=Math.max(...X.orbits);c.indexOf(x)>=0||(ue==1?P(i,"PSGroupBackground1",W,!1):ue==2?P(i,"PSGroupBackground2",W,!1):(ue==3||X.orbits.length>1)&&P(i,"PSGroupBackground3",W,!1,!0))}),Object.entries(ar).forEach(([O,x])=>{var He;const X=parseInt(O);if(!x)return;const W=xs(x.orbit??0,x.orbitIndex??0),ue=nr(x,e(h),e(b),e(u));(He=x.out)==null||He.forEach(ee=>{const Je=parseInt(ee),C=ar[Je];if(!C)return;const De=Math.min(Je,X),ve=Math.max(Je,X),$=De+":"+ve;if($ in ne||(ne[$]=!0,!C)||C.isMastery)return;const ge=xs(C.orbit??0,C.orbitIndex??0),me=nr(C,e(h),e(b),e(u));if(i.beginPath(),x.group!=C.group||x.orbit!=C.orbit)i.moveTo(ue.x,ue.y),i.lineTo(me.x,me.y);else{let fe=Math.PI/180-Math.PI/180*W,xe=Math.PI/180-Math.PI/180*ge;fe-=Math.PI/2,xe-=Math.PI/2;const pt=Math.abs(Math.max(fe,xe)-Math.min(fe,xe)),Ft=pt>Math.PI?Math.max(fe,xe):Math.min(fe,xe),Cr=pt>Math.PI?Math.min(fe,xe):Math.max(fe,xe);if(!x.group)return;const Kt=Fr[x.group];if(!Kt)return;const _r=ws(Kt.x,Kt.y,e(h),e(b),e(u));i.arc(_r.x,_r.y,lt.constants.orbitRadii[x.orbit??0]/e(u)+1,Ft,Cr)}i.lineWidth=6/e(u),i.strokeStyle="#524518",i.stroke()})});let D={x:0,y:0};t.circledNode&&(D=nr(ar[t.circledNode],e(h),e(b),e(u)),i.strokeStyle="#ad2b2b");let je=!1,Y;if(Object.values(ar).forEach(O=>{const x=nr(O,e(h),e(b),e(u));let X=0,W=!1;t.circledNode&&Wr(x,D)<e(k)&&(W=!0),O.skill&&n().indexOf(O.skill)>=0&&(W=!1),O.isKeystone?(X=110,P(i,O.icon??"",x,W),W?P(i,"KeystoneFrameAllocated",x,!1):P(i,"KeystoneFrameUnallocated",x,!1)):O.isNotable?(X=70,P(i,O.icon??"",x,W),W?P(i,"NotableFrameAllocated",x,!1):P(i,"NotableFrameUnallocated",x,!1)):O.isJewelSocket?(X=70,O.expansionJewel?P(i,"JewelSocketAltNormal",x,!1):W?P(i,"JewelFrameAllocated",x,!1):P(i,"JewelFrameUnallocated",x,!1)):O.isMastery?P(i,O.inactiveIcon??"",x,W):(X=50,P(i,O.icon??"",x,W),W?P(i,"PSSkillFrameActive",x,!1):P(i,"PSSkillFrame",x,!1));const ue=T/2,He=J/2,ee=90/e(u),Je=100/e(u);let C=i.createRadialGradient(ue,He,ee,ue,He,Je);C.addColorStop(0,"#8cf34c"),C.addColorStop(1,"#00ff00"),(a().indexOf(O.skill??-1)>=0||f()&&O.isJewelSocket)&&(i.strokeStyle=C,i.lineWidth=3,i.beginPath(),i.arc(x.x,x.y,(X+30)/e(u),0,Math.PI*2),i.stroke()),Wr(x,e(R))<X/e(u)&&(Y=O,je=W)}),d(w,Y,!0),t.circledNode&&(i.strokeStyle="#ad2b2b",i.lineWidth=1,i.beginPath(),i.arc(D.x,D.y,e(k),0,Math.PI*2),i.stroke()),e(w)){let O=e(w).name??"Node name",x=(e(w).stats||[]).map(C=>({text:C,special:!1}));if(!e(w).isJewelSocket&&je&&e(w).skill!==void 0&&(Ne=Re)!=null&&Ne.TreeToPassive&&Re.TreeToPassive[e(w).skill]!==void 0&&t.seed&&t.selectedJewel&&t.selectedConqueror){const C=e(w).skill,De=Re.TreeToPassive[C];if(De&&De.Index!==void 0){const ve=Ds.Calculate(De.Index,t.seed,t.selectedJewel,t.selectedConqueror);if(ve)"AlternatePassiveSkill"in ve&&ve.AlternatePassiveSkill&&(x=[],O=ve.AlternatePassiveSkill.Name??"Alternative Skill",ve.AlternatePassiveSkill.StatsKeys&&(ve.AlternatePassiveSkill.StatsKeys.forEach(($,ge)=>{const me=Re.GetStatByIndex($);if(!me)return;const fe=Ss[me.ID]||"";if(fe&&ve.StatRolls&&ve.StatRolls[ge]!==void 0)x.push({text:ks(fe,ve.StatRolls[ge])||me.ID,special:!0});else throw new Error(`Failed to translate ${O}. Skill ID: ${C}, Stat ID: ${me.ID}`)}),ve.AlternatePassiveAdditionInformations&&ve.AlternatePassiveAdditionInformations.forEach($=>{$.AlternatePassiveAddition&&$.AlternatePassiveAddition.StatsKeys&&$.AlternatePassiveAddition.StatsKeys.forEach((ge,me)=>{const fe=Re.GetStatByIndex(ge);if(!fe)return;const xe=Ss[fe.ID]||"";if(xe&&$.StatRolls&&$.StatRolls[me]!==void 0)x.push({text:ks(xe,$.StatRolls[me])||fe.ID,special:!0});else throw new Error(`Failed to translate ${O} additional info for statID: ${fe.ID}, skillID: ${C}, statRoll: ${$.StatRolls?$.StatRolls[me]:"undefined"}`)})})));else throw new Error(`Failed to calculate ${O}. Skill ID: ${C}, Seed: ${t.seed}, Selected Jewel: ${t.selectedJewel}, Selected Conqueror: ${t.selectedConqueror}`)}}i.font=y;const X=i.measureText(O),W=Math.max(X.width+50,600);i.font=o;const ue=[],He=30;let ee=85;x&&x.length>0?x.forEach(C=>{ue.length>0&&(ee+=5),C.text.split(`
`).forEach(De=>{ue.length>0&&(ee+=10),K(De,i,W-He).forEach($=>{ue.push({text:$,offset:ee,special:C.special}),ee+=20})})}):e(w).isJewelSocket&&(ue.push({text:"Click to select this socket",offset:ee,special:!0}),ee+=20);const Je=55;i.fillStyle="rgba(75,63,24,0.9)",i.fillRect(e(R).x,e(R).y,W,Je),i.fillStyle="#ffffff",i.font=y,i.textAlign="center",i.fillText(O,e(R).x+W/2,e(R).y+35),i.fillStyle="rgba(0,0,0,0.8)",i.fillRect(e(R).x,e(R).y+Je,W,ee-Je),i.font=o,i.textAlign="left",ue.forEach(C=>{C.special?i.fillStyle="#8cf34c":i.fillStyle="#ffffff",i.fillText(C.text,e(R).x+He/2,e(R).y+C.offset)})}e(w)&&e(w).isJewelSocket?d(q,"pointer"):d(q,"unset"),i.fillStyle="#ffffff",i.textAlign="right",i.font="12px Roboto Mono";const Ge=r();i.fillText(`${(Ge-H).toFixed(1)}ms`,T-5,17)});let j=0,Ye=0,Ce=0,L=0,Ae=!1;const Le=i=>{const T=i instanceof MouseEvent?i:i.detail;Ae=!0,j=T.offsetX,Ye=T.offsetY,Ce=e(h),L=e(b),d(R,{x:T.offsetX,y:T.offsetY},!0);let J;Object.values(ar).forEach(H=>{const ne=nr(H,e(h),e(b),e(u));let D=0;H.isKeystone?D=110:H.isNotable||H.isJewelSocket?D=70:D=50,Wr(ne,e(R))<D/e(u)&&(J=H)}),console.log("Mouse clicked at:",e(R),"clickedNode:",J,"hoveredNode:",e(w)),J?(console.log("Clicking node:",J.skill,J.name),t.clickNode(J)):e(w)&&(console.log("Fallback clicking hovered node:",e(w).skill,e(w).name),t.clickNode(e(w)))},br=i=>{i.type==="pointerup"&&(Ae=!1),d(R,{x:i.offsetX,y:i.offsetY},!0)},de=i=>{d(R,{x:i.offsetX,y:i.offsetY},!0),Ae&&(d(h,Ce-(j-i.offsetX)*e(u)),d(b,L-(Ye-i.offsetY)*e(u)))},Mr=i=>{const T=i instanceof WheelEvent?i:i.detail;T.deltaY>0?e(u)<30&&(d(h,e(h)+T.offsetX),d(b,e(b)+T.offsetY)):e(u)>3&&(d(h,e(h)-T.offsetX),d(b,e(b)-T.offsetY)),d(u,Math.min(30,Math.max(3,e(u)+T.deltaY/100)),!0),T.preventDefault(),T.stopPropagation(),T.stopImmediatePropagation()};let et=E(0),ot=E(0);const ut=()=>{d(et,window.innerWidth,!0),d(ot,window.innerHeight,!0)};let pr=E(!1);nt(()=>{!e(pr)&&lt&&(d(pr,!0),d(h,(lt.min_x||0)+window.innerWidth/2*e(u)),d(b,(lt.min_y||0)+window.innerHeight/2*e(u)))}),Js(()=>{ut(),(async()=>{let i=!0;i?i=!1:(await pa(),ut())})()});var yr=Zr();Mt("pointerup",ur,br),Mt("pointermove",ur,de),Mt("resize",ur,ut);var zt=_e(yr);{var Rr=i=>{var T=Sn(),J=p(T);_n(J,{get width(){return e(et)},get height(){return e(ot)},$$events:{pointerdown:Le,wheel:Mr},children:(ne,D)=>{xn(ne,{get render(){return e(ae)}})},$$slots:{default:!0}});var H=_(J,2);Ls(H,()=>t.children??js),g(T),re(()=>Ns(T,`touch-action: none; cursor: ${e(q)??""}`)),Mt("resize",T,ut),S(i,T)};Z(zt,i=>{e(et)&&e(ot)&&i(Rr)})}S(s,yr),bt()}const zn=(s,t,r,a)=>{t.queries.length===1?$r(t.queries[0]):e(r)&&a(!a())};var Pn=I('<button class="p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2"><!></button>');function An(s,t){mt(t,!0);let r=it(t,"showTradeLinks",15,!1),a=se(()=>t.queries.length>1);var n=Pn();n.__click=[zn,t,a,r];var f=p(n);{var c=o=>{var u=Zr(),h=_e(u);{var b=z=>{var v=or("Hide Trade Links");S(z,v)},k=z=>{var v=or("Show Trade Links");S(z,v)};Z(h,z=>{r()?z(b):z(k,!1)})}S(o,u)},y=o=>{var u=or("Trade");S(o,u)};Z(f,o=>{e(a)?o(c):o(y,!1)})}g(n),re(()=>n.disabled=!t.queries),S(s,n),bt()}mr(["click"]);var En=(s,t)=>$r(e(t)),In=I('<button class="p-1 px-3 bg-blue-500/40 rounded"></button>'),Tn=I('<div class="flex flex-wrap gap-2.5 my-2"></div>');function On(s,t){mt(t,!0);var r=Tn();$e(r,21,()=>t.queries,Hr,(a,n,f)=>{var c=In();c.__click=[En,n],c.textContent=`Trade Batch ${f+1}`,S(a,c)}),g(r),S(s,r),bt()}mr(["click"]);const Mn={25:1,26:1,42:1,49:1,56:1,63:1,70:2,95:4,117:1,124:4,134:1,150:2,216:1,434:1,482:1,483:1,484:1,488:1,554:1,556:1,593:3,594:3,595:3,619:1,943:1,944:1,945:1,946:1,2133:4,3108:3,3109:4,3110:4,3111:4,5815:4,8835:1,9091:1,9772:1,14775:2,209:1,447:1,573:2,1294:1,1361:1,2031:5,8177:2,448:2,486:1,579:2,1404:1,2030:5,9090:1,9711:2,9712:2,9713:2,9714:2,9716:1,9717:1,9718:1,9721:1,9722:1,9723:1,9724:1,186:2,490:1,1251:3,1654:1,3392:1,6042:1,6048:1,6049:1,6050:1,6136:1,7499:2},Rn=(s,t)=>{e(t).clear(),d(t,e(t),!0)},Cn=(s,t,r)=>{e(t).forEach(a=>{a.isNotable&&e(r).delete(a.skill)}),d(r,e(r),!0)},jn=(s,t,r)=>{e(t).forEach(a=>{a.isNotable||e(r).delete(a.skill)}),d(r,e(r),!0)},Nn=(s,t,r)=>{e(t).filter(a=>!a.isJewelSocket&&!a.isMastery).forEach(a=>e(r).add(a.skill)),d(r,e(r),!0)};var qn=(s,t)=>d(t,!0),Ln=I('<span class="svelte-1ydr5tz">Results</span>'),Jn=I('<span class="svelte-1ydr5tz">Timeless Jewel</span>'),Dn=(s,t)=>d(t,!e(t)),Wn=I("<!> <button>Grouped</button>",1),Fn=(s,t)=>d(t,!e(t)),Kn=I('<div class="flex flex-row svelte-1ydr5tz"><!> <button class="px-4 p-1 rounded svelte-1ydr5tz" style="background-color: rgba(245, 245, 245, 0.2);"> </button></div>'),Yn=(s,t)=>t("seed"),Gn=(s,t)=>t("stats"),Hn=I('<div class="mt-2 svelte-1ydr5tz"> </div>'),Un=(s,t)=>d(t,!e(t)),Xn=(s,t)=>d(t,!e(t)),Bn=(s,t,r,a)=>t(e(r),e(a).passives),Vn=I('<button class="cursor-pointer svelte-1ydr5tz"><span> </span> <span class="text-white svelte-1ydr5tz"> </span></button>'),Qn=I("<ul></ul>"),Zn=(s,t,r,a)=>t(e(r),e(a).passives),$n=I('<button class="cursor-pointer svelte-1ydr5tz"><span> </span> <span class="text-white svelte-1ydr5tz"> </span></button>'),ei=(s,t,r,a)=>t(e(r),e(a).passives),ti=I('<button class="cursor-pointer svelte-1ydr5tz"><span> </span> <span class="text-white svelte-1ydr5tz"> </span></button>'),ri=I('<div class="overflow-auto mt-4 svelte-1ydr5tz"><h3 class="svelte-1ydr5tz">Notables</h3> <ul></ul> <h3 class="mt-2 svelte-1ydr5tz">Smalls</h3> <ul></ul></div>'),si=I('<div class="flex flex-row mt-4 items-end svelte-1ydr5tz"><div class="flex-grow svelte-1ydr5tz"><h3 class="mb-2 svelte-1ydr5tz">Sort Order</h3> <!></div> <div class="ml-2 svelte-1ydr5tz"><button style="background-color: rgba(107, 114, 128, 0.2);">Colors</button></div> <div class="ml-2 svelte-1ydr5tz"><button style="background-color: rgba(107, 114, 128, 0.2);">Split</button></div></div> <!>',1),ai=I('<div class="mt-4 svelte-1ydr5tz"><h3 class="mb-2 svelte-1ydr5tz">Seed</h3> <input type="number" class="svelte-1ydr5tz"/> <!></div> <!>',1),ni=(s,t,r,a)=>t(e(r)[Number(a)].id),ii=I('<div class="mb-4 flex flex-row items-start flex-col border-neutral-100/40 border-b pb-4 svelte-1ydr5tz"><div class="svelte-1ydr5tz"><button class="p-2 px-4 bg-red-500/40 rounded mr-2 svelte-1ydr5tz">-</button> <span class="svelte-1ydr5tz"> </span></div> <div class="mt-2 flex flex-row svelte-1ydr5tz"><div class="mr-4 flex flex-row items-center svelte-1ydr5tz"><div class="mr-2 svelte-1ydr5tz">Min:</div> <input type="number" min="0" class="svelte-1ydr5tz"/></div> <div class="flex flex-row items-center svelte-1ydr5tz"><div class="mr-2 svelte-1ydr5tz">Weight:</div> <input type="number" min="0" class="svelte-1ydr5tz"/></div> <div class="flex flex-row items-center svelte-1ydr5tz"><div class="mr-2 svelte-1ydr5tz">Minimum Stat Total:</div> <input type="number" min="0" class="svelte-1ydr5tz"/></div></div></div>'),li=(s,t)=>t(),oi=I('<div class="mt-4 flex flex-col overflow-auto min-h-[100px] svelte-1ydr5tz"></div> <div class="flex flex-col mt-2 svelte-1ydr5tz"><div class="flex flex-row items-center svelte-1ydr5tz"><div class="mr-2 min-w-fit svelte-1ydr5tz">Minimum Total Weight:</div> <input type="number" min="0" class="svelte-1ydr5tz"/></div></div> <div class="flex flex-col mt-2 svelte-1ydr5tz"><div class="flex flex-row items-center svelte-1ydr5tz"><div class="mr-2 min-w-fit svelte-1ydr5tz">Minimum Stat Total:</div> <input type="number" min="0" class="svelte-1ydr5tz"/></div></div> <div class="flex flex-col mt-4 svelte-1ydr5tz"><div class="flex flex-row svelte-1ydr5tz"><button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2 svelte-1ydr5tz">Select All</button> <button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2 svelte-1ydr5tz">Notables</button> <button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2 svelte-1ydr5tz">Passives</button> <button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 flex-grow svelte-1ydr5tz">Deselect</button></div> <div class="flex flex-row mt-2 svelte-1ydr5tz"><button class="p-2 px-3 bg-green-500/40 rounded disabled:bg-green-900/40 flex-grow svelte-1ydr5tz"><!></button></div></div>',1),ui=I('<div class="mt-4 svelte-1ydr5tz"><h3 class="mb-2 svelte-1ydr5tz">Add Stat</h3> <!></div> <!>',1),ci=I('<h2 class="mt-4 svelte-1ydr5tz">Click on a jewel socket</h2>'),di=I('<div class="mt-4 w-full flex flex-row svelte-1ydr5tz"><button>Enter Seed</button> <button>Select Stats</button></div> <!> <!>',1),vi=I('<div class="mt-4 svelte-1ydr5tz"><h3 class="mb-2 svelte-1ydr5tz">Conqueror</h3> <!></div> <!>',1),fi=I("<!> <!>",1),hi=I("<!> <!>",1),gi=I('<div class="w-screen md:w-10/12 lg:w-2/3 xl:w-1/2 2xl:w-5/12 3xl:w-1/3 4xl:w-1/4 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen svelte-1ydr5tz"><div class="p-4 max-h-screen flex flex-col svelte-1ydr5tz"><div class="flex flex-row justify-between mb-2 svelte-1ydr5tz"><div class="flex flex-row items-center svelte-1ydr5tz"><button class="burger-menu mr-3 svelte-1ydr5tz" aria-label="Open menu"><div class="svelte-1ydr5tz"></div> <div class="svelte-1ydr5tz"></div> <div class="svelte-1ydr5tz"></div></button> <h3 class="flex-grow svelte-1ydr5tz"><!></h3></div> <!></div> <!> <!></div></div>'),mi=(s,t)=>d(t,!1),bi=I('<button class="burger-menu absolute top-0 left-0 bg-black/80 backdrop-blur-sm rounded-br-lg p-4 pt-5 svelte-1ydr5tz" aria-label="Close menu"><div class="svelte-1ydr5tz"></div> <div class="svelte-1ydr5tz"></div> <div class="svelte-1ydr5tz"></div></button>'),pi=I('<!> <div class="text-orange-500 absolute bottom-0 right-0 m-2 svelte-1ydr5tz"><a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener noreferrer" class="svelte-1ydr5tz">Source of official branch code(Github)</a> <a href="https://github.com/BlazesRus/timeless-jewels" target="_blank" rel="noopener noreferrer" class="svelte-1ydr5tz">Source (Github)</a></div>',1);function Ti(s,t){var ts,rs,ss,as;mt(t,!0);const[r,a]=Sa(),n=()=>xa(Na,"$page",r),f=typeof window<"u"?window:void 0,c=typeof localStorage<"u"?localStorage:void 0,y=typeof URL<"u"?URL:void 0,o=n().url.searchParams,u=((ts=Re)==null?void 0:ts.TimelessJewels)??{},h=((rs=Re)==null?void 0:rs.TimelessJewelConquerors)??{},b=((ss=Re)==null?void 0:ss.TreeToPassive)??{},k=(as=Re)!=null&&as.PossibleStats?JSON.parse(Re.PossibleStats):{},z=Object.keys(u).map(l=>({value:Number(l),label:u[Number(l)]}));let v=E(Pe(o.has("jewel")&&z.find(l=>l.value===Number(o.get("jewel")))||void 0)),F=se(()=>e(v)&&h[e(v).value]?Object.keys(h[e(v).value]??{}).map(l=>({value:l,label:l})):[]),P=se(()=>e(F).concat([{value:"Any",label:"Any"}])),K=E(Pe(o.has("conqueror")?{value:o.get("conqueror"),label:o.get("conqueror")}:{value:"Any",label:"Any"})),R=se(()=>e(K).value==="Any"),q=se(()=>{var l;return((l=e(K))==null?void 0:l.value)==="Any"?e(F)[0]:e(K)}),w=E(Pe(o.has("seed")&&o.get("seed")?Number(o.get("seed")):0)),ae=E(Pe(o.has("location")&&o.get("location")?Number(o.get("location")):void 0)),j=se(()=>e(ae)?Oa(lt.nodes[e(ae)]).filter(l=>!l.isJewelSocket&&!l.isMastery):[]);function Ye(l){if(typeof l=="number")return b&&typeof b[l]<"u"?b[l]:void 0}let Ce=se(()=>!e(w)||!e(v)||!e(q)||!h[e(v).value]||Object.keys(h[e(v).value]??{}).indexOf(e(q).value??"")<0?[]:e(j).map(l=>Ye(l.skill)).filter(Boolean).map(l=>{var A,M,B;return{node:l.Index,result:Ds.Calculate(((A=e(v))==null?void 0:A.value)??0,e(w),((M=e(v))==null?void 0:M.value)??0,((B=e(q))==null?void 0:B.value)??"")}})),L=E(Pe({}));if(o.has("stat")){let l={};for(const A of o.getAll("stat")){const M=parseInt(A);l[M]={weight:1,min:0,id:M,minStatTotal:0}}d(L,l,!0)}let Ae=E(Pe(o.has("mode")?o.get("mode"):""));const Le=()=>{if(!f||!y)return;const l=new y(f.location.origin+f.location.pathname);e(v)&&l.searchParams.append("jewel",e(v).value.toString()),e(K)&&e(K).value!==void 0&&e(K).value!==null&&e(K).value!==""?l.searchParams.append("conqueror",String(e(K).value)):l.searchParams.append("conqueror","Any"),typeof e(w)=="number"&&!isNaN(e(w))&&l.searchParams.append("seed",e(w).toString()),e(ae)!==void 0&&e(ae)!==null&&l.searchParams.append("location",e(ae).toString()),e(Ae)&&e(Ae)!==""&&l.searchParams.append("mode",e(Ae)),Object.keys(e(L)).forEach(A=>{l.searchParams.append("stat",A.toString())}),za(l.toString())},br=l=>{d(Ae,l,!0),Le()};let de=E(Pe(new Set));const Mr=l=>{l.isJewelSocket?(d(ae,l.skill,!0),Le()):l.isMastery||(e(de).has(l.skill)?e(de).delete(l.skill):e(de).add(l.skill),d(de,e(de),!0))};function et(l){return Mn[String(l)]||0}function ot(l,A){return!l||!k[l]?0:k[l][A]||0}function ut(l){return l.replace(/<script.*?>.*?<\/script>/gi,"").replace(/<style.*?>.*?<\/style>/gi,"").replace(/on\w+="[^"]*"/gi,"")}let pr=se(()=>e(v)?Object.keys(k[e(v).value]):[]),yr=se(()=>e(pr).map(l=>{const A=parseInt(l);return{label:Kr(A),value:A}}).filter(l=>!(l.value in e(L)))),zt=E(void 0);const Rr=l=>{e(L)[l.detail.value]={weight:1,min:0,id:l.detail.value,minStatTotal:0},d(L,e(L),!0),e(zt)&&e(zt).handleClear(),Le()},i=l=>{const A=Object.fromEntries(Object.entries(e(L)).filter(([M])=>Number(M)!==l));d(L,A,!0),Le()},T=()=>{d(L,{},!0),Le()};let J=E(!1),H=E(0),ne=E(0),D=E(!1),je=E(0),Y=E(void 0),Ge=E(1),Ne=E(null);const O=()=>{if(!e(ae)||!e(v)||!e(q))return;d(Ge,e(v).value,!0),d(Ne,e(R)?"":e(q).value??"",!0),d(D,!0),d(Y,void 0);const l={jewel:e(v).value,conqueror:e(q).value??"",nodes:e(j).filter(A=>!e(de).has(A.skill)).map(A=>Ye(A.skill)).filter(Boolean).map(A=>A.Index),stats:Object.keys(e(L)).map(A=>e(L)[Number(A)]),minTotalWeight:e(H),minTotalStats:e(ne)};Ps&&Ps.search(l,Ma(A=>(d(je,A,!0),Promise.resolve()))).then(A=>{d(Y,A,!0),d(D,!1),d(J,!0)})};let x=E(Pe([]));const X=(l,A)=>{d(w,l,!0),d(x,A,!0),Le()};let W=E(Pe((c==null?void 0:c.getItem("groupResults"))===null?!0:(c==null?void 0:c.getItem("groupResults"))==="true"));nt(()=>{c==null||c.setItem("groupResults",e(W)?"true":"false")});const ue={physical:"#c79d93",cast:"#b3f8fe",fire:"#ff9a77",cold:"#93d8ff",lightning:"#f8cb76",attack:"#da814d",life:"#c96e6e",chaos:"#d8a7d3",unique:"#af6025",critical:"#b2a7d6"};function He(l){return ue[l]||"#fff"}function ee(l){return Re.TimelessJewelSeedRanges&&Re.TimelessJewelSeedRanges[l]?Re.TimelessJewelSeedRanges[l]:{Min:0,Max:0}}const Je=l=>(Object.keys(ue).forEach(A=>{const M=He(A);l=l.replace(new RegExp(`(${A}(?:$|\\s))|((?:^|\\s)${A})`,"gi"),`<span style='color: ${M}; font-weight: bold'>$1$2</span>`)}),l),C=(l,A,M)=>{const B={};return l.forEach(G=>{lt.nodes[G.node].isKeystone||M!=="all"&&(M==="notables"&&!lt.nodes[G.node].isNotable||M==="passives"&&lt.nodes[G.node].isNotable)||(G.result.AlternatePassiveSkill&&G.result.AlternatePassiveSkill.StatsKeys&&G.result.AlternatePassiveSkill.StatsKeys.forEach(V=>{B[V]=[...B[V]||[],G.node]}),G.result.AlternatePassiveAdditionInformations&&G.result.AlternatePassiveAdditionInformations.forEach(V=>{var pe;(pe=V.AlternatePassiveAddition)!=null&&pe.StatsKeys&&V.AlternatePassiveAddition.StatsKeys.forEach(le=>{B[le]=[...B[le]||[],G.node]})}))}),Object.keys(B).map(G=>{const V=Kr(parseInt(G));return{stat:A?Je(V):V,rawStat:V,id:G,passives:B[Number(G)]}})},De=(l,A)=>{switch(A){case"alphabet":return l.sort((M,B)=>M.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase().localeCompare(B.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase()));case"count":return l.sort((M,B)=>B.passives.length-M.passives.length);case"rarity":return l.sort((M,B)=>{var G,V;return ot((G=e(v))==null?void 0:G.value,M.id)-ot((V=e(v))==null?void 0:V.value,B.id)});case"value":return l.sort((M,B)=>{var pe,le;const G=et(M.id)||0,V=et(B.id)||0;return G!=V?V-G:ot((pe=e(v))==null?void 0:pe.value,M.id)-ot((le=e(v))==null?void 0:le.value,B.id)})}return l},ve=[{label:"Count",value:"count"},{label:"Alphabetical",value:"alphabet"},{label:"Rarity",value:"rarity"},{label:"Value",value:"value"}];let $=E(Pe(ve[0]));nt(()=>{c==null||c.setItem("sortOrder",e($).value)});let ge=E(Pe((c==null?void 0:c.getItem("colored"))===null?!0:(c==null?void 0:c.getItem("colored"))==="true"));nt(()=>{c==null||c.setItem("colored",e(ge)?"true":"false")});let me=E(Pe((c==null?void 0:c.getItem("split"))===null?!0:(c==null?void 0:c.getItem("split"))==="true"));nt(()=>{c==null||c.setItem("split",e(me)?"true":"false")});const fe=l=>{var pe;if(l.type!=="paste")return;const A=(pe=l.clipboardData||f&&f.clipboardData)==null?void 0:pe.getData("text");if(!A)return;const M=A.split(`
`);if(M.length<14)return;const B=z.find(le=>le.label===M[2]);if(!B)return;let G,V;for(let le=10;le<M.length;le++){const Yt=Object.keys(h[B.value]??{});Yt.length==0?V="Any":V=Yt.find(Gt=>M[le].indexOf(Gt)>=0)??"Any";const yt=/(\d+)/.exec(M[le]);if(!(!yt||yt.length===0)){G=parseInt(yt[1]);break}}!V||!G||(d(J,!1),d(Ae,"seed"),d(w,G,!0),d(v,B,!0),d(K,{label:V,value:V},!0),Le())};let xe=E(!1),pt=E(!1),Ft=se(()=>e(J)&&e(Y)&&e(Y).raw?Ta(e(Ge),e(Ne),e(Y).raw):[]);nt(()=>{e(Ft).length===1&&d(pt,!1)}),Mt("paste",ur,fe);const Cr=se(()=>e(v)?e(v).value:0),Kt=se(()=>e(q)?e(q).value??"":""),_r=se(()=>!e(ae)),Vs=se(()=>[...Array.from(e(de)).filter(l=>typeof l=="number")]);kn(s,{clickNode:Mr,get circledNode(){return e(ae)},get selectedJewel(){return e(Cr)},get selectedConqueror(){return e(Kt)},get highlighted(){return e(x)},get seed(){return e(w)},get highlightJewels(){return e(_r)},get disabled(){return e(Vs)},children:(l,A)=>{var M=pi(),B=_e(M);{var G=pe=>{var le=gi(),Yt=p(le),yt=p(Yt),Gt=p(yt),ns=p(Gt);ns.__click=[qn,xe];var is=_(ns,2),Qs=p(is);{var Zs=ce=>{var Ee=Ln();S(ce,Ee)},$s=ce=>{var Ee=Jn();S(ce,Ee)};Z(Qs,ce=>{e(J)?ce(Zs):ce($s,!1)})}g(is),g(Gt);var ea=_(Gt,2);{var ta=ce=>{var Ee=Kn(),ct=p(Ee);{var Ht=Se=>{var dt=Wn(),wr=_e(dt);An(wr,{get queries(){return e(Ft)},get showTradeLinks(){return e(pt)},set showTradeLinks(rt){d(pt,rt,!0)}});var Ut=_(wr,2);let xr;Ut.__click=[Dn,W],re(rt=>{xr=Fe(Ut,1,"p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2 svelte-1ydr5tz",null,xr,rt),Ut.disabled=!e(Y)},[()=>({grouped:e(W)})]),S(Se,dt)};Z(ct,Se=>{e(J)&&Se(Ht)})}var _t=_(ct,2);_t.__click=[Fn,J];var tt=p(_t,!0);g(_t),g(Ee),re(()=>we(tt,e(J)?"Config":"Results")),S(ce,Ee)};Z(ea,ce=>{e(Y)&&ce(ta)})}g(yt);var ls=_(yt,2);{var ra=ce=>{var Ee=fi(),ct=_e(Ee);kr(ct,{get items(){return z},get value(){return e(v)},set value(tt){d(v,tt,!0)},$$events:{change:T}});var Ht=_(ct,2);{var _t=tt=>{var Se=vi(),dt=_e(Se),wr=_(p(dt),2);kr(wr,{get items(){return e(P)},get value(){return e(K)},set value(rt){d(K,rt,!0)},$$events:{change:Le}}),g(dt);var Ut=_(dt,2);{var xr=rt=>{var os=di(),jr=_e(os),Nr=p(jr);let us;Nr.__click=[Yn,br];var cs=_(Nr,2);let ds;cs.__click=[Gn,br],g(jr);var vs=_(jr,2);{var na=qe=>{var vt=ai(),Xt=_e(vt),Ue=_(p(Xt),2);Tt(Ue);var Sr=_(Ue,2);{var Bt=oe=>{var ie=Hn(),ke=p(ie);g(ie),re((ye,wt)=>we(ke,`Seed must be between ${ye??""} and ${wt??""}`),[()=>{var ye;return ee(((ye=e(v))==null?void 0:ye.value)??0).Min},()=>{var ye;return ee(((ye=e(v))==null?void 0:ye.value)??0).Max}]),S(oe,ie)};Z(Sr,oe=>{var ie,ke;(e(w)<ee(((ie=e(v))==null?void 0:ie.value)??0).Min||e(w)>ee(((ke=e(v))==null?void 0:ke.value)??0).Max)&&oe(Bt)})}g(Xt);var qr=_(Xt,2);{var Lr=oe=>{var ie=si(),ke=_e(ie),ye=p(ke),wt=_(p(ye),2);kr(wt,{get items(){return ve},get value(){return e($)},set value(ze){d($,ze,!0)}}),g(ye);var Pt=_(ye,2),Vt=p(Pt);let At;Vt.__click=[Un,ge],g(Pt);var Qt=_(Pt,2),Zt=p(Qt);let $t;Zt.__click=[Xn,me],g(Qt),g(ke);var er=_(ke,2);{var tr=ze=>{var Ie=Qn();let Xe;$e(Ie,21,()=>De(C(e(Ce),e(ge),"all"),e($).value),Te=>Te.id,(Te,Be)=>{var st=Vn();st.__click=[Bn,X,w,Be];var be=p(st);let N;var U=p(be);g(be);var te=_(be,2),We=p(te,!0);g(te),g(st),re((ft,Ve)=>{N=Fe(be,1,"font-bold svelte-1ydr5tz",null,N,ft),we(U,`(${e(Be).passives.length??""})`),we(We,Ve)},[()=>({"text-white":et(e(Be).id)<3}),()=>ut(e(Be).stat)]),S(Te,st)}),g(Ie),re(Te=>Xe=Fe(Ie,1,"mt-4 overflow-auto svelte-1ydr5tz",null,Xe,Te),[()=>({rainbow:e(ge)})]),S(ze,Ie)},rr=ze=>{var Ie=ri(),Xe=_(p(Ie),2);let Te;$e(Xe,21,()=>De(C(e(Ce),e(ge),"notables"),e($).value),be=>be.id,(be,N)=>{var U=$n();U.__click=[Zn,X,w,N];var te=p(U);let We;var ft=p(te);g(te);var Ve=_(te,2),sr=p(Ve,!0);g(Ve),g(U),re((Et,xt)=>{We=Fe(te,1,"font-bold svelte-1ydr5tz",null,We,Et),we(ft,`(${e(N).passives.length??""})`),we(sr,xt)},[()=>({"text-white":et(e(N).id)<3}),()=>ut(e(N).stat)]),S(be,U)}),g(Xe);var Be=_(Xe,4);let st;$e(Be,21,()=>De(C(e(Ce),e(ge),"passives"),e($).value),be=>be.id,(be,N)=>{var U=ti();U.__click=[ei,X,w,N];var te=p(U);let We;var ft=p(te);g(te);var Ve=_(te,2),sr=p(Ve,!0);g(Ve),g(U),re((Et,xt)=>{We=Fe(te,1,"font-bold svelte-1ydr5tz",null,We,Et),we(ft,`(${e(N).passives.length??""})`),we(sr,xt)},[()=>({"text-white":et(e(N).id)<3}),()=>ut(e(N).stat)]),S(be,U)}),g(Be),g(Ie),re((be,N)=>{Te=Fe(Xe,1,"mt-1 svelte-1ydr5tz",null,Te,be),st=Fe(Be,1,"mt-1 svelte-1ydr5tz",null,st,N)},[()=>({rainbow:e(ge)}),()=>({rainbow:e(ge)})]),S(ze,Ie)};Z(er,ze=>{e(me)?ze(rr,!1):ze(tr)})}re((ze,Ie)=>{At=Fe(Vt,1,"p-2 px-4 rounded svelte-1ydr5tz",null,At,ze),$t=Fe(Zt,1,"p-2 px-4 rounded svelte-1ydr5tz",null,$t,Ie)},[()=>({selected:e(ge)}),()=>({selected:e(me)})]),S(oe,ie)};Z(qr,oe=>{var ie,ke;e(w)>=ee(((ie=e(v))==null?void 0:ie.value)??0).Min&&e(w)<=ee(((ke=e(v))==null?void 0:ke.value)??0).Max&&oe(Lr)})}re((oe,ie)=>{Ur(Ue,"min",oe),Ur(Ue,"max",ie)},[()=>{var oe;return ee(((oe=e(v))==null?void 0:oe.value)??0).Min},()=>{var oe;return ee(((oe=e(v))==null?void 0:oe.value)??0).Max}]),Mt("blur",Ue,Le),Ot(Ue,()=>e(w),oe=>d(w,oe)),S(qe,vt)},ia=(qe,vt)=>{{var Xt=Ue=>{var Sr=ui(),Bt=_e(Sr),qr=_(p(Bt),2);Xr(kr(qr,{get items(){return e(yr)},$$events:{change:Rr}}),ie=>d(zt,ie,!0),()=>e(zt)),g(Bt);var Lr=_(Bt,2);{var oe=ie=>{var ke=oi(),ye=_e(ke);$e(ye,20,()=>Object.keys(e(L)),N=>N,(N,U)=>{var te=ii(),We=p(te),ft=p(We);ft.__click=[ni,i,L,U];var Ve=_(ft,2),sr=p(Ve,!0);g(Ve),g(We);var Et=_(We,2),xt=p(Et),fs=_(p(xt),2);Tt(fs),g(xt);var Jr=_(xt,2),hs=_(p(Jr),2);Tt(hs),g(Jr);var gs=_(Jr,2),ms=_(p(gs),2);Tt(ms),g(gs),g(Et),g(te),re(St=>we(sr,St),[()=>Kr(e(L)[Number(U)].id)]),Ot(fs,()=>e(L)[Number(U)].min,St=>e(L)[Number(U)].min=St),Ot(hs,()=>e(L)[Number(U)].weight,St=>e(L)[Number(U)].weight=St),Ot(ms,()=>e(L)[Number(U)].minStatTotal,St=>e(L)[Number(U)].minStatTotal=St),S(N,te)}),g(ye);var wt=_(ye,2),Pt=p(wt),Vt=_(p(Pt),2);Tt(Vt),g(Pt),g(wt);var At=_(wt,2),Qt=p(At),Zt=_(p(Qt),2);Tt(Zt),g(Qt),g(At);var $t=_(At,2),er=p($t),tr=p(er);tr.__click=[Rn,de];var rr=_(tr,2);rr.__click=[Cn,j,de];var ze=_(rr,2);ze.__click=[jn,j,de];var Ie=_(ze,2);Ie.__click=[Nn,j,de],g(er);var Xe=_(er,2),Te=p(Xe);Te.__click=[li,O];var Be=p(Te);{var st=N=>{var U=or();re(te=>we(U,`${e(je)??""} / ${te??""}`),[()=>{var te;return ee(((te=e(v))==null?void 0:te.value)??0).Max}]),S(N,U)},be=N=>{var U=or("Search");S(N,U)};Z(Be,N=>{e(D)?N(st):N(be,!1)})}g(Te),g(Xe),g($t),re(()=>{tr.disabled=e(D)||e(de).size==0,rr.disabled=e(D)||e(de).size==0,ze.disabled=e(D)||e(de).size==0,Ie.disabled=e(D)||e(de).size>=e(j).length,Te.disabled=e(D)}),Ot(Vt,()=>e(H),N=>d(H,N)),Ot(Zt,()=>e(ne),N=>d(ne,N)),S(ie,ke)};Z(Lr,ie=>{Object.keys(e(L)).length>0&&ie(oe)})}S(Ue,Sr)};Z(qe,Ue=>{e(Ae)==="stats"&&Ue(Xt)},vt)}};Z(vs,qe=>{e(Ae)==="seed"?qe(na):qe(ia,!1)})}var la=_(vs,2);{var oa=qe=>{var vt=ci();S(qe,vt)};Z(la,qe=>{e(ae)||qe(oa)})}re((qe,vt)=>{us=Fe(Nr,1,"selection-button svelte-1ydr5tz",null,us,qe),ds=Fe(cs,1,"selection-button svelte-1ydr5tz",null,ds,vt)},[()=>({selected:e(Ae)==="seed"}),()=>({selected:e(Ae)==="stats"})]),S(rt,os)};Z(Ut,rt=>{e(q)&&e(v)&&h[e(v).value]&&Object.keys(h[e(v).value]??{}).indexOf(e(q).value??"")>=0&&rt(xr)})}S(tt,Se)};Z(Ht,tt=>{e(v)&&tt(_t)})}S(ce,Ee)};Z(ls,ce=>{e(J)||ce(ra)})}var sa=_(ls,2);{var aa=ce=>{var Ee=hi(),ct=_e(Ee);{var Ht=Se=>{On(Se,{get queries(){return e(Ft)}})};Z(ct,Se=>{e(pt)&&Se(Ht)})}var _t=_(ct,2);{var tt=Se=>{const dt=se(()=>e(Ne)??"");Xa(Se,{get searchResults(){return e(Y)},get groupResults(){return e(W)},highlight:X,get jewel(){return e(Ge)},get conqueror(){return e(dt)}})};Z(_t,Se=>{e(Y)&&e(Y).grouped&&e(Y).raw&&Se(tt)})}S(ce,Ee)};Z(sa,ce=>{e(Y)&&e(J)&&ce(aa)})}g(Yt),g(le),S(pe,le)},V=pe=>{var le=bi();le.__click=[mi,xe],S(pe,le)};Z(B,pe=>{e(xe)?pe(V,!1):pe(G)})}ya(2),S(l,M)},$$slots:{default:!0}}),bt(),a()}mr(["click"]);export{Ti as component};
