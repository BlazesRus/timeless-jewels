import{f as d,a as o}from"../chunks/DU_35SlH.js";import{p as Ve,b as Y,d as le,t as $,a as Fe,g as e,e as V,c as r,s as i,r as s,n as Ae,u as ke,f as F}from"../chunks/CbIHRuBd.js";import{e as He,s as H}from"../chunks/DlWyvDRc.js";import{i as _}from"../chunks/D6ufbTq8.js";import{S as ie,s as Z,r as Ue,b as ze,e as ne}from"../chunks/B9TR6BhL.js";import{r as Qe}from"../chunks/iUD-TIVW.js";import{g as Ee}from"../chunks/Bes194aw.js";import{p as we}from"../chunks/DiZTBfIl.js";import{b as Le,a as We}from"../chunks/CFhTaYr6.js";import{d as S,c as Xe}from"../chunks/tsPM7QKs.js";var Ye=d('<div class="mt-2"> </div>'),Ze=d("<li> </li>"),ea=d('<ol class="mt-4 list-decimal pl-8"></ol>'),aa=d('<div class="mt-4"><h3>Alternate Passive Skill</h3> <span> </span></div> <!>',1),ta=d("<li> </li>"),sa=d('<ol class="list-decimal pl-8"></ol>'),ra=d('<li class="mt-4"><span> </span> <!></li>'),la=d('<div class="mt-4"><h3>Additions</h3> <ul class="list-disc pl-8"></ul></div>'),ia=d("<!> <!>",1),na=d('<div class="mt-4"><h3 class="mb-2">Seed</h3> <input type="number" class="seed"/> <!></div> <!>',1),va=d('<div class="mt-4"><h3 class="mb-2">Passive Skill</h3> <!></div> <!>',1),oa=d('<div class="mt-4"><h3 class="mb-2">Conqueror</h3> <!></div> <!>',1),da=d('<div class="py-10 flex flex-row justify-center w-screen h-screen"><div class="flex flex-col justify-between w-1/3"><div><h1 class="text-white mb-10 text-center">Timeless Calculator</h1> <a><h2 class="text-white mb-10 text-center underline text-orange-500">Skill Tree View</h2></a> <div class="themed"><h3 class="mb-2">Timeless Jewel</h3> <!> <!></div></div> <div class="flex justify-between"><div class="text-right text-orange-500"><a href="https://discord.gg/mfacademy" target="_blank" rel="noopener noreferrer" class="flex flex-row align-middle"><img width="24px" alt="MF Academy"/> <span class="ml-2">MF Academy</span></a></div> <div class="text-orange-500"><a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener noreferrer">Official Branch Source (Github)</a> <a href="https://github.com/BlazesRus/timeless-jewels" target="_blank" rel="noopener noreferrer">Source (Github)</a> <a href="https://github.com/ImHamba/timeless-jewels" target="_blank" rel="noopener noreferrer">ImHamba Branch Source (Github)</a></div></div></div></div>');function xa($e,Pe){Ve(Pe,!0);const p=we.url.searchParams,ve=S.TimelessJewels??{},U=S.TimelessJewelConquerors??{},P=S.TimelessJewelSeedRanges??{},Ie=(S.PassiveSkills??[]).filter(Boolean),oe=Object.keys(ve).map(a=>({value:Number(a),label:ve[Number(a)]}));let t=Y(le(p.has("jewel")&&oe.find(a=>a.value===Number(p.get("jewel")))||void 0)),de=ke(()=>e(t)&&U[e(t).value]?Object.keys(U[e(t).value]??{}).map(a=>({value:a,label:a})):[]),I=ke(()=>()=>{if(p.has("conqueror")){const a=p.get("conqueror");return e(de).find(y=>y.value===a)||void 0}});function ee(){const a=e(I)();return a?a.value:void 0}const ue=Ie.filter(a=>!!a).map(a=>({value:a.Index,label:`${a.Name} (${a.ID})`}));let x=Y(le(p.has("passive_skill")&&ue.find(a=>a.value===Number(p.get("passive_skill")))||void 0)),b=Y(le(p.has("seed")?Number(p.get("seed")):0)),l=Y(void 0);Qe(()=>{if(e(x)&&e(b)&&e(t)&&ee()){const a=ee();a&&V(l,Xe.Calculate(e(x).value,e(b),e(t).value,a),!0)}});const z=()=>{{const a={};e(t)&&(a.jewel=e(t).value);const y=ee();y&&(a.conqueror=y),e(x)&&(a.passive_skill=e(x).value),e(b)&&(a.seed=e(b));const O=Object.keys(a).map(Q=>Q+"="+encodeURIComponent(a[Q])).join("&");Ee(we.url.pathname+"?"+O)}};var ae=da(),me=r(ae),te=r(me),ce=i(r(te),2),fe=i(ce,2),_e=i(r(fe),2);ie(_e,{get items(){return oe},get value(){return e(t)},set value(a){V(t,a,!0)},$$events:{select:z}});var je=i(_e,2);{var Re=a=>{var y=oa(),O=F(y),Q=i(r(O),2);ie(Q,{get items(){return e(de)},get value(){return e(I)},set value(B){V(I,B,!0)},$$events:{select:z}}),s(O);var Ne=i(O,2);{var Oe=B=>{var C=va(),se=F(C),Be=i(r(se),2);ie(Be,{get items(){return ue},get value(){return e(x)},set value(J){V(x,J,!0)},$$events:{select:z}}),s(se);var Ce=i(se,2);{var Je=J=>{var ge=na(),re=F(ge),j=i(r(re),2);Ue(j);var Ke=i(j,2);{var Me=u=>{var m=Ye(),A=r(m);s(m),$(()=>{var E,L;return H(A,`Seed must be between ${(e(t)&&((E=P[e(t).value])==null?void 0:E.Min))??""} and ${(e(t)&&((L=P[e(t).value])==null?void 0:L.Max))??""}`)}),o(u,m)};_(Ke,u=>{var m,A;e(t)&&(e(b)<(((m=P[e(t).value])==null?void 0:m.Min)??-1/0)||e(b)>(((A=P[e(t).value])==null?void 0:A.Max)??1/0))&&u(Me)})}s(re);var Te=i(re,2);{var Ge=u=>{var m=ia(),A=F(m);{var E=k=>{var R=aa(),q=F(R),h=i(r(q),2),n=r(h);s(h),s(q);var K=i(q,2);{var M=T=>{var G=ea();ne(G,22,()=>Object.keys(e(l).StatRolls??{}),D=>D,(D,f,v)=>{var c=Ze(),w=r(c,!0);s(c),$(g=>H(w,g),[()=>{var g,N,W;return(g=e(l).AlternatePassiveSkill)!=null&&g.StatsKeys&&typeof e(l).AlternatePassiveSkill.StatsKeys[e(v)]=="number"?`${((N=S.GetStatByIndex(e(l).AlternatePassiveSkill.StatsKeys[e(v)]))==null?void 0:N.Text)||"<no name>"} (${(W=S.GetStatByIndex(e(l).AlternatePassiveSkill.StatsKeys[e(v)]))==null?void 0:W.ID}) - ${e(l).StatRolls[Number(f)]}`:`<no name> () - ${e(l).StatRolls[Number(f)]}`}]),o(D,c)}),s(G),o(T,G)};_(K,T=>{e(l).StatRolls&&Object.keys(e(l).StatRolls??{}).length>0&&T(M)})}$(()=>H(n,`${e(l).AlternatePassiveSkill.Name??""} (${e(l).AlternatePassiveSkill.ID??""})`)),o(k,R)};_(A,k=>{e(l).AlternatePassiveSkill&&k(E)})}var L=i(A,2);{var De=k=>{var R=la(),q=i(r(R),2);ne(q,21,()=>e(l).AlternatePassiveAdditionInformations,h=>{var n;return(n=h==null?void 0:h.AlternatePassiveAddition)==null?void 0:n.ID},(h,n)=>{var K=ra(),M=r(K),T=r(M);s(M);var G=i(M,2);{var D=f=>{var v=sa();ne(v,22,()=>Object.keys(e(n).StatRolls),c=>c,(c,w,g)=>{var N=ta(),W=r(N,!0);s(N),$(X=>H(W,X),[()=>{var X,Se,xe,ye;return(Se=(X=e(n))==null?void 0:X.AlternatePassiveAddition)!=null&&Se.StatsKeys&&typeof e(n).AlternatePassiveAddition.StatsKeys[e(g)]=="number"?`${((xe=S.GetStatByIndex(e(n).AlternatePassiveAddition.StatsKeys[e(g)]))==null?void 0:xe.Text)||"<no name>"} (${(ye=S.GetStatByIndex(e(n).AlternatePassiveAddition.StatsKeys[e(g)]))==null?void 0:ye.ID}) - ${e(n).StatRolls[Number(w)]}`:`<no name> () - ${e(n).StatRolls[Number(w)]}`}]),o(c,N)}),s(v),o(f,v)};_(G,f=>{var v;(v=e(n))!=null&&v.StatRolls&&Object.keys(e(n).StatRolls).length>0&&f(D)})}s(K),$(()=>{var f,v,c,w;return H(T,`${((v=(f=e(n))==null?void 0:f.AlternatePassiveAddition)==null?void 0:v.ID)??""} (${((w=(c=e(n))==null?void 0:c.AlternatePassiveAddition)==null?void 0:w.Index)??""})`)}),o(h,K)}),s(q),s(R),o(k,R)};_(L,k=>{Array.isArray(e(l).AlternatePassiveAdditionInformations)&&e(l).AlternatePassiveAdditionInformations.length>0&&k(De)})}o(u,m)};_(Te,u=>{e(l)&&u(Ge)})}$(()=>{var u,m;Z(j,"min",e(t)&&((u=P[e(t).value])==null?void 0:u.Min)),Z(j,"max",e(t)&&((m=P[e(t).value])==null?void 0:m.Max))}),He("blur",j,z),ze(j,()=>e(b),u=>V(b,u)),o(J,ge)};_(Ce,J=>{e(x)&&J(Je)})}o(B,C)};_(Ne,B=>{var C;e(I)&&e(I)()&&e(t)&&U[e(t).value]&&Object.keys(U[e(t).value]??{}).indexOf(((C=e(I)())==null?void 0:C.value)??"")>=0&&B(Oe)})}o(a,y)};_(je,a=>{e(t)&&a(Re)})}s(fe),s(te);var pe=i(te,2),be=r(pe),he=r(be),qe=r(he);Ae(2),s(he),s(be),Ae(2),s(pe),s(me),s(ae),$(()=>{Z(ce,"href",`${Le??""}/tree`),Z(qe,"src",`${We??""}/mf-academy-logo.png`)}),o($e,ae),Fe()}export{xa as component};
