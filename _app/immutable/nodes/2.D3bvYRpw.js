import{f as d,a as o}from"../chunks/DU_35SlH.js";import{p as Ge,b as G,d as X,g as e,t as $,a as De,u as Fe,e as D,c as r,s as i,r as s,n as xe,f as F}from"../chunks/CbIHRuBd.js";import{e as He,s as H}from"../chunks/DlWyvDRc.js";import{i as f}from"../chunks/D6ufbTq8.js";import{S as se,s as Y,r as Ue,b as Ve,e as re}from"../chunks/B9TR6BhL.js";import{r as ze}from"../chunks/iUD-TIVW.js";import{g as Qe}from"../chunks/Cf6MaGys.js";import{p as ye}from"../chunks/BGLaFV4m.js";import{b as Ee,a as Le}from"../chunks/BoHIqYsN.js";import{d as x,c as We}from"../chunks/tsPM7QKs.js";var Xe=d('<div class="mt-2"> </div>'),Ye=d("<li> </li>"),Ze=d('<ol class="mt-4 list-decimal pl-8"></ol>'),ea=d('<div class="mt-4"><h3>Alternate Passive Skill</h3> <span> </span></div> <!>',1),aa=d("<li> </li>"),ta=d('<ol class="list-decimal pl-8"></ol>'),sa=d('<li class="mt-4"><span> </span> <!></li>'),ra=d('<div class="mt-4"><h3>Additions</h3> <ul class="list-disc pl-8"></ul></div>'),la=d("<!> <!>",1),ia=d('<div class="mt-4"><h3 class="mb-2">Seed</h3> <input type="number" class="seed"/> <!></div> <!>',1),na=d('<div class="mt-4"><h3 class="mb-2">Passive Skill</h3> <!></div> <!>',1),va=d('<div class="mt-4"><h3 class="mb-2">Conqueror</h3> <!></div> <!>',1),oa=d('<div class="py-10 flex flex-row justify-center w-screen h-screen"><div class="flex flex-col justify-between w-1/3"><div><h1 class="text-white mb-10 text-center">Timeless Calculator</h1> <a><h2 class="text-white mb-10 text-center underline text-orange-500">Skill Tree View</h2></a> <div class="themed"><h3 class="mb-2">Timeless Jewel</h3> <!> <!></div></div> <div class="flex justify-between"><div class="text-right text-orange-500"><a href="https://discord.gg/mfacademy" target="_blank" rel="noopener noreferrer" class="flex flex-row align-middle"><img width="24px" alt="MF Academy"/> <span class="ml-2">MF Academy</span></a></div> <div class="text-orange-500"><a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener noreferrer">Official Branch Source (Github)</a> <a href="https://github.com/BlazesRus/timeless-jewels" target="_blank" rel="noopener noreferrer">Source (Github)</a> <a href="https://github.com/ImHamba/timeless-jewels" target="_blank" rel="noopener noreferrer">ImHamba Branch Source (Github)</a></div></div></div></div>');function Sa(Ae,ke){Ge(ke,!0);const p=ye.url.searchParams,le=x.TimelessJewels??{},U=x.TimelessJewelConquerors??{},P=x.TimelessJewelSeedRanges??{},we=(x.PassiveSkills??[]).filter(Boolean),ie=Object.keys(le).map(a=>({value:Number(a),label:le[Number(a)]}));let t=G(X(p.has("jewel")&&ie.find(a=>a.value===Number(p.get("jewel")))||void 0)),ne=Fe(()=>e(t)&&U[e(t).value]?Object.keys(U[e(t).value]??{}).map(a=>({value:a,label:a})):[]),b=G(X(p.has("conqueror")&&e(ne).find(a=>a.value===p.get("conqueror"))||void 0));const ve=we.filter(a=>!!a).map(a=>({value:a.Index,label:`${a.Name} (${a.ID})`}));let y=G(X(p.has("passive_skill")&&ve.find(a=>a.value===Number(p.get("passive_skill")))||void 0)),h=G(X(p.has("seed")?Number(p.get("seed")):0)),l=G(void 0);ze(()=>{e(y)&&e(h)&&e(t)&&e(b)&&D(l,We.Calculate(e(y).value,e(h),e(t).value,e(b).value),!0)});const V=()=>{{const a={};e(t)&&(a.jewel=e(t).value),e(b)&&(a.conqueror=e(b).value),e(y)&&(a.passive_skill=e(y).value),e(h)&&(a.seed=e(h));const z=Object.keys(a).map(I=>I+"="+encodeURIComponent(a[I])).join("&");Qe(ye.url.pathname+"?"+z)}};var Z=oa(),oe=r(Z),ee=r(oe),de=i(r(ee),2),me=i(de,2),ue=i(r(me),2);se(ue,{get items(){return ie},get value(){return e(t)},set value(a){D(t,a,!0)},$$events:{select:V}});var $e=i(ue,2);{var Pe=a=>{var z=va(),I=F(z),je=i(r(I),2);se(je,{get items(){return e(ne)},get value(){return e(b)},set value(q){D(b,q,!0)},$$events:{select:V}}),s(I);var Re=i(I,2);{var Ne=q=>{var pe=na(),ae=F(pe),Oe=i(r(ae),2);se(Oe,{get items(){return ve},get value(){return e(y)},set value(B){D(y,B,!0)},$$events:{select:V}}),s(ae);var qe=i(ae,2);{var Be=B=>{var be=ia(),te=F(be),j=i(r(te),2);Ue(j);var Je=i(j,2);{var Ke=m=>{var u=Xe(),A=r(u);s(u),$(()=>{var Q,E;return H(A,`Seed must be between ${(e(t)&&((Q=P[e(t).value])==null?void 0:Q.Min))??""} and ${(e(t)&&((E=P[e(t).value])==null?void 0:E.Max))??""}`)}),o(m,u)};f(Je,m=>{var u,A;e(t)&&(e(h)<(((u=P[e(t).value])==null?void 0:u.Min)??-1/0)||e(h)>(((A=P[e(t).value])==null?void 0:A.Max)??1/0))&&m(Ke)})}s(te);var Me=i(te,2);{var Te=m=>{var u=la(),A=F(u);{var Q=k=>{var R=ea(),N=F(R),g=i(r(N),2),n=r(g);s(g),s(N);var J=i(N,2);{var K=M=>{var T=Ze();re(T,22,()=>Object.keys(e(l).StatRolls??{}),C=>C,(C,_,v)=>{var c=Ye(),w=r(c,!0);s(c),$(S=>H(w,S),[()=>{var S,O,L;return(S=e(l).AlternatePassiveSkill)!=null&&S.StatsKeys&&typeof e(l).AlternatePassiveSkill.StatsKeys[e(v)]=="number"?`${((O=x.GetStatByIndex(e(l).AlternatePassiveSkill.StatsKeys[e(v)]))==null?void 0:O.Text)||"<no name>"} (${(L=x.GetStatByIndex(e(l).AlternatePassiveSkill.StatsKeys[e(v)]))==null?void 0:L.ID}) - ${e(l).StatRolls[Number(_)]}`:`<no name> () - ${e(l).StatRolls[Number(_)]}`}]),o(C,c)}),s(T),o(M,T)};f(J,M=>{e(l).StatRolls&&Object.keys(e(l).StatRolls??{}).length>0&&M(K)})}$(()=>H(n,`${e(l).AlternatePassiveSkill.Name??""} (${e(l).AlternatePassiveSkill.ID??""})`)),o(k,R)};f(A,k=>{e(l).AlternatePassiveSkill&&k(Q)})}var E=i(A,2);{var Ce=k=>{var R=ra(),N=i(r(R),2);re(N,21,()=>e(l).AlternatePassiveAdditionInformations,g=>{var n;return(n=g==null?void 0:g.AlternatePassiveAddition)==null?void 0:n.ID},(g,n)=>{var J=sa(),K=r(J),M=r(K);s(K);var T=i(K,2);{var C=_=>{var v=ta();re(v,22,()=>Object.keys(e(n).StatRolls),c=>c,(c,w,S)=>{var O=aa(),L=r(O,!0);s(O),$(W=>H(L,W),[()=>{var W,he,ge,Se;return(he=(W=e(n))==null?void 0:W.AlternatePassiveAddition)!=null&&he.StatsKeys&&typeof e(n).AlternatePassiveAddition.StatsKeys[e(S)]=="number"?`${((ge=x.GetStatByIndex(e(n).AlternatePassiveAddition.StatsKeys[e(S)]))==null?void 0:ge.Text)||"<no name>"} (${(Se=x.GetStatByIndex(e(n).AlternatePassiveAddition.StatsKeys[e(S)]))==null?void 0:Se.ID}) - ${e(n).StatRolls[Number(w)]}`:`<no name> () - ${e(n).StatRolls[Number(w)]}`}]),o(c,O)}),s(v),o(_,v)};f(T,_=>{var v;(v=e(n))!=null&&v.StatRolls&&Object.keys(e(n).StatRolls).length>0&&_(C)})}s(J),$(()=>{var _,v,c,w;return H(M,`${((v=(_=e(n))==null?void 0:_.AlternatePassiveAddition)==null?void 0:v.ID)??""} (${((w=(c=e(n))==null?void 0:c.AlternatePassiveAddition)==null?void 0:w.Index)??""})`)}),o(g,J)}),s(N),s(R),o(k,R)};f(E,k=>{Array.isArray(e(l).AlternatePassiveAdditionInformations)&&e(l).AlternatePassiveAdditionInformations.length>0&&k(Ce)})}o(m,u)};f(Me,m=>{e(l)&&m(Te)})}$(()=>{var m,u;Y(j,"min",e(t)&&((m=P[e(t).value])==null?void 0:m.Min)),Y(j,"max",e(t)&&((u=P[e(t).value])==null?void 0:u.Max))}),He("blur",j,V),Ve(j,()=>e(h),m=>D(h,m)),o(B,be)};f(qe,B=>{e(y)&&B(Be)})}o(q,pe)};f(Re,q=>{e(b)&&e(t)&&U[e(t).value]&&Object.keys(U[e(t).value]??{}).indexOf(e(b).value)>=0&&q(Ne)})}o(a,z)};f($e,a=>{e(t)&&a(Pe)})}s(me),s(ee);var ce=i(ee,2),_e=r(ce),fe=r(_e),Ie=r(fe);xe(2),s(fe),s(_e),xe(2),s(ce),s(oe),s(Z),$(()=>{Y(de,"href",`${Ee??""}/tree`),Y(Ie,"src",`${Le??""}/mf-academy-logo.png`)}),o(Ae,Z),De()}export{Sa as component};
