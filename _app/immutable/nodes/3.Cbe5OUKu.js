var oa=Object.defineProperty;var ua=Object.getPrototypeOf;var ca=Reflect.get;var bs=s=>{throw TypeError(s)};var da=(s,t,r)=>t in s?oa(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var ps=(s,t,r)=>da(s,typeof t!="symbol"?t+"":t,r),Gr=(s,t,r)=>t.has(s)||bs("Cannot "+r);var m=(s,t,r)=>(Gr(s,t,"read from private field"),r?r.call(s):t.get(s)),U=(s,t,r)=>t.has(s)?bs("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,r),mt=(s,t,r,a)=>(Gr(s,t,"write to private field"),a?a.call(s,r):t.set(s,r),r),Oe=(s,t,r)=>(Gr(s,t,"access private method"),r);var _s=(s,t,r,a)=>({set _(n){mt(s,t,n,r)},get _(){return m(s,t,a)}}),ws=(s,t,r)=>ca(ua(s),r,t);import{f as T,a as S,c as rs,t as cr}from"../chunks/DU_35SlH.js";import{T as va,O as Ns,Z as fa,e as d,p as pt,c as p,s as w,r as g,g as e,t as Z,a as _t,f as we,b as A,aw as Ct,ax as ha,d as _e,u as re,ay as ga,K as lt,az as ma,Y as zs,aA as dr,n as ba}from"../chunks/CbIHRuBd.js";import{d as pr,s as ye,e as zt}from"../chunks/DlWyvDRc.js";import{i as X}from"../chunks/D6ufbTq8.js";import{e as Ze,i as Vr,a as pa,c as _a,d as qs,s as Qr,S as Ir,f as Fe,r as jt,b as Nt}from"../chunks/B9TR6BhL.js";import{p as ot,r as Ls,b as Zr,s as wa,a as ya}from"../chunks/CPeILaI9.js";import{s as xa,g as Sa}from"../chunks/Cf6MaGys.js";import{o as ss,t as ka,b as ut,c as Pa,a as Js,d as Hr,e as ys,f as Tr,g as xs,h as Or,i as Ss,j as ks,k as Ps,m as Aa,n as As,p as Ea,q as Ia,r as Ur,u as Ta,s as Es,v as Oa}from"../chunks/4b1YjS16.js";import{a as Is,o as Ra}from"../chunks/BpPUMrln.js";import{d as Me,c as Ds}from"../chunks/tsPM7QKs.js";var bt,Lt,hr,jr,Ws;const Nr=class Nr{constructor(t){U(this,jr);U(this,bt,new WeakMap);U(this,Lt);U(this,hr);mt(this,hr,t)}observe(t,r){var a=m(this,bt).get(t)||new Set;return a.add(r),m(this,bt).set(t,a),Oe(this,jr,Ws).call(this).observe(t,m(this,hr)),()=>{var n=m(this,bt).get(t);n.delete(r),n.size===0&&(m(this,bt).delete(t),m(this,Lt).unobserve(t))}}};bt=new WeakMap,Lt=new WeakMap,hr=new WeakMap,jr=new WeakSet,Ws=function(){return m(this,Lt)??mt(this,Lt,new ResizeObserver(t=>{for(var r of t){Nr.entries.set(r.target,r);for(var a of m(this,bt).get(r.target)||[])a(r)}}))},ps(Nr,"entries",new WeakMap);let $r=Nr;var Ma=new $r({box:"border-box"});function Ts(s,t,r){var a=Ma.observe(s,()=>r(s[t]));va(()=>(Ns(()=>r(s[t])),a))}function Ca(s,t,r,a,n){var f=()=>{a(r[s])};r.addEventListener(t,f),f(),(r===document.body||r===window||r===document)&&fa(()=>{r.removeEventListener(t,f)})}function or(s){d(s,s.v+1)}const ja=()=>{const s=xa;return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},updated:s.updated}},Na={subscribe(s){return ja().page.subscribe(s)}},Os=(s,t)=>t.highlight(t.set.seed,t.set.skills.map(r=>r.passive));var za=(s,t)=>ss(Pa(t.jewel,t.conqueror,t.set)),qa=T("<li> </li>"),La=T('<div class="mt-2"><span> </span> <ul class="list-disc pl-6 font-bold"></ul></div>'),Ja=T('<div class="my-2 border-white/50 border p-2 flex flex-col cursor-pointer" role="button" tabindex="0"><div class="flex flex-row justify-between"><button class="px-3 invisible">Trade</button> <div class="font-bold text-orange-500 text-center"> </div> <button class="px-3 bg-blue-500/40 rounded">Trade</button></div> <!></div>');function Rs(s,t){pt(t,!0);var r=Ja();r.__click=[Os,t],r.__keydown=[Os,t];var a=p(r),n=w(p(a),2),f=p(n);g(n);var u=w(n,2);u.__click=[za,t],g(a);var _=w(a,2);Ze(_,17,()=>t.set.skills,o=>o.passive,(o,c)=>{var h=La(),b=p(h),k=p(b);g(b);var P=w(b,2);Ze(P,20,()=>Object.keys(e(c).stats),v=>v,(v,D)=>{var E=qa(),W=p(E,!0);g(E),Z(j=>ye(W,j),[()=>ka(D,e(c).stats[D])]),S(v,E)}),g(P),g(h),Z(()=>ye(k,`${ut.nodes[e(c).passive].name??""} (${e(c).passive??""})`)),S(o,h)}),g(r),Z(()=>ye(f,`Seed ${t.set.seed??""} (weight ${t.set.weight??""}) Stat Total: ${t.set.statTotal??""}`)),S(s,r),_t()}pr(["click","keydown"]);var Da=(s,t,r)=>e(t)===String(r)?d(t,""):d(t,String(r),!0),Wa=T("<div><!></div>"),Fa=T('<div class="flex flex-col overflow-auto min-h-[200px] mb-2"></div>'),Ya=T('<button class="text-lg w-full p-2 px-4 bg-neutral-500/30 rounded flex flex-row justify-between mb-2"><span> </span> <span> </span></button> <!>',1),Ka=T('<div class="flex flex-col overflow-auto"></div>'),Ga=T("<div><!></div>"),Ha=T('<div class="mt-4 flex flex-col overflow-auto"></div>');function Ua(s,t){pt(t,!0);let r=ot(t,"groupResults",3,!0),a=A("");var n=rs(),f=we(n);{var u=o=>{var c=Ka();Ze(c,20,()=>Object.keys(t.searchResults.grouped).map(h=>parseInt(h,10)).sort((h,b)=>h-b).reverse(),h=>h,(h,b)=>{var k=Ya(),P=we(k);P.__click=[Da,a,b];var v=p(P),D=p(v);g(v);var E=w(v,2),W=p(E,!0);g(E),g(P);var j=w(P,2);{var N=x=>{var $=Fa();Ze($,21,()=>t.searchResults.grouped[b],Vr,(M,Ke)=>{var Ce=Wa(),z=p(Ce);Rs(z,{get set(){return e(Ke)},get highlight(){return t.highlight},get jewel(){return t.jewel},get conqueror(){return t.conqueror}}),g(Ce),S(M,Ce)}),g($),S(x,$)};X(j,x=>{e(a)===String(b)&&x(N)})}Z(x=>{ye(D,`${b??""} Match${b>1?"es":""} [${t.searchResults.grouped[b].length??""}]`),ye(W,x)},[()=>e(a)===String(b)?"^":"V"]),S(h,k)}),g(c),S(o,c)},_=o=>{var c=Ha();Ze(c,21,()=>t.searchResults.raw,Vr,(h,b)=>{var k=Ga(),P=p(k);Rs(P,{get set(){return e(b)},get highlight(){return t.highlight},get jewel(){return t.jewel},get conqueror(){return t.conqueror}}),g(k),S(h,k)}),g(c),S(o,c)};X(f,o=>{r()?o(u):o(_,!1)})}S(s,n),_t()}pr(["click"]);const Xa=s=>{const t=s*2,r=t>>16&255,a=t>>8&255,n=t&255;return[r,a,n]},Ba=([s,t,r])=>{const a=(s<<16|t<<8|r)/2;return a%1?0:a},Va=["filter","shadowBlur","globalCompositeOperation","globalAlpha","fillStyle","strokeStyle"],Qa=(s,t,{rgbToId:r=Ba,idToRgb:a=Xa}={})=>{const n=s.getContext("2d",t),f=new OffscreenCanvas(s.width,s.height),u=f.getContext("2d",{willReadFrequently:!1,alpha:!1});return new Proxy(n,{get(_,o){const{width:c,height:h}=s;if((c!==f.width||h!==f.height)&&(f.width=c,f.height=h),o==="getLayerIdAt")return(k,P)=>{const[v,D,E]=u.getImageData(k,P,1,1).data;return r([v,D,E])};if(o==="setCurrentLayerId")return k=>{const[P,v,D]=a(k),E=`rgb(${P},${v},${D})`;u.fillStyle=E,u.strokeStyle=E};const b=_[o];return typeof b!="function"?b:(...k)=>{let P=o,v=k;return o==="drawImage"&&(P="fillRect",v=k.slice(-4)),u[P](...v),Reflect.apply(b,_,k)}},set(_,o,c){return _[o]=c,Va.includes(o)||(u[o]=c),!0}})};var Ve,Qe,it,Jt,Cr;const as=class as extends Map{constructor(r){super();U(this,Jt);U(this,Ve,new Map);U(this,Qe,Ct(0));U(this,it,Ct(0));if(r){for(var[a,n]of r)super.set(a,n);m(this,it).v=super.size}}has(r){var a=m(this,Ve),n=a.get(r);if(n===void 0){var f=super.get(r);if(f!==void 0)n=Ct(0),a.set(r,n);else return e(m(this,Qe)),!1}return e(n),!0}forEach(r,a){Oe(this,Jt,Cr).call(this),super.forEach(r,a)}get(r){var a=m(this,Ve),n=a.get(r);if(n===void 0){var f=super.get(r);if(f!==void 0)n=Ct(0),a.set(r,n);else{e(m(this,Qe));return}}return e(n),super.get(r)}set(r,a){var b;var n=m(this,Ve),f=n.get(r),u=super.get(r),_=super.set(r,a),o=m(this,Qe);if(f===void 0)n.set(r,Ct(0)),d(m(this,it),super.size),or(o);else if(u!==a){or(f);var c=o.reactions===null?null:new Set(o.reactions),h=c===null||!((b=f.reactions)!=null&&b.every(k=>c.has(k)));h&&or(o)}return _}delete(r){var a=m(this,Ve),n=a.get(r),f=super.delete(r);return n!==void 0&&(a.delete(r),d(m(this,it),super.size),d(n,-1),or(m(this,Qe))),f}clear(){if(super.size!==0){super.clear();var r=m(this,Ve);d(m(this,it),0);for(var a of r.values())d(a,-1);or(m(this,Qe)),r.clear()}}keys(){return e(m(this,Qe)),super.keys()}values(){return Oe(this,Jt,Cr).call(this),super.values()}entries(){return Oe(this,Jt,Cr).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return e(m(this,it)),super.size}};Ve=new WeakMap,Qe=new WeakMap,it=new WeakMap,Jt=new WeakSet,Cr=function(){e(m(this,Qe));var r=m(this,Ve);if(m(this,it).v!==r.size)for(var a of ws(as.prototype,this,"keys").call(this))r.has(a)||r.set(a,Ct(0));for(var[,n]of m(this,Ve))e(n)};let vr=as;const Za=s=>{if(window.TouchEvent&&s instanceof TouchEvent){const{left:a,top:n}=s.target.getBoundingClientRect(),{clientX:f,clientY:u}=s.changedTouches[0];return{x:f-a,y:u-n}}const{offsetX:t,offsetY:r}=s;return{x:t,y:r}},Ms=(s,t)=>{var r,a;s instanceof MouseEvent&&((r=s.target)==null||r.dispatchEvent(new PointerEvent(`layer.pointer${t}`,s)),(a=s.target)==null||a.dispatchEvent(new MouseEvent(`layer.mouse${t}`,s)))},$a=["onclick","oncontextmenu","ondblclick","onauxclick","onmousedown","onmouseenter","onmouseleave","onmouseup","onmousemove","onwheel","ontouchstart","ontouchcancel","ontouchend","ontouchmove","onpointerenter","onpointerleave","onpointerdown","onpointerup","onpointermove","onpointercancel","onlayer.mouseenter","onlayer.mouseleave","onlayer.pointerenter","onlayer.pointerleave","onfocus","onblur","onfullscreenchange","onfullscreenerror","onscroll","oncut","oncopy","onpaste","onkeydown","onkeypress","onkeyup","onmouseover","onmouseout","onselect","ondrag","ondragend","ondragenter","ondragstart","ondragleave","ondragover","ondrop","onpointerover","onpointerout","ongotpointercapture","onlostpointercapture"],en=s=>console.warn("[svelte-canvas] %s",s),Fs=Symbol("register"),tn=s=>ha(Fs)(s);var Dt,Wt,Ft,zr,qr,gr,At,Ye,Yt,Kt,mr,Gt,br,fe,Ys,Ks,Gs,Hs,es,Us,Xs;class rn{constructor(t){U(this,fe);U(this,Dt,new vr);U(this,Wt,new vr);U(this,Ft,new vr);U(this,zr,1);U(this,qr,Date.now());U(this,gr,A(0));U(this,At);U(this,Ye);U(this,Yt);U(this,Kt);U(this,mr,A(_e([])));U(this,Gt,A(0));U(this,br,re(()=>m(this,Ft).get(e(m(this,Gt)))));mt(this,Ye,t),ga(Fs,this.register.bind(this))}init(t,r){mt(this,At,t),Oe(this,fe,Hs).call(this,r),lt(()=>Oe(this,fe,es).call(this)),lt(()=>Oe(this,fe,Gs).call(this)),lt(()=>(e(m(this,gr)),Oe(this,fe,Us).call(this))),Is(()=>Oe(this,fe,Xs).call(this))}redraw(){ma(m(this,gr))}register({setup:t,render:r,...a}){const n=Oe(this,fe,Ys).call(this);return t&&m(this,Dt).set(n,t),m(this,Wt).set(n,r),Object.keys(a).length&&(m(this,Ye).layerEvents?m(this,Ft).set(n,a):en("Canvas must have layerEvents={true} in order to use layer-level event handlers")),Is(()=>Oe(this,fe,Ks).call(this,n)),n}createEventHandlers(){const t=n=>{const f=`on${n.type}`,u=m(this,Ye).handlers[f];u==null||u(n)},r=n=>{const{pixelRatio:f}=m(this,Ye),{x:u,y:_}=Za(n);if(["touchstart","pointermove"].includes(n.type)){const h=m(this,At).getLayerIdAt(u*f,_*f);e(m(this,Gt))!==h&&(Ms(n,"leave"),d(m(this,Gt),h,!0),Ms(n,"enter"))}if(!e(m(this,br)))return;const o=`on${n.type.replace("layer.","")}`,c=e(m(this,br))[o];c==null||c({x:u,y:_,originalEvent:n})},a=n=>{t(n),m(this,Ye).layerEvents&&r(n)};return $a.reduce((n,f)=>({...n,[f]:a}),{})}}Dt=new WeakMap,Wt=new WeakMap,Ft=new WeakMap,zr=new WeakMap,qr=new WeakMap,gr=new WeakMap,At=new WeakMap,Ye=new WeakMap,Yt=new WeakMap,Kt=new WeakMap,mr=new WeakMap,Gt=new WeakMap,br=new WeakMap,fe=new WeakSet,Ys=function(){return _s(this,zr)._++},Ks=function(t){m(this,Wt).delete(t),m(this,Ft).delete(t)},Gs=function(){const{onresize:t,width:r,height:a,pixelRatio:n}=m(this,Ye);t==null||t({width:r,height:a,pixelRatio:n})},Hs=function(t){const r=()=>{const a=[...t.children];d(m(this,mr),a.map(n=>+n.dataset.layerId),!0)};mt(this,Kt,new MutationObserver(()=>r())),m(this,Kt).observe(t,{childList:!0}),r()},es=function(){m(this,Ye).autoplay?(Ns(()=>this.redraw()),mt(this,Yt,requestAnimationFrame(()=>Oe(this,fe,es).call(this)))):cancelAnimationFrame(m(this,Yt))},Us=function(){var o,c,h;const t=m(this,At),{width:r,height:a,pixelRatio:n,autoclear:f}=m(this,Ye),u=Date.now()-m(this,qr),_={context:t,width:r,height:a,time:u};t.setTransform(n,0,0,n,0,0),f&&t.clearRect(0,0,r,a);for(const[b,k]of m(this,Dt))k(_),m(this,Dt).delete(b);for(const b of e(m(this,mr)))(c=(o=m(this,At)).setCurrentLayerId)==null||c.call(o,b),(h=m(this,Wt).get(b))==null||h(_)},Xs=function(){var t;typeof window>"u"||((t=m(this,Kt))==null||t.disconnect(),cancelAnimationFrame(m(this,Yt)))};/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function sn(s,t){var r=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(r!=null){var a,n,f,u,_=[],o=!0,c=!1;try{if(f=(r=r.call(s)).next,t===0){if(Object(r)!==r)return;o=!1}else for(;!(o=(a=f.call(r)).done)&&(_.push(a.value),_.length!==t);o=!0);}catch(h){c=!0,n=h}finally{try{if(!o&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw n}}return _}}function Cs(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),r.push.apply(r,a)}return r}function Re(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cs(Object(r),!0).forEach(function(a){an(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Cs(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function an(s,t,r){return t=hn(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function nn(s,t){if(s==null)return{};var r={},a=Object.keys(s),n,f;for(f=0;f<a.length;f++)n=a[f],!(t.indexOf(n)>=0)&&(r[n]=s[n]);return r}function ln(s,t){if(s==null)return{};var r=nn(s,t),a,n;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(s);for(n=0;n<f.length;n++)a=f[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function js(s,t){return un(s)||sn(s,t)||Bs(s,t)||vn()}function Rr(s){return on(s)||cn(s)||Bs(s)||dn()}function on(s){if(Array.isArray(s))return ts(s)}function un(s){if(Array.isArray(s))return s}function cn(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Bs(s,t){if(s){if(typeof s=="string")return ts(s,t);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ts(s,t)}}function ts(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=s[r];return a}function dn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fn(s,t){if(typeof s!="object"||s===null)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function hn(s){var t=fn(s,"string");return typeof t=="symbol"?t:String(t)}function fr(s){var t=s.sizes.shift(),r=Math.max(Math.ceil(t[0]),1),a=Math.max(Math.ceil(t[1]),1),n=[r-1,a-1,1,1],f=Date.now(),u=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,_,o;u?(_=new OffscreenCanvas(1,1),o=new OffscreenCanvas(r,a)):(_=document.createElement("canvas"),_.width=1,_.height=1,o=document.createElement("canvas"),o.width=r,o.height=a);var c=_.getContext("2d"),h=o.getContext("2d");h&&(h.fillRect.apply(h,n),c.drawImage(o,r-1,a-1,1,1,0,0,1,1));var b=c&&c.getImageData(0,0,1,1).data[3]!==0,k=Date.now()-f;return[_,o].forEach(function(P){P.height=0,P.width=0}),u?(postMessage({width:r,height:a,benchmark:k,isTestPass:b}),!b&&s.sizes.length&&fr(s)):b?s.onSuccess(r,a,k):(s.onError(r,a,k),s.sizes.length&&fr(s)),b}var Xr={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},gn=["onError","onSuccess"],qt={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},ur={};function Br(s){var t=s.width===s.height,r=s.height===1,a=s.width===1,n=[];if(!s.width||!s.height)s.sizes.forEach(function(h){var b=t||r?h:1,k=t||a?h:1;n.push([b,k])});else for(var f=s.min||qt.min,u=s.step||qt.step,_=Math.max(s.width,s.height);_>=f;){var o=t||r?_:1,c=t||a?_:1;n.push([o,c]),_-=u}return n}function Mr(s){var t=window&&"HTMLCanvasElement"in window,r=window&&"OffscreenCanvas"in window,a=Date.now(),n=s.onError,f=s.onSuccess,u=ln(s,gn),_=null;if(!t)return!1;if(s.useWorker&&r){var o=`
            var canvasTest = `.concat(fr.toString(),`;
            onmessage = function(e) {
                canvasTest(e.data);
            };
        `),c=new Blob([o],{type:"application/javascript"}),h=URL.createObjectURL(c);_=new Worker(h),URL.revokeObjectURL(h),_.onmessage=function(b){var k=b.data,P=k.width,v=k.height,D=k.benchmark,E=k.isTestPass;E?(ur[a].onSuccess(P,v,D),delete ur[a]):ur[a].onError(P,v,D)}}if(s.usePromise)return new Promise(function(b,k){var P=Re(Re({},s),{},{onError:function(W,j,N){var x;if(s.sizes.length===0)x=!0;else{var $=s.sizes.slice(-1),M=js($,1),Ke=js(M[0],2),Ce=Ke[0],z=Ke[1];x=W===Ce&&j===z}n(W,j,N),x&&k({width:W,height:j,benchmark:N})},onSuccess:function(W,j,N){f(W,j,N),b({width:W,height:j,benchmark:N})}});if(_){var v=P.onError,D=P.onSuccess;ur[a]={onError:v,onSuccess:D},_.postMessage(u)}else fr(P)});if(_)ur[a]={onError:n,onSuccess:f},_.postMessage(u);else return fr(s)}var mn={maxArea:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Br({width:t.max,height:t.max,min:t.min,step:t.step,sizes:Rr(Xr.area)}),a=Re(Re(Re({},qt),t),{},{sizes:r});return Mr(a)},maxHeight:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Br({width:1,height:t.max,min:t.min,step:t.step,sizes:Rr(Xr.height)}),a=Re(Re(Re({},qt),t),{},{sizes:r});return Mr(a)},maxWidth:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Br({width:t.max,height:1,min:t.min,step:t.step,sizes:Rr(Xr.width)}),a=Re(Re(Re({},qt),t),{},{sizes:r});return Mr(a)},test:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Re(Re({},qt),t);return r.sizes=Rr(r.sizes),r.width&&r.height&&(r.sizes=[[r.width,r.height]]),Mr(r)}};const bn=(s,t,r,a=.1)=>{if(typeof window>"u")return r;for(;!mn.test({sizes:[[s*r,t*r]]});)r-=a;return r};var pn=T("<canvas></canvas> <div><!></div>",1);function _n(s,t){pt(t,!0);let r=ot(t,"style",3,""),a=ot(t,"autoplay",3,!1),n=ot(t,"autoclear",3,!0),f=ot(t,"layerEvents",3,!1),u=Ls(t,["$$slots","$$events","$$legacy","width","height","pixelRatio","class","style","autoplay","autoclear","layerEvents","onresize","contextSettings","children"]),_,o,c,h=A(2),b=A(0),k=A(0);const P=re(()=>t.width??e(b)),v=re(()=>t.height??e(k)),D=re(()=>e(h)&&t.pixelRatio==="auto"?bn(e(P),e(v),e(h)):t.pixelRatio&&t.pixelRatio!=="auto"?t.pixelRatio:e(h)),E=new rn({get width(){return e(P)},get height(){return e(v)},get pixelRatio(){return e(D)},get autoplay(){return a()},get autoclear(){return n()},get layerEvents(){return f()},get onresize(){return t.onresize},handlers:u});Ra(()=>{f()?o=Qa(_,t.contextSettings):o=_.getContext("2d",t.contextSettings),E.init(o,c)});const W=()=>E.redraw();var j=pn(),N=we(j);pa(N,M=>({class:t.class,width:e(P)*e(D),height:e(v)*e(D),style:r(),...M,[_a]:{width:t.width?`${t.width}px`:"100%",height:t.height?`${t.height}px`:"100%"}}),[()=>E.createEventHandlers()]),Zr(N,M=>_=M,()=>_);var x=w(N,2);qs(x,"",{},{display:"none"});var $=p(x);return Js($,()=>t.children??zs),g(x),Zr(x,M=>c=M,()=>c),Ca("devicePixelRatio","resize",dr,M=>d(h,M,!0)),Ts(N,"clientWidth",M=>d(b,M)),Ts(N,"clientHeight",M=>d(k,M)),S(s,j),_t({redraw:W,get canvas(){return _},set canvas(M){_=M},get context(){return o},set context(M){o=M}})}var wn=T("<div></div>");function yn(s,t){pt(t,!0);const r=Ls(t,["$$slots","$$events","$$legacy"]),a=tn(r);var n=wn();Z(()=>Qr(n,"data-layer-id",a)),S(s,n),_t()}var xn=T("<div><!> <!></div>");function Sn(s,t){pt(t,!0);const r=()=>window.performance.now();let a=ot(t,"highlighted",19,()=>[]),n=ot(t,"disabled",19,()=>[]),f=ot(t,"highlightJewels",3,!1);const u=[427,320,226,227,323,422,329],_="25px Roboto Mono",o="17px Roboto Mono";let c=A(10),h=A(0),b=A(0);const k=re(()=>Ea/e(c)),P=2.6,v={},D={},E=(i,O,B,se=!1,ie=!1)=>{let V=se?Aa[O]:As[O];!V&&se&&(V=As[O]);const Je=V.filename;Je in(se?D:v)||((se?D:v)[Je]=new Image,(se?D:v)[Je].src=Je);const K=V.coords[O],je=K.w/e(c)*P,Ne=K.h/e(c)*P,et=B.x-je/2,tt=B.y-Ne/2;let Ge=tt;ie&&(Ge=tt-Ne/2),i.drawImage((se?D:v)[Je],K.x,K.y,K.w,K.h,et,Ge,je,Ne),ie&&(i.save(),i.translate(et,tt),i.rotate(Math.PI),i.drawImage((se?D:v)[Je],K.x,K.y,K.w,K.h,-je,-(Ne/2),je,-Ne),i.restore())},W=(i,O,B)=>{const se=[];let ie="";return i.split(" ").forEach(V=>{O.measureText(ie+V).width<B?ie+=" "+V:(se.push(ie.trim()),ie=V)}),ie.length>0&&se.push(ie.trim()),se};let j=A(_e({x:Number.MIN_VALUE,y:Number.MIN_VALUE})),N=A("unset"),x=A(void 0);const $=re(()=>({context:i,width:O,height:B})=>{var Ht;const se=window.performance.now();i.clearRect(0,0,O,B),i.fillStyle="#080c11",i.fillRect(0,0,O,B);const ie=O/2,V=B/2,Je=90/e(c),K=100/e(c);let je=i.createRadialGradient(ie,V,Je,ie,V,K);je.addColorStop(0,"#8cf34c"),je.addColorStop(1,"#00ff00");const Ne={};Object.keys(Hr).forEach(q=>{const y=parseInt(q),le=Hr[y],L=ys(le.x,le.y,e(h),e(b),e(c)),he=Math.max(...le.orbits);u.indexOf(y)>=0||(he==1?E(i,"PSGroupBackground1",L,!1):he==2?E(i,"PSGroupBackground2",L,!1):(he==3||le.orbits.length>1)&&E(i,"PSGroupBackground3",L,!1,!0))}),Object.entries(Tr).forEach(([q,y])=>{var dt;const le=parseInt(q);if(!y)return;const L=xs(y.orbit??0,y.orbitIndex??0),he=Or(y,e(h),e(b),e(c));(dt=y.out)==null||dt.forEach(ge=>{const de=parseInt(ge),J=Tr[de];if(!J)return;const rt=Math.min(de,le),oe=Math.max(de,le),ee=rt+":"+oe;if(ee in Ne||(Ne[ee]=!0,!J)||J.isMastery)return;const De=xs(J.orbit??0,J.orbitIndex??0),Ae=Or(J,e(h),e(b),e(c));if(i.beginPath(),y.group!=J.group||y.orbit!=J.orbit)i.moveTo(he.x,he.y),i.lineTo(Ae.x,Ae.y);else{let ve=Math.PI/180-Math.PI/180*L,ze=Math.PI/180-Math.PI/180*De;ve-=Math.PI/2,ze-=Math.PI/2;const xr=Math.abs(Math.max(ve,ze)-Math.min(ve,ze)),Sr=xr>Math.PI?Math.max(ve,ze):Math.min(ve,ze),kr=xr>Math.PI?Math.min(ve,ze):Math.max(ve,ze);if(!y.group)return;const Tt=Hr[y.group];if(!Tt)return;const Ut=ys(Tt.x,Tt.y,e(h),e(b),e(c));i.arc(Ut.x,Ut.y,ut.constants.orbitRadii[y.orbit??0]/e(c)+1,Sr,kr)}i.lineWidth=6/e(c),i.strokeStyle="#524518",i.stroke()})});let et={x:0,y:0};t.circledNode&&(et=Or(Tr[t.circledNode],e(h),e(b),e(c)),i.strokeStyle="#ad2b2b");let tt=!1,Ge;if(Object.values(Tr).forEach(q=>{const y=Or(q,e(h),e(b),e(c));let le=0,L=!1;t.circledNode&&Ss(y,et)<e(k)&&(L=!0),q.skill&&n().indexOf(q.skill)>=0&&(L=!1),q.isKeystone?(le=110,E(i,q.icon??"",y,L),L?E(i,"KeystoneFrameAllocated",y,!1):E(i,"KeystoneFrameUnallocated",y,!1)):q.isNotable?(le=70,E(i,q.icon??"",y,L),L?E(i,"NotableFrameAllocated",y,!1):E(i,"NotableFrameUnallocated",y,!1)):q.isJewelSocket?(le=70,q.expansionJewel?E(i,"JewelSocketAltNormal",y,!1):L?E(i,"JewelFrameAllocated",y,!1):E(i,"JewelFrameUnallocated",y,!1)):q.isMastery?E(i,q.inactiveIcon??"",y,L):(le=50,E(i,q.icon??"",y,L),L?E(i,"PSSkillFrameActive",y,!1):E(i,"PSSkillFrame",y,!1)),(a().indexOf(q.skill??-1)>=0||f()&&q.isJewelSocket)&&(i.strokeStyle=je,i.lineWidth=3,i.beginPath(),i.arc(y.x,y.y,(le+30)/e(c),0,Math.PI*2),i.stroke()),Ss(y,e(j))<le/e(c)&&(Ge=q,tt=L)}),d(x,Ge,!0),t.circledNode&&(i.strokeStyle="#ad2b2b",i.lineWidth=1,i.beginPath(),i.arc(et.x,et.y,e(k),0,Math.PI*2),i.stroke()),e(x)){let q=e(x).name??"Node name",y=(e(x).stats||[]).map(J=>({text:J,special:!1}));if(!e(x).isJewelSocket&&tt&&e(x).skill!==void 0&&(Ht=Me)!=null&&Ht.TreeToPassive&&Me.TreeToPassive[e(x).skill]!==void 0&&t.seed&&t.selectedJewel&&t.selectedConqueror){const J=e(x).skill,rt=Me.TreeToPassive[J];if(rt&&rt.Index!==void 0){const oe=Ds.Calculate(rt.Index,t.seed,t.selectedJewel,t.selectedConqueror);if(oe)"AlternatePassiveSkill"in oe&&oe.AlternatePassiveSkill&&(y=[],q=oe.AlternatePassiveSkill.Name??"Alternative Skill",oe.AlternatePassiveSkill.StatsKeys&&(oe.AlternatePassiveSkill.StatsKeys.forEach((ee,De)=>{const Ae=Me.GetStatByIndex(ee);if(!Ae)return;const ve=ks[Ae.ID]||"";if(ve&&oe.StatRolls&&oe.StatRolls[De]!==void 0)y.push({text:Ps(ve,oe.StatRolls[De])||Ae.ID,special:!0});else throw new Error(`Failed to translate ${q}. Skill ID: ${J}, Stat ID: ${Ae.ID}`)}),oe.AlternatePassiveAdditionInformations&&oe.AlternatePassiveAdditionInformations.forEach(ee=>{ee.AlternatePassiveAddition&&ee.AlternatePassiveAddition.StatsKeys&&ee.AlternatePassiveAddition.StatsKeys.forEach((De,Ae)=>{const ve=Me.GetStatByIndex(De);if(!ve)return;const ze=ks[ve.ID]||"";if(ze&&ee.StatRolls&&ee.StatRolls[Ae]!==void 0)y.push({text:Ps(ze,ee.StatRolls[Ae])||ve.ID,special:!0});else throw new Error(`Failed to translate ${q} additional info for statID: ${ve.ID}, skillID: ${J}, statRoll: ${ee.StatRolls?ee.StatRolls[Ae]:"undefined"}`)})})));else throw new Error(`Failed to calculate ${q}. Skill ID: ${J}, Seed: ${t.seed}, Selected Jewel: ${t.selectedJewel}, Selected Conqueror: ${t.selectedConqueror}`)}}i.font=_;const le=i.measureText(q),L=Math.max(le.width+50,600);i.font=o;const he=[],dt=30;let ge=85;y&&y.length>0?y.forEach(J=>{he.length>0&&(ge+=5),J.text.split(`
`).forEach(rt=>{he.length>0&&(ge+=10),W(rt,i,L-dt).forEach(ee=>{he.push({text:ee,offset:ge,special:J.special}),ge+=20})})}):e(x).isJewelSocket&&(he.push({text:"Click to select this socket",offset:ge,special:!0}),ge+=20);const de=55;i.fillStyle="rgba(75,63,24,0.9)",i.fillRect(e(j).x,e(j).y,L,de),i.fillStyle="#ffffff",i.font=_,i.textAlign="center",i.fillText(q,e(j).x+L/2,e(j).y+35),i.fillStyle="rgba(0,0,0,0.8)",i.fillRect(e(j).x,e(j).y+de,L,ge-de),i.font=o,i.textAlign="left",he.forEach(J=>{J.special?i.fillStyle="#8cf34c":i.fillStyle="#ffffff",i.fillText(J.text,e(j).x+dt/2,e(j).y+J.offset)})}e(x)&&e(x).isJewelSocket?d(N,"pointer"):d(N,"unset"),i.fillStyle="#ffffff",i.textAlign="right",i.font="12px Roboto Mono";const It=r();i.fillText(`${(It-se).toFixed(1)}ms`,O-5,17)});let M=0,Ke=0,Ce=0,z=0,Pe=!1;const Le=i=>{const O=i instanceof MouseEvent?i:i.detail;Pe=!0,M=O.offsetX,Ke=O.offsetY,Ce=e(h),z=e(b),d(j,{x:O.offsetX,y:O.offsetY},!0),e(x)&&t.clickNode(e(x))},_r=i=>{i.type==="pointerup"&&(Pe=!1),d(j,{x:i.offsetX,y:i.offsetY},!0)},ce=i=>{Pe&&(d(h,Ce-(M-i.offsetX)*e(c)),d(b,z-(Ke-i.offsetY)*e(c))),d(j,{x:i.offsetX,y:i.offsetY},!0)},Lr=i=>{const O=i instanceof WheelEvent?i:i.detail;O.deltaY>0?e(c)<30&&(d(h,e(h)+O.offsetX),d(b,e(b)+O.offsetY)):e(c)>3&&(d(h,e(h)-O.offsetX),d(b,e(b)-O.offsetY)),d(c,Math.min(30,Math.max(3,e(c)+O.deltaY/100)),!0),O.preventDefault(),O.stopPropagation(),O.stopImmediatePropagation()};let $e=A(0),ct=A(0);const wt=()=>{d($e,window.innerWidth,!0),d(ct,window.innerHeight,!0)};let wr=A(!1);lt(()=>{!e(wr)&&ut&&(d(wr,!0),d(h,ut.min_x+window.innerWidth/2*e(c)),d(b,ut.min_y+window.innerHeight/2*e(c))),wt()});var yr=rs();zt("pointerup",dr,_r),zt("pointermove",dr,ce),zt("resize",dr,wt);var Et=we(yr);{var Jr=i=>{var O=xn(),B=p(O);_n(B,{get width(){return e($e)},get height(){return e(ct)},$$events:{pointerdown:Le,wheel:Lr},children:(ie,V)=>{yn(ie,{get render(){return e($)}})},$$slots:{default:!0}});var se=w(B,2);Js(se,()=>t.children??zs),g(O),Z(()=>qs(O,`touch-action: none; cursor: ${e(N)??""}`)),zt("resize",O,wt),S(i,O)};X(Et,i=>{e($e)&&e(ct)&&i(Jr)})}S(s,yr),_t()}const kn=(s,t,r,a)=>{t.queries.length===1?ss(t.queries[0]):e(r)&&a(!a())};var Pn=T('<button class="p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2"><!></button>');function An(s,t){pt(t,!0);let r=ot(t,"showTradeLinks",15,!1),a=re(()=>t.queries.length>1);var n=Pn();n.__click=[kn,t,a,r];var f=p(n);{var u=o=>{var c=rs(),h=we(c);{var b=P=>{var v=cr("Hide Trade Links");S(P,v)},k=P=>{var v=cr("Show Trade Links");S(P,v)};X(h,P=>{r()?P(b):P(k,!1)})}S(o,c)},_=o=>{var c=cr("Trade");S(o,c)};X(f,o=>{e(a)?o(u):o(_,!1)})}g(n),Z(()=>n.disabled=!t.queries),S(s,n),_t()}pr(["click"]);var En=(s,t)=>ss(e(t)),In=T('<button class="p-1 px-3 bg-blue-500/40 rounded"></button>'),Tn=T('<div class="flex flex-wrap gap-2.5 my-2"></div>');function On(s,t){pt(t,!0);var r=Tn();Ze(r,21,()=>t.queries,Vr,(a,n,f)=>{var u=In();u.__click=[En,n],u.textContent=`Trade Batch ${f+1}`,S(a,u)}),g(r),S(s,r),_t()}pr(["click"]);const Rn={25:1,26:1,42:1,49:1,56:1,63:1,70:2,95:4,117:1,124:4,134:1,150:2,216:1,434:1,482:1,483:1,484:1,488:1,554:1,556:1,593:3,594:3,595:3,619:1,943:1,944:1,945:1,946:1,2133:4,3108:3,3109:4,3110:4,3111:4,5815:4,8835:1,9091:1,9772:1,14775:2,209:1,447:1,573:2,1294:1,1361:1,2031:5,8177:2,448:2,486:1,579:2,1404:1,2030:5,9090:1,9711:2,9712:2,9713:2,9714:2,9716:1,9717:1,9718:1,9721:1,9722:1,9723:1,9724:1,186:2,490:1,1251:3,1654:1,3392:1,6042:1,6048:1,6049:1,6050:1,6136:1,7499:2},Mn=(s,t)=>{e(t).clear(),d(t,e(t),!0)},Cn=(s,t,r)=>{e(t).forEach(a=>{a.isNotable&&e(r).delete(a.skill)}),d(r,e(r),!0)},jn=(s,t,r)=>{e(t).forEach(a=>{a.isNotable||e(r).delete(a.skill)}),d(r,e(r),!0)},Nn=(s,t,r)=>{e(t).filter(a=>!a.isJewelSocket&&!a.isMastery).forEach(a=>e(r).add(a.skill)),d(r,e(r),!0)};var zn=(s,t)=>d(t,!0),qn=T("<span>Results</span>"),Ln=T("<span>Timeless Jewel</span>"),Jn=(s,t)=>d(t,!e(t)),Dn=T("<!> <button>Grouped</button>",1),Wn=(s,t)=>d(t,!e(t)),Fn=T('<div class="flex flex-row"><!> <button class="bg-neutral-100/20 px-4 p-1 rounded"> </button></div>'),Yn=(s,t)=>t("seed"),Kn=(s,t)=>t("stats"),Gn=T('<div class="mt-2"> </div>'),Hn=(s,t)=>d(t,!e(t)),Un=(s,t)=>d(t,!e(t)),Xn=(s,t,r,a)=>t(e(r),e(a).passives),Bn=T('<button class="cursor-pointer"><span> </span> <span class="text-white"> </span></button>'),Vn=T("<ul></ul>"),Qn=(s,t,r,a)=>t(e(r),e(a).passives),Zn=T('<button class="cursor-pointer"><span> </span> <span class="text-white"> </span></button>'),$n=(s,t,r,a)=>t(e(r),e(a).passives),ei=T('<button class="cursor-pointer"><span> </span> <span class="text-white"> </span></button>'),ti=T('<div class="overflow-auto mt-4"><h3>Notables</h3> <ul></ul> <h3 class="mt-2">Smalls</h3> <ul></ul></div>'),ri=T('<div class="flex flex-row mt-4 items-end"><div class="flex-grow"><h3 class="mb-2">Sort Order</h3> <!></div> <div class="ml-2"><button>Colors</button></div> <div class="ml-2"><button>Split</button></div></div> <!>',1),si=T('<div class="mt-4"><h3 class="mb-2">Seed</h3> <input type="number"/> <!></div> <!>',1),ai=(s,t,r,a)=>t(e(r)[Number(a)].id),ni=T('<div class="mb-4 flex flex-row items-start flex-col border-neutral-100/40 border-b pb-4"><div><button class="p-2 px-4 bg-red-500/40 rounded mr-2">-</button> <span> </span></div> <div class="mt-2 flex flex-row"><div class="mr-4 flex flex-row items-center"><div class="mr-2">Min:</div> <input type="number" min="0"/></div> <div class="flex flex-row items-center"><div class="mr-2">Weight:</div> <input type="number" min="0"/></div> <div class="flex flex-row items-center"><div class="mr-2">Minimum Stat Total:</div> <input type="number" min="0"/></div></div></div>'),ii=(s,t)=>t(),li=T('<div class="mt-4 flex flex-col overflow-auto min-h-[100px]"></div> <div class="flex flex-col mt-2"><div class="flex flex-row items-center"><div class="mr-2 min-w-fit">Minimum Total Weight:</div> <input type="number" min="0"/></div></div> <div class="flex flex-col mt-2"><div class="flex flex-row items-center"><div class="mr-2 min-w-fit">Minimum Stat Total:</div> <input type="number" min="0"/></div></div> <div class="flex flex-col mt-4"><div class="flex flex-row"><button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2">Select All</button> <button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2">Notables</button> <button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2">Passives</button> <button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 flex-grow">Deselect</button></div> <div class="flex flex-row mt-2"><button class="p-2 px-3 bg-green-500/40 rounded disabled:bg-green-900/40 flex-grow"><!></button></div></div>',1),oi=T('<div class="mt-4"><h3 class="mb-2">Add Stat</h3> <!></div> <!>',1),ui=T('<h2 class="mt-4">Click on a jewel socket</h2>'),ci=T('<div class="mt-4 w-full flex flex-row"><button>Enter Seed</button> <button>Select Stats</button></div> <!> <!>',1),di=T('<div class="mt-4"><h3 class="mb-2">Conqueror</h3> <!></div> <!>',1),vi=T("<!> <!>",1),fi=T("<!> <!>",1),hi=T('<div class="w-screen md:w-10/12 lg:w-2/3 xl:w-1/2 2xl:w-5/12 3xl:w-1/3 4xl:w-1/4 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen"><div class="p-4 max-h-screen flex flex-col"><div class="flex flex-row justify-between mb-2"><div class="flex flex-row items-center"><button class="burger-menu mr-3" aria-label="Open menu"><div></div> <div></div> <div></div></button> <h3 class="flex-grow"><!></h3></div> <!></div> <!> <!></div></div>'),gi=(s,t)=>d(t,!1),mi=T('<button class="burger-menu absolute top-0 left-0 bg-black/80 backdrop-blur-sm rounded-br-lg p-4 pt-5" aria-label="Close menu"><div></div> <div></div> <div></div></button>'),bi=T('<!> <div class="text-orange-500 absolute bottom-0 right-0 m-2"><a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener noreferrer">Source of official branch code(Github)</a> <a href="https://github.com/BlazesRus/timeless-jewels" target="_blank" rel="noopener noreferrer">Source (Github)</a></div>',1);function Ti(s,t){var Sr,kr,Tt,Ut;pt(t,!0);const[r,a]=ya(),n=()=>wa(Na,"$page",r),f=typeof window<"u"?window:void 0,u=typeof localStorage<"u"?localStorage:void 0,_=typeof URL<"u"?URL:void 0,o=n().url.searchParams,c=((Sr=Me)==null?void 0:Sr.TimelessJewels)??{},h=((kr=Me)==null?void 0:kr.TimelessJewelConquerors)??{},b=((Tt=Me)==null?void 0:Tt.TreeToPassive)??{},k=(Ut=Me)!=null&&Ut.PossibleStats?JSON.parse(Me.PossibleStats):{},P=Object.keys(c).map(l=>({value:Number(l),label:c[Number(l)]}));let v=A(_e(o.has("jewel")&&P.find(l=>l.value===Number(o.get("jewel")))||void 0)),D=re(()=>e(v)&&h[e(v).value]?Object.keys(h[e(v).value]??{}).map(l=>({value:l,label:l})):[]),E=re(()=>e(D).concat([{value:"Any",label:"Any"}])),W=A(_e(o.has("conqueror")?{value:o.get("conqueror"),label:o.get("conqueror")}:void 0)),j=re(()=>{var l;return((l=e(W))==null?void 0:l.value)==="Any"}),N=re(()=>{var l;return((l=e(W))==null?void 0:l.value)==="Any"?e(D)[0]:e(W)}),x=A(_e(o.has("seed")&&o.get("seed")?Number(o.get("seed")):0)),$=A(_e(o.has("location")&&o.get("location")?Number(o.get("location")):void 0)),M=re(()=>e($)?Ta(ut.nodes[e($)]).filter(l=>!l.isJewelSocket&&!l.isMastery):[]);function Ke(l){if(typeof l=="number")return b&&typeof b[l]<"u"?b[l]:void 0}let Ce=re(()=>!e(x)||!e(v)||!e(N)||!h[e(v).value]||Object.keys(h[e(v).value]??{}).indexOf(e(N).value??"")<0?[]:e(M).map(l=>Ke(l.skill)).filter(Boolean).map(l=>{var I,R,G;return{node:l.Index,result:Ds.Calculate(((I=e(v))==null?void 0:I.value)??0,e(x),((R=e(v))==null?void 0:R.value)??0,((G=e(N))==null?void 0:G.value)??"")}})),z=A(_e({}));if(o.has("stat")){let l={};for(const I of o.getAll("stat")){const R=parseInt(I);l[R]={weight:1,min:0,id:R,minStatTotal:0}}d(z,l,!0)}let Pe=A(_e(o.has("mode")?o.get("mode"):""));const Le=()=>{if(!f||!_)return;const l=new _(f.location.origin+f.location.pathname);e(v)&&l.searchParams.append("jewel",e(v).value.toString()),e(W)&&e(W).value!==void 0&&e(W).value!==null&&e(W).value!==""?l.searchParams.append("conqueror",String(e(W).value)):l.searchParams.append("conqueror","Any"),typeof e(x)=="number"&&!isNaN(e(x))&&l.searchParams.append("seed",e(x).toString()),e($)!==void 0&&e($)!==null&&l.searchParams.append("location",e($).toString()),e(Pe)&&e(Pe)!==""&&l.searchParams.append("mode",e(Pe)),Object.keys(e(z)).forEach(I=>{l.searchParams.append("stat",I.toString())}),Sa(l.toString())},_r=l=>{d(Pe,l,!0),Le()};let ce=A(_e(new Set));const Lr=l=>{l.isJewelSocket?(d($,l.skill,!0),Le()):l.isMastery||(e(ce).has(l.skill)?e(ce).delete(l.skill):e(ce).add(l.skill),d(ce,e(ce),!0))};function $e(l){return Rn[String(l)]||0}function ct(l,I){return!l||!k[l]?0:k[l][I]||0}function wt(l){return l.replace(/<script.*?>.*?<\/script>/gi,"").replace(/<style.*?>.*?<\/style>/gi,"").replace(/on\w+="[^"]*"/gi,"")}let wr=re(()=>e(v)?Object.keys(k[e(v).value]):[]),yr=re(()=>e(wr).map(l=>{const I=parseInt(l);return{label:Ur(I),value:I}}).filter(l=>!(l.value in e(z)))),Et=A(void 0);const Jr=l=>{e(z)[l.detail.value]={weight:1,min:0,id:l.detail.value,minStatTotal:0},d(z,e(z),!0),e(Et)&&e(Et).handleClear(),Le()},i=l=>{const I=Object.fromEntries(Object.entries(e(z)).filter(([R])=>Number(R)!==l));d(z,I,!0),Le()},O=()=>{d(z,{},!0),Le()};let B=A(!1),se=A(0),ie=A(0),V=A(!1),Je=A(0),K=A(void 0),je=A(1),Ne=A(null);const et=()=>{if(!e($)||!e(v)||!e(N))return;d(je,e(v).value,!0),d(Ne,e(j)?"":e(N).value??"",!0),d(V,!0),d(K,void 0);const l={jewel:e(v).value,conqueror:e(N).value??"",nodes:e(M).filter(I=>!e(ce).has(I.skill)).map(I=>Ke(I.skill)).filter(Boolean).map(I=>I.Index),stats:Object.keys(e(z)).map(I=>e(z)[Number(I)]),minTotalWeight:e(se),minTotalStats:e(ie)};Es&&Es.search(l,Oa(I=>(d(Je,I,!0),Promise.resolve()))).then(I=>{d(K,I,!0),d(V,!1),d(B,!0)})};let tt=A(_e([]));const Ge=(l,I)=>{d(x,l,!0),d(tt,I,!0),Le()};let It=A(_e((u==null?void 0:u.getItem("groupResults"))===null?!0:(u==null?void 0:u.getItem("groupResults"))==="true"));lt(()=>{u==null||u.setItem("groupResults",e(It)?"true":"false")});const Ht={physical:"#c79d93",cast:"#b3f8fe",fire:"#ff9a77",cold:"#93d8ff",lightning:"#f8cb76",attack:"#da814d",life:"#c96e6e",chaos:"#d8a7d3",unique:"#af6025",critical:"#b2a7d6"};function q(l){return Ht[l]||"#fff"}function y(l){return Me.TimelessJewelSeedRanges&&Me.TimelessJewelSeedRanges[l]?Me.TimelessJewelSeedRanges[l]:{Min:0,Max:0}}const le=l=>(Object.keys(Ht).forEach(I=>{const R=q(I);l=l.replace(new RegExp(`(${I}(?:$|\\s))|((?:^|\\s)${I})`,"gi"),`<span style='color: ${R}; font-weight: bold'>$1$2</span>`)}),l),L=(l,I,R)=>{const G={};return l.forEach(F=>{ut.nodes[F.node].isKeystone||R!=="all"&&(R==="notables"&&!ut.nodes[F.node].isNotable||R==="passives"&&ut.nodes[F.node].isNotable)||(F.result.AlternatePassiveSkill&&F.result.AlternatePassiveSkill.StatsKeys&&F.result.AlternatePassiveSkill.StatsKeys.forEach(H=>{G[H]=[...G[H]||[],F.node]}),F.result.AlternatePassiveAdditionInformations&&F.result.AlternatePassiveAdditionInformations.forEach(H=>{var be;(be=H.AlternatePassiveAddition)!=null&&be.StatsKeys&&H.AlternatePassiveAddition.StatsKeys.forEach(ae=>{G[ae]=[...G[ae]||[],F.node]})}))}),Object.keys(G).map(F=>{const H=Ur(parseInt(F));return{stat:I?le(H):H,rawStat:H,id:F,passives:G[Number(F)]}})},he=(l,I)=>{switch(I){case"alphabet":return l.sort((R,G)=>R.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase().localeCompare(G.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase()));case"count":return l.sort((R,G)=>G.passives.length-R.passives.length);case"rarity":return l.sort((R,G)=>{var F,H;return ct((F=e(v))==null?void 0:F.value,R.id)-ct((H=e(v))==null?void 0:H.value,G.id)});case"value":return l.sort((R,G)=>{var be,ae;const F=$e(R.id)||0,H=$e(G.id)||0;return F!=H?H-F:ct((be=e(v))==null?void 0:be.value,R.id)-ct((ae=e(v))==null?void 0:ae.value,G.id)})}return l},dt=[{label:"Count",value:"count"},{label:"Alphabetical",value:"alphabet"},{label:"Rarity",value:"rarity"},{label:"Value",value:"value"}];let ge=A(_e(dt[0]));lt(()=>{u==null||u.setItem("sortOrder",e(ge).value)});let de=A(_e((u==null?void 0:u.getItem("colored"))===null?!0:(u==null?void 0:u.getItem("colored"))==="true"));lt(()=>{u==null||u.setItem("colored",e(de)?"true":"false")});let J=A(_e((u==null?void 0:u.getItem("split"))===null?!0:(u==null?void 0:u.getItem("split"))==="true"));lt(()=>{u==null||u.setItem("split",e(J)?"true":"false")});const rt=l=>{var be;if(l.type!=="paste")return;const I=(be=l.clipboardData||f&&f.clipboardData)==null?void 0:be.getData("text");if(!I)return;const R=I.split(`
`);if(R.length<14)return;const G=P.find(ae=>ae.label===R[2]);if(!G)return;let F,H;for(let ae=10;ae<R.length;ae++){const Xt=Object.keys(h[G.value]??{});Xt.length==0?H="Any":H=Xt.find(Bt=>R[ae].indexOf(Bt)>=0)??"Any";const yt=/(\d+)/.exec(R[ae]);if(!(!yt||yt.length===0)){F=parseInt(yt[1]);break}}!H||!F||(d(B,!1),d(Pe,"seed"),d(x,F,!0),d(v,G,!0),d(W,{label:H,value:H},!0),Le())};let oe=A(!1),ee=A(!1),De=A(_e([]));lt(()=>{e(K)&&e(B)&&(d(De,Ia(e(je),e(Ne),e(K).raw),!0),e(De).length===1&&d(ee,!1))}),zt("paste",dr,rt);const Ae=re(()=>e(v)?e(v).value:0),ve=re(()=>e(N)?e(N).value??"":""),ze=re(()=>!e($)),xr=re(()=>[...Array.from(e(ce)).filter(l=>typeof l=="number")]);Sn(s,{clickNode:Lr,get circledNode(){return e($)},get selectedJewel(){return e(Ae)},get selectedConqueror(){return e(ve)},get highlighted(){return e(tt)},get seed(){return e(x)},get highlightJewels(){return e(ze)},get disabled(){return e(xr)},children:(l,I)=>{var R=bi(),G=we(R);{var F=be=>{var ae=hi(),Xt=p(ae),yt=p(Xt),Bt=p(yt),ns=p(Bt);ns.__click=[zn,oe];var is=w(ns,2),Vs=p(is);{var Qs=ue=>{var Ee=qn();S(ue,Ee)},Zs=ue=>{var Ee=Ln();S(ue,Ee)};X(Vs,ue=>{e(B)?ue(Qs):ue(Zs,!1)})}g(is),g(Bt);var $s=w(Bt,2);{var ea=ue=>{var Ee=Fn(),vt=p(Ee);{var Vt=xe=>{var ft=Dn(),Pr=we(ft);An(Pr,{get queries(){return e(De)},get showTradeLinks(){return e(ee)},set showTradeLinks(at){d(ee,at,!0)}});var Qt=w(Pr,2);let Ar;Qt.__click=[Jn,It],Z(at=>{Ar=Fe(Qt,1,"p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2",null,Ar,at),Qt.disabled=!e(K)},[()=>({grouped:e(It)})]),S(xe,ft)};X(vt,xe=>{e(B)&&xe(Vt)})}var xt=w(vt,2);xt.__click=[Wn,B];var st=p(xt,!0);g(xt),g(Ee),Z(()=>ye(st,e(B)?"Config":"Results")),S(ue,Ee)};X($s,ue=>{e(K)&&ue(ea)})}g(yt);var ls=w(yt,2);{var ta=ue=>{var Ee=vi(),vt=we(Ee);Ir(vt,{get items(){return P},get value(){return e(v)},set value(st){d(v,st,!0)},$$events:{change:O}});var Vt=w(vt,2);{var xt=st=>{var xe=di(),ft=we(xe),Pr=w(p(ft),2);Ir(Pr,{get items(){return e(E)},get value(){return e(W)},set value(at){d(W,at,!0)},$$events:{change:Le}}),g(ft);var Qt=w(ft,2);{var Ar=at=>{var os=ci(),Dr=we(os),Wr=p(Dr);let us;Wr.__click=[Yn,_r];var cs=w(Wr,2);let ds;cs.__click=[Kn,_r],g(Dr);var vs=w(Dr,2);{var aa=qe=>{var ht=si(),Zt=we(ht),He=w(p(Zt),2);jt(He);var Er=w(He,2);{var $t=ne=>{var te=Gn(),Se=p(te);g(te),Z((pe,St)=>ye(Se,`Seed must be between ${pe??""} and ${St??""}`),[()=>{var pe;return y(((pe=e(v))==null?void 0:pe.value)??0).Min},()=>{var pe;return y(((pe=e(v))==null?void 0:pe.value)??0).Max}]),S(ne,te)};X(Er,ne=>{var te,Se;(e(x)<y(((te=e(v))==null?void 0:te.value)??0).Min||e(x)>y(((Se=e(v))==null?void 0:Se.value)??0).Max)&&ne($t)})}g(Zt);var Fr=w(Zt,2);{var Yr=ne=>{var te=ri(),Se=we(te),pe=p(Se),St=w(p(pe),2);Ir(St,{get items(){return dt},get value(){return e(ge)},set value(ke){d(ge,ke,!0)}}),g(pe);var Ot=w(pe,2),er=p(Ot);let Rt;er.__click=[Hn,de],g(Ot);var tr=w(Ot,2),rr=p(tr);let sr;rr.__click=[Un,J],g(tr),g(Se);var ar=w(Se,2);{var nr=ke=>{var Ie=Vn();let Ue;Ze(Ie,21,()=>he(L(e(Ce),e(de),"all"),e(ge).value),Te=>Te.id,(Te,Xe)=>{var nt=Bn();nt.__click=[Xn,Ge,x,Xe];var me=p(nt);let C;var Y=p(me);g(me);var Q=w(me,2),We=p(Q,!0);g(Q),g(nt),Z((gt,Be)=>{C=Fe(me,1,"font-bold",null,C,gt),ye(Y,`(${e(Xe).passives.length??""})`),ye(We,Be)},[()=>({"text-white":$e(e(Xe).id)<3}),()=>wt(e(Xe).stat)]),S(Te,nt)}),g(Ie),Z(Te=>Ue=Fe(Ie,1,"mt-4 overflow-auto",null,Ue,Te),[()=>({rainbow:e(de)})]),S(ke,Ie)},ir=ke=>{var Ie=ti(),Ue=w(p(Ie),2);let Te;Ze(Ue,21,()=>he(L(e(Ce),e(de),"notables"),e(ge).value),me=>me.id,(me,C)=>{var Y=Zn();Y.__click=[Qn,Ge,x,C];var Q=p(Y);let We;var gt=p(Q);g(Q);var Be=w(Q,2),lr=p(Be,!0);g(Be),g(Y),Z((Mt,kt)=>{We=Fe(Q,1,"font-bold",null,We,Mt),ye(gt,`(${e(C).passives.length??""})`),ye(lr,kt)},[()=>({"text-white":$e(e(C).id)<3}),()=>wt(e(C).stat)]),S(me,Y)}),g(Ue);var Xe=w(Ue,4);let nt;Ze(Xe,21,()=>he(L(e(Ce),e(de),"passives"),e(ge).value),me=>me.id,(me,C)=>{var Y=ei();Y.__click=[$n,Ge,x,C];var Q=p(Y);let We;var gt=p(Q);g(Q);var Be=w(Q,2),lr=p(Be,!0);g(Be),g(Y),Z((Mt,kt)=>{We=Fe(Q,1,"font-bold",null,We,Mt),ye(gt,`(${e(C).passives.length??""})`),ye(lr,kt)},[()=>({"text-white":$e(e(C).id)<3}),()=>wt(e(C).stat)]),S(me,Y)}),g(Xe),g(Ie),Z((me,C)=>{Te=Fe(Ue,1,"mt-1",null,Te,me),nt=Fe(Xe,1,"mt-1",null,nt,C)},[()=>({rainbow:e(de)}),()=>({rainbow:e(de)})]),S(ke,Ie)};X(ar,ke=>{e(J)?ke(ir,!1):ke(nr)})}Z((ke,Ie)=>{Rt=Fe(er,1,"bg-neutral-500/20 p-2 px-4 rounded",null,Rt,ke),sr=Fe(rr,1,"bg-neutral-500/20 p-2 px-4 rounded",null,sr,Ie)},[()=>({selected:e(de)}),()=>({selected:e(J)})]),S(ne,te)};X(Fr,ne=>{var te,Se;e(x)>=y(((te=e(v))==null?void 0:te.value)??0).Min&&e(x)<=y(((Se=e(v))==null?void 0:Se.value)??0).Max&&ne(Yr)})}Z((ne,te)=>{Qr(He,"min",ne),Qr(He,"max",te)},[()=>{var ne;return y(((ne=e(v))==null?void 0:ne.value)??0).Min},()=>{var ne;return y(((ne=e(v))==null?void 0:ne.value)??0).Max}]),zt("blur",He,Le),Nt(He,()=>e(x),ne=>d(x,ne)),S(qe,ht)},na=(qe,ht)=>{{var Zt=He=>{var Er=oi(),$t=we(Er),Fr=w(p($t),2);Zr(Ir(Fr,{get items(){return e(yr)},$$events:{change:Jr}}),te=>d(Et,te,!0),()=>e(Et)),g($t);var Yr=w($t,2);{var ne=te=>{var Se=li(),pe=we(Se);Ze(pe,20,()=>Object.keys(e(z)),C=>C,(C,Y)=>{var Q=ni(),We=p(Q),gt=p(We);gt.__click=[ai,i,z,Y];var Be=w(gt,2),lr=p(Be,!0);g(Be),g(We);var Mt=w(We,2),kt=p(Mt),fs=w(p(kt),2);jt(fs),g(kt);var Kr=w(kt,2),hs=w(p(Kr),2);jt(hs),g(Kr);var gs=w(Kr,2),ms=w(p(gs),2);jt(ms),g(gs),g(Mt),g(Q),Z(Pt=>ye(lr,Pt),[()=>Ur(e(z)[Number(Y)].id)]),Nt(fs,()=>e(z)[Number(Y)].min,Pt=>e(z)[Number(Y)].min=Pt),Nt(hs,()=>e(z)[Number(Y)].weight,Pt=>e(z)[Number(Y)].weight=Pt),Nt(ms,()=>e(z)[Number(Y)].minStatTotal,Pt=>e(z)[Number(Y)].minStatTotal=Pt),S(C,Q)}),g(pe);var St=w(pe,2),Ot=p(St),er=w(p(Ot),2);jt(er),g(Ot),g(St);var Rt=w(St,2),tr=p(Rt),rr=w(p(tr),2);jt(rr),g(tr),g(Rt);var sr=w(Rt,2),ar=p(sr),nr=p(ar);nr.__click=[Mn,ce];var ir=w(nr,2);ir.__click=[Cn,M,ce];var ke=w(ir,2);ke.__click=[jn,M,ce];var Ie=w(ke,2);Ie.__click=[Nn,M,ce],g(ar);var Ue=w(ar,2),Te=p(Ue);Te.__click=[ii,et];var Xe=p(Te);{var nt=C=>{var Y=cr();Z(Q=>ye(Y,`${e(Je)??""} / ${Q??""}`),[()=>{var Q;return y(((Q=e(v))==null?void 0:Q.value)??0).Max}]),S(C,Y)},me=C=>{var Y=cr("Search");S(C,Y)};X(Xe,C=>{e(V)?C(nt):C(me,!1)})}g(Te),g(Ue),g(sr),Z(()=>{nr.disabled=e(V)||e(ce).size==0,ir.disabled=e(V)||e(ce).size==0,ke.disabled=e(V)||e(ce).size==0,Ie.disabled=e(V)||e(ce).size>=e(M).length,Te.disabled=e(V)}),Nt(er,()=>e(se),C=>d(se,C)),Nt(rr,()=>e(ie),C=>d(ie,C)),S(te,Se)};X(Yr,te=>{Object.keys(e(z)).length>0&&te(ne)})}S(He,Er)};X(qe,He=>{e(Pe)==="stats"&&He(Zt)},ht)}};X(vs,qe=>{e(Pe)==="seed"?qe(aa):qe(na,!1)})}var ia=w(vs,2);{var la=qe=>{var ht=ui();S(qe,ht)};X(ia,qe=>{e($)||qe(la)})}Z((qe,ht)=>{us=Fe(Wr,1,"selection-button",null,us,qe),ds=Fe(cs,1,"selection-button",null,ds,ht)},[()=>({selected:e(Pe)==="seed"}),()=>({selected:e(Pe)==="stats"})]),S(at,os)};X(Qt,at=>{e(N)&&e(v)&&h[e(v).value]&&Object.keys(h[e(v).value]??{}).indexOf(e(N).value??"")>=0&&at(Ar)})}S(st,xe)};X(Vt,st=>{e(v)&&st(xt)})}S(ue,Ee)};X(ls,ue=>{e(B)||ue(ta)})}var ra=w(ls,2);{var sa=ue=>{var Ee=fi(),vt=we(Ee);{var Vt=xe=>{On(xe,{get queries(){return e(De)}})};X(vt,xe=>{e(ee)&&xe(Vt)})}var xt=w(vt,2);{var st=xe=>{const ft=re(()=>e(Ne)??"");Ua(xe,{get searchResults(){return e(K)},get groupResults(){return e(It)},highlight:Ge,get jewel(){return e(je)},get conqueror(){return e(ft)}})};X(xt,xe=>{e(K)&&e(K).grouped&&e(K).raw&&xe(st)})}S(ue,Ee)};X(ra,ue=>{e(K)&&e(B)&&ue(sa)})}g(Xt),g(ae),S(be,ae)},H=be=>{var ae=mi();ae.__click=[gi,oe],S(be,ae)};X(G,be=>{e(oe)?be(H,!1):be(F)})}ba(2),S(l,R)},$$slots:{default:!0}}),_t(),a()}pr(["click"]);export{Ti as component};
