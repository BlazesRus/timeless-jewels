var ra=Object.defineProperty;var sa=Object.getPrototypeOf;var aa=Reflect.get;var fs=s=>{throw TypeError(s)};var na=(s,t,r)=>t in s?ra(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var hs=(s,t,r)=>na(s,typeof t!="symbol"?t+"":t,r),Hr=(s,t,r)=>t.has(s)||fs("Cannot "+r);var g=(s,t,r)=>(Hr(s,t,"read from private field"),r?r.call(s):t.get(s)),U=(s,t,r)=>t.has(s)?fs("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,r),ut=(s,t,r,a)=>(Hr(s,t,"write to private field"),a?a.call(s,r):t.set(s,r),r),xe=(s,t,r)=>(Hr(s,t,"access private method"),r);var gs=(s,t,r,a)=>({set _(i){ut(s,t,i,r)},get _(){return g(s,t,a)}}),ms=(s,t,r)=>aa(sa(s),r,t);import{b as bs,d as ia,f as O,a as T,c as Ar,t as or}from"../chunks/B9Buoydv.js";import{t as B,j as Vr,k as _s,aa as la,ar as oa,z as Qr,ah as ua,ak as ca,ai as da,q as va,a8 as Sr,i as fa,E as ha,x as ga,N as Cs,as as ma,K as ba,D as Ms,P as _a,d as v,at as At,g as e,au as pa,s as E,a as ke,c as G,av as wa,u as Me,aw as ya,p as dt,h as le,f as S,e as b,r as f,b as vt,ax as ur,n as Sa}from"../chunks/B9WkbP0M.js";import{e as cr,d as br,s as je}from"../chunks/BFEoQIMk.js";import{i as X}from"../chunks/BuX9eZff.js";import{a as xa,c as ka,d as js,s as Zr,e as Xe,i as $r,p as Ta,S as xr,f as Ne,r as Ot,b as Ct}from"../chunks/B-Uo2khg.js";import{p as $e,r as Js,b as es,s as Pa,a as Ia}from"../chunks/CbfR4m3C.js";import{a as ps,o as Ea}from"../chunks/DCsZaa1r.js";import{a as et,d as Kr,t as ws,b as kr,o as ys,c as Tr,e as Yr,i as Ss,f as xs,g as Ra,h as ks,j as Aa,k as as,m as Er,n as Oa,p as Ca,q as Ma,s as Ts,r as ja}from"../chunks/Bz1gRGcR.js";import{d as I,c as qs}from"../chunks/CEYB05p7.js";import{g as Ja}from"../chunks/DaZvbg5m.js";function Ur(s,t,r=!1,a=!1,i=!1){var u=s,_="";B(()=>{var m=la;if(_===(_=t()??"")){Vr&&_s();return}if(m.nodes_start!==null&&(oa(m.nodes_start,m.nodes_end),m.nodes_start=m.nodes_end=null),_!==""){if(Vr){Qr.data;for(var n=_s(),c=n;n!==null&&(n.nodeType!==8||n.data!=="");)c=n,n=ua(n);if(n===null)throw ca(),da;bs(Qr,c),u=va(n);return}var h=_+"";r?h=`<svg>${h}</svg>`:a&&(h=`<math>${h}</math>`);var d=ia(h);if((r||a)&&(d=Sr(d)),bs(Sr(d),d.lastChild),r||a)for(;Sr(d);)u.before(Sr(d));else u.before(d)}})}function Ns(s,t,...r){var a=s,i=Cs,u;fa(()=>{i!==(i=t())&&(u&&(ma(u),u=null),u=ga(()=>i(a,...r)))},ha),Vr&&(a=Qr)}var ct,jt,fr,Or,zs;const Cr=class Cr{constructor(t){U(this,Or);U(this,ct,new WeakMap);U(this,jt);U(this,fr);ut(this,fr,t)}observe(t,r){var a=g(this,ct).get(t)||new Set;return a.add(r),g(this,ct).set(t,a),xe(this,Or,zs).call(this).observe(t,g(this,fr)),()=>{var i=g(this,ct).get(t);i.delete(r),i.size===0&&(g(this,ct).delete(t),g(this,jt).unobserve(t))}}};ct=new WeakMap,jt=new WeakMap,fr=new WeakMap,Or=new WeakSet,zs=function(){return g(this,jt)??ut(this,jt,new ResizeObserver(t=>{for(var r of t){Cr.entries.set(r.target,r);for(var a of g(this,ct).get(r.target)||[])a(r)}}))},hs(Cr,"entries",new WeakMap);let ts=Cr;var qa=new ts({box:"border-box"});function Ps(s,t,r){var a=qa.observe(s,()=>r(s[t]));ba(()=>(Ms(()=>r(s[t])),a))}function Na(s,t,r,a,i){var u=()=>{a(r[s])};r.addEventListener(t,u),u(),(r===document.body||r===window||r===document)&&_a(()=>{r.removeEventListener(t,u)})}function ir(s){v(s,s.v+1)}const za=s=>{const t=s*2,r=t>>16&255,a=t>>8&255,i=t&255;return[r,a,i]},La=([s,t,r])=>{const a=(s<<16|t<<8|r)/2;return a%1?0:a},Da=["filter","shadowBlur","globalCompositeOperation","globalAlpha","fillStyle","strokeStyle"],Wa=(s,t,{rgbToId:r=La,idToRgb:a=za}={})=>{const i=s.getContext("2d",t),u=new OffscreenCanvas(s.width,s.height),_=u.getContext("2d",{willReadFrequently:!1,alpha:!1});return new Proxy(i,{get(m,n){const{width:c,height:h}=s;if((c!==u.width||h!==u.height)&&(u.width=c,u.height=h),n==="getLayerIdAt")return(R,w)=>{const[p,N,P]=_.getImageData(R,w,1,1).data;return r([p,N,P])};if(n==="setCurrentLayerId")return R=>{const[w,p,N]=a(R),P=`rgb(${w},${p},${N})`;_.fillStyle=P,_.strokeStyle=P};const d=m[n];return typeof d!="function"?d:(...R)=>{let w=n,p=R;return n==="drawImage"&&(w="fillRect",p=R.slice(-4)),_[w](...p),Reflect.apply(d,m,R)}},set(m,n,c){return m[n]=c,Da.includes(n)||(_[n]=c),!0}})};var Ye,Ue,Ze,Jt,Rr;const ns=class ns extends Map{constructor(r){super();U(this,Jt);U(this,Ye,new Map);U(this,Ue,At(0));U(this,Ze,At(0));if(r){for(var[a,i]of r)super.set(a,i);g(this,Ze).v=super.size}}has(r){var a=g(this,Ye),i=a.get(r);if(i===void 0){var u=super.get(r);if(u!==void 0)i=At(0),a.set(r,i);else return e(g(this,Ue)),!1}return e(i),!0}forEach(r,a){xe(this,Jt,Rr).call(this),super.forEach(r,a)}get(r){var a=g(this,Ye),i=a.get(r);if(i===void 0){var u=super.get(r);if(u!==void 0)i=At(0),a.set(r,i);else{e(g(this,Ue));return}}return e(i),super.get(r)}set(r,a){var d;var i=g(this,Ye),u=i.get(r),_=super.get(r),m=super.set(r,a),n=g(this,Ue);if(u===void 0)i.set(r,At(0)),v(g(this,Ze),super.size),ir(n);else if(_!==a){ir(u);var c=n.reactions===null?null:new Set(n.reactions),h=c===null||!((d=u.reactions)!=null&&d.every(R=>c.has(R)));h&&ir(n)}return m}delete(r){var a=g(this,Ye),i=a.get(r),u=super.delete(r);return i!==void 0&&(a.delete(r),v(g(this,Ze),super.size),v(i,-1),ir(g(this,Ue))),u}clear(){if(super.size!==0){super.clear();var r=g(this,Ye);v(g(this,Ze),0);for(var a of r.values())v(a,-1);ir(g(this,Ue)),r.clear()}}keys(){return e(g(this,Ue)),super.keys()}values(){return xe(this,Jt,Rr).call(this),super.values()}entries(){return xe(this,Jt,Rr).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return e(g(this,Ze)),super.size}};Ye=new WeakMap,Ue=new WeakMap,Ze=new WeakMap,Jt=new WeakSet,Rr=function(){e(g(this,Ue));var r=g(this,Ye);if(g(this,Ze).v!==r.size)for(var a of ms(ns.prototype,this,"keys").call(this))r.has(a)||r.set(a,At(0));for(var[,i]of g(this,Ye))e(i)};let dr=ns;const Fa=s=>{if(window.TouchEvent&&s instanceof TouchEvent){const{left:a,top:i}=s.target.getBoundingClientRect(),{clientX:u,clientY:_}=s.changedTouches[0];return{x:u-a,y:_-i}}const{offsetX:t,offsetY:r}=s;return{x:t,y:r}},Is=(s,t)=>{var r,a;s instanceof MouseEvent&&((r=s.target)==null||r.dispatchEvent(new PointerEvent(`layer.pointer${t}`,s)),(a=s.target)==null||a.dispatchEvent(new MouseEvent(`layer.mouse${t}`,s)))},Ha=["onclick","oncontextmenu","ondblclick","onauxclick","onmousedown","onmouseenter","onmouseleave","onmouseup","onmousemove","onwheel","ontouchstart","ontouchcancel","ontouchend","ontouchmove","onpointerenter","onpointerleave","onpointerdown","onpointerup","onpointermove","onpointercancel","onlayer.mouseenter","onlayer.mouseleave","onlayer.pointerenter","onlayer.pointerleave","onfocus","onblur","onfullscreenchange","onfullscreenerror","onscroll","oncut","oncopy","onpaste","onkeydown","onkeypress","onkeyup","onmouseover","onmouseout","onselect","ondrag","ondragend","ondragenter","ondragstart","ondragleave","ondragover","ondrop","onpointerover","onpointerout","ongotpointercapture","onlostpointercapture"],Ka=s=>console.warn("[svelte-canvas] %s",s),Ls=Symbol("register"),Ya=s=>pa(Ls)(s);var qt,Nt,zt,Mr,jr,hr,xt,ze,Lt,Dt,gr,Wt,mr,ne,Ds,Ws,Fs,Hs,rs,Ks,Ys;class Ua{constructor(t){U(this,ne);U(this,qt,new dr);U(this,Nt,new dr);U(this,zt,new dr);U(this,Mr,1);U(this,jr,Date.now());U(this,hr,E(0));U(this,xt);U(this,ze);U(this,Lt);U(this,Dt);U(this,gr,E(ke([])));U(this,Wt,E(0));U(this,mr,G(()=>g(this,zt).get(e(g(this,Wt)))));ut(this,ze,t),wa(Ls,this.register.bind(this))}init(t,r){ut(this,xt,t),xe(this,ne,Hs).call(this,r),Me(()=>xe(this,ne,rs).call(this)),Me(()=>xe(this,ne,Fs).call(this)),Me(()=>(e(g(this,hr)),xe(this,ne,Ks).call(this))),ps(()=>xe(this,ne,Ys).call(this))}redraw(){ya(g(this,hr))}register({setup:t,render:r,...a}){const i=xe(this,ne,Ds).call(this);return t&&g(this,qt).set(i,t),g(this,Nt).set(i,r),Object.keys(a).length&&(g(this,ze).layerEvents?g(this,zt).set(i,a):Ka("Canvas must have layerEvents={true} in order to use layer-level event handlers")),ps(()=>xe(this,ne,Ws).call(this,i)),i}createEventHandlers(){const t=i=>{const u=`on${i.type}`,_=g(this,ze).handlers[u];_==null||_(i)},r=i=>{const{pixelRatio:u}=g(this,ze),{x:_,y:m}=Fa(i);if(["touchstart","pointermove"].includes(i.type)){const h=g(this,xt).getLayerIdAt(_*u,m*u);e(g(this,Wt))!==h&&(Is(i,"leave"),v(g(this,Wt),h,!0),Is(i,"enter"))}if(!e(g(this,mr)))return;const n=`on${i.type.replace("layer.","")}`,c=e(g(this,mr))[n];c==null||c({x:_,y:m,originalEvent:i})},a=i=>{t(i),g(this,ze).layerEvents&&r(i)};return Ha.reduce((i,u)=>({...i,[u]:a}),{})}}qt=new WeakMap,Nt=new WeakMap,zt=new WeakMap,Mr=new WeakMap,jr=new WeakMap,hr=new WeakMap,xt=new WeakMap,ze=new WeakMap,Lt=new WeakMap,Dt=new WeakMap,gr=new WeakMap,Wt=new WeakMap,mr=new WeakMap,ne=new WeakSet,Ds=function(){return gs(this,Mr)._++},Ws=function(t){g(this,Nt).delete(t),g(this,zt).delete(t)},Fs=function(){const{onresize:t,width:r,height:a,pixelRatio:i}=g(this,ze);t==null||t({width:r,height:a,pixelRatio:i})},Hs=function(t){const r=()=>{const a=[...t.children];v(g(this,gr),a.map(i=>+i.dataset.layerId),!0)};ut(this,Dt,new MutationObserver(()=>r())),g(this,Dt).observe(t,{childList:!0}),r()},rs=function(){g(this,ze).autoplay?(Ms(()=>this.redraw()),ut(this,Lt,requestAnimationFrame(()=>xe(this,ne,rs).call(this)))):cancelAnimationFrame(g(this,Lt))},Ks=function(){var n,c,h;const t=g(this,xt),{width:r,height:a,pixelRatio:i,autoclear:u}=g(this,ze),_=Date.now()-g(this,jr),m={context:t,width:r,height:a,time:_};t.setTransform(i,0,0,i,0,0),u&&t.clearRect(0,0,r,a);for(const[d,R]of g(this,qt))R(m),g(this,qt).delete(d);for(const d of e(g(this,gr)))(c=(n=g(this,xt)).setCurrentLayerId)==null||c.call(n,d),(h=g(this,Nt).get(d))==null||h(m)},Ys=function(){var t;typeof window>"u"||((t=g(this,Dt))==null||t.disconnect(),cancelAnimationFrame(g(this,Lt)))};/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function Xa(s,t){var r=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(r!=null){var a,i,u,_,m=[],n=!0,c=!1;try{if(u=(r=r.call(s)).next,t===0){if(Object(r)!==r)return;n=!1}else for(;!(n=(a=u.call(r)).done)&&(m.push(a.value),m.length!==t);n=!0);}catch(h){c=!0,i=h}finally{try{if(!n&&r.return!=null&&(_=r.return(),Object(_)!==_))return}finally{if(c)throw i}}return m}}function Es(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),r.push.apply(r,a)}return r}function Te(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Es(Object(r),!0).forEach(function(a){Ga(s,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Es(Object(r)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(r,a))})}return s}function Ga(s,t,r){return t=sn(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function Ba(s,t){if(s==null)return{};var r={},a=Object.keys(s),i,u;for(u=0;u<a.length;u++)i=a[u],!(t.indexOf(i)>=0)&&(r[i]=s[i]);return r}function Va(s,t){if(s==null)return{};var r=Ba(s,t),a,i;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);for(i=0;i<u.length;i++)a=u[i],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(r[a]=s[a])}return r}function Rs(s,t){return Za(s)||Xa(s,t)||Us(s,t)||tn()}function Pr(s){return Qa(s)||$a(s)||Us(s)||en()}function Qa(s){if(Array.isArray(s))return ss(s)}function Za(s){if(Array.isArray(s))return s}function $a(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Us(s,t){if(s){if(typeof s=="string")return ss(s,t);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ss(s,t)}}function ss(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=s[r];return a}function en(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rn(s,t){if(typeof s!="object"||s===null)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var a=r.call(s,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function sn(s){var t=rn(s,"string");return typeof t=="symbol"?t:String(t)}function vr(s){var t=s.sizes.shift(),r=Math.max(Math.ceil(t[0]),1),a=Math.max(Math.ceil(t[1]),1),i=[r-1,a-1,1,1],u=Date.now(),_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,m,n;_?(m=new OffscreenCanvas(1,1),n=new OffscreenCanvas(r,a)):(m=document.createElement("canvas"),m.width=1,m.height=1,n=document.createElement("canvas"),n.width=r,n.height=a);var c=m.getContext("2d"),h=n.getContext("2d");h&&(h.fillRect.apply(h,i),c.drawImage(n,r-1,a-1,1,1,0,0,1,1));var d=c&&c.getImageData(0,0,1,1).data[3]!==0,R=Date.now()-u;return[m,n].forEach(function(w){w.height=0,w.width=0}),_?(postMessage({width:r,height:a,benchmark:R,isTestPass:d}),!d&&s.sizes.length&&vr(s)):d?s.onSuccess(r,a,R):(s.onError(r,a,R),s.sizes.length&&vr(s)),d}var Xr={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},an=["onError","onSuccess"],Mt={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},lr={};function Gr(s){var t=s.width===s.height,r=s.height===1,a=s.width===1,i=[];if(!s.width||!s.height)s.sizes.forEach(function(h){var d=t||r?h:1,R=t||a?h:1;i.push([d,R])});else for(var u=s.min||Mt.min,_=s.step||Mt.step,m=Math.max(s.width,s.height);m>=u;){var n=t||r?m:1,c=t||a?m:1;i.push([n,c]),m-=_}return i}function Ir(s){var t=window&&"HTMLCanvasElement"in window,r=window&&"OffscreenCanvas"in window,a=Date.now(),i=s.onError,u=s.onSuccess,_=Va(s,an),m=null;if(!t)return!1;if(s.useWorker&&r){var n=`
            var canvasTest = `.concat(vr.toString(),`;
            onmessage = function(e) {
                canvasTest(e.data);
            };
        `),c=new Blob([n],{type:"application/javascript"}),h=URL.createObjectURL(c);m=new Worker(h),URL.revokeObjectURL(h),m.onmessage=function(d){var R=d.data,w=R.width,p=R.height,N=R.benchmark,P=R.isTestPass;P?(lr[a].onSuccess(w,p,N),delete lr[a]):lr[a].onError(w,p,N)}}if(s.usePromise)return new Promise(function(d,R){var w=Te(Te({},s),{},{onError:function(ee,x,F){var C;if(s.sizes.length===0)C=!0;else{var Pe=s.sizes.slice(-1),M=Rs(Pe,1),Ge=Rs(M[0],2),Je=Ge[0],tt=Ge[1];C=ee===Je&&x===tt}i(ee,x,F),C&&R({width:ee,height:x,benchmark:F})},onSuccess:function(ee,x,F){u(ee,x,F),d({width:ee,height:x,benchmark:F})}});if(m){var p=w.onError,N=w.onSuccess;lr[a]={onError:p,onSuccess:N},m.postMessage(_)}else vr(w)});if(m)lr[a]={onError:i,onSuccess:u},m.postMessage(_);else return vr(s)}var nn={maxArea:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Gr({width:t.max,height:t.max,min:t.min,step:t.step,sizes:Pr(Xr.area)}),a=Te(Te(Te({},Mt),t),{},{sizes:r});return Ir(a)},maxHeight:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Gr({width:1,height:t.max,min:t.min,step:t.step,sizes:Pr(Xr.height)}),a=Te(Te(Te({},Mt),t),{},{sizes:r});return Ir(a)},maxWidth:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Gr({width:t.max,height:1,min:t.min,step:t.step,sizes:Pr(Xr.width)}),a=Te(Te(Te({},Mt),t),{},{sizes:r});return Ir(a)},test:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Te(Te({},Mt),t);return r.sizes=Pr(r.sizes),r.width&&r.height&&(r.sizes=[[r.width,r.height]]),Ir(r)}};const ln=(s,t,r,a=.1)=>{if(typeof window>"u")return r;for(;!nn.test({sizes:[[s*r,t*r]]});)r-=a;return r};var on=O("<canvas></canvas> <div><!></div>",1);function un(s,t){dt(t,!0);let r=$e(t,"style",3,""),a=$e(t,"autoplay",3,!1),i=$e(t,"autoclear",3,!0),u=$e(t,"layerEvents",3,!1),_=Js(t,["$$slots","$$events","$$legacy","width","height","pixelRatio","class","style","autoplay","autoclear","layerEvents","onresize","contextSettings","children"]),m,n,c,h=E(2),d=E(0),R=E(0);const w=G(()=>t.width??e(d)),p=G(()=>t.height??e(R)),N=G(()=>e(h)&&t.pixelRatio==="auto"?ln(e(w),e(p),e(h)):t.pixelRatio&&t.pixelRatio!=="auto"?t.pixelRatio:e(h)),P=new Ua({get width(){return e(w)},get height(){return e(p)},get pixelRatio(){return e(N)},get autoplay(){return a()},get autoclear(){return i()},get layerEvents(){return u()},get onresize(){return t.onresize},handlers:_});Ea(()=>{u()?n=Wa(m,t.contextSettings):n=m.getContext("2d",t.contextSettings),P.init(n,c)});const ee=()=>P.redraw();var x=on(),F=le(x);xa(F,M=>({class:t.class,width:e(w)*e(N),height:e(p)*e(N),style:r(),...M,[ka]:{width:t.width?`${t.width}px`:"100%",height:t.height?`${t.height}px`:"100%"}}),[()=>P.createEventHandlers()]),es(F,M=>m=M,()=>m);var C=S(F,2);js(C,"",{},{display:"none"});var Pe=b(C);return Ns(Pe,()=>t.children??Cs),f(C),es(C,M=>c=M,()=>c),Na("devicePixelRatio","resize",ur,M=>v(h,M,!0)),Ps(F,"clientWidth",M=>v(d,M)),Ps(F,"clientHeight",M=>v(R,M)),T(s,x),vt({redraw:ee,get canvas(){return m},set canvas(M){m=M},get context(){return n},set context(M){n=M}})}var cn=O("<div></div>");function dn(s,t){dt(t,!0);const r=Js(t,["$$slots","$$events","$$legacy"]),a=Ya(r);var i=cn();B(()=>Zr(i,"data-layer-id",a)),T(s,i),vt()}var vn=O("<div><!> <!></div>");function fn(s,t){dt(t,!0);const r=()=>window.performance.now();let a=$e(t,"highlighted",19,()=>[]),i=$e(t,"disabled",19,()=>[]),u=$e(t,"highlightJewels",3,!1);const _=[427,320,226,227,323,422,329],m="25px Roboto Mono",n="17px Roboto Mono";let c=E(10),h=E(0),d=E(0),R=G(()=>Aa/e(c));const w=2.6,p={},N={},P=(l,K,me,Y=!1,Z=!1)=>{let V=Y?Ra[K]:ks[K];!V&&Y&&(V=ks[K]);const oe=V.filename;oe in(Y?N:p)||((Y?N:p)[oe]=new Image,(Y?N:p)[oe].src=oe);const $=V.coords[K],De=$.w/e(c)*w,Ee=$.h/e(c)*w,q=me.x-De/2,y=me.y-Ee/2;let L=y;Z&&(L=y-Ee/2),l.drawImage((Y?N:p)[oe],$.x,$.y,$.w,$.h,q,L,De,Ee),Z&&(l.save(),l.translate(q,y),l.rotate(Math.PI),l.drawImage((Y?N:p)[oe],$.x,$.y,$.w,$.h,-De,-(Ee/2),De,-Ee),l.restore())},ee=(l,K,me)=>{const Y=[];let Z="";return l.split(" ").forEach(V=>{K.measureText(Z+V).width<me?Z+=" "+V:(Y.push(Z.trim()),Z=V)}),Z.length>0&&Y.push(Z.trim()),Y};let x=E(ke({x:Number.MIN_VALUE,y:Number.MIN_VALUE})),F=E("unset"),C=E(void 0),Pe=G(()=>({context:l,width:K,height:me})=>{var Ee;const Y=window.performance.now();l.clearRect(0,0,K,me),l.fillStyle="#080c11",l.fillRect(0,0,K,me);const Z={};Object.keys(Kr).forEach(q=>{const y=parseInt(q),L=Kr[y],D=ws(L.x,L.y,e(h),e(d),e(c)),ve=Math.max(...L.orbits);_.indexOf(y)>=0||(ve==1?P(l,"PSGroupBackground1",D,!1):ve==2?P(l,"PSGroupBackground2",D,!1):(ve==3||L.orbits.length>1)&&P(l,"PSGroupBackground3",D,!1,!0))}),Object.entries(kr).forEach(([q,y])=>{var Be;const L=parseInt(q);if(!y)return;const D=ys(y.orbit??0,y.orbitIndex??0),ve=Tr(y,e(h),e(d),e(c));(Be=y.out)==null||Be.forEach(fe=>{const Re=parseInt(fe),H=kr[Re];if(!H)return;const We=Math.min(Re,L),ie=Math.max(Re,L),re=We+":"+ie;if(re in Z||(Z[re]=!0,!H)||H.isMastery)return;const rt=ys(H.orbit??0,H.orbitIndex??0),be=Tr(H,e(h),e(d),e(c));if(l.beginPath(),y.group!=H.group||y.orbit!=H.orbit)l.moveTo(ve.x,ve.y),l.lineTo(be.x,be.y);else{let se=Math.PI/180-Math.PI/180*D,Ae=Math.PI/180-Math.PI/180*rt;se-=Math.PI/2,Ae-=Math.PI/2;const o=Math.abs(Math.max(se,Ae)-Math.min(se,Ae)),A=o>Math.PI?Math.max(se,Ae):Math.min(se,Ae),k=o>Math.PI?Math.min(se,Ae):Math.max(se,Ae);if(!y.group)return;const W=Kr[y.group];if(!W)return;const z=ws(W.x,W.y,e(h),e(d),e(c));l.arc(z.x,z.y,et.constants.orbitRadii[y.orbit??0]/e(c)+1,A,k)}l.lineWidth=6/e(c),l.strokeStyle="#524518",l.stroke()})});let V={x:0,y:0};t.circledNode&&(V=Tr(kr[t.circledNode],e(h),e(d),e(c)),l.strokeStyle="#ad2b2b");let oe=!1,$;if(Object.values(kr).forEach(q=>{const y=Tr(q,e(h),e(d),e(c));let L=0,D=!1;t.circledNode&&Yr(y,V)<e(R)&&(D=!0),q.skill&&i().indexOf(q.skill)>=0&&(D=!1),q.isKeystone?(L=110,P(l,q.icon??"",y,D),D?P(l,"KeystoneFrameAllocated",y,!1):P(l,"KeystoneFrameUnallocated",y,!1)):q.isNotable?(L=70,P(l,q.icon??"",y,D),D?P(l,"NotableFrameAllocated",y,!1):P(l,"NotableFrameUnallocated",y,!1)):q.isJewelSocket?(L=70,q.expansionJewel?P(l,"JewelSocketAltNormal",y,!1):D?P(l,"JewelFrameAllocated",y,!1):P(l,"JewelFrameUnallocated",y,!1)):q.isMastery?P(l,q.inactiveIcon??"",y,D):(L=50,P(l,q.icon??"",y,D),D?P(l,"PSSkillFrameActive",y,!1):P(l,"PSSkillFrame",y,!1)),(a().indexOf(q.skill??-1)>=0||u()&&q.isJewelSocket)&&(l.strokeStyle="#00ff00",l.lineWidth=3,l.beginPath(),l.arc(y.x,y.y,(L+30)/e(c),0,Math.PI*2),l.stroke()),Yr(y,e(x))<L/e(c)&&($=q,oe=D,console.log("Hovering over node:",q.skill,q.name,"at distance:",Yr(y,e(x)),"touchDistance:",L/e(c)))}),v(C,$,!0),t.circledNode&&(l.strokeStyle="#ad2b2b",l.lineWidth=1,l.beginPath(),l.arc(V.x,V.y,e(R),0,Math.PI*2),l.stroke()),e(C)){let q=e(C).name??"Node name",y=(e(C).stats||[]).map(H=>({text:H,special:!1}));if(!e(C).isJewelSocket&&oe&&e(C).skill!==void 0&&(Ee=I)!=null&&Ee.TreeToPassive&&I.TreeToPassive[e(C).skill]!==void 0&&t.seed&&t.selectedJewel&&t.selectedConqueror){const H=e(C).skill,We=I.TreeToPassive[H];if(We&&We.Index!==void 0){const ie=qs.Calculate(We.Index,t.seed,t.selectedJewel,t.selectedConqueror);if(ie)"AlternatePassiveSkill"in ie&&ie.AlternatePassiveSkill&&(y=[],q=ie.AlternatePassiveSkill.Name??"Alternative Skill",ie.AlternatePassiveSkill.StatsKeys&&(ie.AlternatePassiveSkill.StatsKeys.forEach((re,rt)=>{const be=I.GetStatByIndex(re);if(!be)return;const se=Ss[be.ID]||"";if(se&&ie.StatRolls&&ie.StatRolls[rt]!==void 0)y.push({text:xs(se,ie.StatRolls[rt])||be.ID,special:!0});else throw new Error(`Failed to translate ${q}. Skill ID: ${H}, Stat ID: ${be.ID}`)}),ie.AlternatePassiveAdditionInformations&&ie.AlternatePassiveAdditionInformations.forEach(re=>{re.AlternatePassiveAddition&&re.AlternatePassiveAddition.StatsKeys&&re.AlternatePassiveAddition.StatsKeys.forEach((rt,be)=>{const se=I.GetStatByIndex(rt);if(!se)return;const Ae=Ss[se.ID]||"";if(Ae&&re.StatRolls&&re.StatRolls[be]!==void 0)y.push({text:xs(Ae,re.StatRolls[be])||se.ID,special:!0});else throw new Error(`Failed to translate ${q} additional info for statID: ${se.ID}, skillID: ${H}, statRoll: ${re.StatRolls?re.StatRolls[be]:"undefined"}`)})})));else throw new Error(`Failed to calculate ${q}. Skill ID: ${H}, Seed: ${t.seed}, Selected Jewel: ${t.selectedJewel}, Selected Conqueror: ${t.selectedConqueror}`)}}l.font=m;const L=l.measureText(q),D=Math.max(L.width+50,600);l.font=n;const ve=[],Be=30;let fe=85;y&&y.length>0?y.forEach(H=>{ve.length>0&&(fe+=5),H.text.split(`
`).forEach(We=>{ve.length>0&&(fe+=10),ee(We,l,D-Be).forEach(re=>{ve.push({text:re,offset:fe,special:H.special}),fe+=20})})}):e(C).isJewelSocket&&(ve.push({text:"Click to select this socket",offset:fe,special:!0}),fe+=20);const Re=55;l.fillStyle="rgba(75,63,24,0.9)",l.fillRect(e(x).x,e(x).y,D,Re),l.fillStyle="#ffffff",l.font=m,l.textAlign="center",l.fillText(q,e(x).x+D/2,e(x).y+35),l.fillStyle="rgba(0,0,0,0.8)",l.fillRect(e(x).x,e(x).y+Re,D,fe-Re),l.font=n,l.textAlign="left",ve.forEach(H=>{H.special?l.fillStyle="#8cf34c":l.fillStyle="#ffffff",l.fillText(H.text,e(x).x+Be/2,e(x).y+H.offset)})}e(C)&&e(C).isJewelSocket?v(F,"pointer"):v(F,"unset"),l.fillStyle="#ffffff",l.textAlign="right",l.font="12px Roboto Mono";const De=r();l.fillText(`${(De-Y).toFixed(1)}ms`,K-5,17)}),M=E(0),Ge=E(0),Je=E(0),tt=E(0),Ft=E(!1);const Ht=l=>{v(Ft,!0),v(M,l.offsetX,!0),v(Ge,l.offsetY,!0),v(Je,e(h),!0),v(tt,e(d),!0),v(x,{x:l.offsetX,y:l.offsetY},!0),e(C)&&t.clickNode(e(C))},Jr=l=>{l.type==="pointerup"&&v(Ft,!1),v(x,{x:l.offsetX,y:l.offsetY},!0)},qr=l=>{e(Ft)&&(v(h,e(Je)-(e(M)-l.offsetX)*e(c)),v(d,e(tt)-(e(Ge)-l.offsetY)*e(c))),v(x,{x:l.offsetX,y:l.offsetY},!0)},Nr=l=>{const K=l;K.deltaY>0?e(c)<30&&(v(h,e(h)+K.offsetX),v(d,e(d)+K.offsetY)):e(c)>3&&(v(h,e(h)-K.offsetX),v(d,e(d)-K.offsetY)),v(c,Math.min(30,Math.max(3,e(c)+K.deltaY/100)),!0),l.preventDefault(),l.stopPropagation(),l.stopImmediatePropagation()};let Ie=E(0),ft=E(0);const kt=()=>{v(Ie,window.innerWidth,!0),v(ft,window.innerHeight,!0)};let qe=E(!1);Me(()=>{!e(qe)&&et&&(v(qe,!0),v(h,et.min_x+window.innerWidth/2*e(c)),v(d,et.min_y+window.innerHeight/2*e(c)))}),Me(()=>{kt()});var Kt=Ar();cr("pointerup",ur,Jr),cr("pointermove",ur,qr),cr("resize",ur,kt);var Le=le(Kt);{var Yt=l=>{var K=vn(),me=b(K);un(me,{get width(){return e(Ie)},get height(){return e(ft)},onpointerdown:Ht,onwheel:Nr,children:(V,oe)=>{dn(V,{get render(){return e(Pe)}})},$$slots:{default:!0}});var Y=S(me,2);{var Z=V=>{var oe=Ar(),$=le(oe);Ns($,()=>t.children),T(V,oe)};X(Y,V=>{t.children&&V(Z)})}f(K),B(()=>js(K,`touch-action: none; cursor: ${e(F)??""}`)),T(l,K)};X(Le,l=>{e(Ie)&&e(ft)&&l(Yt)})}T(s,Kt),vt()}const As=(s,t)=>t.highlight(t.set.seed,t.set.skills.map(r=>r.passive));var hn=(s,t)=>as(Oa(t.jewel,t.conqueror,t.set)),gn=O("<li> </li>"),mn=O('<div class="mt-2"><span> </span> <ul class="list-disc pl-6 font-bold"></ul></div>'),bn=O('<div class="my-2 border-white/50 border p-2 flex flex-col cursor-pointer" role="button" tabindex="0"><div class="flex flex-row justify-between"><button class="px-3 invisible">Trade</button> <div class="font-bold text-orange-500 text-center"> </div> <button class="px-3 bg-blue-500/40 rounded">Trade</button></div> <!></div>');function Os(s,t){dt(t,!0);var r=bn();r.__click=[As,t],r.__keydown=[As,t];var a=b(r),i=S(b(a),2),u=b(i);f(i);var _=S(i,2);_.__click=[hn,t],f(a);var m=S(a,2);Xe(m,17,()=>t.set.skills,n=>n.passive,(n,c)=>{var h=mn(),d=b(h),R=b(d);f(d);var w=S(d,2);Xe(w,20,()=>Object.keys(e(c).stats),p=>p,(p,N)=>{var P=gn(),ee=b(P,!0);f(P),B(x=>je(ee,x),[()=>Er(parseInt(N),e(c).stats[N])]),T(p,P)}),f(w),f(h),B(()=>je(R,`${et.nodes[e(c).passive].name??""} (${e(c).passive??""})`)),T(n,h)}),f(r),B(()=>je(u,`Seed ${t.set.seed??""} (weight ${t.set.weight??""}) Stat Total: ${t.set.statTotal??""}`)),T(s,r),vt()}br(["click","keydown"]);var _n=(s,t,r)=>e(t)===String(r)?v(t,""):v(t,String(r),!0),pn=O("<div><!></div>"),wn=O('<div class="flex flex-col overflow-auto min-h-[200px] mb-2"></div>'),yn=O('<button class="text-lg w-full p-2 px-4 rounded flex flex-row justify-between mb-2" style="background-color: rgba(107, 114, 128, 0.3);"><span> </span> <span> </span></button> <!>',1),Sn=O('<div class="flex flex-col overflow-auto"></div>'),xn=O("<div><!></div>"),kn=O('<div class="mt-4 flex flex-col overflow-auto"></div>');function Tn(s,t){dt(t,!0);let r=$e(t,"groupResults",3,!0),a=E("");var i=Ar(),u=le(i);{var _=n=>{var c=Sn();Xe(c,20,()=>Object.keys(t.searchResults.grouped).map(h=>parseInt(h,10)).sort((h,d)=>h-d).reverse(),h=>h,(h,d)=>{var R=yn(),w=le(R);w.__click=[_n,a,d];var p=b(w),N=b(p);f(p);var P=S(p,2),ee=b(P,!0);f(P),f(w);var x=S(w,2);{var F=C=>{var Pe=wn();Xe(Pe,21,()=>t.searchResults.grouped[d],$r,(M,Ge)=>{var Je=pn(),tt=b(Je);Os(tt,{get set(){return e(Ge)},get highlight(){return t.highlight},get jewel(){return t.jewel},get conqueror(){return t.conqueror}}),f(Je),T(M,Je)}),f(Pe),T(C,Pe)};X(x,C=>{e(a)===String(d)&&C(F)})}B(C=>{je(N,`${d??""} Match${d>1?"es":""} [${t.searchResults.grouped[d].length??""}]`),je(ee,C)},[()=>e(a)===String(d)?"^":"V"]),T(h,R)}),f(c),T(n,c)},m=n=>{var c=kn();Xe(c,21,()=>t.searchResults.raw,$r,(h,d)=>{var R=xn(),w=b(R);Os(w,{get set(){return e(d)},get highlight(){return t.highlight},get jewel(){return t.jewel},get conqueror(){return t.conqueror}}),f(R),T(h,R)}),f(c),T(n,c)};X(u,n=>{r()?n(_):n(m,!1)})}T(s,i),vt()}br(["click"]);const Br={25:1,26:1,42:1,49:1,56:1,63:1,70:2,95:4,117:1,124:4,134:1,150:2,216:1,434:1,482:1,483:1,484:1,488:1,554:1,556:1,593:3,594:3,595:3,619:1,943:1,944:1,945:1,946:1,2133:4,3108:3,3109:4,3110:4,3111:4,5815:4,8835:1,9091:1,9772:1,14775:2,209:1,447:1,573:2,1294:1,1361:1,2031:5,8177:2,448:2,486:1,579:2,1404:1,2030:5,9090:1,9711:2,9712:2,9713:2,9714:2,9716:1,9717:1,9718:1,9721:1,9722:1,9723:1,9724:1,186:2,490:1,1251:3,1654:1,3392:1,6042:1,6048:1,6049:1,6050:1,6136:1,7499:2},Pn=(s,t,r,a)=>{t.queries.length===1?as(t.queries[0]):e(r)&&a(!a())};var In=O('<button class="p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2"><!></button>');function En(s,t){dt(t,!0);let r=$e(t,"showTradeLinks",15,!1),a=G(()=>t.queries.length>1);var i=In();i.__click=[Pn,t,a,r];var u=b(i);{var _=n=>{var c=Ar(),h=le(c);{var d=w=>{var p=or("Hide Trade Links");T(w,p)},R=w=>{var p=or("Show Trade Links");T(w,p)};X(h,w=>{r()?w(d):w(R,!1)})}T(n,c)},m=n=>{var c=or("Trade");T(n,c)};X(u,n=>{e(a)?n(_):n(m,!1)})}f(i),B(()=>i.disabled=!t.queries),T(s,i),vt()}br(["click"]);var Rn=(s,t)=>as(e(t)),An=O('<button class="p-1 px-3 bg-blue-500/40 rounded"></button>'),On=O('<div class="flex flex-wrap gap-2.5 my-2"></div>');function Cn(s,t){dt(t,!0);var r=On();Xe(r,21,()=>t.queries,$r,(a,i,u)=>{var _=An();_.__click=[Rn,i],_.textContent=`Trade Batch ${u+1}`,T(a,_)}),f(r),T(s,r),vt()}br(["click"]);const Mn=(s,t)=>{t.clear()},jn=(s,t,r)=>{e(t).forEach(a=>{a.isNotable&&r.delete(a.skill)})},Jn=(s,t,r)=>{e(t).forEach(a=>{a.isNotable||r.delete(a.skill)})},qn=(s,t,r)=>{e(t).filter(a=>!a.isJewelSocket&&!a.isMastery).forEach(a=>r.add(a.skill))};var Nn=(s,t)=>v(t,!0),zn=O("<span>Results</span>"),Ln=O("<span>Timeless Jewel</span>"),Dn=(s,t)=>v(t,!e(t)),Wn=O("<!> <button>Grouped</button>",1),Fn=(s,t)=>v(t,!e(t)),Hn=O('<div class="flex flex-row"><!> <button class="bg-neutral-100/20 px-4 p-1 rounded"> </button></div>'),Kn=(s,t)=>t("seed"),Yn=(s,t)=>t("stats"),Un=O('<div class="mt-2"> </div>'),Xn=(s,t)=>v(t,!e(t)),Gn=(s,t)=>v(t,!e(t)),Bn=(s,t,r,a)=>t(e(r),e(a).passives),Vn=(s,t,r,a)=>s.key==="Enter"&&t(e(r),e(a).passives),Qn=O('<li><button class="cursor-pointer w-full text-left"><span> </span> <span class="text-white"><!></span></button></li>'),Zn=O("<ul></ul>"),$n=(s,t,r,a)=>t(e(r),e(a).passives),ei=(s,t,r,a)=>s.key==="Enter"&&t(e(r),e(a).passives),ti=O('<li><button class="cursor-pointer w-full text-left"><span> </span> <span class="text-white"><!></span></button></li>'),ri=(s,t,r,a)=>t(e(r),e(a).passives),si=(s,t,r,a)=>s.key==="Enter"&&t(e(r),e(a).passives),ai=O('<li><button class="cursor-pointer w-full text-left"><span> </span> <span class="text-white"><!></span></button></li>'),ni=O('<div class="overflow-auto mt-4"><h3>Notables</h3> <ul></ul><h3 class="mt-2">Smalls</h3> <ul></ul></div>'),ii=O('<div class="flex flex-row mt-4 items-end"><div class="flex-grow"><h3 class="mb-2">Sort Order</h3> <!></div> <div class="ml-2"><button>Colors</button></div> <div class="ml-2"><button>Split</button></div></div> <!>',1),li=O('<div class="mt-4"><h3 class="mb-2">Seed</h3> <input type="number" class="seed"/> <!></div> <!>',1),oi=(s,t,r,a)=>t(e(r)[parseInt(a)].id),ui=O('<div class="mb-4 flex flex-row items-start flex-col border-neutral-100/40 border-b pb-4"><div><button class="p-2 px-4 bg-red-500/40 rounded mr-2">-</button> <span> </span></div> <div class="mt-2 flex flex-row"><div class="mr-4 flex flex-row items-center"><div class="mr-2">Min:</div> <input type="number" min="0"/></div> <div class="flex flex-row items-center"><div class="mr-2">Weight:</div> <input type="number" min="0"/></div> <div class="flex flex-row items-center"><div class="mr-2">Minimum Stat Total:</div> <input type="number" min="0"/></div></div></div>'),ci=(s,t)=>t(),di=O('<div class="mt-4 flex flex-col overflow-auto min-h-[100px]"></div> <div class="flex flex-col mt-2"><div class="flex flex-row items-center"><div class="mr-2 min-w-fit">Min Total Weight:</div> <input type="number" min="0"/></div> <div class="flex flex-row items-center"><div class="mr-2 min-w-fit">Minimum Stat Total:</div> <input type="number" min="0"/></div></div> <div class="flex flex-col mt-4"><div class="flex flex-row"><button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2">Select All</button> <button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2">Notables</button> <button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2">Passives</button> <button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 flex-grow">Deselect</button></div> <div class="flex flex-row mt-2"><button class="p-2 px-3 bg-green-500/40 rounded disabled:bg-green-900/40 flex-grow"><!></button></div></div>',1),vi=O('<div class="mt-4"><h3 class="mb-2">Add Stat</h3> <!></div> <!>',1),fi=O('<div class="mt-4 w-full flex flex-row"><button>Enter Seed</button> <button>Select Stats</button></div> <!>',1),hi=O('<div class="mt-4"><h3 class="mb-2">Conqueror</h3> <!></div> <!>',1),gi=O("<!> <!>",1),mi=O("<!> <!>",1),bi=O('<div class="w-screen md:w-10/12 lg:w-2/3 xl:w-1/2 2xl:w-5/12 3xl:w-1/3 4xl:w-1/4 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen"><div class="p-4 max-h-screen flex flex-col"><div class="flex flex-row justify-between mb-2"><div class="flex flex-row items-center"><button class="burger-menu mr-3" aria-label="Collapse menu"><div></div> <div></div> <div></div></button> <h3 class="flex-grow"><!></h3></div> <!></div> <!> <!></div></div>'),_i=(s,t)=>v(t,!1),pi=O('<button class="burger-menu absolute top-0 left-0 bg-black/80 backdrop-blur-sm rounded-br-lg p-4 pt-5" aria-label="Expand menu"><div></div> <div></div> <div></div></button>'),wi=O('<div><!> <div class="text-orange-500 absolute bottom-0 right-0 m-2"><a href="https://github.com/BlazesRus/timeless-jewels" target="_blank" rel="noopener noreferrer">Source (Github)</a></div></div>'),yi=O('<h2 class="text-white text-center absolute w-full top-1/2 bg-black/60 p-4">Click on a jewel socket</h2>'),Si=O("<!> <!>",1);function ji(s,t){dt(t,!0);const[r,a]=Ia(),u=Pa(Ta,"$page",r).url.searchParams;let _=G(()=>{var o,A,k;return((o=I)==null?void 0:o.TimelessJewels)&&((A=I)==null?void 0:A.TimelessJewelConquerors)&&((k=I)==null?void 0:k.TreeToPassive)}),m=G(()=>e(_)&&I.TimelessJewels?Object.keys(I.TimelessJewels).map(o=>{var A;return{value:parseInt(o),label:((A=I.TimelessJewels)==null?void 0:A[parseInt(o)])||o}}):[]),n=E(void 0);Me(()=>{e(m).length>0&&!e(n)&&u.has("jewel")&&v(n,e(m).find(o=>o.value==parseInt(u.get("jewel")||"0")),!0)});let c=G(()=>e(n)&&e(_)&&I.TimelessJewelConquerors&&I.TimelessJewelConquerors[e(n).value]?Object.keys(I.TimelessJewelConquerors[e(n).value]||{}).map(o=>({value:o,label:o})):[]),h=G(()=>e(c).concat([{value:"Any",label:"Any"}])),d=E(void 0);Me(()=>{if(e(c).length>0&&!e(d)&&u.has("conqueror")){const o=u.get("conqueror");o&&v(d,{value:o,label:o},!0)}});let R=G(()=>{var o;return((o=e(d))==null?void 0:o.value)==="Any"}),w=G(()=>{var o;return((o=e(d))==null?void 0:o.value)==="Any"?e(c)[0]:e(d)}),p=E(ke(u.has("seed")?parseInt(u.get("seed")||"0"):0)),N=E(ke(u.has("location")?parseInt(u.get("location")||"0"):void 0)),P=G(()=>e(N)?Ma(et.nodes[e(N)]).filter(o=>!o.isJewelSocket&&!o.isMastery):[]),ee=G(()=>!e(p)||!e(n)||!e(w)||!e(_)||!I.TimelessJewelConquerors||!I.TimelessJewelConquerors[e(n).value]||!e(w).value||Object.keys(I.TimelessJewelConquerors[e(n).value]||{}).indexOf(e(w).value)<0?[]:e(P).filter(o=>o.skill!==void 0&&I.TreeToPassive&&I.TreeToPassive[o.skill]).map(o=>{var A,k,W,z;return{node:o.skill,result:qs.Calculate(((k=(A=I.TreeToPassive)==null?void 0:A[o.skill])==null?void 0:k.Index)||0,e(p),((W=e(n))==null?void 0:W.value)||0,((z=e(w))==null?void 0:z.value)||"")}})),x=E(ke({}));u.has("stat")&&u.getAll("stat").forEach(o=>{const A=parseInt(o);e(x)[A]={weight:1,min:0,id:A,minStatTotal:0}});let F=E(ke(u.has("mode")?u.get("mode"):""));const C=()=>{var A;const o=new URL(window.location.origin+window.location.pathname);e(n)&&o.searchParams.append("jewel",e(n).value.toString()),(A=e(d))!=null&&A.value&&o.searchParams.append("conqueror",e(d).value),e(p)&&o.searchParams.append("seed",e(p).toString()),e(N)&&o.searchParams.append("location",e(N).toString()),e(F)&&o.searchParams.append("mode",e(F)),Object.keys(e(x)).forEach(k=>{o.searchParams.append("stat",k.toString())}),Ja(o.toString())},Pe=o=>{v(F,o,!0),C()};let M=ke(new Set);const Ge=o=>{o.isJewelSocket?(v(N,o.skill,!0),C()):o.isMastery||(M.has(o.skill)?M.delete(o.skill):M.add(o.skill))},Je=G(()=>e(_)&&I.PossibleStats?JSON.parse(I.PossibleStats):{});let tt=G(()=>!e(n)||!e(Je)[e(n).value]?[]:Object.keys(e(Je)[e(n).value])),Ft=G(()=>e(tt).map(o=>{const A=parseInt(o);return{label:Er(A),value:A}}).filter(o=>!(o.value in e(x)))),Ht=E(void 0);const Jr=o=>{var A;e(x)[o.detail.value]={weight:1,min:0,id:o.detail.value,minStatTotal:0},v(x,e(x),!0),(A=e(Ht))==null||A.handleClear(),C()},qr=o=>{const A=Object.fromEntries(Object.entries(e(x)).filter(([k])=>Number(k)!==o));v(x,A,!0),C()},Nr=()=>{v(x,{},!0),C()};let Ie=E(!1),ft=E(0),kt=E(0),qe=E(!1),Kt=E(0),Le=E(void 0),Yt=E(1),l=E(null);const K=()=>{var A;if(!e(N)||!e(n)||!((A=e(w))!=null&&A.value))return;v(Yt,e(n).value,!0),v(l,e(R)?null:e(w).value,!0),v(qe,!0),v(Le,void 0);const o={jewel:e(n).value,conqueror:e(w).value,nodes:e(P).filter(k=>!M.has(k.skill)).filter(k=>I.TreeToPassive&&k.skill&&I.TreeToPassive[k.skill]).map(k=>I.TreeToPassive&&k.skill?I.TreeToPassive[k.skill]:null).filter(k=>!!k).map(k=>k.Index),stats:Object.keys(e(x)).map(k=>e(x)[parseInt(k)]),minTotalWeight:e(ft),minTotalStats:e(kt)};if(!Ts){console.error("syncWrap is not available");return}Ts.search(o,ja(k=>(v(Kt,k,!0),Promise.resolve()))).then(k=>{v(Le,k,!0),v(qe,!1),v(Ie,!0)})};let me=E(ke([]));const Y=(o,A)=>{v(p,o,!0),v(me,A,!0),C()};let Z=E(ke(localStorage.getItem("groupResults")===null?!0:localStorage.getItem("groupResults")==="true"));Me(()=>{localStorage.setItem("groupResults",e(Z)?"true":"false")});const V={physical:"#c79d93",cast:"#b3f8fe",attack:"#f8b3fe",chaos:"#ac5896",fire:"#e47600",cold:"#02a5f7",lightning:"#fdff59",totem:"#a87fcf",minion:"#00ff00",life:"#ff0000",mana:"#0000ff",defences:"#ffaa00",critical:"#ffff00",spell:"#5555ff",elemental:"#dd8844",resist:"#ff5599"},oe=o=>{let A=o;return Object.entries(V).forEach(([k,W])=>{const z=new RegExp(`\\b${k}\\b`,"gi");A=A.replace(z,`<span style='color: ${W}; font-weight: bold'>${k}</span>`)}),A},$=o=>o.replace(/<(?!\/span|span\s+style='color:\s*#[0-9a-f]{6};\s*font-weight:\s*bold'[^>]*>)[^>]*>/gi,""),De=(o,A,k)=>{const W={};return o.forEach(z=>{et.nodes[z.node].isKeystone||k!=="all"&&(k==="notables"&&!et.nodes[z.node].isNotable||k==="passives"&&et.nodes[z.node].isNotable)||(z.result.AlternatePassiveSkill&&z.result.AlternatePassiveSkill.StatsKeys&&z.result.AlternatePassiveSkill.StatsKeys.forEach(he=>{W[he]=[...W[he]||[],z.node]}),z.result.AlternatePassiveAdditionInformations&&z.result.AlternatePassiveAdditionInformations.forEach(he=>{var Oe;(Oe=he.AlternatePassiveAddition)!=null&&Oe.StatsKeys&&he.AlternatePassiveAddition.StatsKeys.forEach(ue=>{W[ue]=[...W[ue]||[],z.node]})}))}),Object.keys(W).map(z=>{const he=Er(parseInt(z));return{stat:A?oe(he):he,rawStat:he,id:z,passives:W[parseInt(z)]}})},Ee=(o,A)=>{const k=[...o];return A==="alphabetical"?k.sort((W,z)=>W.rawStat.localeCompare(z.rawStat)):A==="count"?k.sort((W,z)=>z.passives.length-W.passives.length):A==="length"&&k.sort((W,z)=>W.rawStat.length-z.rawStat.length),k},q=[{label:"Count",value:"count"},{label:"Alphabetical",value:"alphabetical"},{label:"Length",value:"length"}];let y=E(ke(q.find(o=>o.value===(localStorage.getItem("sortOrder")||"count"))));Me(()=>{var o;(o=e(y))!=null&&o.value&&localStorage.setItem("sortOrder",e(y).value)});let L=E(ke(localStorage.getItem("colored")===null?!0:localStorage.getItem("colored")==="true"));Me(()=>{localStorage.setItem("colored",e(L)?"true":"false")});let D=E(ke(localStorage.getItem("split")===null?!0:localStorage.getItem("split")==="true"));Me(()=>{localStorage.setItem("split",e(D)?"true":"false")});const ve=o=>{var he,Oe;if(o.type!=="paste")return;const k=(((he=o.clipboardData)==null?void 0:he.getData("text"))||"").split(`
`);if(k.length<14)return;const W=k.find(ue=>ue.includes("Timeless Jewel"));if(!W)return;const z=Object.keys(I.TimelessJewelConquerors||{});for(let ue=0;ue<z.length;ue++){const Ut=parseInt(z[ue]),Tt=Object.keys(((Oe=I.TimelessJewelConquerors)==null?void 0:Oe[Ut])||{});for(let ht=0;ht<Tt.length;ht++){const gt=Tt[ht];if(W.includes(gt)){v(n,e(m).find(mt=>mt.value===Ut),!0);let st=W.split(gt);st=st[st.length-1].split(" ");for(let mt=0;mt<st.length;mt++){const _r=parseInt(st[mt]);if(!isNaN(_r)){v(p,_r,!0);break}}v(w,{label:gt,value:gt},!0),C();return}}}};let Be=E(!1),fe=E(!1),Re=E(ke([]));Me(()=>{e(Le)&&e(Ie)&&(v(Re,Ca(e(Yt),e(l),e(Le).raw),!0),e(Re).length===1&&v(fe,!1))});var H=Si();cr("paste",ur,ve);var We=le(H);const ie=G(()=>{var o;return((o=e(n))==null?void 0:o.value)??0}),re=G(()=>{var o;return((o=e(w))==null?void 0:o.value)??""}),rt=G(()=>!e(N)),be=G(()=>Array.from(M));fn(We,{clickNode:Ge,get circledNode(){return e(N)},get selectedJewel(){return e(ie)},get selectedConqueror(){return e(re)},get highlighted(){return e(me)},get seed(){return e(p)},get highlightJewels(){return e(rt)},get disabled(){return e(be)},children:(o,A)=>{var k=wi(),W=b(k);{var z=Oe=>{var ue=bi(),Ut=b(ue),Tt=b(Ut),ht=b(Tt),gt=b(ht);gt.__click=[Nn,Be];var st=S(gt,2),mt=b(st);{var _r=te=>{var _e=zn();T(te,_e)},Xs=te=>{var _e=Ln();T(te,_e)};X(mt,te=>{e(Ie)?te(_r):te(Xs,!1)})}f(st),f(ht);var Gs=S(ht,2);{var Bs=te=>{var _e=Hn(),at=b(_e);{var Xt=Fe=>{var Pt=Wn(),pr=le(Pt);En(pr,{get queries(){return e(Re)},get showTradeLinks(){return e(fe)},set showTradeLinks(Qe){v(fe,Qe,!0)}});var Gt=S(pr,2);let wr;Gt.__click=[Dn,Z],B(Qe=>{wr=Ne(Gt,1,"p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2",null,wr,Qe),Gt.disabled=!e(Le)},[()=>({grouped:e(Z)})]),T(Fe,Pt)};X(at,Fe=>{e(Ie)&&Fe(Xt)})}var bt=S(at,2);bt.__click=[Fn,Ie];var Ve=b(bt,!0);f(bt),f(_e),B(()=>je(Ve,e(Ie)?"Config":"Results")),T(te,_e)};X(Gs,te=>{e(Le)&&te(Bs)})}f(Tt);var is=S(Tt,2);{var Vs=te=>{var _e=gi(),at=le(_e);xr(at,{get items(){return e(m)},get value(){return e(n)},set value(Ve){v(n,Ve,!0)},$$events:{change:Nr}});var Xt=S(at,2);{var bt=Ve=>{var Fe=hi(),Pt=le(Fe),pr=S(b(Pt),2);xr(pr,{get items(){return e(h)},get value(){return e(d)},set value(Qe){v(d,Qe,!0)},$$events:{change:C}}),f(Pt);var Gt=S(Pt,2);{var wr=Qe=>{var Bt=fi(),zr=le(Bt),Lr=b(zr);let ls;Lr.__click=[Kn,Pe];var os=S(Lr,2);let us;os.__click=[Yn,Pe],f(zr);var $s=S(zr,2);{var ea=nt=>{var It=li(),Vt=le(It),He=S(b(Vt),2);Ot(He);var yr=S(He,2);{var Qt=ge=>{var Q=Un(),it=b(Q);f(Q),B(()=>je(it,`Seed must be between ${I.TimelessJewelSeedRanges[e(n).value].Min??""} and ${I.TimelessJewelSeedRanges[e(n).value].Max??""}`)),T(ge,Q)};X(yr,ge=>{var Q;e(n)&&((Q=I.TimelessJewelSeedRanges)!=null&&Q[e(n).value])&&typeof e(p)=="number"&&(e(p)<I.TimelessJewelSeedRanges[e(n).value].Min||e(p)>I.TimelessJewelSeedRanges[e(n).value].Max)&&ge(Qt)})}f(Vt);var Dr=S(Vt,2);{var Wr=ge=>{var Q=ii(),it=le(Q),_t=b(it),Zt=S(b(_t),2);xr(Zt,{get items(){return q},get value(){return e(y)},set value(pe){v(y,pe,!0)}}),f(_t);var pt=S(_t,2),$t=b(pt);let er;$t.__click=[Xn,L],f(pt);var tr=S(pt,2),rr=b(tr);let Et;rr.__click=[Gn,D],f(tr),f(it);var sr=S(it,2);{var ar=pe=>{var we=Zn();let Ce;Xe(we,21,()=>{var ye;return Ee(De(e(ee).filter(Se=>typeof Se.node=="number"),e(L),"all"),((ye=e(y))==null?void 0:ye.value)||"count")},ye=>ye.id,(ye,Se)=>{var lt=Qn(),J=b(lt);J.__click=[Bn,Y,p,Se],J.__keydown=[Vn,Y,p,Se];var j=b(J);let ae;var ce=b(j);f(j);var de=S(j,2),Ke=b(de);Ur(Ke,()=>$(e(Se).stat)),f(de),f(J),f(lt),B(wt=>{ae=Ne(j,1,"font-bold",null,ae,wt),je(ce,`(${e(Se).passives.length??""})`)},[()=>({"text-white":(Br[e(Se).id]||0)<3})]),T(ye,lt)}),f(we),B(ye=>Ce=Ne(we,1,"mt-4 overflow-auto",null,Ce,ye),[()=>({rainbow:e(L)})]),T(pe,we)},nr=pe=>{var we=ni(),Ce=S(b(we),2);let ye;Xe(Ce,21,()=>{var J;return Ee(De(e(ee).filter(j=>typeof j.node=="number"),e(L),"notables"),((J=e(y))==null?void 0:J.value)||"count")},J=>J.id,(J,j)=>{var ae=ti(),ce=b(ae);ce.__click=[$n,Y,p,j],ce.__keydown=[ei,Y,p,j];var de=b(ce);let Ke;var wt=b(de);f(de);var ot=S(de,2),yt=b(ot);Ur(yt,()=>$(e(j).stat)),f(ot),f(ce),f(ae),B(Rt=>{Ke=Ne(de,1,"font-bold",null,Ke,Rt),je(wt,`(${e(j).passives.length??""})`)},[()=>({"text-white":(Br[e(j).id]||0)<3})]),T(J,ae)}),f(Ce);var Se=S(Ce,3);let lt;Xe(Se,21,()=>{var J;return Ee(De(e(ee).filter(j=>typeof j.node=="number"),e(L),"passives"),((J=e(y))==null?void 0:J.value)||"count")},J=>J.id,(J,j)=>{var ae=ai(),ce=b(ae);ce.__click=[ri,Y,p,j],ce.__keydown=[si,Y,p,j];var de=b(ce);let Ke;var wt=b(de);f(de);var ot=S(de,2),yt=b(ot);Ur(yt,()=>$(e(j).stat)),f(ot),f(ce),f(ae),B(Rt=>{Ke=Ne(de,1,"font-bold",null,Ke,Rt),je(wt,`(${e(j).passives.length??""})`)},[()=>({"text-white":(Br[e(j).id]||0)<3})]),T(J,ae)}),f(Se),f(we),B((J,j)=>{ye=Ne(Ce,1,"mt-1",null,ye,J),lt=Ne(Se,1,"mt-1",null,lt,j)},[()=>({rainbow:e(L)}),()=>({rainbow:e(L)})]),T(pe,we)};X(sr,pe=>{e(D)?pe(nr,!1):pe(ar)})}B((pe,we)=>{er=Ne($t,1,"bg-gray-600 bg-opacity-20 p-2 px-4 rounded",null,er,pe),Et=Ne(rr,1,"bg-gray-600 bg-opacity-20 p-2 px-4 rounded",null,Et,we)},[()=>({selected:e(L)}),()=>({selected:e(D)})]),T(ge,Q)};X(Dr,ge=>{var Q;e(n)&&((Q=I.TimelessJewelSeedRanges)!=null&&Q[e(n).value])&&e(p)>=I.TimelessJewelSeedRanges[e(n).value].Min&&e(p)<=I.TimelessJewelSeedRanges[e(n).value].Max&&ge(Wr)})}B(()=>{var ge,Q;Zr(He,"min",e(n)&&((ge=I.TimelessJewelSeedRanges)!=null&&ge[e(n).value])?I.TimelessJewelSeedRanges[e(n).value].Min:0),Zr(He,"max",e(n)&&((Q=I.TimelessJewelSeedRanges)!=null&&Q[e(n).value])?I.TimelessJewelSeedRanges[e(n).value].Max:0)}),cr("blur",He,C),Ct(He,()=>e(p),ge=>v(p,ge)),T(nt,It)},ta=(nt,It)=>{{var Vt=He=>{var yr=vi(),Qt=le(yr),Dr=S(b(Qt),2);es(xr(Dr,{get items(){return e(Ft)},$$events:{change:Jr}}),Q=>v(Ht,Q,!0),()=>e(Ht)),f(Qt);var Wr=S(Qt,2);{var ge=Q=>{var it=di(),_t=le(it);Xe(_t,20,()=>Object.keys(e(x)),J=>J,(J,j)=>{var ae=ui(),ce=b(ae),de=b(ce);de.__click=[oi,qr,x,j];var Ke=S(de,2),wt=b(Ke,!0);f(Ke),f(ce);var ot=S(ce,2),yt=b(ot),Rt=S(b(yt),2);Ot(Rt),f(yt);var Fr=S(yt,2),cs=S(b(Fr),2);Ot(cs),f(Fr);var ds=S(Fr,2),vs=S(b(ds),2);Ot(vs),f(ds),f(ot),f(ae),B(St=>je(wt,St),[()=>Er(e(x)[parseInt(j)].id)]),Ct(Rt,()=>e(x)[parseInt(j)].min,St=>e(x)[parseInt(j)].min=St),Ct(cs,()=>e(x)[parseInt(j)].weight,St=>e(x)[parseInt(j)].weight=St),Ct(vs,()=>e(x)[Number(j)].minStatTotal,St=>e(x)[Number(j)].minStatTotal=St),T(J,ae)}),f(_t);var Zt=S(_t,2),pt=b(Zt),$t=S(b(pt),2);Ot($t),f(pt);var er=S(pt,2),tr=S(b(er),2);Ot(tr),f(er),f(Zt);var rr=S(Zt,2),Et=b(rr),sr=b(Et);sr.__click=[Mn,M];var ar=S(sr,2);ar.__click=[jn,P,M];var nr=S(ar,2);nr.__click=[Jn,P,M];var pe=S(nr,2);pe.__click=[qn,P,M],f(Et);var we=S(Et,2),Ce=b(we);Ce.__click=[ci,K];var ye=b(Ce);{var Se=J=>{var j=or();B(()=>{var ae;return je(j,`${e(Kt)??""} / ${(e(n)&&((ae=I.TimelessJewelSeedRanges)!=null&&ae[e(n).value])?I.TimelessJewelSeedRanges[e(n).value].Max:0)??""}`)}),T(J,j)},lt=J=>{var j=or("Search");T(J,j)};X(ye,J=>{e(qe)?J(Se):J(lt,!1)})}f(Ce),f(we),f(rr),B(()=>{sr.disabled=e(qe)||M.size==0,ar.disabled=e(qe)||M.size==0,nr.disabled=e(qe)||M.size==0,pe.disabled=e(qe)||M.size>=e(P).length,Ce.disabled=e(qe)}),Ct($t,()=>e(ft),J=>v(ft,J)),Ct(tr,()=>e(kt),J=>v(kt,J)),T(Q,it)};X(Wr,Q=>{Object.keys(e(x)).length>0&&Q(ge)})}T(He,yr)};X(nt,He=>{e(F)==="stats"&&He(Vt)},It)}};X($s,nt=>{e(F)==="seed"?nt(ea):nt(ta,!1)})}B((nt,It)=>{ls=Ne(Lr,1,"selection-button",null,ls,nt),us=Ne(os,1,"selection-button",null,us,It)},[()=>({selected:e(F)==="seed"}),()=>({selected:e(F)==="stats"})]),T(Qe,Bt)};X(Gt,Qe=>{var Bt;e(w)&&e(n)&&((Bt=I.TimelessJewelConquerors)!=null&&Bt[e(n).value])&&e(w).value&&Object.keys(I.TimelessJewelConquerors[e(n).value]||{}).indexOf(e(w).value)>=0&&Qe(wr)})}T(Ve,Fe)};X(Xt,Ve=>{e(n)&&Ve(bt)})}T(te,_e)};X(is,te=>{e(Ie)||te(Vs)})}var Qs=S(is,2);{var Zs=te=>{var _e=mi(),at=le(_e);{var Xt=Fe=>{Cn(Fe,{get queries(){return e(Re)}})};X(at,Fe=>{e(fe)&&Fe(Xt)})}var bt=S(at,2);const Ve=G(()=>e(l)||"");Tn(bt,{get searchResults(){return e(Le)},get groupResults(){return e(Z)},highlight:Y,get jewel(){return e(Yt)},get conqueror(){return e(Ve)}}),T(te,_e)};X(Qs,te=>{e(Le)&&e(Ie)&&te(Zs)})}f(Ut),f(ue),T(Oe,ue)},he=Oe=>{var ue=pi();ue.__click=[_i,Be],T(Oe,ue)};X(W,Oe=>{e(Be)?Oe(he,!1):Oe(z)})}Sa(2),f(k),T(o,k)},$$slots:{default:!0}});var se=S(We,2);{var Ae=o=>{var A=yi();T(o,A)};X(se,o=>{e(N)||o(Ae)})}T(s,H),vt(),a()}br(["click","keydown"]);export{ji as component};
