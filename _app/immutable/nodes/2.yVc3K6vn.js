import{f as c,a as n,c as Y}from"../chunks/7J9utlwG.js";import{p as aa,u as $e,t as y,a as sa,g as e,b as S,s as V,c as p,d as i,e as v,r,n as ye,f as b}from"../chunks/BG2JjhJ7.js";import{e as ta,s as z}from"../chunks/f0mDi-RU.js";import{i as m}from"../chunks/Db6z-dJC.js";import{S as ue,p as ra,s as Z,r as la,b as ia,e as me,i as ce}from"../chunks/wfhDfpwm.js";import{s as na,a as va}from"../chunks/oETMcK8Y.js";import{g as oa}from"../chunks/B0djrwai.js";import{b as da,a as ua}from"../chunks/CU9w4Cb5.js";import{d as l,c as ma}from"../chunks/DzQymabd.js";var ca=c('<div class="mt-2"> </div>'),fa=c("<li> </li>"),_a=c('<ol class="mt-4 list-decimal pl-8"></ol>'),pa=c('<div class="mt-4"><h3>Alternate Passive Skill</h3> <span> </span></div> <!>',1),ga=c("<li> </li>"),ha=c('<ol class="list-decimal pl-8"></ol>'),Sa=c('<li class="mt-4"><span> </span> <!></li>'),ba=c('<div class="mt-4"><h3>Additions</h3> <ul class="list-disc pl-8"></ul></div>'),xa=c("<!> <!>",1),wa=c('<div class="mt-4"><h3 class="mb-2">Seed</h3> <input type="number" class="seed"/> <!></div> <!>',1),ka=c('<div class="mt-4"><h3 class="mb-2">Passive Skill</h3> <!></div> <!>',1),$a=c('<div class="mt-4"><h3 class="mb-2">Conqueror</h3> <!></div> <!>',1),ya=c('<div class="py-10 flex flex-row justify-center w-screen h-screen"><div class="flex flex-col justify-between w-1/3"><div><h1 class="text-white mb-10 text-center">Timeless Calculator</h1> <a><h2 class="text-white mb-10 text-center underline text-orange-500">Skill Tree View</h2></a> <div class="themed"><h3 class="mb-2">Timeless Jewel</h3> <!> <!></div></div> <div class="flex justify-between"><div class="text-right text-orange-500"><a href="https://discord.gg/mfacademy" target="_blank" rel="noopener noreferrer" class="flex flex-row align-middle"><img width="24px" alt="MF Academy"/> <span class="ml-2">MF Academy</span></a></div> <div class="text-orange-500"><a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener noreferrer">Official Branch Source (Github)</a> <a href="https://github.com/BlazesRus/timeless-jewels" target="_blank" rel="noopener noreferrer">Source (Github)</a></div></div></div></div>');function Oa(Ae,Pe){aa(Pe,!0);const[Ie,Te]=va(),fe=()=>na(ra,"$page",Ie),x=fe().url.searchParams;let t=V(void 0),_=V(void 0),g=V(void 0),o=V(0),d=V(void 0),ee=S(()=>()=>{var s;return(s=l)!=null&&s.TimelessJewels?Object.keys(l.TimelessJewels).map(a=>({value:parseInt(a),label:l.TimelessJewels[parseInt(a)]})):[]}),je=S(()=>()=>{var a,u;if(!e(t)||!((u=(a=l)==null?void 0:a.TimelessJewelConquerors)!=null&&u[e(t).value]))return[];const s=l.TimelessJewelConquerors[e(t).value];return s?Object.keys(s).map(w=>({value:w,label:w})):[]}),_e=S(()=>()=>{var s;return(s=l)!=null&&s.PassiveSkills?Object.values(l.PassiveSkills).filter(a=>a!=null).map(a=>({value:a.Index,label:a.Name+" ("+a.ID+")"})):[]});$e(()=>{var s;if(!(!((s=l)!=null&&s.TimelessJewels)||e(ee)().length===0)){if(x.has("jewel")&&!e(t)){const a=x.get("jewel");if(a){const u=e(ee)().find(w=>w.value===parseInt(a));u&&p(t,u,!0)}}if(x.has("conqueror")&&!e(_)){const a=x.get("conqueror");a&&p(_,{value:a,label:a},!0)}if(x.has("passive_skill")&&!e(g)){const a=x.get("passive_skill");if(a){const u=e(_e)().find(w=>w.value===parseInt(a));u&&p(g,u,!0)}}if(x.has("seed")&&e(o)===0){const a=x.get("seed");a&&p(o,a,!0)}}}),$e(()=>{if(e(g)&&e(o)&&e(t)&&e(_)){const s=typeof e(o)=="string"?parseInt(e(o)):e(o);isNaN(s)||p(d,ma.Calculate(e(g).value,s,e(t).value,e(_).value),!0)}else p(d,void 0)});const Q=()=>{{const s={};e(t)&&(s.jewel=e(t).value),e(_)&&(s.conqueror=e(_).value),e(g)&&(s.passive_skill=e(g).value),e(o)&&(s.seed=e(o));const a=Object.keys(s).map(u=>u+"="+encodeURIComponent(s[u])).join("&");oa(fe().url.pathname+"?"+a)}};var ae=ya(),pe=i(ae),se=i(pe),ge=v(i(se),2),he=v(ge,2),Se=v(i(he),2);const Je=S(()=>e(ee)());ue(Se,{get items(){return e(Je)},get value(){return e(t)},set value(s){p(t,s,!0)},$$events:{select:Q}});var Re=v(Se,2);{var qe=s=>{var a=$a(),u=b(a),w=v(i(u),2);const Oe=S(()=>e(je)());ue(w,{get items(){return e(Oe)},get value(){return e(_)},set value(J){p(_,J,!0)},$$events:{select:Q}}),r(u);var Ce=v(u,2);{var De=J=>{var R=Y();const q=S(()=>l.TimelessJewelConquerors[e(t).value]);var Ne=b(R);{var Be=te=>{var ke=ka(),re=b(ke),Ge=v(i(re),2);const Ke=S(()=>e(_e)());ue(Ge,{get items(){return e(Ke)},get value(){return e(g)},set value(M){p(g,M,!0)},$$events:{select:Q}}),r(re);var Fe=v(re,2);{var Ue=M=>{var O=wa(),A=b(O),P=v(i(A),2);la(P);var Ve=v(P,2);{var ze=h=>{var I=ca(),E=i(I);r(I),y(()=>z(E,`Seed must be between ${l.TimelessJewelSeedRanges[e(t).value].Min??""} and ${l.TimelessJewelSeedRanges[e(t).value].Max??""}`)),n(h,I)};m(Ve,h=>{(typeof e(o)=="string"?parseInt(e(o))<l.TimelessJewelSeedRanges[e(t).value].Min||parseInt(e(o))>l.TimelessJewelSeedRanges[e(t).value].Max:e(o)<l.TimelessJewelSeedRanges[e(t).value].Min||e(o)>l.TimelessJewelSeedRanges[e(t).value].Max)&&h(ze)})}r(A);var Qe=v(A,2);{var Ee=h=>{var I=xa(),E=b(I);{var He=k=>{var T=pa(),j=b(T),H=v(i(j),2),f=i(H);r(H),r(j);var L=v(j,2);{var le=C=>{var $=_a();me($,21,()=>Object.keys(e(d).StatRolls),ce,(D,N,ie)=>{var W=Y();const B=S(()=>l.GetStatByIndex(e(d).AlternatePassiveSkill.StatsKeys[ie]));var G=b(W);{var K=F=>{var U=fa(),ne=i(U);r(U),y(X=>z(ne,`${e(B).Text||"<no name>"} (${e(B).ID??""}) - ${X??""}`),[()=>e(d).StatRolls[parseInt(e(N))]]),n(F,U)};m(G,F=>{e(B)&&F(K)})}n(D,W)}),r($),n(C,$)};m(L,C=>{e(d).StatRolls&&Object.keys(e(d).StatRolls).length>0&&e(d).AlternatePassiveSkill.StatsKeys&&C(le)})}y(()=>z(f,`${e(d).AlternatePassiveSkill.Name??""} (${e(d).AlternatePassiveSkill.ID??""})`)),n(k,T)};m(E,k=>{e(d).AlternatePassiveSkill&&k(He)})}var Le=v(E,2);{var We=k=>{var T=ba(),j=v(i(T),2);me(j,21,()=>e(d).AlternatePassiveAdditionInformations,ce,(H,f)=>{var L=Y(),le=b(L);{var C=$=>{var D=Sa(),N=i(D),ie=i(N);r(N);var W=v(N,2);{var B=G=>{var K=ha();me(K,21,()=>Object.keys(e(f).StatRolls),ce,(F,U,ne)=>{var X=Y();const ve=S(()=>l.GetStatByIndex(e(f).AlternatePassiveAddition.StatsKeys[ne]));var Xe=b(X);{var Ye=oe=>{var de=ga(),Ze=i(de);r(de),y(ea=>z(Ze,`${e(ve).Text||"<no name>"} (${e(ve).ID??""}) - ${ea??""}`),[()=>e(f).StatRolls[parseInt(e(U))]]),n(oe,de)};m(Xe,oe=>{e(ve)&&oe(Ye)})}n(F,X)}),r(K),n(G,K)};m(W,G=>{e(f).StatRolls&&Object.keys(e(f).StatRolls).length>0&&e(f).AlternatePassiveAddition.StatsKeys&&G(B)})}r(D),y(()=>z(ie,`${e(f).AlternatePassiveAddition.ID??""} (${e(f).AlternatePassiveAddition.Index??""})`)),n($,D)};m(le,$=>{e(f).AlternatePassiveAddition&&$(C)})}n(H,L)}),r(j),r(T),n(k,T)};m(Le,k=>{e(d).AlternatePassiveAdditionInformations&&e(d).AlternatePassiveAdditionInformations.length>0&&k(We)})}n(h,I)};m(Qe,h=>{e(d)&&h(Ee)})}y(()=>{Z(P,"min",l.TimelessJewelSeedRanges[e(t).value].Min),Z(P,"max",l.TimelessJewelSeedRanges[e(t).value].Max)}),ta("blur",P,Q),ia(P,()=>e(o),h=>p(o,h)),n(M,O)};m(Fe,M=>{var O,A;e(g)&&((A=(O=l)==null?void 0:O.TimelessJewelSeedRanges)!=null&&A[e(t).value])&&M(Ue)})}n(te,ke)};m(Ne,te=>{e(q)&&Object.keys(e(q)).includes(e(_).value)&&te(Be)})}n(J,R)};m(Ce,J=>{var R,q;e(_)&&((q=(R=l)==null?void 0:R.TimelessJewelConquerors)!=null&&q[e(t).value])&&J(De)})}n(s,a)};m(Re,s=>{e(t)&&s(qe)})}r(he),r(se);var be=v(se,2),xe=i(be),we=i(xe),Me=i(we);ye(2),r(we),r(xe),ye(2),r(be),r(pe),r(ae),y(()=>{Z(ge,"href",`${da??""}/tree`),Z(Me,"src",`${ua??""}/mf-academy-logo.png`)}),n(Ae,ae),sa(),Te()}export{Oa as component};
