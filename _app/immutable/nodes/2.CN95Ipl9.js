import{f as m,a as n,c as Y}from"../chunks/7J9utlwG.js";import{p as sa,u as Z,t as $,a as ta,g as e,b as S,s as U,c as p,d as i,e as v,r,n as Ae,f as b}from"../chunks/BG2JjhJ7.js";import{e as ra,s as V}from"../chunks/f0mDi-RU.js";import{i as c}from"../chunks/Db6z-dJC.js";import{S as me,p as la,s as ee,r as ia,b as na,e as fe,i as _e}from"../chunks/BRyWNxzR.js";import{s as va,a as oa}from"../chunks/oETMcK8Y.js";import{g as da}from"../chunks/ByLtjQE8.js";import{b as ua,a as ca}from"../chunks/COJenFE3.js";import{c as Pe,d as l}from"../chunks/DzQymabd.js";var ma=m('<div class="mt-2"> </div>'),fa=m("<li> </li>"),_a=m('<ol class="mt-4 list-decimal pl-8"></ol>'),pa=m('<div class="mt-4"><h3>Alternate Passive Skill</h3> <span> </span></div> <!>',1),ga=m("<li> </li>"),ha=m('<ol class="list-decimal pl-8"></ol>'),Sa=m('<li class="mt-4"><span> </span> <!></li>'),ba=m('<div class="mt-4"><h3>Additions</h3> <ul class="list-disc pl-8"></ul></div>'),xa=m("<!> <!>",1),wa=m('<div class="mt-4"><h3 class="mb-2">Seed</h3> <input type="number" class="seed"/> <!></div> <!>',1),ka=m('<div class="mt-4"><h3 class="mb-2">Passive Skill</h3> <!></div> <!>',1),$a=m('<div class="mt-4"><h3 class="mb-2">Conqueror</h3> <!></div> <!>',1),ya=m('<div class="py-10 flex flex-row justify-center w-screen h-screen"><div class="flex flex-col justify-between w-1/3"><div><h1 class="text-white mb-10 text-center">Timeless Calculator</h1> <a><h2 class="text-white mb-10 text-center underline text-orange-500">Skill Tree View</h2></a> <div class="themed"><h3 class="mb-2">Timeless Jewel</h3> <!> <!></div></div> <div class="flex justify-between"><div class="text-right text-orange-500"><a href="https://discord.gg/mfacademy" target="_blank" rel="noopener noreferrer" class="flex flex-row align-middle"><img width="24px" alt="MF Academy"/> <span class="ml-2">MF Academy</span></a></div> <div class="text-orange-500"><a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener noreferrer">Official Branch Source (Github)</a> <a href="https://github.com/BlazesRus/timeless-jewels" target="_blank" rel="noopener noreferrer">Source (Github)</a></div></div></div></div>');function Ma(Ie,je){sa(je,!0);const[Te,Re]=oa(),pe=()=>va(la,"$page",Te),x=pe().url.searchParams;let t=U(void 0),_=U(void 0),g=U(void 0),o=U(0),d=U(void 0),ae=S(()=>()=>{var a;return(a=l)!=null&&a.TimelessJewels?Object.keys(l.TimelessJewels).map(s=>({value:parseInt(s),label:l.TimelessJewels[parseInt(s)]})):[]}),ge=S(()=>()=>{var s,u;if(!e(t)||!((u=(s=l)==null?void 0:s.TimelessJewelConquerors)!=null&&u[e(t).value]))return[];const a=l.TimelessJewelConquerors[e(t).value];return a?Object.keys(a).map(Q=>({value:Q,label:Q})):[]}),se=S(()=>()=>{var a;return(a=l)!=null&&a.PassiveSkills?Object.values(l.PassiveSkills).filter(s=>s!=null).map(s=>({value:s.Index,label:s.Name+" ("+s.ID+")"})):[]});Z(()=>{if(e(ae)().length!==0&&x.has("jewel")&&!e(t)){const a=x.get("jewel");if(a){const s=e(ae)().find(u=>u.value===parseInt(a));s&&p(t,s,!0)}}}),Z(()=>{if(e(ge)().length!==0&&x.has("conqueror")&&!e(_)){const a=x.get("conqueror");a&&p(_,{value:a,label:a},!0)}}),Z(()=>{if(e(se)().length!==0){if(x.has("passive_skill")&&!e(g)){const a=x.get("passive_skill");if(a){const s=e(se)().find(u=>u.value===parseInt(a));s&&p(g,s,!0)}}if(x.has("seed")&&e(o)===0){const a=x.get("seed");a&&p(o,a,!0)}}}),Z(()=>{var a;if(e(g)&&e(o)&&e(t)&&e(_)&&((a=Pe)!=null&&a.Calculate)){const s=typeof e(o)=="string"?parseInt(e(o)):e(o);isNaN(s)||p(d,Pe.Calculate(e(g).value,s,e(t).value,e(_).value),!0)}else p(d,void 0)});const z=()=>{{const a={};e(t)&&(a.jewel=e(t).value),e(_)&&(a.conqueror=e(_).value),e(g)&&(a.passive_skill=e(g).value),e(o)&&(a.seed=e(o));const s=Object.keys(a).map(u=>u+"="+encodeURIComponent(a[u])).join("&");da(pe().url.pathname+"?"+s)}};var te=ya(),he=i(te),re=i(he),Se=v(i(re),2),be=v(Se,2),xe=v(i(be),2);const Je=S(()=>e(ae)());me(xe,{get items(){return e(Je)},get value(){return e(t)},set value(a){p(t,a,!0)},$$events:{select:z}});var qe=v(xe,2);{var Ce=a=>{var s=$a(),u=b(s),Q=v(i(u),2);const Oe=S(()=>e(ge)());me(Q,{get items(){return e(Oe)},get value(){return e(_)},set value(T){p(_,T,!0)},$$events:{select:z}}),r(u);var De=v(u,2);{var Ne=T=>{var R=Y();const J=S(()=>l.TimelessJewelConquerors[e(t).value]);var Be=b(R);{var Ge=le=>{var ye=ka(),ie=b(ye),Ke=v(i(ie),2);const Fe=S(()=>e(se)());me(Ke,{get items(){return e(Fe)},get value(){return e(g)},set value(q){p(g,q,!0)},$$events:{select:z}}),r(ie);var Ue=v(ie,2);{var Ve=q=>{var C=wa(),y=b(C),A=v(i(y),2);ia(A);var ze=v(A,2);{var Qe=h=>{var P=ma(),E=i(P);r(P),$(()=>V(E,`Seed must be between ${l.TimelessJewelSeedRanges[e(t).value].Min??""} and ${l.TimelessJewelSeedRanges[e(t).value].Max??""}`)),n(h,P)};c(ze,h=>{(typeof e(o)=="string"?parseInt(e(o))<l.TimelessJewelSeedRanges[e(t).value].Min||parseInt(e(o))>l.TimelessJewelSeedRanges[e(t).value].Max:e(o)<l.TimelessJewelSeedRanges[e(t).value].Min||e(o)>l.TimelessJewelSeedRanges[e(t).value].Max)&&h(Qe)})}r(y);var Ee=v(y,2);{var He=h=>{var P=xa(),E=b(P);{var Le=w=>{var I=pa(),j=b(I),H=v(i(j),2),f=i(H);r(H),r(j);var L=v(j,2);{var ne=M=>{var k=_a();fe(k,21,()=>Object.keys(e(d).StatRolls),_e,(O,D,ve)=>{var W=Y();const N=S(()=>l.GetStatByIndex(e(d).AlternatePassiveSkill.StatsKeys[ve]));var B=b(W);{var G=K=>{var F=fa(),oe=i(F);r(F),$(X=>V(oe,`${e(N).Text||"<no name>"} (${e(N).ID??""}) - ${X??""}`),[()=>e(d).StatRolls[parseInt(e(D))]]),n(K,F)};c(B,K=>{e(N)&&K(G)})}n(O,W)}),r(k),n(M,k)};c(L,M=>{e(d).StatRolls&&Object.keys(e(d).StatRolls).length>0&&e(d).AlternatePassiveSkill.StatsKeys&&M(ne)})}$(()=>V(f,`${e(d).AlternatePassiveSkill.Name??""} (${e(d).AlternatePassiveSkill.ID??""})`)),n(w,I)};c(E,w=>{e(d).AlternatePassiveSkill&&w(Le)})}var We=v(E,2);{var Xe=w=>{var I=ba(),j=v(i(I),2);fe(j,21,()=>e(d).AlternatePassiveAdditionInformations,_e,(H,f)=>{var L=Y(),ne=b(L);{var M=k=>{var O=Sa(),D=i(O),ve=i(D);r(D);var W=v(D,2);{var N=B=>{var G=ha();fe(G,21,()=>Object.keys(e(f).StatRolls),_e,(K,F,oe)=>{var X=Y();const de=S(()=>l.GetStatByIndex(e(f).AlternatePassiveAddition.StatsKeys[oe]));var Ye=b(X);{var Ze=ue=>{var ce=ga(),ea=i(ce);r(ce),$(aa=>V(ea,`${e(de).Text||"<no name>"} (${e(de).ID??""}) - ${aa??""}`),[()=>e(f).StatRolls[parseInt(e(F))]]),n(ue,ce)};c(Ye,ue=>{e(de)&&ue(Ze)})}n(K,X)}),r(G),n(B,G)};c(W,B=>{e(f).StatRolls&&Object.keys(e(f).StatRolls).length>0&&e(f).AlternatePassiveAddition.StatsKeys&&B(N)})}r(O),$(()=>V(ve,`${e(f).AlternatePassiveAddition.ID??""} (${e(f).AlternatePassiveAddition.Index??""})`)),n(k,O)};c(ne,k=>{e(f).AlternatePassiveAddition&&k(M)})}n(H,L)}),r(j),r(I),n(w,I)};c(We,w=>{e(d).AlternatePassiveAdditionInformations&&e(d).AlternatePassiveAdditionInformations.length>0&&w(Xe)})}n(h,P)};c(Ee,h=>{e(d)&&h(He)})}$(()=>{ee(A,"min",l.TimelessJewelSeedRanges[e(t).value].Min),ee(A,"max",l.TimelessJewelSeedRanges[e(t).value].Max)}),ra("blur",A,z),na(A,()=>e(o),h=>p(o,h)),n(q,C)};c(Ue,q=>{var C,y;e(g)&&((y=(C=l)==null?void 0:C.TimelessJewelSeedRanges)!=null&&y[e(t).value])&&q(Ve)})}n(le,ye)};c(Be,le=>{e(J)&&Object.keys(e(J)).includes(e(_).value)&&le(Ge)})}n(T,R)};c(De,T=>{var R,J;e(_)&&((J=(R=l)==null?void 0:R.TimelessJewelConquerors)!=null&&J[e(t).value])&&T(Ne)})}n(a,s)};c(qe,a=>{e(t)&&a(Ce)})}r(be),r(re);var we=v(re,2),ke=i(we),$e=i(ke),Me=i($e);Ae(2),r($e),r(ke),Ae(2),r(we),r(he),r(te),$(()=>{ee(Se,"href",`${ua??""}/tree`),ee(Me,"src",`${ca??""}/mf-academy-logo.png`)}),n(Ie,te),ta(),Re()}export{Ma as component};
