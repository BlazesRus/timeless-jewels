import{f as d,a as o}from"../chunks/CsE2uwcT.js";import{i as Ue}from"../chunks/CST88T68.js";import{p as Ve,m as q,g as e,l as ye,a as ze,t as w,b as Qe,s as B,c as r,d as i,r as s,n as xe,f as F,e as $e}from"../chunks/BDL7JTgn.js";import{e as Ee,s as H}from"../chunks/CCaiSu_a.js";import{i as b}from"../chunks/BaD7dMdp.js";import{S as se,p as Le,s as X,r as We,b as Xe,e as re}from"../chunks/D86nslaO.js";import{s as Ye,a as Ze}from"../chunks/BVLhlqDO.js";import{g as ea}from"../chunks/DRkTodkH.js";import{b as aa,a as ta}from"../chunks/BvGyDwWL.js";import{d as x,c as Ae}from"../chunks/CYRu4Y2l.js";var sa=d('<div class="mt-2"> </div>'),ra=d("<li> </li>"),la=d('<ol class="mt-4 list-decimal pl-8"></ol>'),ia=d('<div class="mt-4"><h3>Alternate Passive Skill</h3> <span> </span></div> <!>',1),na=d("<li> </li>"),va=d('<ol class="list-decimal pl-8"></ol>'),oa=d('<li class="mt-4"><span> </span> <!></li>'),da=d('<div class="mt-4"><h3>Additions</h3> <ul class="list-disc pl-8"></ul></div>'),ma=d("<!> <!>",1),ca=d('<div class="mt-4"><h3 class="mb-2">Seed</h3> <input type="number" class="seed"/> <!></div> <!>',1),ua=d('<div class="mt-4"><h3 class="mb-2">Passive Skill</h3> <!></div> <!>',1),_a=d('<div class="mt-4"><h3 class="mb-2">Conqueror</h3> <!></div> <!>',1),fa=d('<div class="py-10 flex flex-row justify-center w-screen h-screen"><div class="flex flex-col justify-between w-1/3"><div><h1 class="text-white mb-10 text-center">Timeless Calculator</h1> <a><h2 class="text-white mb-10 text-center underline text-orange-500">Skill Tree View</h2></a> <div class="themed"><h3 class="mb-2">Timeless Jewel</h3> <!> <!></div></div> <div class="flex justify-between"><div class="text-right text-orange-500"><a href="https://discord.gg/mfacademy" target="_blank" rel="noopener noreferrer" class="flex flex-row align-middle"><img width="24px" alt="MF Academy"/> <span class="ml-2">MF Academy</span></a></div> <div class="text-orange-500"><a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener noreferrer">Official Branch Source (Github)</a> <a href="https://github.com/BlazesRus/timeless-jewels" target="_blank" rel="noopener noreferrer">Source (Github)</a> <a href="https://github.com/ImHamba/timeless-jewels" target="_blank" rel="noopener noreferrer">ImHamba Branch Source (Github)</a></div></div></div></div>');function wa(ke,we){Ve(we,!1);const[Pe,Ie]=Ze(),le=()=>Ye(Le,"$page",Pe),Y=q(),h=le().url.searchParams,ie=x.TimelessJewels??{},U=x.TimelessJewelConquerors??{},P=x.TimelessJewelSeedRanges??{},je=(x.PassiveSkills??[]).filter(Boolean),ne=Object.keys(ie).map(a=>({value:Number(a),label:ie[Number(a)]}));let t=q(h.has("jewel")&&ne.find(a=>a.value===Number(h.get("jewel")))||void 0),_=q(h.has("conqueror")&&e(Y).find(a=>a.value===h.get("conqueror"))||void 0);const ve=je.filter(a=>!!a).map(a=>({value:a.Index,label:`${a.Name} (${a.ID})`}));let g=q(h.has("passive_skill")&&ve.find(a=>a.value===Number(h.get("passive_skill")))||void 0),f=q(h.has("seed")?Number(h.get("seed")):0),l=q();const V=()=>{{const a={};e(t)&&(a.jewel=e(t).value),e(_)&&(a.conqueror=e(_).value),e(g)&&(a.passive_skill=e(g).value),e(f)&&(a.seed=e(f));const z=Object.keys(a).map(I=>I+"="+encodeURIComponent(a[I])).join("&");ea(le().url.pathname+"?"+z)}};ye(()=>e(t),()=>{B(Y,e(t)&&U[e(t).value]?Object.keys(U[e(t).value]??{}).map(a=>({value:a,label:a})):[])}),ye(()=>(e(g),e(f),e(t),e(_),Ae),()=>{e(g)&&e(f)&&e(t)&&e(_)&&B(l,Ae.Calculate(e(g).value,e(f),e(t).value,e(_).value))}),ze(),Ue();var Z=fa(),oe=r(Z),ee=r(oe),de=i(r(ee),2),me=i(de,2),ce=i(r(me),2);se(ce,{get items(){return ne},get value(){return e(t)},set value(a){B(t,a)},$$events:{select:V},$$legacy:!0});var Re=i(ce,2);{var Ne=a=>{var z=_a(),I=F(z),qe=i(r(I),2);se(qe,{get items(){return e(Y)},get value(){return e(_)},set value(J){B(_,J)},$$events:{select:V},$$legacy:!0}),s(I);var Be=i(I,2);{var Je=J=>{var pe=ua(),ae=F(pe),Ke=i(r(ae),2);se(Ke,{get items(){return ve},get value(){return e(g)},set value(K){B(g,K)},$$events:{select:V},$$legacy:!0}),s(ae);var Me=i(ae,2);{var Te=K=>{var be=ca(),te=F(be),j=i(r(te),2);We(j);var Ce=i(j,2);{var Ge=m=>{var c=sa(),$=r(c);s(c),w(()=>{var Q,E;return H($,`Seed must be between ${(e(t)&&((Q=P[e(t).value])==null?void 0:Q.Min))??""} and ${(e(t)&&((E=P[e(t).value])==null?void 0:E.Max))??""}`)}),o(m,c)};b(Ce,m=>{var c,$;e(t)&&(e(f)<(((c=P[e(t).value])==null?void 0:c.Min)??-1/0)||e(f)>((($=P[e(t).value])==null?void 0:$.Max)??1/0))&&m(Ge)})}s(te);var De=i(te,2);{var Fe=m=>{var c=ma(),$=F(c);{var Q=A=>{var R=ia(),N=F(R),S=i(r(N),2),n=r(S);s(S),s(N);var M=i(N,2);{var T=C=>{var G=la();re(G,7,()=>Object.keys(e(l).StatRolls??{}),D=>D,(D,p,v)=>{var u=ra(),k=r(u,!0);s(u),w(y=>H(k,y),[()=>{var y,O,L;return(y=e(l).AlternatePassiveSkill)!=null&&y.StatsKeys&&typeof e(l).AlternatePassiveSkill.StatsKeys[e(v)]=="number"?`${((O=x.GetStatByIndex(e(l).AlternatePassiveSkill.StatsKeys[e(v)]))==null?void 0:O.Text)||"<no name>"} (${(L=x.GetStatByIndex(e(l).AlternatePassiveSkill.StatsKeys[e(v)]))==null?void 0:L.ID}) - ${e(l).StatRolls[Number(e(p))]}`:`<no name> () - ${e(l).StatRolls[Number(e(p))]}`}],$e),o(D,u)}),s(G),o(C,G)};b(M,C=>{e(l).StatRolls&&Object.keys(e(l).StatRolls??{}).length>0&&C(T)})}w(()=>H(n,`${e(l).AlternatePassiveSkill.Name??""} (${e(l).AlternatePassiveSkill.ID??""})`)),o(A,R)};b($,A=>{e(l).AlternatePassiveSkill&&A(Q)})}var E=i($,2);{var He=A=>{var R=da(),N=i(r(R),2);re(N,5,()=>e(l).AlternatePassiveAdditionInformations,S=>{var n;return(n=S==null?void 0:S.AlternatePassiveAddition)==null?void 0:n.ID},(S,n)=>{var M=oa(),T=r(M),C=r(T);s(T);var G=i(T,2);{var D=p=>{var v=va();re(v,7,()=>Object.keys(e(n).StatRolls),u=>u,(u,k,y)=>{var O=na(),L=r(O,!0);s(O),w(W=>H(L,W),[()=>{var W,he,ge,Se;return(he=(W=e(n))==null?void 0:W.AlternatePassiveAddition)!=null&&he.StatsKeys&&typeof e(n).AlternatePassiveAddition.StatsKeys[e(y)]=="number"?`${((ge=x.GetStatByIndex(e(n).AlternatePassiveAddition.StatsKeys[e(y)]))==null?void 0:ge.Text)||"<no name>"} (${(Se=x.GetStatByIndex(e(n).AlternatePassiveAddition.StatsKeys[e(y)]))==null?void 0:Se.ID}) - ${e(n).StatRolls[Number(e(k))]}`:`<no name> () - ${e(n).StatRolls[Number(e(k))]}`}],$e),o(u,O)}),s(v),o(p,v)};b(G,p=>{var v;(v=e(n))!=null&&v.StatRolls&&Object.keys(e(n).StatRolls).length>0&&p(D)})}s(M),w(()=>{var p,v,u,k;return H(C,`${((v=(p=e(n))==null?void 0:p.AlternatePassiveAddition)==null?void 0:v.ID)??""} (${((k=(u=e(n))==null?void 0:u.AlternatePassiveAddition)==null?void 0:k.Index)??""})`)}),o(S,M)}),s(N),s(R),o(A,R)};b(E,A=>{Array.isArray(e(l).AlternatePassiveAdditionInformations)&&e(l).AlternatePassiveAdditionInformations.length>0&&A(He)})}o(m,c)};b(De,m=>{e(l)&&m(Fe)})}w(()=>{var m,c;X(j,"min",e(t)&&((m=P[e(t).value])==null?void 0:m.Min)),X(j,"max",e(t)&&((c=P[e(t).value])==null?void 0:c.Max))}),Xe(j,()=>e(f),m=>B(f,m)),Ee("blur",j,V),o(K,be)};b(Me,K=>{e(g)&&K(Te)})}o(J,pe)};b(Be,J=>{e(_)&&e(t)&&U[e(t).value]&&Object.keys(U[e(t).value]??{}).indexOf(e(_).value)>=0&&J(Je)})}o(a,z)};b(Re,a=>{e(t)&&a(Ne)})}s(me),s(ee);var ue=i(ee,2),_e=r(ue),fe=r(_e),Oe=r(fe);xe(2),s(fe),s(_e),xe(2),s(ue),s(oe),s(Z),w(()=>{X(de,"href",`${aa??""}/tree`),X(Oe,"src",`${ta??""}/mf-academy-logo.png`)}),o(ke,Z),Qe(),Ie()}export{wa as component};
