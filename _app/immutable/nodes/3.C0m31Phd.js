var En=Object.defineProperty;var Pn=Object.getPrototypeOf;var zn=Reflect.get;var Nr=r=>{throw TypeError(r)};var kn=(r,t,s)=>t in r?En(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var jr=(r,t,s)=>kn(r,typeof t!="symbol"?t+"":t,s),cr=(r,t,s)=>t.has(r)||Nr("Cannot "+s);var b=(r,t,s)=>(cr(r,t,"read from private field"),s?s.call(r):t.get(r)),oe=(r,t,s)=>t.has(r)?Nr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,s),Lt=(r,t,s,n)=>(cr(r,t,"write to private field"),n?n.call(r,s):t.set(r,s),s),Be=(r,t,s)=>(cr(r,t,"access private method"),s);var Dr=(r,t,s,n)=>({set _(a){Lt(r,t,a,s)},get _(){return b(r,t,n)}}),qr=(r,t,s)=>zn(Pn(r),s,t);import{f as N,a as k,c as er,t as Ts}from"../chunks/CsE2uwcT.js";import{i as Ht}from"../chunks/CST88T68.js";import{h as Cn,E as On,x as Mn,O as $r,at as Rn,i as Ln,z as Nn,L as jn,F as en,P as Dn,s as l,p as At,c as S,d as A,r as m,t as re,b as Tt,g as e,e as se,m as P,au as Zt,l as me,I as Te,a as tr,ap as Ye,f as Ce,av as Gt,aw as qn,aq as es,Y as Fn,as as Ks,ax as Jn,C as dr,ay as Wn,az as Es,n as Un}from"../chunks/BDL7JTgn.js";import{s as je,e as B}from"../chunks/CCaiSu_a.js";import{i as le}from"../chunks/BaD7dMdp.js";import{e as It,a as us,c as Hn,d as Kn,f as Vn,s as pr,i as Bn,p as Yn,S as Fs,g as tt,r as Xt,b as Qt}from"../chunks/BL7x5oEK.js";import{p as j,b as Ys,r as tn,a as sn,s as rn}from"../chunks/BVLhlqDO.js";import{g as Gn}from"../chunks/BH6EN7hU.js";import{o as Sr,c as Xn,t as Qn,a as vt,b as Zn,d as fr,e as Fr,f as Wt,g as Jr,h as Js,i as Wr,j as Ur,k as vr,m as $n,n as Hr,p as ea,q as hr,r as ta,s as Kr,u as sa}from"../chunks/DKepS_hb.js";import{c as ra,o as nn,a as Gs,d as na,w as aa}from"../chunks/B9CavRKB.js";import{s as Vs,d as rt,c as br}from"../chunks/CYRu4Y2l.js";function ia(r,t,...s){var n=r,a=$r,i;Cn(()=>{a!==(a=t())&&(i&&(Rn(i),i=null),i=Mn(()=>a(n,...s)))},On),Ln&&(n=Nn)}var Nt,ts,ks,Xs,an;const Qs=class Qs{constructor(t){oe(this,Xs);oe(this,Nt,new WeakMap);oe(this,ts);oe(this,ks);Lt(this,ks,t)}observe(t,s){var n=b(this,Nt).get(t)||new Set;return n.add(s),b(this,Nt).set(t,n),Be(this,Xs,an).call(this).observe(t,b(this,ks)),()=>{var a=b(this,Nt).get(t);a.delete(s),a.size===0&&(b(this,Nt).delete(t),b(this,ts).unobserve(t))}}};Nt=new WeakMap,ts=new WeakMap,ks=new WeakMap,Xs=new WeakSet,an=function(){return b(this,ts)??Lt(this,ts,new ResizeObserver(t=>{for(var s of t){Qs.entries.set(s.target,s);for(var n of b(this,Nt).get(s.target)||[])n(s)}}))},jr(Qs,"entries",new WeakMap);let wr=Qs;var oa=new wr({box:"border-box"});function Vr(r,t,s){var n=oa.observe(r,()=>s(r[t]));jn(()=>(en(()=>s(r[t])),n))}function la(r,t,s,n,a){var i=()=>{n(s[r])};s.addEventListener(t,i),i(),(s===document.body||s===window||s===document)&&Dn(()=>{s.removeEventListener(t,i)})}function _s(r){l(r,r.v+1)}var ua=N("<li> </li>"),ca=N('<div class="mt-2"><span> </span> <ul class="list-disc pl-6 font-bold"></ul></div>'),da=N('<div class="my-2 border-white/50 border p-2 flex flex-col cursor-pointer" role="button" tabindex="0"><div class="flex flex-row justify-between"><button class="px-3 invisible">Trade</button> <div class="font-bold text-orange-500 text-center"> </div> <button class="px-3 bg-blue-500/40 rounded">Trade</button></div> <!></div>');function Br(r,t){At(t,!1);let s=j(t,"highlight",8),n=j(t,"set",8),a=j(t,"jewel",8),i=j(t,"conqueror",8);const f=()=>s()(n().seed,n().skills.map(z=>z.passive));Ht();var c=da(),u=S(c),g=A(S(u),2),y=S(g);m(g);var _=A(g,2);m(u);var T=A(u,2);It(T,1,()=>n().skills,z=>z.passive,(z,v)=>{var C=ca(),p=S(C),Y=S(p);m(p);var R=A(p,2);It(R,5,()=>Object.keys(e(v).stats),F=>F,(F,J)=>{var ee=ua(),x=S(ee,!0);m(ee),re(h=>je(x,h),[()=>Qn(e(J),e(v).stats[e(J)])],se),k(F,ee)}),m(R),m(C),re(()=>je(Y,`${vt.nodes[e(v).passive].name??""} (${e(v).passive??""})`)),k(z,C)}),m(c),re(()=>je(y,`Seed ${n().seed??""} (weight ${n().weight??""}) Stat Total: ${n().statTotal??""}`)),B("click",_,()=>Sr(Xn(a(),i(),n()))),B("click",c,f),B("keydown",c,f),k(r,c),Tt()}const Ws={START:"start",CENTER:"center",END:"end"},_t={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Is={OBSERVED:0,REQUESTED:1},fa={[_t.VERTICAL]:"top",[_t.HORIZONTAL]:"left"},Yr={[_t.VERTICAL]:"scrollTop",[_t.HORIZONTAL]:"scrollLeft"};class va{constructor({itemSize:t,itemCount:s,estimatedItemSize:n}){this.itemSize=t,this.itemCount=s,this.estimatedItemSize=n,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:t,itemCount:s,estimatedItemSize:n}){s!=null&&(this.itemCount=s),n!=null&&(this.estimatedItemSize=n),t!=null&&(this.itemSize=t),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(t){const{itemSize:s}=this;return typeof s=="function"?s(t):Array.isArray(s)?s[t]:s}computeTotalSizeAndPositionData(){let t=0;for(let s=0;s<this.itemCount;s++){const n=this.getSize(s),a=t;t+=n,this.itemSizeAndPositionData[s]={offset:a,size:n}}this.totalSize=t}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(t){if(t<0||t>=this.itemCount)throw Error(`Requested index ${t} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(t):this.itemSizeAndPositionData[t]}getJustInTimeSizeAndPositionForIndex(t){if(t>this.lastMeasuredIndex){const s=this.getSizeAndPositionOfLastMeasuredItem();let n=s.offset+s.size;for(let a=this.lastMeasuredIndex+1;a<=t;a++){const i=this.getSize(a);if(i==null||isNaN(i))throw Error(`Invalid size returned for index ${a} of value ${i}`);this.itemSizeAndPositionData[a]={offset:n,size:i},n+=i}this.lastMeasuredIndex=t}return this.itemSizeAndPositionData[t]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const t=this.getSizeAndPositionOfLastMeasuredItem();return t.offset+t.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:t=Ws.START,containerSize:s,currentOffset:n,targetIndex:a}){if(s<=0)return 0;const i=this.getSizeAndPositionForIndex(a),f=i.offset,c=f-s+i.size;let u;switch(t){case Ws.END:u=c;break;case Ws.CENTER:u=f-(s-i.size)/2;break;case Ws.START:u=f;break;default:u=Math.max(c,Math.min(f,n))}const g=this.getTotalSize();return Math.max(0,Math.min(g-s,u))}getVisibleRange({containerSize:t=0,offset:s,overscanCount:n}){if(this.getTotalSize()===0)return{};const i=s+t;let f=this.findNearestItem(s);if(f===void 0)throw Error(`Invalid offset ${s} specified`);const c=this.getSizeAndPositionForIndex(f);s=c.offset+c.size;let u=f;for(;s<i&&u<this.itemCount-1;)u++,s+=this.getSizeAndPositionForIndex(u).size;return n&&(f=Math.max(0,f-n),u=Math.min(u+n,this.itemCount-1)),{start:f,stop:u}}resetItem(t){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,t-1)}findNearestItem(t){if(isNaN(t))throw Error(`Invalid offset ${t} specified`);t=Math.max(0,t);const s=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this.lastMeasuredIndex);return s.offset>=t?this.binarySearch({high:n,low:0,offset:t}):this.exponentialSearch({index:n,offset:t})}binarySearch({low:t,high:s,offset:n}){let a=0,i=0;for(;t<=s;){if(a=t+Math.floor((s-t)/2),i=this.getSizeAndPositionForIndex(a).offset,i===n)return a;i<n?t=a+1:i>n&&(s=a-1)}return t>0?t-1:0}exponentialSearch({index:t,offset:s}){let n=1;for(;t<this.itemCount&&this.getSizeAndPositionForIndex(t).offset<s;)t+=n,n*=2;return this.binarySearch({high:Math.min(t,this.itemCount-1),low:Math.floor(t/2),offset:s})}}const ha=(()=>{let r=!1;try{const t=Object.defineProperty({},"passive",{get(){return r={passive:!0},!0}});window.addEventListener("testpassive",t,t),window.remove("testpassive",t,t)}catch{}return r})();var ma=N('<div class="virtual-list-wrapper svelte-1d4hv8l"><!> <div class="virtual-list-inner svelte-1d4hv8l"></div> <!></div>');function Gr(r,t){At(t,!1);let s=j(t,"height",12),n=j(t,"width",12,"100%"),a=j(t,"itemCount",12),i=j(t,"itemSize",12),f=j(t,"estimatedItemSize",12,null),c=j(t,"stickyIndices",12,null),u=j(t,"getKey",12,null),g=j(t,"scrollDirection",28,()=>_t.VERTICAL),y=j(t,"scrollOffset",12,null),_=j(t,"scrollToIndex",12,null),T=j(t,"scrollToAlignment",12,null),z=j(t,"scrollToBehaviour",12,"instant"),v=j(t,"overscanCount",12,3);const C=ra(),p=new va({itemCount:a(),itemSize:i(),estimatedItemSize:Je()});let Y=P(!1),R=P(),F=P([]),J=P({offset:y()||_()!=null&&e(F).length&&Oe(_())||0,scrollChangeReason:Is.REQUESTED}),ee=e(J),x={scrollToIndex:_(),scrollToAlignment:T(),scrollOffset:y(),itemCount:a(),itemSize:i(),estimatedItemSize:f()},h={},D=P(""),U=P("");E(),nn(()=>{l(Y,!0),e(R).addEventListener("scroll",M,ha),y()!=null?_e(y()):_()!=null&&_e(Oe(_()))}),Gs(()=>{e(Y)&&e(R).removeEventListener("scroll",M)});function ne(){if(!e(Y))return;const w=x.scrollToIndex!==_()||x.scrollToAlignment!==T(),q=x.itemCount!==a()||x.itemSize!==i()||x.estimatedItemSize!==f();q&&(p.updateConfig({itemSize:i(),itemCount:a(),estimatedItemSize:Je()}),H()),x.scrollOffset!==y()?l(J,{offset:y()||0,scrollChangeReason:Is.REQUESTED}):typeof _()=="number"&&(w||q)&&l(J,{offset:Oe(_(),T(),a()),scrollChangeReason:Is.REQUESTED}),x={scrollToIndex:_(),scrollToAlignment:T(),scrollOffset:y(),itemCount:a(),itemSize:i(),estimatedItemSize:f()}}function Xe(){if(!e(Y))return;const{offset:w,scrollChangeReason:q}=e(J);(ee.offset!==w||ee.scrollChangeReason!==q)&&E(),ee.offset!==w&&q===Is.REQUESTED&&_e(w),ee=e(J)}function E(){const{offset:w}=e(J),{start:q,stop:ue}=p.getVisibleRange({containerSize:g()===_t.VERTICAL?s():n(),offset:w,overscanCount:v()});let de=[];const ae=p.getTotalSize();if(g()===_t.VERTICAL){const G=typeof s()=="number"?"px":"";l(D,`height:${s()}${G};width:${n()};`),l(U,`flex-direction:column;height:${ae}px;`)}else{const G=typeof n()=="number"?"px":"";l(D,`height:${s()};width:${n()}${G}`),l(U,`min-height:100%;width:${ae}px;`)}const ht=c()!=null&&c().length!==0;if(ht)for(let G=0;G<c().length;G++){const mt=c()[G];de.push({index:mt,style:nt(mt,!0)})}if(q!==void 0&&ue!==void 0){for(let G=q;G<=ue;G++)ht&&c().includes(G)||de.push({index:G,style:nt(G,!1)});C("itemsUpdated",{start:q,end:ue})}l(F,de)}function _e(w){"scroll"in e(R)?e(R).scroll({[fa[g()]]:w,behavior:z()}):Zt(R,e(R)[Yr[g()]]=w)}function H(w=0){h={},p.resetItem(w),E()}function Oe(w,q=T(),ue=a()){return(w<0||w>=ue)&&(w=0),p.getUpdatedOffsetForIndex({align:q,containerSize:g()===_t.VERTICAL?s():n(),currentOffset:e(J).offset||0,targetIndex:w})}function M(w){const q=Et();q<0||e(J).offset===q||w.target!==e(R)||(l(J,{offset:q,scrollChangeReason:Is.OBSERVED}),C("afterScroll",{offset:q,event:w}))}function Et(){return e(R)[Yr[g()]]}function Je(){return f()||typeof i()=="number"&&i()||50}function nt(w,q){if(h[w])return h[w];const{size:ue,offset:de}=p.getSizeAndPositionForIndex(w);let ae;return g()===_t.VERTICAL?(ae=`left:0;width:100%;height:${ue}px;`,q?ae+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${de}px;margin-bottom:${-(de+ue)}px;`:ae+=`position:absolute;top:${de}px;`):(ae=`top:0;width:${ue}px;`,q?ae+=`position:sticky;z-index:1;left:0;margin-left:${de}px;margin-right:${-(de+ue)}px;`:ae+=`position:absolute;height:100%;left:${de}px;`),h[w]=ae}me(()=>(Te(_()),Te(T()),Te(y()),Te(a()),Te(i()),Te(f())),()=>{_(),T(),y(),a(),i(),f(),ne()}),me(()=>e(J),()=>{e(J),Xe()}),me(()=>(Te(s()),Te(n()),Te(c()),e(Y)),()=>{s(),n(),c(),e(Y)&&H(0)}),tr(),Ht();var Qe=ma(),at=S(Qe);Vs(at,t,"header",{},null);var Pt=A(at,2);It(Pt,5,()=>e(F),w=>u()?u()(w.index):w.index,(w,q)=>{var ue=er(),de=Ce(ue);Vs(de,t,"item",{get style(){return e(q).style},get index(){return e(q).index}},null),k(w,ue)}),m(Pt);var cs=A(Pt,2);return Vs(cs,t,"footer",{},null),m(Qe),Ys(Qe,w=>l(R,w),()=>e(R)),re(()=>{us(Qe,e(D)),us(Pt,e(U))}),k(r,Qe),Hn(t,"recomputeSizes",H),Tt({recomputeSizes:H,get height(){return s()},set height(w){s(w),Ye()},get width(){return n()},set width(w){n(w),Ye()},get itemCount(){return a()},set itemCount(w){a(w),Ye()},get itemSize(){return i()},set itemSize(w){i(w),Ye()},get estimatedItemSize(){return f()},set estimatedItemSize(w){f(w),Ye()},get stickyIndices(){return c()},set stickyIndices(w){c(w),Ye()},get getKey(){return u()},set getKey(w){u(w),Ye()},get scrollDirection(){return g()},set scrollDirection(w){g(w),Ye()},get scrollOffset(){return y()},set scrollOffset(w){y(w),Ye()},get scrollToIndex(){return _()},set scrollToIndex(w){_(w),Ye()},get scrollToAlignment(){return T()},set scrollToAlignment(w){T(w),Ye()},get scrollToBehaviour(){return z()},set scrollToBehaviour(w){z(w),Ye()},get overscanCount(){return v()},set overscanCount(w){v(w),Ye()}})}var ga=N('<div slot="item"><!></div>'),pa=N('<div class="flex flex-col overflow-auto min-h-[200px] mb-2"><!></div>'),ba=N('<button class="text-lg w-full p-2 px-4 bg-neutral-500/30 rounded flex flex-row justify-between mb-2"><span> </span> <span> </span></button> <!>',1),wa=N('<div class="flex flex-col overflow-auto"></div>'),xa=N('<div slot="item"><!></div>'),ya=N('<div class="mt-4 flex flex-col overflow-auto"><!></div>');function Sa(r,t){At(t,!1);let s=j(t,"highlight",8),n=j(t,"searchResults",8),a=j(t,"groupResults",8,!0),i=j(t,"jewel",8),f=j(t,"conqueror",8);const c=z=>56+z.skills.reduce((v,C)=>v+32+Object.keys(C.stats).length*24,0);let u=P("");Ht();var g=er(),y=Ce(g);{var _=z=>{var v=wa();It(v,5,()=>Object.keys(n().grouped).map(C=>parseInt(C,10)).sort((C,p)=>C-p).reverse(),C=>C,(C,p)=>{var Y=ba(),R=Ce(Y),F=S(R),J=S(F);m(F);var ee=A(F,2),x=S(ee,!0);m(ee),m(R);var h=A(R,2);{var D=U=>{var ne=pa(),Xe=S(ne);const E=se(()=>n().grouped[e(p)].map(c));Gr(Xe,{height:"auto",overscanCount:10,get itemCount(){return n().grouped[e(p)].length},get itemSize(){return e(E)},$$slots:{item:(_e,H)=>{var Oe=ga();const M=se(()=>H.index),Et=se(()=>H.style);var Je=S(Oe);Br(Je,{get set(){return n().grouped[e(p)][e(M)]},get highlight(){return s()},get jewel(){return i()},get conqueror(){return f()}}),m(Oe),re(()=>us(Oe,e(Et))),k(_e,Oe)}}}),m(ne),k(U,ne)};le(h,U=>{e(u)===e(p)&&U(D)})}re(()=>{je(J,`${e(p)??""} Match${e(p)>1?"es":""} [${n().grouped[e(p)].length??""}]`),je(x,e(u)===e(p)?"^":"V")}),B("click",R,()=>l(u,e(u)===e(p)?"":e(p))),k(C,Y)}),m(v),k(z,v)},T=z=>{var v=ya(),C=S(v);const p=se(()=>n().raw.map(c));Gr(C,{height:"auto",overscanCount:15,get itemCount(){return n().raw.length},get itemSize(){return e(p)},$$slots:{item:(Y,R)=>{var F=xa();const J=se(()=>R.index),ee=se(()=>R.style);var x=S(F);Br(x,{get set(){return n().raw[e(J)]},get highlight(){return s()},get jewel(){return i()},get conqueror(){return f()}}),m(F),re(()=>us(F,e(ee))),k(Y,F)}}}),m(v),k(z,v)};le(y,z=>{a()?z(_):z(T,!1)})}k(r,g),Tt()}const _a=r=>{const t=r*2,s=t>>16&255,n=t>>8&255,a=t&255;return[s,n,a]},Ia=([r,t,s])=>{const n=(r<<16|t<<8|s)/2;return n%1?0:n},Aa=["filter","shadowBlur","globalCompositeOperation","globalAlpha","fillStyle","strokeStyle"],Ta=(r,t,{rgbToId:s=Ia,idToRgb:n=_a}={})=>{const a=r.getContext("2d",t),i=new OffscreenCanvas(r.width,r.height),f=i.getContext("2d",{willReadFrequently:!1,alpha:!1});return new Proxy(a,{get(c,u){const{width:g,height:y}=r;if((g!==i.width||y!==i.height)&&(i.width=g,i.height=y),u==="getLayerIdAt")return(T,z)=>{const[v,C,p]=f.getImageData(T,z,1,1).data;return s([v,C,p])};if(u==="setCurrentLayerId")return T=>{const[z,v,C]=n(T),p=`rgb(${z},${v},${C})`;f.fillStyle=p,f.strokeStyle=p};const _=c[u];return typeof _!="function"?_:(...T)=>{let z=u,v=T;return u==="drawImage"&&(z="fillRect",v=T.slice(-4)),f[z](...v),Reflect.apply(_,c,T)}},set(c,u,g){return c[u]=g,Aa.includes(u)||(f[u]=g),!0}})};var dt,ft,St,ss,Bs;const _r=class _r extends Map{constructor(s){super();oe(this,ss);oe(this,dt,new Map);oe(this,ft,Gt(0));oe(this,St,Gt(0));if(s){for(var[n,a]of s)super.set(n,a);b(this,St).v=super.size}}has(s){var n=b(this,dt),a=n.get(s);if(a===void 0){var i=super.get(s);if(i!==void 0)a=Gt(0),n.set(s,a);else return e(b(this,ft)),!1}return e(a),!0}forEach(s,n){Be(this,ss,Bs).call(this),super.forEach(s,n)}get(s){var n=b(this,dt),a=n.get(s);if(a===void 0){var i=super.get(s);if(i!==void 0)a=Gt(0),n.set(s,a);else{e(b(this,ft));return}}return e(a),super.get(s)}set(s,n){var _;var a=b(this,dt),i=a.get(s),f=super.get(s),c=super.set(s,n),u=b(this,ft);if(i===void 0)a.set(s,Gt(0)),l(b(this,St),super.size),_s(u);else if(f!==n){_s(i);var g=u.reactions===null?null:new Set(u.reactions),y=g===null||!((_=i.reactions)!=null&&_.every(T=>g.has(T)));y&&_s(u)}return c}delete(s){var n=b(this,dt),a=n.get(s),i=super.delete(s);return a!==void 0&&(n.delete(s),l(b(this,St),super.size),l(a,-1),_s(b(this,ft))),i}clear(){if(super.size!==0){super.clear();var s=b(this,dt);l(b(this,St),0);for(var n of s.values())l(n,-1);_s(b(this,ft)),s.clear()}}keys(){return e(b(this,ft)),super.keys()}values(){return Be(this,ss,Bs).call(this),super.values()}entries(){return Be(this,ss,Bs).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return e(b(this,St)),super.size}};dt=new WeakMap,ft=new WeakMap,St=new WeakMap,ss=new WeakSet,Bs=function(){e(b(this,ft));var s=b(this,dt);if(b(this,St).v!==s.size)for(var n of qr(_r.prototype,this,"keys").call(this))s.has(n)||s.set(n,Gt(0));for(var[,a]of b(this,dt))e(a)};let Ps=_r;const Ea=r=>{if(window.TouchEvent&&r instanceof TouchEvent){const{left:n,top:a}=r.target.getBoundingClientRect(),{clientX:i,clientY:f}=r.changedTouches[0];return{x:i-n,y:f-a}}const{offsetX:t,offsetY:s}=r;return{x:t,y:s}},Xr=(r,t)=>{var s,n;r instanceof MouseEvent&&((s=r.target)==null||s.dispatchEvent(new PointerEvent(`layer.pointer${t}`,r)),(n=r.target)==null||n.dispatchEvent(new MouseEvent(`layer.mouse${t}`,r)))},Pa=["onclick","oncontextmenu","ondblclick","onauxclick","onmousedown","onmouseenter","onmouseleave","onmouseup","onmousemove","onwheel","ontouchstart","ontouchcancel","ontouchend","ontouchmove","onpointerenter","onpointerleave","onpointerdown","onpointerup","onpointermove","onpointercancel","onlayer.mouseenter","onlayer.mouseleave","onlayer.pointerenter","onlayer.pointerleave","onfocus","onblur","onfullscreenchange","onfullscreenerror","onscroll","oncut","oncopy","onpaste","onkeydown","onkeypress","onkeyup","onmouseover","onmouseout","onselect","ondrag","ondragend","ondragenter","ondragstart","ondragleave","ondragover","ondrop","onpointerover","onpointerout","ongotpointercapture","onlostpointercapture"],za=r=>console.warn("[svelte-canvas] %s",r),on=Symbol("register"),ka=r=>qn(on)(r);var rs,ns,as,Zs,$s,Cs,Ut,st,is,os,Os,ls,Ms,Ee,ln,un,cn,dn,xr,fn,vn;class Ca{constructor(t){oe(this,Ee);oe(this,rs,new Ps);oe(this,ns,new Ps);oe(this,as,new Ps);oe(this,Zs,1);oe(this,$s,Date.now());oe(this,Cs,es(0));oe(this,Ut);oe(this,st);oe(this,is);oe(this,os);oe(this,Os,es(Fn([])));oe(this,ls,es(0));oe(this,Ms,Ks(()=>b(this,as).get(e(b(this,ls)))));Lt(this,st,t),Jn(on,this.register.bind(this))}init(t,s){Lt(this,Ut,t),Be(this,Ee,dn).call(this,s),dr(()=>Be(this,Ee,xr).call(this)),dr(()=>Be(this,Ee,cn).call(this)),dr(()=>(e(b(this,Cs)),Be(this,Ee,fn).call(this))),Gs(()=>Be(this,Ee,vn).call(this))}redraw(){Wn(b(this,Cs))}register({setup:t,render:s,...n}){const a=Be(this,Ee,ln).call(this);return t&&b(this,rs).set(a,t),b(this,ns).set(a,s),Object.keys(n).length&&(b(this,st).layerEvents?b(this,as).set(a,n):za("Canvas must have layerEvents={true} in order to use layer-level event handlers")),Gs(()=>Be(this,Ee,un).call(this,a)),a}createEventHandlers(){const t=a=>{const i=`on${a.type}`,f=b(this,st).handlers[i];f==null||f(a)},s=a=>{const{pixelRatio:i}=b(this,st),{x:f,y:c}=Ea(a);if(["touchstart","pointermove"].includes(a.type)){const y=b(this,Ut).getLayerIdAt(f*i,c*i);e(b(this,ls))!==y&&(Xr(a,"leave"),l(b(this,ls),y,!0),Xr(a,"enter"))}if(!e(b(this,Ms)))return;const u=`on${a.type.replace("layer.","")}`,g=e(b(this,Ms))[u];g==null||g({x:f,y:c,originalEvent:a})},n=a=>{t(a),b(this,st).layerEvents&&s(a)};return Pa.reduce((a,i)=>({...a,[i]:n}),{})}}rs=new WeakMap,ns=new WeakMap,as=new WeakMap,Zs=new WeakMap,$s=new WeakMap,Cs=new WeakMap,Ut=new WeakMap,st=new WeakMap,is=new WeakMap,os=new WeakMap,Os=new WeakMap,ls=new WeakMap,Ms=new WeakMap,Ee=new WeakSet,ln=function(){return Dr(this,Zs)._++},un=function(t){b(this,ns).delete(t),b(this,as).delete(t)},cn=function(){const{onresize:t,width:s,height:n,pixelRatio:a}=b(this,st);t==null||t({width:s,height:n,pixelRatio:a})},dn=function(t){const s=()=>{const n=[...t.children];l(b(this,Os),n.map(a=>+a.dataset.layerId),!0)};Lt(this,os,new MutationObserver(()=>s())),b(this,os).observe(t,{childList:!0}),s()},xr=function(){b(this,st).autoplay?(en(()=>this.redraw()),Lt(this,is,requestAnimationFrame(()=>Be(this,Ee,xr).call(this)))):cancelAnimationFrame(b(this,is))},fn=function(){var u,g,y;const t=b(this,Ut),{width:s,height:n,pixelRatio:a,autoclear:i}=b(this,st),f=Date.now()-b(this,$s),c={context:t,width:s,height:n,time:f};t.setTransform(a,0,0,a,0,0),i&&t.clearRect(0,0,s,n);for(const[_,T]of b(this,rs))T(c),b(this,rs).delete(_);for(const _ of e(b(this,Os)))(g=(u=b(this,Ut)).setCurrentLayerId)==null||g.call(u,_),(y=b(this,ns).get(_))==null||y(c)},vn=function(){var t;typeof window>"u"||((t=b(this,os))==null||t.disconnect(),cancelAnimationFrame(b(this,is)))};/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function Oa(r,t){var s=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(s!=null){var n,a,i,f,c=[],u=!0,g=!1;try{if(i=(s=s.call(r)).next,t===0){if(Object(s)!==s)return;u=!1}else for(;!(u=(n=i.call(s)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(y){g=!0,a=y}finally{try{if(!u&&s.return!=null&&(f=s.return(),Object(f)!==f))return}finally{if(g)throw a}}return c}}function Qr(r,t){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),s.push.apply(s,n)}return s}function Ge(r){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Qr(Object(s),!0).forEach(function(n){Ma(r,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):Qr(Object(s)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(s,n))})}return r}function Ma(r,t,s){return t=Wa(t),t in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}function Ra(r,t){if(r==null)return{};var s={},n=Object.keys(r),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(s[a]=r[a]);return s}function La(r,t){if(r==null)return{};var s=Ra(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(s[n]=r[n])}return s}function Zr(r,t){return ja(r)||Oa(r,t)||hn(r,t)||Fa()}function Us(r){return Na(r)||Da(r)||hn(r)||qa()}function Na(r){if(Array.isArray(r))return yr(r)}function ja(r){if(Array.isArray(r))return r}function Da(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function hn(r,t){if(r){if(typeof r=="string")return yr(r,t);var s=Object.prototype.toString.call(r).slice(8,-1);if(s==="Object"&&r.constructor&&(s=r.constructor.name),s==="Map"||s==="Set")return Array.from(r);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return yr(r,t)}}function yr(r,t){(t==null||t>r.length)&&(t=r.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=r[s];return n}function qa(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ja(r,t){if(typeof r!="object"||r===null)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var n=s.call(r,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Wa(r){var t=Ja(r,"string");return typeof t=="symbol"?t:String(t)}function zs(r){var t=r.sizes.shift(),s=Math.max(Math.ceil(t[0]),1),n=Math.max(Math.ceil(t[1]),1),a=[s-1,n-1,1,1],i=Date.now(),f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,c,u;f?(c=new OffscreenCanvas(1,1),u=new OffscreenCanvas(s,n)):(c=document.createElement("canvas"),c.width=1,c.height=1,u=document.createElement("canvas"),u.width=s,u.height=n);var g=c.getContext("2d"),y=u.getContext("2d");y&&(y.fillRect.apply(y,a),g.drawImage(u,s-1,n-1,1,1,0,0,1,1));var _=g&&g.getImageData(0,0,1,1).data[3]!==0,T=Date.now()-i;return[c,u].forEach(function(z){z.height=0,z.width=0}),f?(postMessage({width:s,height:n,benchmark:T,isTestPass:_}),!_&&r.sizes.length&&zs(r)):_?r.onSuccess(s,n,T):(r.onError(s,n,T),r.sizes.length&&zs(r)),_}var mr={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},Ua=["onError","onSuccess"],$t={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},As={};function gr(r){var t=r.width===r.height,s=r.height===1,n=r.width===1,a=[];if(!r.width||!r.height)r.sizes.forEach(function(y){var _=t||s?y:1,T=t||n?y:1;a.push([_,T])});else for(var i=r.min||$t.min,f=r.step||$t.step,c=Math.max(r.width,r.height);c>=i;){var u=t||s?c:1,g=t||n?c:1;a.push([u,g]),c-=f}return a}function Hs(r){var t=window&&"HTMLCanvasElement"in window,s=window&&"OffscreenCanvas"in window,n=Date.now(),a=r.onError,i=r.onSuccess,f=La(r,Ua),c=null;if(!t)return!1;if(r.useWorker&&s){var u=`
            var canvasTest = `.concat(zs.toString(),`;
            onmessage = function(e) {
                canvasTest(e.data);
            };
        `),g=new Blob([u],{type:"application/javascript"}),y=URL.createObjectURL(g);c=new Worker(y),URL.revokeObjectURL(y),c.onmessage=function(_){var T=_.data,z=T.width,v=T.height,C=T.benchmark,p=T.isTestPass;p?(As[n].onSuccess(z,v,C),delete As[n]):As[n].onError(z,v,C)}}if(r.usePromise)return new Promise(function(_,T){var z=Ge(Ge({},r),{},{onError:function(Y,R,F){var J;if(r.sizes.length===0)J=!0;else{var ee=r.sizes.slice(-1),x=Zr(ee,1),h=Zr(x[0],2),D=h[0],U=h[1];J=Y===D&&R===U}a(Y,R,F),J&&T({width:Y,height:R,benchmark:F})},onSuccess:function(Y,R,F){i(Y,R,F),_({width:Y,height:R,benchmark:F})}});if(c){var v=z.onError,C=z.onSuccess;As[n]={onError:v,onSuccess:C},c.postMessage(f)}else zs(z)});if(c)As[n]={onError:a,onSuccess:i},c.postMessage(f);else return zs(r)}var Ha={maxArea:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=gr({width:t.max,height:t.max,min:t.min,step:t.step,sizes:Us(mr.area)}),n=Ge(Ge(Ge({},$t),t),{},{sizes:s});return Hs(n)},maxHeight:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=gr({width:1,height:t.max,min:t.min,step:t.step,sizes:Us(mr.height)}),n=Ge(Ge(Ge({},$t),t),{},{sizes:s});return Hs(n)},maxWidth:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=gr({width:t.max,height:1,min:t.min,step:t.step,sizes:Us(mr.width)}),n=Ge(Ge(Ge({},$t),t),{},{sizes:s});return Hs(n)},test:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Ge(Ge({},$t),t);return s.sizes=Us(s.sizes),s.width&&s.height&&(s.sizes=[[s.width,s.height]]),Hs(s)}};const Ka=(r,t,s,n=.1)=>{if(typeof window>"u")return s;for(;!Ha.test({sizes:[[r*s,t*s]]});)s-=n;return s};var Va=N("<canvas></canvas> <div><!></div>",1);function Ba(r,t){At(t,!0);let s=j(t,"style",3,""),n=j(t,"autoplay",3,!1),a=j(t,"autoclear",3,!0),i=j(t,"layerEvents",3,!1),f=tn(t,["$$slots","$$events","$$legacy","width","height","pixelRatio","class","style","autoplay","autoclear","layerEvents","onresize","contextSettings","children"]),c,u,g,y=es(2),_=es(0),T=es(0);const z=Ks(()=>t.width??e(_)),v=Ks(()=>t.height??e(T)),C=Ks(()=>e(y)&&t.pixelRatio==="auto"?Ka(e(z),e(v),e(y)):t.pixelRatio&&t.pixelRatio!=="auto"?t.pixelRatio:e(y)),p=new Ca({get width(){return e(z)},get height(){return e(v)},get pixelRatio(){return e(C)},get autoplay(){return n()},get autoclear(){return a()},get layerEvents(){return i()},get onresize(){return t.onresize},handlers:f});nn(()=>{i()?u=Ta(c,t.contextSettings):u=c.getContext("2d",t.contextSettings),p.init(u,g)});const Y=()=>p.redraw();var R=Va(),F=Ce(R);Kn(F,x=>({class:t.class,width:e(z)*e(C),height:e(v)*e(C),style:s(),...x,[Vn]:{width:t.width?`${t.width}px`:"100%",height:t.height?`${t.height}px`:"100%"}}),[()=>p.createEventHandlers()]),Ys(F,x=>c=x,()=>c);var J=A(F,2);us(J,"",{},{display:"none"});var ee=S(J);return ia(ee,()=>t.children??$r),m(J),Ys(J,x=>g=x,()=>g),la("devicePixelRatio","resize",Es,x=>l(y,x,!0)),Vr(F,"clientWidth",x=>l(_,x)),Vr(F,"clientHeight",x=>l(T,x)),k(r,R),Tt({redraw:Y,get canvas(){return c},set canvas(x){c=x},get context(){return u},set context(x){u=x}})}var Ya=N("<div></div>");function Ga(r,t){At(t,!0);const s=tn(t,["$$slots","$$events","$$legacy"]),n=ka(s);var a=Ya();re(()=>pr(a,"data-layer-id",n)),k(r,a),Tt()}var Xa=N("<div><!> <!></div>");function Qa(r,t){At(t,!1);const[s,n]=sn(),a=()=>rn(R,"$slowTime",s),i=P(),f=P();let c=j(t,"clickNode",8),u=j(t,"circledNode",8),g=j(t,"selectedJewel",8),y=j(t,"selectedConqueror",8),_=j(t,"seed",8),T=j(t,"highlighted",24,()=>[]),z=j(t,"disabled",24,()=>[]),v=j(t,"highlightJewels",8,!1);const C=aa(0);let p;function Y(I){C.set(I),p=requestAnimationFrame(Y)}typeof window<"u"&&(p=requestAnimationFrame(Y)),Gs(()=>{p&&cancelAnimationFrame(p)});const R=na(C,I=>(!T()||!T().length)&&!v()?0:Math.round(I/40)),F=[427,320,226,227,323,422,329],J="25px Roboto Mono",ee="17px Roboto Mono";let x=P(10),h=P(0),D=P(0);const U=2.6,ne={},Xe={},E=(I,d,We,xe=!1,Me=!1)=>{let ge=xe?$n[d]:Hr[d];!ge&&xe&&(ge=Hr[d]);const Pe=ge.filename;Pe in(xe?Xe:ne)||((xe?Xe:ne)[Pe]=new Image,(xe?Xe:ne)[Pe].src=Pe);const Re=ge.coords[d],Ie=Re.w/e(x)*U,gt=Re.h/e(x)*U,pt=We.x-Ie/2,fe=We.y-gt/2;let O=fe;Me&&(O=fe-gt/2),I.drawImage((xe?Xe:ne)[Pe],Re.x,Re.y,Re.w,Re.h,pt,O,Ie,gt),Me&&(I.save(),I.translate(pt,fe),I.rotate(Math.PI),I.drawImage((xe?Xe:ne)[Pe],Re.x,Re.y,Re.w,Re.h,-Ie,-(gt/2),Ie,-gt),I.restore())},_e=(I,d,We)=>{const xe=[];let Me="";return I.split(" ").forEach(ge=>{d.measureText(Me+ge).width<We?Me+=" "+ge:(xe.push(Me.trim()),Me=ge)}),Me.length>0&&xe.push(Me.trim()),xe};let H=P({x:Number.MIN_VALUE,y:Number.MIN_VALUE}),Oe=P("unset"),M=P(),Et=0,Je=0,nt=0,Qe=0,at=!1;const Pt=I=>{at=!0,Et=I.offsetX,Je=I.offsetY,nt=e(h),Qe=e(D),l(H,{x:I.offsetX,y:I.offsetY}),e(M)&&c()(e(M))},cs=I=>{I.type==="pointerup"&&(at=!1),l(H,{x:I.offsetX,y:I.offsetY})},w=I=>{at&&(l(h,nt-(Et-I.offsetX)*e(x)),l(D,Qe-(Je-I.offsetY)*e(x))),l(H,{x:I.offsetX,y:I.offsetY})},q=I=>{I.deltaY>0?e(x)<30&&(l(h,e(h)+I.offsetX),l(D,e(D)+I.offsetY)):e(x)>3&&(l(h,e(h)-I.offsetX),l(D,e(D)-I.offsetY)),l(x,Math.min(30,Math.max(3,e(x)+I.deltaY/100))),I.preventDefault(),I.stopPropagation(),I.stopImmediatePropagation()};let ue=P(0),de=P(0);const ae=()=>{l(ue,window.innerWidth),l(de,window.innerHeight)};let ht=P(!1);function G(I){I.detail&&I.detail.originalEvent&&Pt(I.detail.originalEvent)}function mt(I){I.detail&&I.detail.originalEvent&&q(I.detail.originalEvent)}me(()=>e(x),()=>{l(i,Zn/e(x))}),me(()=>(e(ht),e(x)),()=>{!e(ht)&&vt&&(l(ht,!0),l(h,vt.min_x+window.innerWidth/2*e(x)),l(D,vt.min_y+window.innerHeight/2*e(x))),ae()}),me(()=>(e(h),e(D),e(x),Te(u()),e(i),Te(z()),Te(T()),Te(v()),a(),e(H),e(M),Te(_()),Te(g()),Te(y()),vr),()=>{l(f,I=>{var pt;const{context:d,width:We,height:xe}=I,Me=window.performance.now();d.clearRect(0,0,We,xe),d.fillStyle="#080c11",d.fillRect(0,0,We,xe);const ge={};Object.keys(fr).forEach(fe=>{const O=fr[parseInt(fe)];if(!O)return;const W=Fr(O.x,O.y,e(h),e(D),e(x)),K=Math.max(...O.orbits);F.indexOf(parseInt(fe))>=0||(K==1?E(d,"PSGroupBackground1",W,!1):K==2?E(d,"PSGroupBackground2",W,!1):(K==3||O.orbits.length>1)&&E(d,"PSGroupBackground3",W,!1,!0))}),Object.keys(Wt).forEach(fe=>{var X;const O=Wt[parseInt(fe)];if(!O)return;const W=Jr(O.orbit??0,O.orbitIndex??0),K=Js(O,e(h),e(D),e(x));(X=O.out)==null||X.forEach(zt=>{const pe=Wt[parseInt(zt)];if(!pe)return;const it=Math.min(parseInt(zt),parseInt(fe)),ve=Math.max(parseInt(zt),parseInt(fe)),ye=it+":"+ve;if(ge[ye]||(ge[ye]=!0,pe.isMastery))return;const Ue=Jr(pe.orbit??0,pe.orbitIndex??0),$e=Js(pe,e(h),e(D),e(x));if(d.beginPath(),O.group!=pe.group||O.orbit!=pe.orbit)d.moveTo(K.x,K.y),d.lineTo($e.x,$e.y);else{let ze=Math.PI/180-Math.PI/180*W,Ae=Math.PI/180-Math.PI/180*Ue;ze-=Math.PI/2,Ae-=Math.PI/2;const kt=Math.abs(Math.max(ze,Ae)-Math.min(ze,Ae)),Ls=kt>Math.PI?Math.max(ze,Ae):Math.min(ze,Ae),Ns=kt>Math.PI?Math.min(ze,Ae):Math.max(ze,Ae),Kt=fr[O.group??0];if(!Kt)return;const o=Fr(Kt.x,Kt.y,e(h),e(D),e(x));d.arc(o.x,o.y,vt.constants.orbitRadii[O.orbit??0]/e(x)+1,Ls,Ns)}d.lineWidth=6/e(x),d.strokeStyle="#524518",d.stroke()})});let Pe;u()&&Wt[u()]&&(Pe=Js(Wt[u()],e(h),e(D),e(x)),d.strokeStyle="#ad2b2b");let Re=!1,Ie;if(Object.keys(Wt).forEach(fe=>{const O=Wt[parseInt(fe)];if(!O)return;const W=Js(O,e(h),e(D),e(x));let K=0,X=!1;u()&&Pe&&Wr(W,Pe)<e(i)&&(X=!0),z().indexOf(O.skill??-1)>=0&&(X=!1),O.isKeystone?(K=110,E(d,O.icon??"",W,X),X?E(d,"KeystoneFrameAllocated",W,!1):E(d,"KeystoneFrameUnallocated",W,!1)):O.isNotable?(K=70,E(d,O.icon??"",W,X),X?E(d,"NotableFrameAllocated",W,!1):E(d,"NotableFrameUnallocated",W,!1)):O.isJewelSocket?(K=70,O.expansionJewel?E(d,"JewelSocketAltNormal",W,!1):X?E(d,"JewelFrameAllocated",W,!1):E(d,"JewelFrameUnallocated",W,!1)):O.isMastery?E(d,O.inactiveIcon??"",W,X):(K=50,E(d,O.icon??"",W,X),X?E(d,"PSSkillFrameActive",W,!1):E(d,"PSSkillFrame",W,!1)),(T().indexOf(O.skill??-1)>=0||v()&&O.isJewelSocket)&&(d.strokeStyle=`hsl(${a()}, 100%, 50%)`,d.lineWidth=3,d.beginPath(),d.arc(W.x,W.y,(K+30)/e(x),0,Math.PI*2),d.stroke()),Wr(W,e(H))<K/e(x)&&(Ie=O,Re=X)}),l(M,Ie),u()&&Pe&&(d.strokeStyle="#ad2b2b",d.lineWidth=1,d.beginPath(),d.arc(Pe.x,Pe.y,e(i),0,Math.PI*2),d.stroke()),e(M)){let fe=e(M).name??"",O=(e(M).stats||[]).map(ve=>({text:ve,special:!1}));if(!e(M).isJewelSocket&&Re&&e(M).skill!==void 0&&(pt=rt)!=null&&pt.TreeToPassive&&rt.TreeToPassive[e(M).skill]!==void 0&&_()&&g()&&y()){const ve=rt.TreeToPassive[e(M).skill];if(ve&&ve.Index!==void 0){const ye=br.Calculate(ve.Index,_(),g(),y());ye&&("AlternatePassiveSkill"in ye&&ye.AlternatePassiveSkill&&(O=[],fe=ye.AlternatePassiveSkill.Name??"",ye.AlternatePassiveSkill.StatsKeys&&ye.AlternatePassiveSkill.StatsKeys.forEach((Ue,$e)=>{const ze=rt.GetStatByIndex(Ue);if(!ze)return;const Ae=Ur[ze.ID]||"";Ae&&ye.StatRolls&&ye.StatRolls[$e]!==void 0&&O.push({text:vr(Ae,ye.StatRolls[$e])||ze.ID,special:!0})})),ye.AlternatePassiveAdditionInformations&&ye.AlternatePassiveAdditionInformations.forEach(Ue=>{Ue.AlternatePassiveAddition&&Ue.AlternatePassiveAddition.StatsKeys&&Ue.AlternatePassiveAddition.StatsKeys.forEach(($e,ze)=>{const Ae=rt.GetStatByIndex($e);if(!Ae)return;const kt=Ur[Ae.ID]||"";kt&&Ue.StatRolls&&Ue.StatRolls[ze]!==void 0&&O.push({text:vr(kt,Ue.StatRolls[ze])||Ae.ID,special:!0})})}))}}d.font=J;const W=d.measureText(fe),K=Math.max(W.width+50,600);d.font=ee;const X=[],zt=30;let pe=85;O&&O.length>0?O.forEach(ve=>{X.length>0&&(pe+=5),ve.text.split(`
`).forEach(ye=>{X.length>0&&(pe+=10),_e(ye,d,K-zt).forEach($e=>{X.push({text:$e,offset:pe,special:ve.special}),pe+=20})})}):e(M).isJewelSocket&&(X.push({text:"Click to select this socket",offset:pe,special:!0}),pe+=20);const it=55;d.fillStyle="rgba(75,63,24,0.9)",d.fillRect(e(H).x,e(H).y,K,it),d.fillStyle="#ffffff",d.font=J,d.textAlign="center",d.fillText(fe,e(H).x+K/2,e(H).y+35),d.fillStyle="rgba(0,0,0,0.8)",d.fillRect(e(H).x,e(H).y+it,K,pe-it),d.font=ee,d.textAlign="left",X.forEach(ve=>{ve.special?d.fillStyle="#8cf34c":d.fillStyle="#ffffff",d.fillText(ve.text,e(H).x+zt/2,e(H).y+ve.offset)})}e(M)&&e(M).isJewelSocket?l(Oe,"pointer"):l(Oe,"unset"),d.fillStyle="#ffffff",d.textAlign="right",d.font="12px Roboto Mono";const gt=window.performance.now();d.fillText(`${(gt-Me).toFixed(1)}ms`,We-5,17)})}),tr(),Ht();var jt=er();B("pointerup",Es,cs),B("pointermove",Es,w),B("resize",Es,ae);var sr=Ce(jt);{var Rs=I=>{var d=Xa(),We=S(d);Ba(We,{get width(){return e(ue)},get height(){return e(de)},$$events:{pointerdown:G,wheel:mt},children:(Me,ge)=>{Ga(Me,{get render(){return e(f)}})},$$slots:{default:!0}});var xe=A(We,2);Vs(xe,t,"default",{},null),m(d),re(()=>us(d,`touch-action: none; cursor: ${e(Oe)??""}`)),B("resize",d,ae),k(I,d)};le(sr,I=>{e(ue)&&e(de)&&I(Rs)})}k(r,jt),Tt(),n()}var Za=N('<button class="p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2"><!></button>');function $a(r,t){At(t,!1);const s=P();let n=j(t,"queries",8),a=j(t,"showTradeLinks",12,!1);const i=()=>{n().length===1?Sr(n()[0]):e(s)&&a(!a())};me(()=>Te(n()),()=>{l(s,n().length>1)}),tr(),Ht();var f=Za(),c=S(f);{var u=y=>{var _=er(),T=Ce(_);{var z=C=>{var p=Ts("Hide Trade Links");k(C,p)},v=C=>{var p=Ts("Show Trade Links");k(C,p)};le(T,C=>{a()?C(z):C(v,!1)})}k(y,_)},g=y=>{var _=Ts("Trade");k(y,_)};le(c,y=>{e(s)?y(u):y(g,!1)})}m(f),re(()=>f.disabled=!n()),B("click",f,i),k(r,f),Tt()}var ei=N('<button class="p-1 px-3 bg-blue-500/40 rounded"></button>'),ti=N('<div class="flex flex-wrap gap-2.5 my-2"></div>');function si(r,t){At(t,!1);let s=j(t,"queries",8);Ht();var n=ti();It(n,5,s,Bn,(a,i,f)=>{var c=ei();c.textContent=`Trade Batch ${f+1}`,B("click",c,()=>Sr(e(i))),k(a,c)}),m(n),k(r,n),Tt()}const ri={25:1,26:1,42:1,49:1,56:1,63:1,70:2,95:4,117:1,124:4,134:1,150:2,216:1,434:1,482:1,483:1,484:1,488:1,554:1,556:1,593:3,594:3,595:3,619:1,943:1,944:1,945:1,946:1,2133:4,3108:3,3109:4,3110:4,3111:4,5815:4,8835:1,9091:1,9772:1,14775:2,209:1,447:1,573:2,1294:1,1361:1,2031:5,8177:2,448:2,486:1,579:2,1404:1,2030:5,9090:1,9711:2,9712:2,9713:2,9714:2,9716:1,9717:1,9718:1,9721:1,9722:1,9723:1,9724:1,186:2,490:1,1251:3,1654:1,3392:1,6042:1,6048:1,6049:1,6050:1,6136:1,7499:2};var ni=N("<span>Results</span>"),ai=N("<span>Timeless Jewel</span>"),ii=N("<!> <button>Grouped</button>",1),oi=N('<div class="flex flex-row"><!> <button class="bg-neutral-100/20 px-4 p-1 rounded"> </button></div>'),li=N('<div class="mt-2"> </div>'),ui=N('<button class="cursor-pointer"><span> </span> <span class="text-white"> </span></button>'),ci=N("<ul></ul>"),di=N('<button class="cursor-pointer"><span> </span> <span class="text-white"> </span></button>'),fi=N('<button class="cursor-pointer"><span> </span> <span class="text-white"> </span></button>'),vi=N('<div class="overflow-auto mt-4"><h3>Notables</h3> <ul></ul> <h3 class="mt-2">Smalls</h3> <ul></ul></div>'),hi=N('<div class="flex flex-row mt-4 items-end"><div class="flex-grow"><h3 class="mb-2">Sort Order</h3> <!></div> <div class="ml-2"><button>Colors</button></div> <div class="ml-2"><button>Split</button></div></div> <!>',1),mi=N('<div class="mt-4"><h3 class="mb-2">Seed</h3> <input type="number"/> <!></div> <!>',1),gi=N('<div class="mb-4 flex flex-row items-start flex-col border-neutral-100/40 border-b pb-4"><div><button class="p-2 px-4 bg-red-500/40 rounded mr-2">-</button> <span> </span></div> <div class="mt-2 flex flex-row"><div class="mr-4 flex flex-row items-center"><div class="mr-2">Min:</div> <input type="number" min="0"/></div> <div class="flex flex-row items-center"><div class="mr-2">Weight:</div> <input type="number" min="0"/></div> <div class="flex flex-row items-center"><div class="mr-2">Minimum Stat Total:</div> <input type="number" min="0"/></div></div></div>'),pi=N('<div class="mt-4 flex flex-col overflow-auto min-h-[100px]"></div> <div class="flex flex-col mt-2"><div class="flex flex-row items-center"><div class="mr-2 min-w-fit">Minimum Total Weight:</div> <input type="number" min="0"/></div></div> <div class="flex flex-col mt-2"><div class="flex flex-row items-center"><div class="mr-2 min-w-fit">Minimum Stat Total:</div> <input type="number" min="0"/></div></div> <div class="flex flex-col mt-4"><div class="flex flex-row"><button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2">Select All</button> <button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2">Notables</button> <button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2">Passives</button> <button class="p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 flex-grow">Deselect</button></div> <div class="flex flex-row mt-2"><button class="p-2 px-3 bg-green-500/40 rounded disabled:bg-green-900/40 flex-grow"><!></button></div></div>',1),bi=N('<div class="mt-4"><h3 class="mb-2">Add Stat</h3> <!></div> <!>',1),wi=N('<h2 class="mt-4">Click on a jewel socket</h2>'),xi=N('<div class="mt-4 w-full flex flex-row"><button>Enter Seed</button> <button>Select Stats</button></div> <!> <!>',1),yi=N('<div class="mt-4"><h3 class="mb-2">Conqueror</h3> <!></div> <!>',1),Si=N("<!> <!>",1),_i=N("<!> <!>",1),Ii=N('<div class="w-screen md:w-10/12 lg:w-2/3 xl:w-1/2 2xl:w-5/12 3xl:w-1/3 4xl:w-1/4 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen"><div class="p-4 max-h-screen flex flex-col"><div class="flex flex-row justify-between mb-2"><div class="flex flex-row items-center"><button class="burger-menu mr-3" aria-label="Open menu"><div></div> <div></div> <div></div></button> <h3 class="flex-grow"><!></h3></div> <!></div> <!> <!></div></div>'),Ai=N('<button class="burger-menu absolute top-0 left-0 bg-black/80 backdrop-blur-sm rounded-br-lg p-4 pt-5" aria-label="Close menu"><div></div> <div></div> <div></div></button>'),Ti=N('<!> <div class="text-orange-500 absolute bottom-0 right-0 m-2"><a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener noreferrer">Source of official branch code(Github)</a> <a href="https://github.com/BlazesRus/timeless-jewels" target="_blank" rel="noopener noreferrer">Source (Github)</a></div>',1);function qi(r,t){var Ae,kt,Ls,Ns,Kt;At(t,!1);const[s,n]=sn(),a=()=>rn(Yn,"$page",s),i=P(),f=P(),c=P(),u=P(),g=P(),y=P(),_=P(),T=P(),z=typeof window<"u"?window:void 0,v=typeof localStorage<"u"?localStorage:void 0,C=typeof URL<"u"?URL:void 0,p=a().url.searchParams,Y=((Ae=rt)==null?void 0:Ae.TimelessJewels)??{},R=((kt=rt)==null?void 0:kt.TimelessJewelConquerors)??{},F=((Ls=rt)==null?void 0:Ls.TimelessJewelSeedRanges)??{},J=((Ns=rt)==null?void 0:Ns.TreeToPassive)??{},ee=(Kt=rt)!=null&&Kt.PossibleStats?JSON.parse(rt.PossibleStats):{},x=Object.keys(Y).map(o=>({value:Number(o),label:Y[Number(o)]}));let h=P(p.has("jewel")&&x.find(o=>o.value===Number(p.get("jewel")))||void 0),D=P(p.has("conqueror")?{value:p.get("conqueror"),label:p.get("conqueror")}:void 0),U=P(p.has("seed")&&p.get("seed")?Number(p.get("seed")):0),ne=P(p.has("location")&&p.get("location")?Number(p.get("location")):void 0);function Xe(o){if(typeof o=="number")return J&&typeof J[o]<"u"?J[o]:void 0}let E=P({});if(p.has("stat"))for(const o of p.getAll("stat")){const L=parseInt(o);Zt(E,e(E)[L]={weight:1,min:0,id:L,minStatTotal:0})}let _e=P(p.has("mode")?p.get("mode"):"");const H=()=>{if(!z||!C)return;const o=new C(z.location.origin+z.location.pathname);e(h)&&o.searchParams.append("jewel",e(h).value.toString()),e(D)&&e(D).value!==void 0&&e(D).value!==null&&e(D).value!==""?o.searchParams.append("conqueror",String(e(D).value)):o.searchParams.append("conqueror","Any"),typeof e(U)=="number"&&!isNaN(e(U))&&o.searchParams.append("seed",e(U).toString()),e(ne)!==void 0&&e(ne)!==null&&o.searchParams.append("location",e(ne).toString()),e(_e)&&e(_e)!==""&&o.searchParams.append("mode",e(_e)),Object.keys(e(E)).forEach(L=>{o.searchParams.append("stat",L.toString())}),Gn(o.toString())},Oe=o=>{l(_e,o),H()};let M=P(new Set);const Et=o=>{o.isJewelSocket?(l(ne,o.skill),H()):o.isMastery||(e(M).has(o.skill)?e(M).delete(o.skill):e(M).add(o.skill),l(M,e(M)))};function Je(o){return ri[String(o)]||0}function nt(o,L){return!o||!ee[o]?0:ee[o][L]||0}function Qe(o){return o.replace(/<script.*?>.*?<\/script>/gi,"").replace(/<style.*?>.*?<\/style>/gi,"").replace(/on\w+="[^"]*"/gi,"")}let at=P();const Pt=o=>{Zt(E,e(E)[o.detail.value]={weight:1,min:0,id:o.detail.value,minStatTotal:0}),l(E,e(E)),e(at).handleClear(),H()},cs=o=>{const L=Object.fromEntries(Object.entries(e(E)).filter(([Q])=>Number(Q)!==o));l(E,L),H()},w=()=>{l(E,{}),H()};let q=P(!1),ue=P(0),de=P(0),ae=P(!1),ht=P(0),G=P(void 0),mt=P(1),jt=P(null);const sr=()=>{if(!e(ne)||!e(h)||!e(u))return;l(mt,e(h).value),l(jt,e(c)?"":e(u).value??""),l(ae,!0),l(G,void 0);const o={jewel:e(h).value,conqueror:e(u).value??"",nodes:e(g).filter(L=>!e(M).has(L.skill)).map(L=>Xe(L.skill)).filter(Boolean).map(L=>L.Index),stats:Object.keys(e(E)).map(L=>e(E)[Number(L)]),minTotalWeight:e(ue),minTotalStats:e(de)};Kr&&Kr.search(o,sa(L=>(l(ht,L),Promise.resolve()))).then(L=>{l(G,L),l(ae,!1),l(q,!0)})};let Rs=P([]);const I=(o,L)=>{l(U,o),l(Rs,L),H()},d=()=>{e(M).clear(),l(M,e(M))},We=()=>{e(g).forEach(o=>{o.isNotable&&e(M).delete(o.skill)}),l(M,e(M))},xe=()=>{e(g).forEach(o=>{o.isNotable||e(M).delete(o.skill)}),l(M,e(M))},Me=()=>{e(g).filter(o=>!o.isJewelSocket&&!o.isMastery).forEach(o=>e(M).add(o.skill)),l(M,e(M))};let ge=P((v==null?void 0:v.getItem("groupResults"))===null?!0:(v==null?void 0:v.getItem("groupResults"))==="true");const Pe={physical:"#c79d93",cast:"#b3f8fe",fire:"#ff9a77",cold:"#93d8ff",lightning:"#f8cb76",attack:"#da814d",life:"#c96e6e",chaos:"#d8a7d3",unique:"#af6025",critical:"#b2a7d6"};function Re(o){return Pe[o]||"#fff"}function Ie(o){return F&&F[o]?F[o]:{Min:0,Max:0}}const gt=o=>(Object.keys(Pe).forEach(L=>{const Q=Re(L);o=o.replace(new RegExp(`(${L}(?:$|\\s))|((?:^|\\s)${L})`,"gi"),`<span style='color: ${Q}; font-weight: bold'>$1$2</span>`)}),o),pt=(o,L,Q)=>{const te={};return o.forEach(Z=>{vt.nodes[Z.node].isKeystone||Q!=="all"&&(Q==="notables"&&!vt.nodes[Z.node].isNotable||Q==="passives"&&vt.nodes[Z.node].isNotable)||(Z.result.AlternatePassiveSkill&&Z.result.AlternatePassiveSkill.StatsKeys&&Z.result.AlternatePassiveSkill.StatsKeys.forEach(ie=>{te[ie]=[...te[ie]||[],Z.node]}),Z.result.AlternatePassiveAdditionInformations&&Z.result.AlternatePassiveAdditionInformations.forEach(ie=>{var Le;(Le=ie.AlternatePassiveAddition)!=null&&Le.StatsKeys&&ie.AlternatePassiveAddition.StatsKeys.forEach(be=>{te[be]=[...te[be]||[],Z.node]})}))}),Object.keys(te).map(Z=>{const ie=hr(parseInt(Z));return{stat:L?gt(ie):ie,rawStat:ie,id:Z,passives:te[Number(Z)]}})},fe=(o,L)=>{switch(L){case"alphabet":return o.sort((Q,te)=>Q.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase().localeCompare(te.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase()));case"count":return o.sort((Q,te)=>te.passives.length-Q.passives.length);case"rarity":return o.sort((Q,te)=>{var Z,ie;return nt((Z=e(h))==null?void 0:Z.value,Q.id)-nt((ie=e(h))==null?void 0:ie.value,te.id)});case"value":return o.sort((Q,te)=>{var Le,be;const Z=Je(Q.id)||0,ie=Je(te.id)||0;return Z!=ie?ie-Z:nt((Le=e(h))==null?void 0:Le.value,Q.id)-nt((be=e(h))==null?void 0:be.value,te.id)})}return o},O=[{label:"Count",value:"count"},{label:"Alphabetical",value:"alphabet"},{label:"Rarity",value:"rarity"},{label:"Value",value:"value"}];let W=P(O[0]),K=P((v==null?void 0:v.getItem("colored"))===null?!0:(v==null?void 0:v.getItem("colored"))==="true"),X=P((v==null?void 0:v.getItem("split"))===null?!0:(v==null?void 0:v.getItem("split"))==="true");const zt=o=>{var Le;if(o.type!=="paste")return;const L=(Le=o.clipboardData||z&&z.clipboardData)==null?void 0:Le.getData("text");if(!L)return;const Q=L.split(`
`);if(Q.length<14)return;const te=x.find(be=>be.label===Q[2]);if(!te)return;let Z,ie;for(let be=10;be<Q.length;be++)if(ie=Object.keys(R[te.value]??{}).find(bt=>Q[be].indexOf(bt)>=0),ie){const bt=/(\d+)/.exec(Q[be]);if(!bt||bt.length===0)continue;Z=parseInt(bt[1]);break}!ie||!Z||(l(q,!1),l(_e,"seed"),l(U,Z),l(h,te),l(D,{label:ie,value:ie}),H())};let pe=P(!1),it=P(!1),ve=P([]);me(()=>e(h),()=>{l(i,e(h)&&R[e(h).value]?Object.keys(R[e(h).value]??{}).map(o=>({value:o,label:o})):[])}),me(()=>e(i),()=>{l(f,e(i).concat([{value:"Any",label:"Any"}]))}),me(()=>e(D),()=>{var o;l(c,((o=e(D))==null?void 0:o.value)==="Any")}),me(()=>(e(D),e(i)),()=>{var o;l(u,((o=e(D))==null?void 0:o.value)==="Any"?e(i)[0]:e(D))}),me(()=>(e(ne),vt),()=>{l(g,e(ne)?ea(vt.nodes[e(ne)]).filter(o=>!o.isJewelSocket&&!o.isMastery):[])}),me(()=>(e(U),e(h),e(u),e(g),br),()=>{l(y,!e(U)||!e(h)||!e(u)||!R[e(h).value]||Object.keys(R[e(h).value]??{}).indexOf(e(u).value??"")<0?[]:e(g).map(o=>Xe(o.skill)).filter(Boolean).map(o=>{var L,Q,te;return{node:o.Index,result:br.Calculate(((L=e(h))==null?void 0:L.value)??0,e(U),((Q=e(h))==null?void 0:Q.value)??0,((te=e(u))==null?void 0:te.value)??"")}}))}),me(()=>e(h),()=>{l(_,e(h)?Object.keys(ee[e(h).value]):[])}),me(()=>(e(_),e(E)),()=>{l(T,e(_).map(o=>{const L=parseInt(o);return{label:hr(L),value:L}}).filter(o=>!(o.value in e(E))))}),me(()=>e(ge),()=>{v==null||v.setItem("groupResults",e(ge)?"true":"false")}),me(()=>e(W),()=>{v==null||v.setItem("sortOrder",e(W).value)}),me(()=>e(K),()=>{v==null||v.setItem("colored",e(K)?"true":"false")}),me(()=>e(X),()=>{v==null||v.setItem("split",e(X)?"true":"false")}),me(()=>(e(G),e(q),e(ve),e(mt),e(jt)),()=>{e(G)&&e(q)&&(l(ve,ta(e(mt),e(jt),e(G).raw)),e(ve).length===1&&l(it,!1))}),tr(),Ht(),B("paste",Es,zt);const ye=se(()=>e(h)?e(h).value:0),Ue=se(()=>e(u)?e(u).value??"":""),$e=se(()=>!e(ne)),ze=se(()=>[...Array.from(e(M)).filter(o=>typeof o=="number")]);Qa(r,{clickNode:Et,get circledNode(){return e(ne)},get selectedJewel(){return e(ye)},get selectedConqueror(){return e(Ue)},get highlighted(){return e(Rs)},get seed(){return e(U)},get highlightJewels(){return e($e)},get disabled(){return e(ze)},children:(o,L)=>{var Q=Ti(),te=Ce(Q);{var Z=Le=>{var be=Ii(),rr=S(be),bt=S(rr),nr=S(bt),Ir=S(nr),Ar=A(Ir,2),mn=S(Ar);{var gn=Se=>{var He=ni();k(Se,He)},pn=Se=>{var He=ai();k(Se,He)};le(mn,Se=>{e(q)?Se(gn):Se(pn,!1)})}m(Ar),m(nr);var bn=A(nr,2);{var wn=Se=>{var He=oi(),Ct=S(He);{var ds=De=>{var Ot=ii(),js=Ce(Ot);$a(js,{get queries(){return e(ve)},get showTradeLinks(){return e(it)},set showTradeLinks(xt){l(it,xt)},$$legacy:!0});var fs=A(js,2);let Ds;re(xt=>{Ds=tt(fs,1,"p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2",null,Ds,xt),fs.disabled=!e(G)},[()=>({grouped:e(ge)})],se),B("click",fs,()=>l(ge,!e(ge))),k(De,Ot)};le(Ct,De=>{e(q)&&De(ds)})}var Dt=A(Ct,2),wt=S(Dt,!0);m(Dt),m(He),re(()=>je(wt,e(q)?"Config":"Results")),B("click",Dt,()=>l(q,!e(q))),k(Se,He)};le(bn,Se=>{e(G)&&Se(wn)})}m(bt);var Tr=A(bt,2);{var xn=Se=>{var He=Si(),Ct=Ce(He);Fs(Ct,{get items(){return x},get value(){return e(h)},set value(wt){l(h,wt)},$$events:{change:w},$$legacy:!0});var ds=A(Ct,2);{var Dt=wt=>{var De=yi(),Ot=Ce(De),js=A(S(Ot),2);Fs(js,{get items(){return e(f)},get value(){return e(D)},set value(xt){l(D,xt)},$$events:{change:H},$$legacy:!0}),m(Ot);var fs=A(Ot,2);{var Ds=xt=>{var Er=xi(),ar=Ce(Er),ir=S(ar);let Pr;var zr=A(ir,2);let kr;m(ar);var Cr=A(ar,2);{var _n=Ze=>{var Mt=mi(),vs=Ce(Mt),ot=A(S(vs),2);Xt(ot);var qs=A(ot,2);{var hs=we=>{var he=li(),qe=S(he);m(he),re((Ne,qt)=>je(qe,`Seed must be between ${Ne??""} and ${qt??""}`),[()=>{var Ne;return Ie(((Ne=e(h))==null?void 0:Ne.value)??0).Min},()=>{var Ne;return Ie(((Ne=e(h))==null?void 0:Ne.value)??0).Max}],se),k(we,he)};le(qs,we=>{var he,qe;(e(U)<Ie(((he=e(h))==null?void 0:he.value)??0).Min||e(U)>Ie(((qe=e(h))==null?void 0:qe.value)??0).Max)&&we(hs)})}m(vs);var or=A(vs,2);{var lr=we=>{var he=hi(),qe=Ce(he),Ne=S(qe),qt=A(S(Ne),2);Fs(qt,{get items(){return O},get value(){return e(W)},set value(Fe){l(W,Fe)},$$legacy:!0}),m(Ne);var Vt=A(Ne,2),ms=S(Vt);let Bt;m(Vt);var gs=A(Vt,2),ps=S(gs);let bs;m(gs),m(qe);var ws=A(qe,2);{var xs=Fe=>{var Ke=ci();let lt;It(Ke,5,()=>fe(pt(e(y),e(K),"all"),e(W).value),Ve=>Ve.id,(Ve,ut)=>{var yt=ui(),ke=S(yt);let V;var $=S(ke);m(ke);var ce=A(ke,2),et=S(ce,!0);m(ce),m(yt),re((Rt,ct)=>{V=tt(ke,1,"font-bold",null,V,Rt),je($,`(${e(ut).passives.length??""})`),je(et,ct)},[()=>({"text-white":Je(e(ut).id)<3}),()=>Qe(e(ut).stat)],se),B("click",yt,()=>I(e(U),e(ut).passives)),k(Ve,yt)}),m(Ke),re(Ve=>lt=tt(Ke,1,"mt-4 overflow-auto",null,lt,Ve),[()=>({rainbow:e(K)})],se),k(Fe,Ke)},ys=Fe=>{var Ke=vi(),lt=A(S(Ke),2);let Ve;It(lt,5,()=>fe(pt(e(y),e(K),"notables"),e(W).value),ke=>ke.id,(ke,V)=>{var $=di(),ce=S($);let et;var Rt=S(ce);m(ce);var ct=A(ce,2),Ss=S(ct,!0);m(ct),m($),re((Yt,Ft)=>{et=tt(ce,1,"font-bold",null,et,Yt),je(Rt,`(${e(V).passives.length??""})`),je(Ss,Ft)},[()=>({"text-white":Je(e(V).id)<3}),()=>Qe(e(V).stat)],se),B("click",$,()=>I(e(U),e(V).passives)),k(ke,$)}),m(lt);var ut=A(lt,4);let yt;It(ut,5,()=>fe(pt(e(y),e(K),"passives"),e(W).value),ke=>ke.id,(ke,V)=>{var $=fi(),ce=S($);let et;var Rt=S(ce);m(ce);var ct=A(ce,2),Ss=S(ct,!0);m(ct),m($),re((Yt,Ft)=>{et=tt(ce,1,"font-bold",null,et,Yt),je(Rt,`(${e(V).passives.length??""})`),je(Ss,Ft)},[()=>({"text-white":Je(e(V).id)<3}),()=>Qe(e(V).stat)],se),B("click",$,()=>I(e(U),e(V).passives)),k(ke,$)}),m(ut),m(Ke),re((ke,V)=>{Ve=tt(lt,1,"mt-1",null,Ve,ke),yt=tt(ut,1,"mt-1",null,yt,V)},[()=>({rainbow:e(K)}),()=>({rainbow:e(K)})],se),k(Fe,Ke)};le(ws,Fe=>{e(X)?Fe(ys,!1):Fe(xs)})}re((Fe,Ke)=>{Bt=tt(ms,1,"bg-neutral-500/20 p-2 px-4 rounded",null,Bt,Fe),bs=tt(ps,1,"bg-neutral-500/20 p-2 px-4 rounded",null,bs,Ke)},[()=>({selected:e(K)}),()=>({selected:e(X)})],se),B("click",ms,()=>l(K,!e(K))),B("click",ps,()=>l(X,!e(X))),k(we,he)};le(or,we=>{var he,qe;e(U)>=Ie(((he=e(h))==null?void 0:he.value)??0).Min&&e(U)<=Ie(((qe=e(h))==null?void 0:qe.value)??0).Max&&we(lr)})}re((we,he)=>{pr(ot,"min",we),pr(ot,"max",he)},[()=>{var we;return Ie(((we=e(h))==null?void 0:we.value)??0).Min},()=>{var we;return Ie(((we=e(h))==null?void 0:we.value)??0).Max}],se),Qt(ot,()=>e(U),we=>l(U,we)),B("blur",ot,H),k(Ze,Mt)},In=(Ze,Mt)=>{{var vs=ot=>{var qs=bi(),hs=Ce(qs),or=A(S(hs),2);Ys(Fs(or,{get items(){return e(T)},$$events:{change:Pt},$$legacy:!0}),he=>l(at,he),()=>e(at)),m(hs);var lr=A(hs,2);{var we=he=>{var qe=pi(),Ne=Ce(qe);It(Ne,5,()=>Object.keys(e(E)),V=>V,(V,$)=>{var ce=gi(),et=S(ce),Rt=S(et),ct=A(Rt,2),Ss=S(ct,!0);m(ct),m(et);var Yt=A(et,2),Ft=S(Yt),Or=A(S(Ft),2);Xt(Or),m(Ft);var ur=A(Ft,2),Mr=A(S(ur),2);Xt(Mr),m(ur);var Rr=A(ur,2),Lr=A(S(Rr),2);Xt(Lr),m(Rr),m(Yt),m(ce),re(Jt=>je(Ss,Jt),[()=>hr(e(E)[Number(e($))].id)],se),B("click",Rt,()=>cs(e(E)[Number(e($))].id)),Qt(Or,()=>e(E)[Number(e($))].min,Jt=>Zt(E,e(E)[Number(e($))].min=Jt)),Qt(Mr,()=>e(E)[Number(e($))].weight,Jt=>Zt(E,e(E)[Number(e($))].weight=Jt)),Qt(Lr,()=>e(E)[Number(e($))].minStatTotal,Jt=>Zt(E,e(E)[Number(e($))].minStatTotal=Jt)),k(V,ce)}),m(Ne);var qt=A(Ne,2),Vt=S(qt),ms=A(S(Vt),2);Xt(ms),m(Vt),m(qt);var Bt=A(qt,2),gs=S(Bt),ps=A(S(gs),2);Xt(ps),m(gs),m(Bt);var bs=A(Bt,2),ws=S(bs),xs=S(ws),ys=A(xs,2),Fe=A(ys,2),Ke=A(Fe,2);m(ws);var lt=A(ws,2),Ve=S(lt),ut=S(Ve);{var yt=V=>{var $=Ts();re(ce=>je($,`${e(ht)??""} / ${ce??""}`),[()=>{var ce;return Ie(((ce=e(h))==null?void 0:ce.value)??0).Max}],se),k(V,$)},ke=V=>{var $=Ts("Search");k(V,$)};le(ut,V=>{e(ae)?V(yt):V(ke,!1)})}m(Ve),m(lt),m(bs),re(()=>{xs.disabled=e(ae)||e(M).size==0,ys.disabled=e(ae)||e(M).size==0,Fe.disabled=e(ae)||e(M).size==0,Ke.disabled=e(ae)||e(M).size>=e(g).length,Ve.disabled=e(ae)}),Qt(ms,()=>e(ue),V=>l(ue,V)),Qt(ps,()=>e(de),V=>l(de,V)),B("click",xs,d),B("click",ys,We),B("click",Fe,xe),B("click",Ke,Me),B("click",Ve,()=>sr()),k(he,qe)};le(lr,he=>{Object.keys(e(E)).length>0&&he(we)})}k(ot,qs)};le(Ze,ot=>{e(_e)==="stats"&&ot(vs)},Mt)}};le(Cr,Ze=>{e(_e)==="seed"?Ze(_n):Ze(In,!1)})}var An=A(Cr,2);{var Tn=Ze=>{var Mt=wi();k(Ze,Mt)};le(An,Ze=>{e(ne)||Ze(Tn)})}re((Ze,Mt)=>{Pr=tt(ir,1,"selection-button",null,Pr,Ze),kr=tt(zr,1,"selection-button",null,kr,Mt)},[()=>({selected:e(_e)==="seed"}),()=>({selected:e(_e)==="stats"})],se),B("click",ir,()=>Oe("seed")),B("click",zr,()=>Oe("stats")),k(xt,Er)};le(fs,xt=>{e(u)&&e(h)&&R[e(h).value]&&Object.keys(R[e(h).value]??{}).indexOf(e(u).value??"")>=0&&xt(Ds)})}k(wt,De)};le(ds,wt=>{e(h)&&wt(Dt)})}k(Se,He)};le(Tr,Se=>{e(q)||Se(xn)})}var yn=A(Tr,2);{var Sn=Se=>{var He=_i(),Ct=Ce(He);{var ds=De=>{si(De,{get queries(){return e(ve)}})};le(Ct,De=>{e(it)&&De(ds)})}var Dt=A(Ct,2);{var wt=De=>{const Ot=se(()=>e(jt)??"");Sa(De,{get searchResults(){return e(G)},get groupResults(){return e(ge)},highlight:I,get jewel(){return e(mt)},get conqueror(){return e(Ot)}})};le(Dt,De=>{e(G)&&e(G).grouped&&e(G).raw&&De(wt)})}k(Se,He)};le(yn,Se=>{e(G)&&e(q)&&Se(Sn)})}m(rr),m(be),B("click",Ir,()=>l(pe,!0)),k(Le,be)},ie=Le=>{var be=Ai();B("click",be,()=>l(pe,!1)),k(Le,be)};le(te,Le=>{e(pe)?Le(ie,!1):Le(Z)})}Un(2),k(o,Q)},$$slots:{default:!0}}),Tt(),n()}export{qi as component};
