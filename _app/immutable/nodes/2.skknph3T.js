import{f as d,a as v,c as xe}from"../chunks/BD-3wmyv.js";import{p as Ne,s as U,a as Y,u as Ue,t as k,b as Ve,g as e,c as V,d as l,e as i,r as t,n as we,f as I,h as re}from"../chunks/TmfA6SFC.js";import{e as ze,s as z}from"../chunks/eEg4oSbh.js";import{i as _}from"../chunks/OLhGhahx.js";import{S as ie,p as Qe,s as Z,r as Ee,b as Le,e as ne}from"../chunks/D1pIDgep.js";import{s as We,a as Xe}from"../chunks/BMHL60xN.js";import{g as Ye}from"../chunks/BvRNM_vA.js";import{b as Ze,a as ea}from"../chunks/CdY0E19T.js";import{d as r,c as aa}from"../chunks/DxF5IDqP.js";var sa=d('<div class="mt-2"> </div>'),ta=d("<li> </li>"),la=d('<ol class="mt-4 list-decimal pl-8"></ol>'),ra=d('<div class="mt-4"><h3>Alternate Passive Skill</h3> <span> </span></div> <!>',1),ia=d("<li> </li>"),na=d('<ol class="list-decimal pl-8"></ol>'),va=d('<li class="mt-4"><span> </span> <!></li>'),oa=d('<div class="mt-4"><h3>Additions</h3> <ul class="list-disc pl-8"></ul></div>'),da=d("<!> <!>",1),ma=d('<div class="mt-4"><h3 class="mb-2">Seed</h3> <input type="number" class="seed"/> <!></div> <!>',1),ua=d('<div class="mt-4"><h3 class="mb-2">Passive Skill</h3> <!></div> <!>',1),ca=d('<div class="mt-4"><h3 class="mb-2">Conqueror</h3> <!></div> <!>',1),fa=d('<div class="py-10 flex flex-row justify-center w-screen h-screen"><div class="flex flex-col justify-between w-1/3"><div><h1 class="text-white mb-10 text-center">Timeless Calculator</h1> <a><h2 class="text-white mb-10 text-center underline text-orange-500">Skill Tree View</h2></a> <div class="themed"><h3 class="mb-2">Timeless Jewel</h3> <!> <!></div></div> <div class="flex justify-between"><div class="text-right text-orange-500"><a href="https://discord.gg/mfacademy" target="_blank" rel="noopener noreferrer" class="flex flex-row align-middle"><img width="24px" alt="MF Academy"/> <span class="ml-2">MF Academy</span></a></div> <div class="text-orange-500"><a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener noreferrer">Official Branch Source (Github)</a> <a href="https://github.com/BlazesRus/timeless-jewels" target="_blank" rel="noopener noreferrer">Source (Github)</a> <a href="https://github.com/ImHamba/timeless-jewels" target="_blank" rel="noopener noreferrer">ImHamba Branch Source (Github)</a></div></div></div></div>');function ya(Ae,ye){Ne(ye,!0);const[$e,ke]=Xe(),ve=()=>We(Qe,"$page",$e),g=ve().url.searchParams,oe=Object.keys(r.TimelessJewels||{}).map(a=>{var m;return{value:parseInt(a),label:((m=r.TimelessJewels)==null?void 0:m[parseInt(a)])||a}});let s=U(Y(g.has("jewel")?oe.find(a=>a.value==parseInt(g.get("jewel")||"0")):void 0)),Ie=re(()=>e(s)&&r.TimelessJewelConquerors?Object.keys(r.TimelessJewelConquerors[e(s).value]||{}).map(a=>({value:a,label:a})):[]),h=U(Y(g.has("conqueror")?{value:g.get("conqueror"),label:g.get("conqueror")}:void 0));const de=Object.values(r.PassiveSkills||[]).filter(a=>a!=null).map(a=>({value:a.Index,label:a.Name+" ("+a.ID+")"}));let w=U(Y(g.has("passive_skill")?de.find(a=>a.value==parseInt(g.get("passive_skill")||"0")):void 0)),f=U(Y(g.has("seed")?parseInt(g.get("seed")||"0"):0)),n=U(void 0);Ue(()=>{e(w)&&e(f)&&e(s)&&e(h)&&V(n,aa.Calculate(e(w).value,typeof e(f)=="string"?parseInt(e(f)):e(f),e(s).value,e(h).value||""),!0)});const Q=()=>{var a;{const m={};e(s)&&(m.jewel=e(s).value),(a=e(h))!=null&&a.value&&(m.conqueror=e(h).value),e(w)&&(m.passive_skill=e(w).value),e(f)&&(m.seed=e(f));const q=Object.keys(m).map(E=>E+"="+encodeURIComponent(m[E])).join("&");Ye(ve().url.pathname+"?"+q)}};var ee=fa(),me=l(ee),ae=l(me),ue=i(l(ae),2),ce=i(ue,2),fe=i(l(ce),2);ie(fe,{get items(){return oe},get value(){return e(s)},set value(a){V(s,a,!0)},$$events:{select:Q}});var je=i(fe,2);{var Pe=a=>{var m=ca(),q=I(m),E=i(l(q),2);ie(E,{get items(){return e(Ie)},get value(){return e(h)},set value(C){V(h,C,!0)},$$events:{select:Q}}),t(q);var Re=i(q,2);{var Je=C=>{var M=ua(),se=I(M),Oe=i(l(se),2);ie(Oe,{get items(){return de},get value(){return e(w)},set value(D){V(w,D,!0)},$$events:{select:Q}}),t(se);var qe=i(se,2);{var Ce=D=>{var he=ma(),te=I(he),j=i(l(te),2);Ee(j);var Me=i(j,2);{var De=u=>{var c=sa(),L=l(c);t(c),k(()=>z(L,`Seed must be between ${r.TimelessJewelSeedRanges[e(s).value].Min??""} and ${r.TimelessJewelSeedRanges[e(s).value].Max??""}`)),v(u,c)};_(Me,u=>{var c;e(s)&&((c=r.TimelessJewelSeedRanges)!=null&&c[e(s).value])&&typeof e(f)=="number"&&(e(f)<r.TimelessJewelSeedRanges[e(s).value].Min||e(f)>r.TimelessJewelSeedRanges[e(s).value].Max)&&u(De)})}t(te);var Be=i(te,2);{var Ge=u=>{var c=da(),L=I(c);{var Ke=A=>{var P=ra(),T=I(P),R=i(l(T),2),o=l(R);t(R),t(T);var B=i(T,2);{var G=K=>{var F=la();ne(F,22,()=>Object.keys(e(n).StatRolls),H=>H,(H,y,p)=>{var J=xe(),le=I(J);{var W=O=>{var b=ta();const $=re(()=>r.GetStatByIndex(e(n).AlternatePassiveSkill.StatsKeys[e(p)]));var N=l(b);t(b),k(S=>{var x,X;return z(N,`${((x=e($))==null?void 0:x.Text)||"<no name>"} (${((X=e($))==null?void 0:X.ID)??""}) - ${S??""}`)},[()=>Object.values(e(n).StatRolls)[e(p)]]),v(O,b)};_(le,O=>{var b,$;($=(b=e(n).AlternatePassiveSkill)==null?void 0:b.StatsKeys)!=null&&$[e(p)]&&O(W)})}v(H,J)}),t(F),v(K,F)};_(B,K=>{e(n).StatRolls&&Object.keys(e(n).StatRolls).length>0&&K(G)})}k(()=>z(o,`${e(n).AlternatePassiveSkill.Name??""} (${e(n).AlternatePassiveSkill.ID??""})`)),v(A,P)};_(L,A=>{e(n).AlternatePassiveSkill&&A(Ke)})}var Fe=i(L,2);{var He=A=>{var P=oa(),T=i(l(P),2);ne(T,21,()=>e(n).AlternatePassiveAdditionInformations,R=>{var o;return((o=R.AlternatePassiveAddition)==null?void 0:o.ID)||Math.random()},(R,o)=>{var B=va(),G=l(B),K=l(G);t(G);var F=i(G,2);{var H=y=>{var p=na();ne(p,22,()=>Object.keys(e(o).StatRolls),J=>J,(J,le,W)=>{var O=xe(),b=I(O);{var $=N=>{var S=ia();const x=re(()=>r.GetStatByIndex(e(o).AlternatePassiveAddition.StatsKeys[e(W)]));var X=l(S);t(S),k(()=>{var be,Se;return z(X,`${((be=e(x))==null?void 0:be.Text)||"<no name>"} (${((Se=e(x))==null?void 0:Se.ID)??""}) - ${e(o).StatRolls[le]??""}`)}),v(N,S)};_(b,N=>{var S,x;(x=(S=e(o).AlternatePassiveAddition)==null?void 0:S.StatsKeys)!=null&&x[e(W)]&&N($)})}v(J,O)}),t(p),v(y,p)};_(F,y=>{e(o).StatRolls&&Object.keys(e(o).StatRolls).length>0&&y(H)})}t(B),k(()=>{var y,p;return z(K,`${((y=e(o).AlternatePassiveAddition)==null?void 0:y.ID)??""} (${((p=e(o).AlternatePassiveAddition)==null?void 0:p.Index)??""})`)}),v(R,B)}),t(T),t(P),v(A,P)};_(Fe,A=>{"AlternatePassiveAdditionInformations"in e(n)&&e(n).AlternatePassiveAdditionInformations&&e(n).AlternatePassiveAdditionInformations.length>0&&A(He)})}v(u,c)};_(Be,u=>{e(n)&&u(Ge)})}k(()=>{var u,c;Z(j,"min",e(s)&&((u=r.TimelessJewelSeedRanges)!=null&&u[e(s).value])?r.TimelessJewelSeedRanges[e(s).value].Min:0),Z(j,"max",e(s)&&((c=r.TimelessJewelSeedRanges)!=null&&c[e(s).value])?r.TimelessJewelSeedRanges[e(s).value].Max:0)}),ze("blur",j,Q),Le(j,()=>e(f),u=>V(f,u)),v(D,he)};_(qe,D=>{e(w)&&D(Ce)})}v(C,M)};_(Re,C=>{var M;e(h)&&e(s)&&((M=r.TimelessJewelConquerors)!=null&&M[e(s).value])&&e(h).value&&Object.keys(r.TimelessJewelConquerors[e(s).value]||{}).indexOf(e(h).value)>=0&&C(Je)})}v(a,m)};_(je,a=>{e(s)&&a(Pe)})}t(ce),t(ae);var _e=i(ae,2),pe=l(_e),ge=l(pe),Te=l(ge);we(2),t(ge),t(pe),we(2),t(_e),t(me),t(ee),k(()=>{Z(ue,"href",`${Ze??""}/tree`),Z(Te,"src",`${ea??""}/mf-academy-logo.png`)}),v(Ae,ee),Ve(),ke()}export{ya as component};
