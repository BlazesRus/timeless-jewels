import{a9 as ml,R as te,aa as _l,S as Ke,i as We,s as Xe,I as xt,e as T,k as q,c as A,a as M,d as b,m as j,b as N,f as tt,g as O,ab as pl,J as $t,K as el,L as tl,q as G,o as Y,r as wl,v as gl,ac as ll,N as Le,E as Ee,a8 as bl,w as Je,x as Me,y as Re,M as g,B as Ce,l as be,n as qe,p as je,G as ze,V as ae,ad as vl,t as F,h as V,j as de,U as He,O as sl,P as il,W as $e,T as Ve,Q as Fe}from"../chunks/index-9dce7d4e.js";import{r as kl,d as Sl}from"../chunks/index-69a3444d.js";import{g as _e,b as yl,a as Ie,d as it,t as yt,c as Ae,o as It,e as et,f as Et,i as Pt,h as Nt,j as Il,k as Tt,m as Ye,n as At,s as El,p as Pl}from"../chunks/worker-62c56c67.js";import{S as rt,g as Nl,p as Tl}from"../chunks/stores-abc55b13.js";import"../chunks/singletons-d1fb5791.js";const Al=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function Jl(){const l=ml();return e=>{const t=Al.map(s=>te(e,s,r=>_l(l,r)));return{destroy:()=>t.forEach(s=>s())}}}class Ml{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:e,render:t}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,t),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.needsRedraw=!0}render({autoclear:e,pixelRatio:t,context:s,width:r,height:i}){const n={context:s,width:r,height:i};if(this.needsResize&&(s.setTransform(t,0,0,t,0,0),this.needsResize=!1),this.needsSetup){for(const[c,m]of this.setups)m(n),this.setups.delete(c);this.needsSetup=!1}if(this.needsRedraw){e&&s.clearRect(0,0,r,i);for(const c of this.layerSequence)this.renderers.get(c)(n);this.needsRedraw=!1}}}function Rl(l){let e,t,s,r,i,n,c,m,u;const p=l[13].default,d=xt(p,l,l[12],null);return{c(){e=T("canvas"),i=q(),n=T("div"),d&&d.c(),this.h()},l(o){e=A(o,"CANVAS",{style:!0,width:!0,height:!0}),M(e).forEach(b),i=j(o),n=A(o,"DIV",{style:!0});var a=M(n);d&&d.l(a),a.forEach(b),this.h()},h(){N(e,"style",t="display: block; width: "+l[1]+"px; height: "+l[2]+"px;"+(l[3]?` ${l[3]}`:"")),N(e,"width",s=l[1]*l[0]),N(e,"height",r=l[2]*l[0]),tt(n,"display","none")},m(o,a){O(o,e,a),l[14](e),O(o,i,a),O(o,n,a),d&&d.m(n,null),l[15](n),c=!0,m||(u=pl(l[6].call(null,e)),m=!0)},p(o,[a]){(!c||a&14&&t!==(t="display: block; width: "+o[1]+"px; height: "+o[2]+"px;"+(o[3]?` ${o[3]}`:"")))&&N(e,"style",t),(!c||a&3&&s!==(s=o[1]*o[0]))&&N(e,"width",s),(!c||a&5&&r!==(r=o[2]*o[0]))&&N(e,"height",r),d&&d.p&&(!c||a&4096)&&$t(d,p,o,o[12],c?tl(p,o[12],a,null):el(o[12]),null)},i(o){c||(G(d,o),c=!0)},o(o){Y(d,o),c=!1},d(o){o&&b(e),l[14](null),o&&b(i),o&&b(n),d&&d.d(o),l[15](null),m=!1,u()}}}const nl={};function Cl(l,e,t){let{$$slots:s={},$$scope:r}=e,{width:i=640,height:n=640,pixelRatio:c=void 0,style:m=null,autoclear:u=!0}=e,p,d,o,a,w;const _=Jl(),I=new Ml;function k(){I.redraw()}function J(){return p}function h(){return d}c===void 0&&(typeof window=="undefined"?c=2:c=window.devicePixelRatio);function E(){I.render({context:d,width:i,height:n,pixelRatio:c,autoclear:u}),o=window.requestAnimationFrame(E)}wl(nl,{register:I.register,unregister:I.unregister,redraw:I.redraw}),gl(()=>{d=p.getContext("2d"),w=new MutationObserver(P),w.observe(a,{childList:!0}),P(),E();function P(){const R=[...a.children].map(Q=>+Q.dataset.layerId);t(11,I.layerSequence=R,I),I.redraw()}}),ll(()=>{typeof window!="undefined"&&(window.cancelAnimationFrame(o),w.disconnect())});function S(P){Le[P?"unshift":"push"](()=>{p=P,t(4,p)})}function v(P){Le[P?"unshift":"push"](()=>{a=P,t(5,a)})}return l.$$set=P=>{"width"in P&&t(1,i=P.width),"height"in P&&t(2,n=P.height),"pixelRatio"in P&&t(0,c=P.pixelRatio),"style"in P&&t(3,m=P.style),"autoclear"in P&&t(7,u=P.autoclear),"$$scope"in P&&t(12,r=P.$$scope)},l.$$.update=()=>{l.$$.dirty&2183&&I.resize()},[c,i,n,m,p,a,_,u,k,J,h,I,r,s,S,v]}class Dl extends Ke{constructor(e){super(),We(this,e,Cl,Rl,Xe,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function Ol(l){let e;return{c(){e=T("div"),this.h()},l(t){e=A(t,"DIV",{"data-layer-id":!0}),M(e).forEach(b),this.h()},h(){N(e,"data-layer-id",l[0])},m(t,s){O(t,e,s)},p:Ee,i:Ee,o:Ee,d(t){t&&b(e)}}}function Fl(l,e,t){const{register:s,unregister:r,redraw:i}=bl(nl);let{setup:n=void 0,render:c=()=>{}}=e;if(typeof n!="function"&&n!==void 0)throw new Error("setup must be a function");if(typeof c!="function")throw new Error("render must be a function");const m=s({setup:n,render:c});return ll(()=>r(m)),l.$$set=u=>{"setup"in u&&t(1,n=u.setup),"render"in u&&t(2,c=u.render)},l.$$.update=()=>{l.$$.dirty&4&&i()},[m,n,c]}class Vl extends Ke{constructor(e){super(),We(this,e,Fl,Ol,Xe,{setup:1,render:2})}}let Jt;const rl=Date.now();function ol(l){return l(Date.now()-rl),Jt=window.requestAnimationFrame(()=>ol(l)),()=>window.cancelAnimationFrame(Jt)}function ql(){}var jl=kl(Date.now()-rl,typeof window=="undefined"?ql:ol);const{window:nt}=vl;function Mt(l){let e,t,s,r,i,n;t=new Dl({props:{width:l[0],height:l[1],$$slots:{default:[Ul]},$$scope:{ctx:l}}}),t.$on("pointerdown",l[17]),t.$on("wheel",l[20]);const c=l[49].default,m=xt(c,l,l[50],null);return{c(){e=T("div"),Je(t.$$.fragment),s=q(),m&&m.c(),this.h()},l(u){e=A(u,"DIV",{style:!0});var p=M(e);Me(t.$$.fragment,p),s=j(p),m&&m.l(p),p.forEach(b),this.h()},h(){tt(e,"touch-action","none"),tt(e,"cursor",l[2])},m(u,p){O(u,e,p),Re(t,e,null),g(e,s),m&&m.m(e,null),r=!0,i||(n=te(e,"resize",l[21]),i=!0)},p(u,p){const d={};p[0]&1&&(d.width=u[0]),p[0]&2&&(d.height=u[1]),p[0]&8|p[1]&524288&&(d.$$scope={dirty:p,ctx:u}),t.$set(d),m&&m.p&&(!r||p[1]&524288)&&$t(m,c,u,u[50],r?tl(c,u[50],p,null):el(u[50]),null),(!r||p[0]&4)&&tt(e,"cursor",u[2])},i(u){r||(G(t.$$.fragment,u),G(m,u),r=!0)},o(u){Y(t.$$.fragment,u),Y(m,u),r=!1},d(u){u&&b(e),Ce(t),m&&m.d(u),i=!1,n()}}}function Ul(l){let e,t;return e=new Vl({props:{render:l[3]}}),{c(){Je(e.$$.fragment)},l(s){Me(e.$$.fragment,s)},m(s,r){Re(e,s,r),t=!0},p(s,r){const i={};r[0]&8&&(i.render=s[3]),e.$set(i)},i(s){t||(G(e.$$.fragment,s),t=!0)},o(s){Y(e.$$.fragment,s),t=!1},d(s){Ce(e,s)}}}function Gl(l){let e,t,s,r,i=l[0]&&l[1]&&Mt(l);return{c(){i&&i.c(),e=be()},l(n){i&&i.l(n),e=be()},m(n,c){i&&i.m(n,c),O(n,e,c),t=!0,s||(r=[te(nt,"pointerup",l[18]),te(nt,"pointermove",l[19]),te(nt,"resize",l[21])],s=!0)},p(n,c){n[0]&&n[1]?i?(i.p(n,c),c[0]&3&&G(i,1)):(i=Mt(n),i.c(),G(i,1),i.m(e.parentNode,e)):i&&(qe(),Y(i,1,1,()=>{i=null}),je())},i(n){t||(G(i),t=!0)},o(n){Y(i),t=!1},d(n){i&&i.d(n),n&&b(e),s=!1,ze(r)}}}const Rt="25px Roboto Mono",Ct="17px Roboto Mono",Oe=2.6;function Bl(l,e,t){let s,r,i,n,c,m,u,p,d,o,a,w,_,I,k,{$$slots:J={},$$scope:h}=e,{clickNode:E}=e,{circledNode:S}=e,{selectedJewel:v}=e,{selectedConqueror:P}=e,{seed:R}=e,{highlighted:Q=[]}=e,{disabled:he=[]}=e;const ge=Sl(jl,f=>!Q||!Q.length?0:Math.round(f/40));ae(l,ge,f=>t(36,i=f));const le=[427,320,226,227,323,422,329];let C=10,W=0,x=0;const $=(f,X,ue)=>{const K=X.width/C*Oe,B=X.height/C*Oe,z=ue.x-K/2,re=ue.y-B/2;f.drawImage(X,z,re,K,B)},Se=(f,X,ue)=>{const K=X.width/C*Oe,B=X.height/C*Oe,z=ue.x-K/2,re=ue.y-B/2,Pe=re-B/2;f.drawImage(X,z,Pe,K,B),f.save(),f.translate(z,re),f.rotate(Math.PI),f.drawImage(X,-K,-(B/2),K,-B),f.restore()},pe={},ve={},we=(f,X,ue,K=!1)=>{let B=K?Il[X]:Tt[X];!B&&K&&(B=Tt[X]);const z=B.filename;z in(K?ve:pe)||((K?ve:pe)[z]=new Image,(K?ve:pe)[z].src=z);const re=B.coords[X],Pe=re.w/C*Oe,xe=re.h/C*Oe,oe=ue.x-Pe/2,D=ue.y-xe/2;f.drawImage((K?ve:pe)[z],re.x,re.y,re.w,re.h,oe,D,Pe,xe)},De=(f,X,ue)=>{const K=[];let B="";return f.split(" ").forEach(z=>{X.measureText(B+z).width<ue?B+=" "+z:(K.push(B.trim()),B=z)}),B.length>0&&K.push(B.trim()),K};let ie={x:Number.MIN_VALUE,y:Number.MIN_VALUE},Ue="unset";const Qe=_e("PSGroupBackground1");ae(l,Qe,f=>t(48,k=f));const Ze=_e("PSGroupBackground2");ae(l,Ze,f=>t(47,I=f));const y=_e("PSGroupBackground3");ae(l,y,f=>t(46,_=f));const ne=_e("KeystoneFrameAllocated");ae(l,ne,f=>t(45,w=f));const ee=_e("KeystoneFrameUnallocated");ae(l,ee,f=>t(44,a=f));const ot=_e("NotableFrameAllocated");ae(l,ot,f=>t(43,o=f));const at=_e("NotableFrameUnallocated");ae(l,at,f=>t(42,d=f));const ft=_e("JewelSocketAltNormal");ae(l,ft,f=>t(41,p=f));const ut=_e("JewelFrameAllocated");ae(l,ut,f=>t(40,u=f));const ct=_e("JewelFrameUnallocated");ae(l,ct,f=>t(39,m=f));const dt=_e("PSSkillFrameActive");ae(l,dt,f=>t(38,c=f));const ht=_e("PSSkillFrame");ae(l,ht,f=>t(37,n=f));let fe,mt=0,_t=0,pt=0,wt=0,lt=!1;const al=f=>{lt=!0,mt=f.offsetX,_t=f.offsetY,pt=W,wt=x,t(32,ie={x:f.offsetX,y:f.offsetY}),fe&&E(fe)},fl=f=>{f.type==="pointerup"&&(lt=!1),t(32,ie={x:f.offsetX,y:f.offsetY})},ul=f=>{lt&&(t(30,W=pt-(mt-f.offsetX)*C),t(31,x=wt-(_t-f.offsetY)*C)),t(32,ie={x:f.offsetX,y:f.offsetY})},cl=f=>{f.deltaY>0?C<30&&(t(30,W+=f.offsetX),t(31,x+=f.offsetY)):C>3&&(t(30,W-=f.offsetX),t(31,x-=f.offsetY)),t(29,C=Math.min(30,Math.max(3,C+f.deltaY/100))),f.preventDefault(),f.stopPropagation(),f.stopImmediatePropagation()};let gt=0,bt=0;const vt=()=>{t(0,gt=window.innerWidth),t(1,bt=window.innerHeight)};let st=!1;return l.$$set=f=>{"clickNode"in f&&t(22,E=f.clickNode),"circledNode"in f&&t(23,S=f.circledNode),"selectedJewel"in f&&t(24,v=f.selectedJewel),"selectedConqueror"in f&&t(25,P=f.selectedConqueror),"seed"in f&&t(26,R=f.seed),"highlighted"in f&&t(27,Q=f.highlighted),"disabled"in f&&t(28,he=f.disabled),"$$scope"in f&&t(50,h=f.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&536870912&&t(35,s=yl/C),l.$$.dirty[0]&536870912|l.$$.dirty[1]&8&&(!st&&Ie&&(t(34,st=!0),t(30,W=Ie.min_x+window.innerWidth/2*C),t(31,x=Ie.min_y+window.innerHeight/2*C)),vt()),l.$$.dirty[0]&2139095040|l.$$.dirty[1]&262135&&t(3,r=({context:f,width:X,height:ue})=>{const K=window.performance.now();f.clearRect(0,0,X,ue),f.fillStyle="#080c11",f.fillRect(0,0,X,ue);const B={};Object.keys(it).forEach(oe=>{const D=it[oe],U=yt(D.x,D.y,W,x,C),Z=Math.max(...D.orbits);le.indexOf(parseInt(oe))>=0||(Z==1?$(f,k,U):Z==2?$(f,I,U):(Z==3||D.orbits.length>1)&&Se(f,_,U))}),Object.keys(Ae).forEach(oe=>{var L;const D=Ae[oe],U=It(D.orbit,D.orbitIndex),Z=et(D,W,x,C);(L=D.out)==null||L.forEach(Ne=>{if(!Ae[parseInt(Ne)])return;const ke=Math.min(parseInt(Ne),parseInt(oe)),Ge=Math.max(parseInt(Ne),parseInt(oe)),H=ke+":"+Ge;if(H in B)return;B[H]=!0;const se=Ae[parseInt(Ne)];if(!se||se.isMastery)return;const Te=It(se.orbit,se.orbitIndex),ye=et(se,W,x,C);if(f.beginPath(),D.group!=se.group||D.orbit!=se.orbit)f.moveTo(Z.x,Z.y),f.lineTo(ye.x,ye.y);else{let me=Math.PI/180-Math.PI/180*U,ce=Math.PI/180-Math.PI/180*Te;me-=Math.PI/2,ce-=Math.PI/2;const Be=Math.abs(Math.max(me,ce)-Math.min(me,ce)),dl=Be>Math.PI?Math.max(me,ce):Math.min(me,ce),hl=Be>Math.PI?Math.min(me,ce):Math.max(me,ce),kt=it[D.group],St=yt(kt.x,kt.y,W,x,C);f.arc(St.x,St.y,Ie.constants.orbitRadii[D.orbit]/C+1,dl,hl)}f.lineWidth=6/C,f.strokeStyle="#524518",f.stroke()})});let z;S&&(z=et(Ae[S],W,x,C),f.strokeStyle="#ad2b2b");let re=!1,Pe;if(Object.keys(Ae).forEach(oe=>{const D=Ae[oe],U=et(D,W,x,C);let Z=0,L=!1;S&&Et(U,z)<s&&(L=!0),he.indexOf(D.skill)>=0&&(L=!1),D.isKeystone?(Z=110,we(f,D.icon,U,L),L?$(f,w,U):$(f,a,U)):D.isNotable?(Z=70,we(f,D.icon,U,L),L?$(f,o,U):$(f,d,U)):D.isJewelSocket?(Z=70,D.expansionJewel?$(f,p,U):L?$(f,u,U):$(f,m,U)):D.isMastery?we(f,D.inactiveIcon,U,L):(Z=50,we(f,D.icon,U,L),L?$(f,c,U):$(f,n,U)),Q.indexOf(D.skill)>=0&&(f.strokeStyle=`hsl(${i}, 100%, 50%)`,f.lineWidth=3,f.beginPath(),f.arc(U.x,U.y,(Z+30)/C,0,Math.PI*2),f.stroke()),Et(U,ie)<Z/C&&(Pe=D,re=L)}),t(33,fe=Pe),S&&(f.strokeStyle="#ad2b2b",f.lineWidth=1,f.beginPath(),f.arc(z.x,z.y,s,0,Math.PI*2),f.stroke()),fe){let oe=fe.name,D=(fe.stats||[]).map(H=>({text:H,special:!1}));if(!fe.isJewelSocket&&re&&fe.skill&&R&&v&&P){const H=Calculate(TreeToPassive[fe.skill],R,v,P);if(H){if("alternatePassiveSkill"in H){const se=GetAlternatePassiveSkillByIndex(H.alternatePassiveSkill);D=[],oe=se.name,"statsKeys"in se&&se.statsKeys.forEach((Te,ye)=>{const me=GetStatByIndex(Te),ce=Pt[me.id]||"";ce&&D.push({text:Nt(ce,H.statRolls[ye])||me.id,special:!0})})}"alternatePassiveAdditionInformations"in H&&H.alternatePassiveAdditionInformations.length>0&&H.alternatePassiveAdditionInformations.forEach(se=>{const Te=GetAlternatePassiveAdditionByIndex(se.alternatePassiveSkillAddition);"statsKeys"in Te&&Te.statsKeys.forEach((ye,me)=>{const ce=GetStatByIndex(ye),Be=Pt[ce.id]||"";Be&&D.push({text:Nt(Be,se.statRolls[me])||ce.id,special:!0})})})}}f.font=Rt;const U=f.measureText(oe),Z=Math.max(U.width+50,600);f.font=Ct;const L=[],Ne=30;let ke=85;D&&D.length>0?D.forEach(H=>{L.length>0&&(ke+=5),H.text.split(`
`).forEach(se=>{L.length>0&&(ke+=10),De(se,f,Z-Ne).forEach(ye=>{L.push({text:ye,offset:ke,special:H.special}),ke+=20})})}):fe.isJewelSocket&&(L.push({text:"Click to select this socket",offset:ke,special:!0}),ke+=20);const Ge=55;f.fillStyle="rgba(75,63,24,0.9)",f.fillRect(ie.x,ie.y,Z,Ge),f.fillStyle="#ffffff",f.font=Rt,f.textAlign="center",f.fillText(oe,ie.x+Z/2,ie.y+35),f.fillStyle="rgba(0,0,0,0.8)",f.fillRect(ie.x,ie.y+Ge,Z,ke-Ge),f.font=Ct,f.textAlign="left",L.forEach(H=>{H.special?f.fillStyle="#8cf34c":f.fillStyle="#ffffff",f.fillText(H.text,ie.x+Ne/2,ie.y+H.offset)})}fe&&fe.isJewelSocket?t(2,Ue="pointer"):t(2,Ue="unset"),f.fillStyle="#ffffff",f.textAlign="right",f.font="12px Roboto Mono";const xe=window.performance.now();f.fillText(`${(xe-K).toFixed(1)}ms`,X-5,17)})},[gt,bt,Ue,r,ge,Qe,Ze,y,ne,ee,ot,at,ft,ut,ct,dt,ht,al,fl,ul,cl,vt,E,S,v,P,R,Q,he,C,W,x,ie,fe,st,s,i,n,c,m,u,p,d,o,a,w,_,I,k,J,h]}class Ll extends Ke{constructor(e){super(),We(this,e,Bl,Gl,Xe,{clickNode:22,circledNode:23,selectedJewel:24,selectedConqueror:25,seed:26,highlighted:27,disabled:28},null,[-1,-1,-1])}}function Dt(l,e,t){const s=l.slice();return s[6]=e[t],s}function Ot(l,e,t){const s=l.slice();return s[9]=e[t],s}function Ft(l,e,t){const s=l.slice();return s[12]=e[t],s}function Vt(l,e,t){const s=l.slice();return s[15]=e[t],s}function qt(l){let e,t=l[0][l[6]],s=[];for(let r=0;r<t.length;r+=1)s[r]=Gt(Ot(l,t,r));return{c(){e=T("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=A(r,"DIV",{class:!0});var i=M(e);for(let n=0;n<s.length;n+=1)s[n].l(i);i.forEach(b),this.h()},h(){N(e,"class","flex flex-col")},m(r,i){O(r,e,i);for(let n=0;n<s.length;n+=1)s[n].m(e,null)},p(r,i){if(i&3){t=r[0][r[6]];let n;for(n=0;n<t.length;n+=1){const c=Ot(r,t,n);s[n]?s[n].p(c,i):(s[n]=Gt(c),s[n].c(),s[n].m(e,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},d(r){r&&b(e),He(s,r)}}}function jt(l){let e,t=Ye(l[15],l[12].stats[l[15]])+"",s;return{c(){e=T("li"),s=F(t)},l(r){e=A(r,"LI",{});var i=M(e);s=V(i,t),i.forEach(b)},m(r,i){O(r,e,i),g(e,s)},p(r,i){i&1&&t!==(t=Ye(r[15],r[12].stats[r[15]])+"")&&de(s,t)},d(r){r&&b(e)}}}function Ut(l){let e,t,s=Ie.nodes[l[12].passive].name+"",r,i,n=l[12].passive+"",c,m,u,p,d=Object.keys(l[12].stats),o=[];for(let a=0;a<d.length;a+=1)o[a]=jt(Vt(l,d,a));return{c(){e=T("div"),t=T("span"),r=F(s),i=F(" ("),c=F(n),m=F(")"),u=q(),p=T("ul");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=A(a,"DIV",{class:!0});var w=M(e);t=A(w,"SPAN",{});var _=M(t);r=V(_,s),i=V(_," ("),c=V(_,n),m=V(_,")"),_.forEach(b),u=j(w),p=A(w,"UL",{class:!0});var I=M(p);for(let k=0;k<o.length;k+=1)o[k].l(I);I.forEach(b),w.forEach(b),this.h()},h(){N(p,"class","list-disc pl-6 font-bold"),N(e,"class","mt-2")},m(a,w){O(a,e,w),g(e,t),g(t,r),g(t,i),g(t,c),g(t,m),g(e,u),g(e,p);for(let _=0;_<o.length;_+=1)o[_].m(p,null)},p(a,w){if(w&1&&s!==(s=Ie.nodes[a[12].passive].name+"")&&de(r,s),w&1&&n!==(n=a[12].passive+"")&&de(c,n),w&1){d=Object.keys(a[12].stats);let _;for(_=0;_<d.length;_+=1){const I=Vt(a,d,_);o[_]?o[_].p(I,w):(o[_]=jt(I),o[_].c(),o[_].m(p,null))}for(;_<o.length;_+=1)o[_].d(1);o.length=d.length}},d(a){a&&b(e),He(o,a)}}}function Gt(l){let e,t,s,r=l[9].seed+"",i,n,c=l[9].weight+"",m,u,p,d,o,a,w=l[9].skills,_=[];for(let k=0;k<w.length;k+=1)_[k]=Ut(Ft(l,w,k));function I(){return l[5](l[9])}return{c(){e=T("div"),t=T("div"),s=F("Seed "),i=F(r),n=F(" (weight "),m=F(c),u=F(")"),p=q();for(let k=0;k<_.length;k+=1)_[k].c();d=q(),this.h()},l(k){e=A(k,"DIV",{class:!0});var J=M(e);t=A(J,"DIV",{class:!0});var h=M(t);s=V(h,"Seed "),i=V(h,r),n=V(h," (weight "),m=V(h,c),u=V(h,")"),h.forEach(b),p=j(J);for(let E=0;E<_.length;E+=1)_[E].l(J);d=j(J),J.forEach(b),this.h()},h(){N(t,"class","font-bold text-orange-500 text-center"),N(e,"class","my-2 border-white/50 border p-2 flex flex-col cursor-pointer")},m(k,J){O(k,e,J),g(e,t),g(t,s),g(t,i),g(t,n),g(t,m),g(t,u),g(e,p);for(let h=0;h<_.length;h+=1)_[h].m(e,null);g(e,d),o||(a=te(e,"click",I),o=!0)},p(k,J){if(l=k,J&1&&r!==(r=l[9].seed+"")&&de(i,r),J&1&&c!==(c=l[9].weight+"")&&de(m,c),J&1){w=l[9].skills;let h;for(h=0;h<w.length;h+=1){const E=Ft(l,w,h);_[h]?_[h].p(E,J):(_[h]=Ut(E),_[h].c(),_[h].m(e,d))}for(;h<_.length;h+=1)_[h].d(1);_.length=w.length}},d(k){k&&b(e),He(_,k),o=!1,a()}}}function Bt(l){let e,t,s,r=l[6]+"",i,n,c=l[0][l[6]].length+"",m,u,p,d,o=l[2]===l[6]?"^":"V",a,w,_,I,k;function J(){return l[4](l[6])}let h=l[2]===l[6]&&qt(l);return{c(){e=T("div"),t=T("button"),s=T("span"),i=F(r),n=F(" Matches ["),m=F(c),u=F("]"),p=q(),d=T("span"),a=F(o),w=q(),h&&h.c(),_=q(),this.h()},l(E){e=A(E,"DIV",{class:!0});var S=M(e);t=A(S,"BUTTON",{class:!0});var v=M(t);s=A(v,"SPAN",{});var P=M(s);i=V(P,r),n=V(P," Matches ["),m=V(P,c),u=V(P,"]"),P.forEach(b),p=j(v),d=A(v,"SPAN",{});var R=M(d);a=V(R,o),R.forEach(b),v.forEach(b),w=j(S),h&&h.l(S),_=j(S),S.forEach(b),this.h()},h(){N(t,"class","text-lg w-full p-2 px-4 bg-neutral-500/30 rounded flex flex-row justify-between"),N(e,"class","mb-2")},m(E,S){O(E,e,S),g(e,t),g(t,s),g(s,i),g(s,n),g(s,m),g(s,u),g(t,p),g(t,d),g(d,a),g(e,w),h&&h.m(e,null),g(e,_),I||(k=te(t,"click",J),I=!0)},p(E,S){l=E,S&1&&r!==(r=l[6]+"")&&de(i,r),S&1&&c!==(c=l[0][l[6]].length+"")&&de(m,c),S&5&&o!==(o=l[2]===l[6]?"^":"V")&&de(a,o),l[2]===l[6]?h?h.p(l,S):(h=qt(l),h.c(),h.m(e,_)):h&&(h.d(1),h=null)},d(E){E&&b(e),h&&h.d(),I=!1,k()}}}function Yl(l){let e,t=Object.keys(l[0]).map(l[3]).sort(Lt).reverse(),s=[];for(let r=0;r<t.length;r+=1)s[r]=Bt(Dt(l,t,r));return{c(){e=T("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=A(r,"DIV",{class:!0});var i=M(e);for(let n=0;n<s.length;n+=1)s[n].l(i);i.forEach(b),this.h()},h(){N(e,"class","mt-4 flex flex-col overflow-auto")},m(r,i){O(r,e,i);for(let n=0;n<s.length;n+=1)s[n].m(e,null)},p(r,[i]){if(i&7){t=Object.keys(r[0]).map(r[3]).sort(Lt).reverse();let n;for(n=0;n<t.length;n+=1){const c=Dt(r,t,n);s[n]?s[n].p(c,i):(s[n]=Bt(c),s[n].c(),s[n].m(e,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},i:Ee,o:Ee,d(r){r&&b(e),He(s,r)}}}const Lt=(l,e)=>l-e;function Kl(l,e,t){let{searchGrouped:s}=e,{highlight:r}=e,i="";const n=u=>parseInt(u),c=u=>t(2,i=i===u?"":u),m=u=>r(u.seed,u.skills);return l.$$set=u=>{"searchGrouped"in u&&t(0,s=u.searchGrouped),"highlight"in u&&t(1,r=u.highlight)},[s,r,i,n,c,m]}class Wl extends Ke{constructor(e){super(),We(this,e,Kl,Yl,Xe,{searchGrouped:0,highlight:1})}}function Yt(l,e,t){const s=l.slice();return s[39]=e[t],s[40]=e,s[41]=t,s}function Kt(l){let e,t,s,r,i,n,c,m=l[2]&&window.TimelessJewelConquerors[l[0].value].indexOf(l[2].value)>=0,u,p;function d(w){l[27](w)}let o={items:l[13]};l[2]!==void 0&&(o.value=l[2]),i=new rt({props:o}),Le.push(()=>sl(i,"value",d)),i.$on("select",l[16]);let a=m&&Wt(l);return{c(){e=T("div"),t=T("h3"),s=F("Conqueror"),r=q(),Je(i.$$.fragment),c=q(),a&&a.c(),u=be(),this.h()},l(w){e=A(w,"DIV",{class:!0});var _=M(e);t=A(_,"H3",{class:!0});var I=M(t);s=V(I,"Conqueror"),I.forEach(b),r=j(_),Me(i.$$.fragment,_),_.forEach(b),c=j(w),a&&a.l(w),u=be(),this.h()},h(){N(t,"class","mb-2"),N(e,"class","mt-4")},m(w,_){O(w,e,_),g(e,t),g(t,s),g(e,r),Re(i,e,null),O(w,c,_),a&&a.m(w,_),O(w,u,_),p=!0},p(w,_){const I={};_[0]&8192&&(I.items=w[13]),!n&&_[0]&4&&(n=!0,I.value=w[2],il(()=>n=!1)),i.$set(I),_[0]&5&&(m=w[2]&&window.TimelessJewelConquerors[w[0].value].indexOf(w[2].value)>=0),m?a?(a.p(w,_),_[0]&5&&G(a,1)):(a=Wt(w),a.c(),G(a,1),a.m(u.parentNode,u)):a&&(qe(),Y(a,1,1,()=>{a=null}),je())},i(w){p||(G(i.$$.fragment,w),G(a),p=!0)},o(w){Y(i.$$.fragment,w),Y(a),p=!1},d(w){w&&b(e),Ce(i),w&&b(c),a&&a.d(w),w&&b(u)}}}function Wt(l){let e,t,s,r,i,n,c,m,u,p,d,o,a,w;const _=[zl,Xl],I=[];function k(h,E){return h[6]==="seed"?0:h[6]==="stats"?1:-1}~(m=k(l))&&(u=I[m]=_[m](l));let J=!l[4]&&Zt();return{c(){e=T("div"),t=T("button"),s=F("Enter Seed"),r=q(),i=T("button"),n=F("Select Stats"),c=q(),u&&u.c(),p=q(),J&&J.c(),d=be(),this.h()},l(h){e=A(h,"DIV",{class:!0});var E=M(e);t=A(E,"BUTTON",{class:!0});var S=M(t);s=V(S,"Enter Seed"),S.forEach(b),r=j(E),i=A(E,"BUTTON",{class:!0});var v=M(i);n=V(v,"Select Stats"),v.forEach(b),E.forEach(b),c=j(h),u&&u.l(h),p=j(h),J&&J.l(h),d=be(),this.h()},h(){N(t,"class","selection-button svelte-1y2w84t"),$e(t,"selected",l[6]==="seed"),N(i,"class","selection-button svelte-1y2w84t"),$e(i,"selected",l[6]==="stats"),N(e,"class","mt-4 w-full flex flex-row")},m(h,E){O(h,e,E),g(e,t),g(t,s),g(e,r),g(e,i),g(i,n),O(h,c,E),~m&&I[m].m(h,E),O(h,p,E),J&&J.m(h,E),O(h,d,E),o=!0,a||(w=[te(t,"click",l[28]),te(i,"click",l[29])],a=!0)},p(h,E){E[0]&64&&$e(t,"selected",h[6]==="seed"),E[0]&64&&$e(i,"selected",h[6]==="stats");let S=m;m=k(h),m===S?~m&&I[m].p(h,E):(u&&(qe(),Y(I[S],1,1,()=>{I[S]=null}),je()),~m?(u=I[m],u?u.p(h,E):(u=I[m]=_[m](h),u.c()),G(u,1),u.m(p.parentNode,p)):u=null),h[4]?J&&(J.d(1),J=null):J||(J=Zt(),J.c(),J.m(d.parentNode,d))},i(h){o||(G(u),o=!0)},o(h){Y(u),o=!1},d(h){h&&b(e),h&&b(c),~m&&I[m].d(h),h&&b(p),J&&J.d(h),h&&b(d),a=!1,ze(w)}}}function Xl(l){let e,t,s,r,i,n,c=Object.keys(l[1]).length>0,m,u,p={items:l[12]};i=new rt({props:p}),l[31](i),i.$on("select",l[18]);let d=c&&Xt(l);return{c(){e=T("div"),t=T("h3"),s=F("Add Stat"),r=q(),Je(i.$$.fragment),n=q(),d&&d.c(),m=be(),this.h()},l(o){e=A(o,"DIV",{class:!0});var a=M(e);t=A(a,"H3",{class:!0});var w=M(t);s=V(w,"Add Stat"),w.forEach(b),r=j(a),Me(i.$$.fragment,a),a.forEach(b),n=j(o),d&&d.l(o),m=be(),this.h()},h(){N(t,"class","mb-2"),N(e,"class","mt-4")},m(o,a){O(o,e,a),g(e,t),g(t,s),g(e,r),Re(i,e,null),O(o,n,a),d&&d.m(o,a),O(o,m,a),u=!0},p(o,a){const w={};a[0]&4096&&(w.items=o[12]),i.$set(w),a[0]&2&&(c=Object.keys(o[1]).length>0),c?d?(d.p(o,a),a[0]&2&&G(d,1)):(d=Xt(o),d.c(),G(d,1),d.m(m.parentNode,m)):d&&(qe(),Y(d,1,1,()=>{d=null}),je())},i(o){u||(G(i.$$.fragment,o),G(d),u=!0)},o(o){Y(i.$$.fragment,o),Y(d),u=!1},d(o){o&&b(e),l[31](null),Ce(i),o&&b(n),d&&d.d(o),o&&b(m)}}}function zl(l){let e,t,s,r,i,n,c,m,u,p,d=(l[3]<window.TimelessJewelSeedRanges[l[0].value].min||l[3]>window.TimelessJewelSeedRanges[l[0].value].max)&&Qt(l);return{c(){e=T("div"),t=T("h3"),s=F("Seed"),r=q(),i=T("input"),m=q(),d&&d.c(),this.h()},l(o){e=A(o,"DIV",{class:!0});var a=M(e);t=A(a,"H3",{class:!0});var w=M(t);s=V(w,"Seed"),w.forEach(b),r=j(a),i=A(a,"INPUT",{type:!0,min:!0,max:!0}),m=j(a),d&&d.l(a),a.forEach(b),this.h()},h(){N(t,"class","mb-2"),N(i,"type","number"),N(i,"min",n=window.TimelessJewelSeedRanges[l[0].value].min),N(i,"max",c=window.TimelessJewelSeedRanges[l[0].value].max),N(e,"class","mt-4")},m(o,a){O(o,e,a),g(e,t),g(t,s),g(e,r),g(e,i),Fe(i,l[3]),g(e,m),d&&d.m(e,null),u||(p=[te(i,"input",l[30]),te(i,"blur",l[16])],u=!0)},p(o,a){a[0]&1&&n!==(n=window.TimelessJewelSeedRanges[o[0].value].min)&&N(i,"min",n),a[0]&1&&c!==(c=window.TimelessJewelSeedRanges[o[0].value].max)&&N(i,"max",c),a[0]&8&&Ve(i.value)!==o[3]&&Fe(i,o[3]),o[3]<window.TimelessJewelSeedRanges[o[0].value].min||o[3]>window.TimelessJewelSeedRanges[o[0].value].max?d?d.p(o,a):(d=Qt(o),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i:Ee,o:Ee,d(o){o&&b(e),d&&d.d(),u=!1,ze(p)}}}function Xt(l){let e,t,s,r,i,n,c,m,u,p,d,o,a,w,_,I=Object.keys(l[1]),k=[];for(let v=0;v<I.length;v+=1)k[v]=zt(Yt(l,I,v));function J(v,P){return v[8]?Ql:Hl}let h=J(l),E=h(l),S=l[10]&&Ht(l);return{c(){e=T("div");for(let v=0;v<k.length;v+=1)k[v].c();t=q(),s=T("div"),r=T("button"),i=F("Select All"),n=q(),c=T("button"),m=F("Deselect All"),u=q(),p=T("button"),E.c(),d=q(),S&&S.c(),o=be(),this.h()},l(v){e=A(v,"DIV",{class:!0});var P=M(e);for(let le=0;le<k.length;le+=1)k[le].l(P);P.forEach(b),t=j(v),s=A(v,"DIV",{class:!0});var R=M(s);r=A(R,"BUTTON",{class:!0});var Q=M(r);i=V(Q,"Select All"),Q.forEach(b),n=j(R),c=A(R,"BUTTON",{class:!0});var he=M(c);m=V(he,"Deselect All"),he.forEach(b),u=j(R),p=A(R,"BUTTON",{class:!0});var ge=M(p);E.l(ge),ge.forEach(b),R.forEach(b),d=j(v),S&&S.l(v),o=be(),this.h()},h(){N(e,"class","mt-4 flex flex-col overflow-auto min-h-[100px]"),N(r,"class","p-2 px-4 bg-yellow-500/40 rounded mt-2 disabled:bg-yellow-700/40 mr-2"),r.disabled=l[8],N(c,"class","p-2 px-4 bg-yellow-500/40 rounded mt-2 disabled:bg-yellow-700/40 mr-2"),c.disabled=l[8],N(p,"class","p-2 px-4 bg-green-500/40 rounded mt-2 disabled:bg-green-700/40 flex-grow"),p.disabled=l[8],N(s,"class","flex flex-row")},m(v,P){O(v,e,P);for(let R=0;R<k.length;R+=1)k[R].m(e,null);O(v,t,P),O(v,s,P),g(s,r),g(r,i),g(s,n),g(s,c),g(c,m),g(s,u),g(s,p),E.m(p,null),O(v,d,P),S&&S.m(v,P),O(v,o,P),a=!0,w||(_=[te(r,"click",l[23]),te(c,"click",l[24]),te(p,"click",l[35])],w=!0)},p(v,P){if(P[0]&524290){I=Object.keys(v[1]);let R;for(R=0;R<I.length;R+=1){const Q=Yt(v,I,R);k[R]?k[R].p(Q,P):(k[R]=zt(Q),k[R].c(),k[R].m(e,null))}for(;R<k.length;R+=1)k[R].d(1);k.length=I.length}(!a||P[0]&256)&&(r.disabled=v[8]),(!a||P[0]&256)&&(c.disabled=v[8]),h===(h=J(v))&&E?E.p(v,P):(E.d(1),E=h(v),E&&(E.c(),E.m(p,null))),(!a||P[0]&256)&&(p.disabled=v[8]),v[10]?S?(S.p(v,P),P[0]&1024&&G(S,1)):(S=Ht(v),S.c(),G(S,1),S.m(o.parentNode,o)):S&&(qe(),Y(S,1,1,()=>{S=null}),je())},i(v){a||(G(S),a=!0)},o(v){Y(S),a=!1},d(v){v&&b(e),He(k,v),v&&b(t),v&&b(s),E.d(),v&&b(d),S&&S.d(v),v&&b(o),w=!1,ze(_)}}}function zt(l){let e,t,s,r,i,n,c=Ye(l[1][l[39]].id)+"",m,u,p,d,o,a,w,_,I,k,J,h,E,S,v,P,R;function Q(){return l[32](l[39])}function he(){l[33].call(_,l[39])}function ge(){l[34].call(S,l[39])}return{c(){e=T("div"),t=T("div"),s=T("button"),r=F("-"),i=q(),n=T("span"),m=F(c),u=q(),p=T("div"),d=T("div"),o=T("div"),a=F("Min:"),w=q(),_=T("input"),I=q(),k=T("div"),J=T("div"),h=F("Weight:"),E=q(),S=T("input"),v=q(),this.h()},l(le){e=A(le,"DIV",{class:!0});var C=M(e);t=A(C,"DIV",{});var W=M(t);s=A(W,"BUTTON",{class:!0});var x=M(s);r=V(x,"-"),x.forEach(b),i=j(W),n=A(W,"SPAN",{});var $=M(n);m=V($,c),$.forEach(b),W.forEach(b),u=j(C),p=A(C,"DIV",{class:!0});var Se=M(p);d=A(Se,"DIV",{class:!0});var pe=M(d);o=A(pe,"DIV",{class:!0});var ve=M(o);a=V(ve,"Min:"),ve.forEach(b),w=j(pe),_=A(pe,"INPUT",{type:!0,min:!0}),pe.forEach(b),I=j(Se),k=A(Se,"DIV",{class:!0});var we=M(k);J=A(we,"DIV",{class:!0});var De=M(J);h=V(De,"Weight:"),De.forEach(b),E=j(we),S=A(we,"INPUT",{type:!0,min:!0}),we.forEach(b),Se.forEach(b),v=j(C),C.forEach(b),this.h()},h(){N(s,"class","p-2 px-4 bg-red-500/40 rounded mr-2"),N(o,"class","mr-2"),N(_,"type","number"),N(_,"min","0"),N(d,"class","mr-4 flex flex-row items-center"),N(J,"class","mr-2"),N(S,"type","number"),N(S,"min","0"),N(k,"class","flex flex-row items-center"),N(p,"class","mt-2 flex flex-row"),N(e,"class","mb-2 flex flex-row items-start flex-col stat-config svelte-1y2w84t")},m(le,C){O(le,e,C),g(e,t),g(t,s),g(s,r),g(t,i),g(t,n),g(n,m),g(e,u),g(e,p),g(p,d),g(d,o),g(o,a),g(d,w),g(d,_),Fe(_,l[1][l[39]].min),g(p,I),g(p,k),g(k,J),g(J,h),g(k,E),g(k,S),Fe(S,l[1][l[39]].weight),g(e,v),P||(R=[te(s,"click",Q),te(_,"input",he),te(S,"input",ge)],P=!0)},p(le,C){l=le,C[0]&2&&c!==(c=Ye(l[1][l[39]].id)+"")&&de(m,c),C[0]&2&&Ve(_.value)!==l[1][l[39]].min&&Fe(_,l[1][l[39]].min),C[0]&2&&Ve(S.value)!==l[1][l[39]].weight&&Fe(S,l[1][l[39]].weight)},d(le){le&&b(e),P=!1,ze(R)}}}function Hl(l){let e;return{c(){e=F("Search")},l(t){e=V(t,"Search")},m(t,s){O(t,e,s)},p:Ee,d(t){t&&b(e)}}}function Ql(l){let e,t,s=window.TimelessJewelSeedRanges[l[0].value].max+"",r;return{c(){e=F(l[9]),t=F(" / "),r=F(s)},l(i){e=V(i,l[9]),t=V(i," / "),r=V(i,s)},m(i,n){O(i,e,n),O(i,t,n),O(i,r,n)},p(i,n){n[0]&512&&de(e,i[9]),n[0]&1&&s!==(s=window.TimelessJewelSeedRanges[i[0].value].max+"")&&de(r,s)},d(i){i&&b(e),i&&b(t),i&&b(r)}}}function Ht(l){let e,t;return e=new Wl({props:{searchGrouped:l[10],highlight:l[22]}}),{c(){Je(e.$$.fragment)},l(s){Me(e.$$.fragment,s)},m(s,r){Re(e,s,r),t=!0},p(s,r){const i={};r[0]&1024&&(i.searchGrouped=s[10]),e.$set(i)},i(s){t||(G(e.$$.fragment,s),t=!0)},o(s){Y(e.$$.fragment,s),t=!1},d(s){Ce(e,s)}}}function Qt(l){let e,t,s=window.TimelessJewelSeedRanges[l[0].value].min+"",r,i,n=window.TimelessJewelSeedRanges[l[0].value].max+"",c;return{c(){e=T("div"),t=F("Seed must be between "),r=F(s),i=F(`
                  and `),c=F(n),this.h()},l(m){e=A(m,"DIV",{class:!0});var u=M(e);t=V(u,"Seed must be between "),r=V(u,s),i=V(u,`
                  and `),c=V(u,n),u.forEach(b),this.h()},h(){N(e,"class","mt-2")},m(m,u){O(m,e,u),g(e,t),g(e,r),g(e,i),g(e,c)},p(m,u){u[0]&1&&s!==(s=window.TimelessJewelSeedRanges[m[0].value].min+"")&&de(r,s),u[0]&1&&n!==(n=window.TimelessJewelSeedRanges[m[0].value].max+"")&&de(c,n)},d(m){m&&b(e)}}}function Zt(l){let e,t;return{c(){e=T("h2"),t=F("Click on a jewel socket"),this.h()},l(s){e=A(s,"H2",{class:!0});var r=M(e);t=V(r,"Click on a jewel socket"),r.forEach(b),this.h()},h(){N(e,"class","mt-4")},m(s,r){O(s,e,r),g(e,t)},d(s){s&&b(e)}}}function Zl(l){let e,t,s,r,i,n,c,m,u;function p(a){l[26](a)}let d={items:l[14]};l[0]!==void 0&&(d.value=l[0]),n=new rt({props:d}),Le.push(()=>sl(n,"value",p)),n.$on("select",l[20]);let o=l[0]&&Kt(l);return{c(){e=T("div"),t=T("div"),s=T("h3"),r=F("Timeless Jewel"),i=q(),Je(n.$$.fragment),m=q(),o&&o.c(),this.h()},l(a){e=A(a,"DIV",{class:!0});var w=M(e);t=A(w,"DIV",{class:!0});var _=M(t);s=A(_,"H3",{class:!0});var I=M(s);r=V(I,"Timeless Jewel"),I.forEach(b),i=j(_),Me(n.$$.fragment,_),m=j(_),o&&o.l(_),_.forEach(b),w.forEach(b),this.h()},h(){N(s,"class","mb-2"),N(t,"class","p-4 max-h-screen flex flex-col"),N(e,"class","w-1/2 lg:w-1/3 xl:w-1/4 2xl:w-1/5 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen")},m(a,w){O(a,e,w),g(e,t),g(t,s),g(s,r),g(t,i),Re(n,t,null),g(t,m),o&&o.m(t,null),u=!0},p(a,w){const _={};!c&&w[0]&1&&(c=!0,_.value=a[0],il(()=>c=!1)),n.$set(_),a[0]?o?(o.p(a,w),w[0]&1&&G(o,1)):(o=Kt(a),o.c(),G(o,1),o.m(t,null)):o&&(qe(),Y(o,1,1,()=>{o=null}),je())},i(a){u||(G(n.$$.fragment,a),G(o),u=!0)},o(a){Y(n.$$.fragment,a),Y(o),u=!1},d(a){a&&b(e),Ce(n),o&&o.d()}}}function xl(l){var s,r;let e,t;return e=new Ll({props:{clickNode:l[15],circledNode:l[4],selectedJewel:(s=l[0])==null?void 0:s.value,selectedConqueror:(r=l[2])==null?void 0:r.value,highlighted:l[11],seed:l[3],disabled:[...l[5]],$$slots:{default:[Zl]},$$scope:{ctx:l}}}),{c(){Je(e.$$.fragment)},l(i){Me(e.$$.fragment,i)},m(i,n){Re(e,i,n),t=!0},p(i,n){var m,u;const c={};n[0]&16&&(c.circledNode=i[4]),n[0]&1&&(c.selectedJewel=(m=i[0])==null?void 0:m.value),n[0]&4&&(c.selectedConqueror=(u=i[2])==null?void 0:u.value),n[0]&2048&&(c.highlighted=i[11]),n[0]&8&&(c.seed=i[3]),n[0]&32&&(c.disabled=[...i[5]]),n[0]&14303|n[1]&2048&&(c.$$scope={dirty:n,ctx:i}),e.$set(c)},i(i){t||(G(e.$$.fragment,i),t=!0)},o(i){Y(e.$$.fragment,i),t=!1},d(i){Ce(e,i)}}}function $l(l,e,t){let s,r,i,n;ae(l,Tl,y=>t(36,n=y));const c=n.url.searchParams,m=Object.keys(window.TimelessJewels).map(y=>({value:parseInt(y),label:window.TimelessJewels[y]}));let u=c.has("jewel")?m.find(y=>y.value==c.get("jewel")):void 0,p=c.has("conqueror")?{value:c.get("conqueror"),label:c.get("conqueror")}:void 0,d=c.has("seed")?parseInt(c.get("seed")):0,o=c.has("location")?parseInt(c.get("location")):void 0,a=new Set;const w=y=>{y.isJewelSocket?(t(4,o=y.skill),_()):y.isMastery||(a.has(y.skill)?a.delete(y.skill):a.add(y.skill),t(5,a))},_=()=>{const y=new URL(window.location.origin+window.location.pathname);u&&y.searchParams.append("jewel",u.value.toString()),p&&y.searchParams.append("conqueror",p.value),d&&y.searchParams.append("seed",d.toString()),o&&y.searchParams.append("location",o.toString()),I&&y.searchParams.append("mode",I),Object.keys(h).forEach(ne=>{y.searchParams.append("stat",ne.toString())}),Nl(y.toString())};let I=c.has("mode")?c.get("mode"):"";const k=y=>{t(6,I=y),_()};let J=JSON.parse(window.PossibleStats),h={};c.has("stat")&&c.getAll("stat").map(y=>{const ne=parseInt(y);t(1,h[ne]={weight:1,min:0,id:ne},h)});let E;const S=y=>{t(1,h[y.detail.value]={weight:1,min:0,id:y.detail.value},h),t(1,h),E.handleClear(),_()},v=y=>{delete h[y],t(1,h),_()},P=()=>{t(1,h={}),_()};let R=!1,Q=0,he;const ge=()=>{if(!o)return;t(8,R=!0),t(10,he=void 0);const y=At(Ie.nodes[o]).filter(ee=>!ee.isJewelSocket&&!ee.isMastery).filter(ee=>!a.has(ee.skill)).map(ee=>window.TreeToPassive[ee.skill]),ne={jewel:u.value,conqueror:p.value,nodes:y,stats:Object.keys(h).map(ee=>h[ee])};El.search(ne,Pl(ee=>t(9,Q=ee))).then(ee=>{t(10,he=ee),t(8,R=!1)})};let le=[];const C=(y,ne)=>{t(3,d=y),t(11,le=ne.map(ee=>ee.passive)),_()},W=()=>{a.clear(),t(5,a)},x=()=>{At(Ie.nodes[o]).filter(y=>!y.isJewelSocket&&!y.isMastery).forEach(y=>a.add(y.skill)),t(5,a)};function $(y){u=y,t(0,u)}function Se(y){p=y,t(2,p)}const pe=()=>k("seed"),ve=()=>k("stats");function we(){d=Ve(this.value),t(3,d)}function De(y){Le[y?"unshift":"push"](()=>{E=y,t(7,E)})}const ie=y=>v(h[y].id);function Ue(y){h[y].min=Ve(this.value),t(1,h)}function Qe(y){h[y].weight=Ve(this.value),t(1,h)}const Ze=()=>ge();return l.$$.update=()=>{l.$$.dirty[0]&1&&t(13,s=u?window.TimelessJewelConquerors[u.value].map(y=>({value:y,label:y})):[]),l.$$.dirty[0]&1&&t(25,r=u?Object.keys(J[u.value]):[]),l.$$.dirty[0]&33554434&&t(12,i=r.map(y=>{const ne=parseInt(y);return{label:Ye(ne),value:ne}}).filter(y=>!(y.value in h)))},[u,h,p,d,o,a,I,E,R,Q,he,le,i,s,m,w,_,k,S,v,P,ge,C,W,x,r,$,Se,pe,ve,we,De,ie,Ue,Qe,Ze]}class ns extends Ke{constructor(e){super(),We(this,e,$l,xl,Xe,{},null,[-1,-1])}}export{ns as default};
