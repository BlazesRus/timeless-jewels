import{a7 as Nt,O as ie,a8 as At,S as Se,i as Ie,s as Ee,F as nt,e as G,k as te,c as H,a as K,d as S,m as se,b as J,f as ke,g as O,a9 as Ct,G as it,H as ot,I as lt,q as Y,o as U,r as Rt,v as Jt,aa as at,K as ve,E as Oe,a6 as qt,w as he,x as pe,y as me,J as F,B as we,l as fe,n as ft,p as ct,R as ut,T as dt,ab as jt,L as ht,t as Pe,h as Me,M as pt,N as We,P as mt}from"../chunks/index-40c9b43b.js";import{r as Ot}from"../chunks/index-d169ac0d.js";import{S as wt,g as Tt,p as Lt}from"../chunks/stores-5cbfde2c.js";import"../chunks/singletons-d1fb5791.js";const Yt=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function Ft(){const n=Nt();return t=>{const s=Yt.map(c=>ie(t,c,p=>At(n,p)));return{destroy:()=>s.forEach(c=>c())}}}class zt{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:t,render:s}){return t&&(this.setups.set(this.currentLayerId,t),this.needsSetup=!0),this.renderers.set(this.currentLayerId,s),this.needsRedraw=!0,this.currentLayerId++}unregister(t){this.renderers.delete(t),this.needsRedraw=!0}render({autoclear:t,pixelRatio:s,context:c,width:p,height:r}){const u={context:c,width:p,height:r};if(this.needsResize&&(c.setTransform(s,0,0,s,0,0),this.needsResize=!1),this.needsSetup){for(const[a,m]of this.setups)m(u),this.setups.delete(a);this.needsSetup=!1}if(this.needsRedraw){t&&c.clearRect(0,0,p,r);for(const a of this.layerSequence)this.renderers.get(a)(u);this.needsRedraw=!1}}}function Dt(n){let t,s,c,p,r,u,a,m,d;const h=n[13].default,f=nt(h,n,n[12],null);return{c(){t=G("canvas"),r=te(),u=G("div"),f&&f.c(),this.h()},l(l){t=H(l,"CANVAS",{style:!0,width:!0,height:!0}),K(t).forEach(S),r=se(l),u=H(l,"DIV",{style:!0});var i=K(u);f&&f.l(i),i.forEach(S),this.h()},h(){J(t,"style",s="display: block; width: "+n[1]+"px; height: "+n[2]+"px;"+(n[3]?` ${n[3]}`:"")),J(t,"width",c=n[1]*n[0]),J(t,"height",p=n[2]*n[0]),ke(u,"display","none")},m(l,i){O(l,t,i),n[14](t),O(l,r,i),O(l,u,i),f&&f.m(u,null),n[15](u),a=!0,m||(d=Ct(n[6].call(null,t)),m=!0)},p(l,[i]){(!a||i&14&&s!==(s="display: block; width: "+l[1]+"px; height: "+l[2]+"px;"+(l[3]?` ${l[3]}`:"")))&&J(t,"style",s),(!a||i&3&&c!==(c=l[1]*l[0]))&&J(t,"width",c),(!a||i&5&&p!==(p=l[2]*l[0]))&&J(t,"height",p),f&&f.p&&(!a||i&4096)&&it(f,h,l,l[12],a?lt(h,l[12],i,null):ot(l[12]),null)},i(l){a||(Y(f,l),a=!0)},o(l){U(f,l),a=!1},d(l){l&&S(t),n[14](null),l&&S(r),l&&S(u),f&&f.d(l),n[15](null),m=!1,d()}}}const gt={};function Xt(n,t,s){let{$$slots:c={},$$scope:p}=t,{width:r=640,height:u=640,pixelRatio:a=void 0,style:m=null,autoclear:d=!0}=t,h,f,l,i,g;const v=Ft(),w=new zt;function W(){w.redraw()}function V(){return h}function Ne(){return f}a===void 0&&(typeof window=="undefined"?a=2:a=window.devicePixelRatio);function I(){w.render({context:f,width:r,height:u,pixelRatio:a,autoclear:d}),l=window.requestAnimationFrame(I)}Rt(gt,{register:w.register,unregister:w.unregister,redraw:w.redraw}),Jt(()=>{f=h.getContext("2d"),g=new MutationObserver(E),g.observe(i,{childList:!0}),E(),I();function E(){const oe=[...i.children].map(Ae=>+Ae.dataset.layerId);s(11,w.layerSequence=oe,w),w.redraw()}}),at(()=>{typeof window!="undefined"&&(window.cancelAnimationFrame(l),g.disconnect())});function $(E){ve[E?"unshift":"push"](()=>{h=E,s(4,h)})}function x(E){ve[E?"unshift":"push"](()=>{i=E,s(5,i)})}return n.$$set=E=>{"width"in E&&s(1,r=E.width),"height"in E&&s(2,u=E.height),"pixelRatio"in E&&s(0,a=E.pixelRatio),"style"in E&&s(3,m=E.style),"autoclear"in E&&s(7,d=E.autoclear),"$$scope"in E&&s(12,p=E.$$scope)},n.$$.update=()=>{n.$$.dirty&2183&&w.resize()},[a,r,u,m,h,i,v,d,W,V,Ne,w,p,c,$,x]}class Gt extends Se{constructor(t){super(),Ie(this,t,Xt,Dt,Ee,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function Ht(n){let t;return{c(){t=G("div"),this.h()},l(s){t=H(s,"DIV",{"data-layer-id":!0}),K(t).forEach(S),this.h()},h(){J(t,"data-layer-id",n[0])},m(s,c){O(s,t,c)},p:Oe,i:Oe,o:Oe,d(s){s&&S(t)}}}function Bt(n,t,s){const{register:c,unregister:p,redraw:r}=qt(gt);let{setup:u=void 0,render:a=()=>{}}=t;if(typeof u!="function"&&u!==void 0)throw new Error("setup must be a function");if(typeof a!="function")throw new Error("render must be a function");const m=c({setup:u,render:a});return at(()=>p(m)),n.$$set=d=>{"setup"in d&&s(1,u=d.setup),"render"in d&&s(2,a=d.render)},n.$$.update=()=>{n.$$.dirty&4&&r()},[m,u,a]}class Ut extends Se{constructor(t){super(),Ie(this,t,Bt,Ht,Ee,{setup:1,render:2})}}let Qe;const _t=Date.now();function bt(n){return n(Date.now()-_t),Qe=window.requestAnimationFrame(()=>bt(n)),()=>window.cancelAnimationFrame(Qe)}function Kt(){}var Vt=Ot(Date.now()-_t,typeof window=="undefined"?Kt:bt);const{window:Te}=jt;function Ze(n){let t,s,c,p,r,u;s=new Gt({props:{width:n[0],height:n[1],$$slots:{default:[Wt]},$$scope:{ctx:n}}}),s.$on("pointerdown",n[4]),s.$on("wheel",n[7]);const a=n[24].default,m=nt(a,n,n[25],null);return{c(){t=G("div"),he(s.$$.fragment),c=te(),m&&m.c(),this.h()},l(d){t=H(d,"DIV",{style:!0});var h=K(t);pe(s.$$.fragment,h),c=se(h),m&&m.l(h),h.forEach(S),this.h()},h(){ke(t,"touch-action","none"),ke(t,"cursor",n[2])},m(d,h){O(d,t,h),me(s,t,null),F(t,c),m&&m.m(t,null),p=!0,r||(u=ie(t,"resize",n[8]),r=!0)},p(d,h){const f={};h[0]&1&&(f.width=d[0]),h[0]&2&&(f.height=d[1]),h[0]&33554440&&(f.$$scope={dirty:h,ctx:d}),s.$set(f),m&&m.p&&(!p||h[0]&33554432)&&it(m,a,d,d[25],p?lt(a,d[25],h,null):ot(d[25]),null),(!p||h[0]&4)&&ke(t,"cursor",d[2])},i(d){p||(Y(s.$$.fragment,d),Y(m,d),p=!0)},o(d){U(s.$$.fragment,d),U(m,d),p=!1},d(d){d&&S(t),we(s),m&&m.d(d),r=!1,u()}}}function Wt(n){let t,s;return t=new Ut({props:{render:n[3]}}),{c(){he(t.$$.fragment)},l(c){pe(t.$$.fragment,c)},m(c,p){me(t,c,p),s=!0},p(c,p){const r={};p[0]&8&&(r.render=c[3]),t.$set(r)},i(c){s||(Y(t.$$.fragment,c),s=!0)},o(c){U(t.$$.fragment,c),s=!1},d(c){we(t,c)}}}function Qt(n){let t,s,c,p,r=n[0]&&n[1]&&Ze(n);return{c(){r&&r.c(),t=fe()},l(u){r&&r.l(u),t=fe()},m(u,a){r&&r.m(u,a),O(u,t,a),s=!0,c||(p=[ie(Te,"pointerup",n[5]),ie(Te,"pointermove",n[6]),ie(Te,"resize",n[8])],c=!0)},p(u,a){u[0]&&u[1]?r?(r.p(u,a),a[0]&3&&Y(r,1)):(r=Ze(u),r.c(),Y(r,1),r.m(t.parentNode,t)):r&&(ft(),U(r,1,1,()=>{r=null}),ct())},i(u){s||(Y(r),s=!0)},o(u){U(r),s=!1},d(u){r&&r.d(u),u&&S(t),c=!1,ut(p)}}}const $e="25px Roboto Mono",xe="17px Roboto Mono",et=50,ae=2.6;function Zt(n,t,s){let c,p,r;dt(n,Vt,e=>s(23,r=e));let{$$slots:u={},$$scope:a}=t,{clickNode:m}=t,{circledNode:d}=t,{selectedJewel:h}=t,{selectedConqueror:f}=t,{seed:l}=t,i;const g={},v={},w={},W={},V={};i=JSON.parse(window.SkillTree),Object.keys(i.groups).forEach(o=>{const _=i.groups[o];_.nodes.forEach(k=>{const b=i.nodes[k];b.isProxy||"classStartIndex"in b||b.expansionJewel&&b.expansionJewel.parent||b.isBlighted||b.ascendancyName||(s(15,g[o]=_,g),s(16,v[k]=b,v))})}),i.skillSprites.keystoneInactive.forEach(o=>Object.keys(o.coords).forEach(_=>w[_]=o)),i.skillSprites.notableInactive.forEach(o=>Object.keys(o.coords).forEach(_=>w[_]=o)),i.skillSprites.normalInactive.forEach(o=>Object.keys(o.coords).forEach(_=>w[_]=o)),i.skillSprites.masteryInactive.forEach(o=>Object.keys(o.coords).forEach(_=>w[_]=o)),i.skillSprites.keystoneActive.forEach(o=>Object.keys(o.coords).forEach(_=>W[_]=o)),i.skillSprites.notableActive.forEach(o=>Object.keys(o.coords).forEach(_=>W[_]=o)),i.skillSprites.normalActive.forEach(o=>Object.keys(o.coords).forEach(_=>W[_]=o)),i.skillSprites.masteryInactive.forEach(o=>Object.keys(o.coords).forEach(_=>W[_]=o)),JSON.parse(PassiveTranslations).forEach(o=>{o.ids.forEach(_=>{s(17,V[_]=o,V)})});const Ne=[427,320,226,227,323,422,329];let I=10,$=0,x=0;const E=new Set,oe=(e,o)=>({x:(Math.abs(i.min_x)+e+$)/I+et,y:(Math.abs(i.min_y)+o+x)/I+et}),Ae=(e,o,_)=>{const k=Math.PI/180*_,b=Math.cos(k),M=Math.sin(k),A=b*(o.x-e.x)+M*(o.y-e.y)+e.x,Q=b*(o.y-e.y)-M*(o.x-e.x)+e.y;return{x:A,y:Q}},Le=[0,30,45,60,90,120,135,150,180,210,225,240,270,300,315,330],Ye=[0,10,20,30,40,45,50,60,70,80,90,100,110,120,130,135,140,150,160,170,180,190,200,210,220,225,230,240,250,260,270,280,290,300,310,315,320,330,340,350],Ce=(e,o)=>{const _=i.constants.skillsPerOrbit[e];return _==16?Le[Le.length-o]||0:_==40?Ye[Ye.length-o]||0:360-360/_*o},le=e=>{const o=i.groups[e.group],_=Ce(e.orbit,e.orbitIndex),k=oe(o.x,o.y),b=oe(o.x,o.y-i.constants.orbitRadii[e.orbit]);return Ae(k,b,_)},ce={},T=e=>(e in ce||(ce[e]=new Image,ce[e].src=i.assets[e]["0.3835"]),ce[e]),Re=(e,o)=>Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2)),z=(e,o,_)=>{const k=o.width/I*ae,b=o.height/I*ae,M=_.x-k/2,A=_.y-b/2;e.drawImage(o,M,A,k,b)},yt=(e,o,_)=>{const k=o.width/I*ae,b=o.height/I*ae,M=_.x-k/2,A=_.y-b/2,Q=A-b/2;e.drawImage(o,M,Q,k,b),e.save(),e.translate(M,A),e.rotate(Math.PI),e.drawImage(o,-k,-(b/2),k,-b),e.restore()},ge={},_e={},be=(e,o,_,k=!1)=>{let b=k?W[o]:w[o];!b&&k&&(b=w[o]);const M=b.filename;M in(k?_e:ge)||((k?_e:ge)[M]=new Image,(k?_e:ge)[M].src=M);const A=b.coords[o],Q=A.w/I*ae,ye=A.h/I*ae,j=_.x-Q/2,y=_.y-ye/2;e.drawImage((k?_e:ge)[M],A.x,A.y,A.w,A.h,j,y,Q,ye)},kt=(e,o,_)=>{const k=[];let b="";return e.split(" ").forEach(M=>{o.measureText(b+M).width<_?b+=" "+M:(k.push(b.trim()),b=M)}),b.length>0&&k.push(b.trim()),k},Fe=(e,o)=>e.English[0].string.replace("{0}",e.English[0].format[0].replace("#",o));let L={x:Number.MIN_VALUE,y:Number.MIN_VALUE},Je="unset",D,ze=0,De=0,Xe=0,Ge=0,qe=!1;const vt=e=>{qe=!0,ze=e.offsetX,De=e.offsetY,Xe=$,Ge=x,s(19,L={x:e.offsetX,y:e.offsetY}),D&&m(D)},St=e=>{e.type==="pointerup"&&(qe=!1),s(19,L={x:e.offsetX,y:e.offsetY})},It=e=>{qe&&($=Xe-(ze-e.offsetX)*I,x=Ge-(De-e.offsetY)*I),s(19,L={x:e.offsetX,y:e.offsetY})},Et=e=>{s(18,I=Math.min(30,Math.max(3,I+e.deltaY/100))),I>3&&I<30&&(e.deltaY>0?($+=e.offsetX,x+=e.offsetY):($-=e.offsetX,x-=e.offsetY)),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()};let He=0,Be=0;const Ue=()=>{s(0,He=window.innerWidth),s(1,Be=window.innerHeight)};let je=!1;return n.$$set=e=>{"clickNode"in e&&s(9,m=e.clickNode),"circledNode"in e&&s(10,d=e.circledNode),"selectedJewel"in e&&s(11,h=e.selectedJewel),"selectedConqueror"in e&&s(12,f=e.selectedConqueror),"seed"in e&&s(13,l=e.seed),"$$scope"in e&&s(25,a=e.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&262144&&s(22,c=1800/I),n.$$.dirty[0]&4210688&&E.size==0&&i.jewelSlots.forEach(e=>{if(e!=31683)return;const o=i.nodes[e];if(o.expansionJewel&&o.expansionJewel.parent)return;const _=le(o);Object.keys(i.nodes).forEach(k=>{const b=i.nodes[k];if(!i.groups[b.group])return;const A=le(b);Re(A,_)<c&&E.add(k)})}),n.$$.dirty[0]&14679040&&s(3,p=({context:e,width:o,height:_})=>{const k=window.performance.now();e.clearRect(0,0,o,_),e.fillStyle="#080c11",e.fillRect(0,0,o,_);const b={};Object.keys(g).forEach(j=>{e.strokeStyle=`hsl(${r/20}, 100%, 50%)`;const y=i.groups[j],P=oe(y.x,y.y),R=Math.max(...y.orbits);Ne.indexOf(parseInt(j))>=0||(R==1?z(e,T("PSGroupBackground1"),P):R==2?z(e,T("PSGroupBackground2"),P):(R==3||y.orbits.length>1)&&yt(e,T("PSGroupBackground3"),P))}),Object.keys(v).forEach(j=>{var N;const y=i.nodes[j],P=Ce(y.orbit,y.orbitIndex),R=le(y);(N=y.out)==null||N.forEach(re=>{if(!v[parseInt(re)])return;const Z=Math.min(parseInt(re),parseInt(j)),ue=Math.max(parseInt(re),parseInt(j)),C=Z+":"+ue;if(C in b)return;b[C]=!0;const q=i.nodes[parseInt(re)];if(q.isMastery)return;const ne=Ce(q.orbit,q.orbitIndex),ee=le(q);if(e.beginPath(),y.group!=q.group||y.orbit!=q.orbit)e.moveTo(R.x,R.y),e.lineTo(ee.x,ee.y);else{let B=Math.PI/180-Math.PI/180*P,X=Math.PI/180-Math.PI/180*ne;B-=Math.PI/2,X-=Math.PI/2;const de=Math.abs(Math.max(B,X)-Math.min(B,X)),Pt=de>Math.PI?Math.max(B,X):Math.min(B,X),Mt=de>Math.PI?Math.min(B,X):Math.max(B,X),Ke=i.groups[y.group],Ve=oe(Ke.x,Ke.y);e.arc(Ve.x,Ve.y,i.constants.orbitRadii[y.orbit]/I+1,Pt,Mt)}e.lineWidth=6/I,e.strokeStyle="#524518",e.stroke()})});let M;d&&(M=le(i.nodes[d]),e.strokeStyle="#ad2b2b");let A=!1,Q;if(Object.keys(v).forEach(j=>{const y=i.nodes[j],P=le(y);let R=0,N=!1;d&&Re(P,M)<c&&(N=!0),y.isKeystone?(R=110,be(e,y.icon,P,N),N?z(e,T("KeystoneFrameAllocated"),P):z(e,T("KeystoneFrameUnallocated"),P)):y.isNotable?(R=70,be(e,y.icon,P,N),N?z(e,T("NotableFrameAllocated"),P):z(e,T("NotableFrameUnallocated"),P)):y.isJewelSocket?(R=70,y.expansionJewel?z(e,T("JewelSocketAltNormal"),P):N?z(e,T("JewelFrameAllocated"),P):z(e,T("JewelFrameUnallocated"),P)):y.isMastery?be(e,y.inactiveIcon,P,N):(R=50,be(e,y.icon,P,N),N?z(e,T("PSSkillFrameActive"),P):z(e,T("PSSkillFrame"),P)),Re(P,L)<R/I&&(Q=y,A=N)}),s(20,D=Q),d&&(e.strokeStyle="#ad2b2b",e.beginPath(),e.arc(M.x,M.y,c,0,Math.PI*2),e.stroke()),D){let j=D.name,y=(D.stats||[]).map(C=>({text:C,special:!1}));if(!D.isJewelSocket&&A){const C=Calculate(TreeToPassive[D.skill],l,h,f);if("alternatePassiveSkill"in C){const q=GetAlternatePassiveSkillByIndex(C.alternatePassiveSkill);y=[],j=q.name,"statsKeys"in q&&q.statsKeys.forEach((ne,ee)=>{const B=GetStatByIndex(ne),X=V[B.id]||"";X&&y.push({text:Fe(X,C.statRolls[ee]),special:!0})})}"alternatePassiveAdditionInformations"in C&&C.alternatePassiveAdditionInformations.length>0&&C.alternatePassiveAdditionInformations.forEach(q=>{const ne=GetAlternatePassiveAdditionByIndex(q.alternatePassiveSkillAddition);"statsKeys"in ne&&ne.statsKeys.forEach((ee,B)=>{const X=GetStatByIndex(ee),de=V[X.id]||"";de&&y.push({text:Fe(de,q.statRolls[B]),special:!0})})})}e.font=$e;const P=e.measureText(j),R=Math.max(P.width+50,600);e.font=xe;const N=[],re=30;let Z=85;y&&y.length>0?y.forEach(C=>{N.length>0&&(Z+=5),C.text.split(`
`).forEach(q=>{N.length>0&&(Z+=10),kt(q,e,R-re).forEach(ee=>{N.push({text:ee,offset:Z,special:C.special}),Z+=20})})}):D.isJewelSocket&&(N.push({text:"Click to select this socket",offset:Z,special:!0}),Z+=20);const ue=55;e.fillStyle="rgba(75,63,24,0.9)",e.fillRect(L.x,L.y,R,ue),e.fillStyle="#ffffff",e.font=$e,e.textAlign="center",e.fillText(j,L.x+R/2,L.y+35),e.fillStyle="rgba(0,0,0,0.8)",e.fillRect(L.x,L.y+ue,R,Z-ue),e.font=xe,e.textAlign="left",N.forEach(C=>{C.special?e.fillStyle="#8cf34c":e.fillStyle="#ffffff",e.fillText(C.text,L.x+re/2,L.y+C.offset)})}D&&D.isJewelSocket?s(2,Je="pointer"):s(2,Je="unset"),e.fillStyle="#ffffff",e.textAlign="right",e.font="12px Roboto Mono";const ye=window.performance.now();e.fillText(`${(ye-k).toFixed(1)}ms`,o-5,17)}),n.$$.dirty[0]&2375680&&(je||(s(21,je=!0),$=i.min_x+window.innerWidth/2*I,x=i.min_y+window.innerHeight/2*I,Ue()))},[He,Be,Je,p,vt,St,It,Et,Ue,m,d,h,f,l,i,g,v,V,I,L,D,je,c,r,u,a]}class $t extends Se{constructor(t){super(),Ie(this,t,Zt,Qt,Ee,{clickNode:9,circledNode:10,selectedJewel:11,selectedConqueror:12,seed:13},null,[-1,-1])}}function tt(n){let t,s,c,p,r,u,a,m=n[1]&&TimelessJewelConquerors[n[0].value].indexOf(n[1].value)>=0,d,h;function f(g){n[9](g)}let l={items:n[4]};n[1]!==void 0&&(l.value=n[1]),r=new wt({props:l}),ve.push(()=>ht(r,"value",f)),r.$on("select",n[7]);let i=m&&st(n);return{c(){t=G("div"),s=G("h3"),c=Pe("Conqueror"),p=te(),he(r.$$.fragment),a=te(),i&&i.c(),d=fe(),this.h()},l(g){t=H(g,"DIV",{class:!0});var v=K(t);s=H(v,"H3",{class:!0});var w=K(s);c=Me(w,"Conqueror"),w.forEach(S),p=se(v),pe(r.$$.fragment,v),v.forEach(S),a=se(g),i&&i.l(g),d=fe(),this.h()},h(){J(s,"class","mb-2"),J(t,"class","mt-4")},m(g,v){O(g,t,v),F(t,s),F(s,c),F(t,p),me(r,t,null),O(g,a,v),i&&i.m(g,v),O(g,d,v),h=!0},p(g,v){const w={};v&16&&(w.items=g[4]),!u&&v&2&&(u=!0,w.value=g[1],pt(()=>u=!1)),r.$set(w),v&3&&(m=g[1]&&TimelessJewelConquerors[g[0].value].indexOf(g[1].value)>=0),m?i?i.p(g,v):(i=st(g),i.c(),i.m(d.parentNode,d)):i&&(i.d(1),i=null)},i(g){h||(Y(r.$$.fragment,g),h=!0)},o(g){U(r.$$.fragment,g),h=!1},d(g){g&&S(t),we(r),g&&S(a),i&&i.d(g),g&&S(d)}}}function st(n){let t,s,c,p,r,u,a,m,d,h=!n[3]&&rt();return{c(){t=G("div"),s=G("h3"),c=Pe("Seed"),p=te(),r=G("input"),u=te(),h&&h.c(),a=fe(),this.h()},l(f){t=H(f,"DIV",{class:!0});var l=K(t);s=H(l,"H3",{class:!0});var i=K(s);c=Me(i,"Seed"),i.forEach(S),p=se(l),r=H(l,"INPUT",{type:!0,class:!0}),l.forEach(S),u=se(f),h&&h.l(f),a=fe(),this.h()},h(){J(s,"class","mb-2"),J(r,"type","number"),J(r,"class","seed"),J(t,"class","mt-4")},m(f,l){O(f,t,l),F(t,s),F(s,c),F(t,p),F(t,r),We(r,n[2]),O(f,u,l),h&&h.m(f,l),O(f,a,l),m||(d=[ie(r,"input",n[10]),ie(r,"blur",n[7])],m=!0)},p(f,l){l&4&&mt(r.value)!==f[2]&&We(r,f[2]),f[3]?h&&(h.d(1),h=null):h||(h=rt(),h.c(),h.m(a.parentNode,a))},d(f){f&&S(t),f&&S(u),h&&h.d(f),f&&S(a),m=!1,ut(d)}}}function rt(n){let t,s;return{c(){t=G("h2"),s=Pe("Click on a jewel socket"),this.h()},l(c){t=H(c,"H2",{class:!0});var p=K(t);s=Me(p,"Click on a jewel socket"),p.forEach(S),this.h()},h(){J(t,"class","mt-4")},m(c,p){O(c,t,p),F(t,s)},d(c){c&&S(t)}}}function xt(n){let t,s,c,p,r,u,a,m;function d(l){n[8](l)}let h={items:n[5]};n[0]!==void 0&&(h.value=n[0]),r=new wt({props:h}),ve.push(()=>ht(r,"value",d)),r.$on("select",n[7]);let f=n[0]&&tt(n);return{c(){t=G("div"),s=G("h3"),c=Pe("Timeless Jewel"),p=te(),he(r.$$.fragment),a=te(),f&&f.c(),this.h()},l(l){t=H(l,"DIV",{class:!0});var i=K(t);s=H(i,"H3",{class:!0});var g=K(s);c=Me(g,"Timeless Jewel"),g.forEach(S),p=se(i),pe(r.$$.fragment,i),a=se(i),f&&f.l(i),i.forEach(S),this.h()},h(){J(s,"class","mb-2"),J(t,"class","w-screen md:w-1/2 lg:w-1/3 xl:w-1/4 2xl:w-1/5 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed p-4 rounded-br-lg")},m(l,i){O(l,t,i),F(t,s),F(s,c),F(t,p),me(r,t,null),F(t,a),f&&f.m(t,null),m=!0},p(l,i){const g={};!u&&i&1&&(u=!0,g.value=l[0],pt(()=>u=!1)),r.$set(g),l[0]?f?(f.p(l,i),i&1&&Y(f,1)):(f=tt(l),f.c(),Y(f,1),f.m(t,null)):f&&(ft(),U(f,1,1,()=>{f=null}),ct())},i(l){m||(Y(r.$$.fragment,l),Y(f),m=!0)},o(l){U(r.$$.fragment,l),U(f),m=!1},d(l){l&&S(t),we(r),f&&f.d()}}}function es(n){var c,p;let t,s;return t=new $t({props:{clickNode:n[6],circledNode:n[3],selectedJewel:(c=n[0])==null?void 0:c.value,selectedConqueror:(p=n[1])==null?void 0:p.value,seed:n[2],$$slots:{default:[xt]},$$scope:{ctx:n}}}),{c(){he(t.$$.fragment)},l(r){pe(t.$$.fragment,r)},m(r,u){me(t,r,u),s=!0},p(r,[u]){var m,d;const a={};u&8&&(a.circledNode=r[3]),u&1&&(a.selectedJewel=(m=r[0])==null?void 0:m.value),u&2&&(a.selectedConqueror=(d=r[1])==null?void 0:d.value),u&4&&(a.seed=r[2]),u&8223&&(a.$$scope={dirty:u,ctx:r}),t.$set(a)},i(r){s||(Y(t.$$.fragment,r),s=!0)},o(r){U(t.$$.fragment,r),s=!1},d(r){we(t,r)}}}function ts(n,t,s){let c,p;dt(n,Lt,w=>s(11,p=w));const r=p.url.searchParams,u=Object.keys(TimelessJewels).map(w=>({value:parseInt(w),label:TimelessJewels[w]}));let a=r.has("jewel")?u.find(w=>w.value==r.get("jewel")):void 0,m=r.has("conqueror")?{value:r.get("conqueror"),label:r.get("conqueror")}:void 0,d=r.has("seed")?parseInt(r.get("seed")):0,h=r.has("location")?parseInt(r.get("location")):void 0;const f=w=>{w.isJewelSocket&&(s(3,h=w.skill),l())},l=()=>{{const w={};a&&(w.jewel=a.value),m&&(w.conqueror=m.value),d&&(w.seed=d),h&&(w.location=h);const W=Object.keys(w).map(V=>V+"="+encodeURIComponent(w[V])).join("&");Tt(p.url.pathname+"?"+W)}};function i(w){a=w,s(0,a)}function g(w){m=w,s(1,m)}function v(){d=mt(this.value),s(2,d)}return n.$$.update=()=>{n.$$.dirty&1&&s(4,c=a?TimelessJewelConquerors[a.value].map(w=>({value:w,label:w})):[])},[a,m,d,h,c,u,f,l,i,g,v]}class os extends Se{constructor(t){super(),Ie(this,t,ts,es,Ee,{})}}export{os as default};
