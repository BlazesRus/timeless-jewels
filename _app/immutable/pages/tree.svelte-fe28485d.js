import{a7 as Lt,O as te,a8 as Ut,S as je,i as De,s as Ve,F as Et,e as T,k as L,c as N,a as J,d as g,m as U,b as y,f as Oe,g as P,a9 as Yt,G as Pt,H as Tt,I as Nt,q as G,o as Z,r as Ft,v as Bt,aa as Rt,K as Ne,E as ge,a6 as zt,w as be,x as ve,y as ke,J as v,B as Se,l as ie,n as Le,p as Ue,R as Ke,T as Mt,ab as Ht,L as Jt,t as O,h as j,M as At,U as Ce,P as Ct,j as ne,Q as Re,N as xe}from"../chunks/index-40c9b43b.js";import{r as Xt}from"../chunks/index-d169ac0d.js";import{b as Gt,a as _e,d as He,t as et,g as ee,c as me,o as tt,e as qe,f as lt,i as Ge,h as We,j as Wt,k as st,m as Kt,n as Qt,s as Zt,p as $t,q as xt}from"../chunks/worker-8693f97b.js";import{S as Qe,g as el,p as tl}from"../chunks/stores-5cbfde2c.js";import"../chunks/singletons-d1fb5791.js";const ll=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function sl(){const l=Lt();return e=>{const t=ll.map(n=>te(e,n,o=>Ut(l,o)));return{destroy:()=>t.forEach(n=>n())}}}class nl{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:e,render:t}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,t),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.needsRedraw=!0}render({autoclear:e,pixelRatio:t,context:n,width:o,height:s}){const i={context:n,width:o,height:s};if(this.needsResize&&(n.setTransform(t,0,0,t,0,0),this.needsResize=!1),this.needsSetup){for(const[h,_]of this.setups)_(i),this.setups.delete(h);this.needsSetup=!1}if(this.needsRedraw){e&&n.clearRect(0,0,o,s);for(const h of this.layerSequence)this.renderers.get(h)(i);this.needsRedraw=!1}}}function il(l){let e,t,n,o,s,i,h,_,f;const p=l[13].default,d=Et(p,l,l[12],null);return{c(){e=T("canvas"),s=L(),i=T("div"),d&&d.c(),this.h()},l(a){e=N(a,"CANVAS",{style:!0,width:!0,height:!0}),J(e).forEach(g),s=U(a),i=N(a,"DIV",{style:!0});var r=J(i);d&&d.l(r),r.forEach(g),this.h()},h(){y(e,"style",t="display: block; width: "+l[1]+"px; height: "+l[2]+"px;"+(l[3]?` ${l[3]}`:"")),y(e,"width",n=l[1]*l[0]),y(e,"height",o=l[2]*l[0]),Oe(i,"display","none")},m(a,r){P(a,e,r),l[14](e),P(a,s,r),P(a,i,r),d&&d.m(i,null),l[15](i),h=!0,_||(f=Yt(l[6].call(null,e)),_=!0)},p(a,[r]){(!h||r&14&&t!==(t="display: block; width: "+a[1]+"px; height: "+a[2]+"px;"+(a[3]?` ${a[3]}`:"")))&&y(e,"style",t),(!h||r&3&&n!==(n=a[1]*a[0]))&&y(e,"width",n),(!h||r&5&&o!==(o=a[2]*a[0]))&&y(e,"height",o),d&&d.p&&(!h||r&4096)&&Pt(d,p,a,a[12],h?Nt(p,a[12],r,null):Tt(a[12]),null)},i(a){h||(G(d,a),h=!0)},o(a){Z(d,a),h=!1},d(a){a&&g(e),l[14](null),a&&g(s),a&&g(i),d&&d.d(a),l[15](null),_=!1,f()}}}const qt={};function rl(l,e,t){let{$$slots:n={},$$scope:o}=e,{width:s=640,height:i=640,pixelRatio:h=void 0,style:_=null,autoclear:f=!0}=e,p,d,a,r,c;const u=sl(),w=new nl;function R(){w.redraw()}function S(){return p}function k(){return d}h===void 0&&(typeof window=="undefined"?h=2:h=window.devicePixelRatio);function I(){w.render({context:d,width:s,height:i,pixelRatio:h,autoclear:f}),a=window.requestAnimationFrame(I)}Ft(qt,{register:w.register,unregister:w.unregister,redraw:w.redraw}),Bt(()=>{d=p.getContext("2d"),c=new MutationObserver(C),c.observe(r,{childList:!0}),C(),I();function C(){const Y=[...r.children].map(fe=>+fe.dataset.layerId);t(11,w.layerSequence=Y,w),w.redraw()}}),Rt(()=>{typeof window!="undefined"&&(window.cancelAnimationFrame(a),c.disconnect())});function D(C){Ne[C?"unshift":"push"](()=>{p=C,t(4,p)})}function K(C){Ne[C?"unshift":"push"](()=>{r=C,t(5,r)})}return l.$$set=C=>{"width"in C&&t(1,s=C.width),"height"in C&&t(2,i=C.height),"pixelRatio"in C&&t(0,h=C.pixelRatio),"style"in C&&t(3,_=C.style),"autoclear"in C&&t(7,f=C.autoclear),"$$scope"in C&&t(12,o=C.$$scope)},l.$$.update=()=>{l.$$.dirty&2183&&w.resize()},[h,s,i,_,p,r,u,f,R,S,k,w,o,n,D,K]}class ol extends je{constructor(e){super(),De(this,e,rl,il,Ve,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function al(l){let e;return{c(){e=T("div"),this.h()},l(t){e=N(t,"DIV",{"data-layer-id":!0}),J(e).forEach(g),this.h()},h(){y(e,"data-layer-id",l[0])},m(t,n){P(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&g(e)}}}function fl(l,e,t){const{register:n,unregister:o,redraw:s}=zt(qt);let{setup:i=void 0,render:h=()=>{}}=e;if(typeof i!="function"&&i!==void 0)throw new Error("setup must be a function");if(typeof h!="function")throw new Error("render must be a function");const _=n({setup:i,render:h});return Rt(()=>o(_)),l.$$set=f=>{"setup"in f&&t(1,i=f.setup),"render"in f&&t(2,h=f.render)},l.$$.update=()=>{l.$$.dirty&4&&s()},[_,i,h]}class ul extends je{constructor(e){super(),De(this,e,fl,al,Ve,{setup:1,render:2})}}let nt;const Ot=Date.now();function jt(l){return l(Date.now()-Ot),nt=window.requestAnimationFrame(()=>jt(l)),()=>window.cancelAnimationFrame(nt)}function cl(){}var dl=Xt(Date.now()-Ot,typeof window=="undefined"?cl:jt);const{window:Xe}=Ht;function it(l){let e,t,n,o,s,i;t=new ol({props:{width:l[0],height:l[1],$$slots:{default:[hl]},$$scope:{ctx:l}}}),t.$on("pointerdown",l[4]),t.$on("wheel",l[7]);const h=l[23].default,_=Et(h,l,l[24],null);return{c(){e=T("div"),be(t.$$.fragment),n=L(),_&&_.c(),this.h()},l(f){e=N(f,"DIV",{style:!0});var p=J(e);ve(t.$$.fragment,p),n=U(p),_&&_.l(p),p.forEach(g),this.h()},h(){Oe(e,"touch-action","none"),Oe(e,"cursor",l[2])},m(f,p){P(f,e,p),ke(t,e,null),v(e,n),_&&_.m(e,null),o=!0,s||(i=te(e,"resize",l[8]),s=!0)},p(f,p){const d={};p[0]&1&&(d.width=f[0]),p[0]&2&&(d.height=f[1]),p[0]&16777224&&(d.$$scope={dirty:p,ctx:f}),t.$set(d),_&&_.p&&(!o||p[0]&16777216)&&Pt(_,h,f,f[24],o?Nt(h,f[24],p,null):Tt(f[24]),null),(!o||p[0]&4)&&Oe(e,"cursor",f[2])},i(f){o||(G(t.$$.fragment,f),G(_,f),o=!0)},o(f){Z(t.$$.fragment,f),Z(_,f),o=!1},d(f){f&&g(e),Se(t),_&&_.d(f),s=!1,i()}}}function hl(l){let e,t;return e=new ul({props:{render:l[3]}}),{c(){be(e.$$.fragment)},l(n){ve(e.$$.fragment,n)},m(n,o){ke(e,n,o),t=!0},p(n,o){const s={};o[0]&8&&(s.render=n[3]),e.$set(s)},i(n){t||(G(e.$$.fragment,n),t=!0)},o(n){Z(e.$$.fragment,n),t=!1},d(n){Se(e,n)}}}function ml(l){let e,t,n,o,s=l[0]&&l[1]&&it(l);return{c(){s&&s.c(),e=ie()},l(i){s&&s.l(i),e=ie()},m(i,h){s&&s.m(i,h),P(i,e,h),t=!0,n||(o=[te(Xe,"pointerup",l[5]),te(Xe,"pointermove",l[6]),te(Xe,"resize",l[8])],n=!0)},p(i,h){i[0]&&i[1]?s?(s.p(i,h),h[0]&3&&G(s,1)):(s=it(i),s.c(),G(s,1),s.m(e.parentNode,e)):s&&(Le(),Z(s,1,1,()=>{s=null}),Ue())},i(i){t||(G(s),t=!0)},o(i){Z(s),t=!1},d(i){s&&s.d(i),i&&g(e),n=!1,Ke(o)}}}const rt="25px Roboto Mono",ot="17px Roboto Mono",we=2.6;function _l(l,e,t){let n,o,s;Mt(l,dl,m=>t(22,s=m));let{$$slots:i={},$$scope:h}=e,{clickNode:_}=e,{circledNode:f}=e,{selectedJewel:p}=e,{selectedConqueror:d}=e,{seed:a}=e,{highlighted:r=[]}=e;const c=[427,320,226,227,323,422,329];let u=10,w=0,R=0;const S=(m,B,b)=>{const A=B.width/u*we,E=B.height/u*we,q=b.x-A/2,z=b.y-E/2;m.drawImage(B,q,z,A,E)},k=(m,B,b)=>{const A=B.width/u*we,E=B.height/u*we,q=b.x-A/2,z=b.y-E/2,le=z-E/2;m.drawImage(B,q,le,A,E),m.save(),m.translate(q,z),m.rotate(Math.PI),m.drawImage(B,-A,-(E/2),A,-E),m.restore()},I={},D={},K=(m,B,b,A=!1)=>{let E=A?Wt[B]:st[B];!E&&A&&(E=st[B]);const q=E.filename;q in(A?D:I)||((A?D:I)[q]=new Image,(A?D:I)[q].src=q);const z=E.coords[B],le=z.w/u*we,oe=z.h/u*we,$=b.x-le/2,M=b.y-oe/2;m.drawImage((A?D:I)[q],z.x,z.y,z.w,z.h,$,M,le,oe)},C=(m,B,b)=>{const A=[];let E="";return m.split(" ").forEach(q=>{B.measureText(E+q).width<b?E+=" "+q:(A.push(E.trim()),E=q)}),E.length>0&&A.push(E.trim()),A};let Y={x:Number.MIN_VALUE,y:Number.MIN_VALUE},fe="unset",F,re=0,ce=0,ye=0,Ie=0,pe=!1;const Ye=m=>{pe=!0,re=m.offsetX,ce=m.offsetY,ye=w,Ie=R,t(18,Y={x:m.offsetX,y:m.offsetY}),F&&_(F)},Fe=m=>{m.type==="pointerup"&&(pe=!1),t(18,Y={x:m.offsetX,y:m.offsetY})},Be=m=>{pe&&(t(16,w=ye-(re-m.offsetX)*u),t(17,R=Ie-(ce-m.offsetY)*u)),t(18,Y={x:m.offsetX,y:m.offsetY})},ze=m=>{m.deltaY>0?u<30&&(t(16,w+=m.offsetX),t(17,R+=m.offsetY)):u>3&&(t(16,w-=m.offsetX),t(17,R-=m.offsetY)),t(15,u=Math.min(30,Math.max(3,u+m.deltaY/100))),m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation()};let Me=0,Je=0;const Ae=()=>{t(0,Me=window.innerWidth),t(1,Je=window.innerHeight)};let Ee=!1;return l.$$set=m=>{"clickNode"in m&&t(9,_=m.clickNode),"circledNode"in m&&t(10,f=m.circledNode),"selectedJewel"in m&&t(11,p=m.selectedJewel),"selectedConqueror"in m&&t(12,d=m.selectedConqueror),"seed"in m&&t(13,a=m.seed),"highlighted"in m&&t(14,r=m.highlighted),"$$scope"in m&&t(24,h=m.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&32768&&t(21,n=Gt/u),l.$$.dirty[0]&1081344&&(!Ee&&_e&&(t(20,Ee=!0),t(16,w=_e.min_x+window.innerWidth/2*u),t(17,R=_e.min_y+window.innerHeight/2*u)),Ae()),l.$$.dirty[0]&7339008&&t(3,o=({context:m,width:B,height:b})=>{const A=window.performance.now();m.clearRect(0,0,B,b),m.fillStyle="#080c11",m.fillRect(0,0,B,b);const E={};Object.keys(He).forEach($=>{m.strokeStyle=`hsl(${s/20}, 100%, 50%)`;const M=He[$],V=et(M.x,M.y,w,R,u),W=Math.max(...M.orbits);c.indexOf(parseInt($))>=0||(W==1?S(m,ee("PSGroupBackground1"),V):W==2?S(m,ee("PSGroupBackground2"),V):(W==3||M.orbits.length>1)&&k(m,ee("PSGroupBackground3"),V))}),Object.keys(me).forEach($=>{var H;const M=me[$],V=tt(M.orbit,M.orbitIndex),W=qe(M,w,R,u);(H=M.out)==null||H.forEach(de=>{if(!me[parseInt(de)])return;const ae=Math.min(parseInt(de),parseInt($)),Pe=Math.max(parseInt(de),parseInt($)),X=ae+":"+Pe;if(X in E)return;E[X]=!0;const Q=me[parseInt(de)];if(!Q||Q.isMastery)return;const he=tt(Q.orbit,Q.orbitIndex),ue=qe(Q,w,R,u);if(m.beginPath(),M.group!=Q.group||M.orbit!=Q.orbit)m.moveTo(W.x,W.y),m.lineTo(ue.x,ue.y);else{let se=Math.PI/180-Math.PI/180*V,x=Math.PI/180-Math.PI/180*he;se-=Math.PI/2,x-=Math.PI/2;const Te=Math.abs(Math.max(se,x)-Math.min(se,x)),Dt=Te>Math.PI?Math.max(se,x):Math.min(se,x),Vt=Te>Math.PI?Math.min(se,x):Math.max(se,x),Ze=He[M.group],$e=et(Ze.x,Ze.y,w,R,u);m.arc($e.x,$e.y,_e.constants.orbitRadii[M.orbit]/u+1,Dt,Vt)}m.lineWidth=6/u,m.strokeStyle="#524518",m.stroke()})});let q;f&&(q=qe(me[f],w,R,u),m.strokeStyle="#ad2b2b");let z=!1,le;if(Object.keys(me).forEach($=>{const M=me[$],V=qe(M,w,R,u);let W=0,H=!1;f&&lt(V,q)<n&&(H=!0),M.isKeystone?(W=110,K(m,M.icon,V,H),H?S(m,ee("KeystoneFrameAllocated"),V):S(m,ee("KeystoneFrameUnallocated"),V)):M.isNotable?(W=70,K(m,M.icon,V,H),H?S(m,ee("NotableFrameAllocated"),V):S(m,ee("NotableFrameUnallocated"),V)):M.isJewelSocket?(W=70,M.expansionJewel?H?S(m,ee("JewelSocketAltNormal"),V):S(m,ee("JewelSocketAltNormal"),V):H?S(m,ee("JewelFrameAllocated"),V):S(m,ee("JewelFrameUnallocated"),V)):M.isMastery?K(m,M.inactiveIcon,V,H):(W=50,K(m,M.icon,V,H),H?S(m,ee("PSSkillFrameActive"),V):S(m,ee("PSSkillFrame"),V)),r.indexOf(M.skill)>=0&&(m.strokeStyle=`hsl(${s/20}, 100%, 50%)`,m.lineWidth=3,m.beginPath(),m.arc(V.x,V.y,(W+30)/u,0,Math.PI*2),m.stroke()),lt(V,Y)<W/u&&(le=M,z=H)}),t(19,F=le),f&&(m.strokeStyle="#ad2b2b",m.lineWidth=1,m.beginPath(),m.arc(q.x,q.y,n,0,Math.PI*2),m.stroke()),F){let $=F.name,M=(F.stats||[]).map(X=>({text:X,special:!1}));if(!F.isJewelSocket&&z&&F.skill&&a&&p&&d){const X=Calculate(TreeToPassive[F.skill],a,p,d);if(X){if("alternatePassiveSkill"in X){const Q=GetAlternatePassiveSkillByIndex(X.alternatePassiveSkill);M=[],$=Q.name,"statsKeys"in Q&&Q.statsKeys.forEach((he,ue)=>{const se=GetStatByIndex(he),x=Ge[se.id]||"";x&&M.push({text:We(x,X.statRolls[ue])||se.id,special:!0})})}"alternatePassiveAdditionInformations"in X&&X.alternatePassiveAdditionInformations.length>0&&X.alternatePassiveAdditionInformations.forEach(Q=>{const he=GetAlternatePassiveAdditionByIndex(Q.alternatePassiveSkillAddition);"statsKeys"in he&&he.statsKeys.forEach((ue,se)=>{const x=GetStatByIndex(ue),Te=Ge[x.id]||"";Te&&M.push({text:We(Te,Q.statRolls[se])||x.id,special:!0})})})}}m.font=rt;const V=m.measureText($),W=Math.max(V.width+50,600);m.font=ot;const H=[],de=30;let ae=85;M&&M.length>0?M.forEach(X=>{H.length>0&&(ae+=5),X.text.split(`
`).forEach(Q=>{H.length>0&&(ae+=10),C(Q,m,W-de).forEach(ue=>{H.push({text:ue,offset:ae,special:X.special}),ae+=20})})}):F.isJewelSocket&&(H.push({text:"Click to select this socket",offset:ae,special:!0}),ae+=20);const Pe=55;m.fillStyle="rgba(75,63,24,0.9)",m.fillRect(Y.x,Y.y,W,Pe),m.fillStyle="#ffffff",m.font=rt,m.textAlign="center",m.fillText($,Y.x+W/2,Y.y+35),m.fillStyle="rgba(0,0,0,0.8)",m.fillRect(Y.x,Y.y+Pe,W,ae-Pe),m.font=ot,m.textAlign="left",H.forEach(X=>{X.special?m.fillStyle="#8cf34c":m.fillStyle="#ffffff",m.fillText(X.text,Y.x+de/2,Y.y+X.offset)})}F&&F.isJewelSocket?t(2,fe="pointer"):t(2,fe="unset"),m.fillStyle="#ffffff",m.textAlign="right",m.font="12px Roboto Mono";const oe=window.performance.now();m.fillText(`${(oe-A).toFixed(1)}ms`,B-5,17)})},[Me,Je,fe,o,Ye,Fe,Be,ze,Ae,_,f,p,d,a,r,u,w,R,Y,F,Ee,n,s,i,h]}class pl extends je{constructor(e){super(),De(this,e,_l,ml,Ve,{clickNode:9,circledNode:10,selectedJewel:11,selectedConqueror:12,seed:13,highlighted:14},null,[-1,-1])}}function at(l,e,t){const n=l.slice();return n[39]=e[t],n}function ft(l,e,t){const n=l.slice();return n[42]=e[t],n}function ut(l,e,t){const n=l.slice();return n[45]=e[t],n}function ct(l,e,t){const n=l.slice();return n[48]=e[t],n}function dt(l,e,t){const n=l.slice();return n[51]=e[t],n}function ht(l){let e,t,n,o,s,i,h,_=l[2]&&window.TimelessJewelConquerors[l[0].value].indexOf(l[2].value)>=0,f,p;function d(c){l[28](c)}let a={items:l[14]};l[2]!==void 0&&(a.value=l[2]),s=new Qe({props:a}),Ne.push(()=>Jt(s,"value",d)),s.$on("select",l[17]);let r=_&&mt(l);return{c(){e=T("div"),t=T("h3"),n=O("Conqueror"),o=L(),be(s.$$.fragment),h=L(),r&&r.c(),f=ie(),this.h()},l(c){e=N(c,"DIV",{class:!0});var u=J(e);t=N(u,"H3",{class:!0});var w=J(t);n=j(w,"Conqueror"),w.forEach(g),o=U(u),ve(s.$$.fragment,u),u.forEach(g),h=U(c),r&&r.l(c),f=ie(),this.h()},h(){y(t,"class","mb-2"),y(e,"class","mt-4")},m(c,u){P(c,e,u),v(e,t),v(t,n),v(e,o),ke(s,e,null),P(c,h,u),r&&r.m(c,u),P(c,f,u),p=!0},p(c,u){const w={};u[0]&16384&&(w.items=c[14]),!i&&u[0]&4&&(i=!0,w.value=c[2],At(()=>i=!1)),s.$set(w),u[0]&5&&(_=c[2]&&window.TimelessJewelConquerors[c[0].value].indexOf(c[2].value)>=0),_?r?(r.p(c,u),u[0]&5&&G(r,1)):(r=mt(c),r.c(),G(r,1),r.m(f.parentNode,f)):r&&(Le(),Z(r,1,1,()=>{r=null}),Ue())},i(c){p||(G(s.$$.fragment,c),G(r),p=!0)},o(c){Z(s.$$.fragment,c),Z(r),p=!1},d(c){c&&g(e),Se(s),c&&g(h),r&&r.d(c),c&&g(f)}}}function mt(l){let e,t,n,o,s,i,h,_,f,p,d,a,r,c;const u=[gl,wl],w=[];function R(k,I){return k[5]==="seed"?0:k[5]==="stats"?1:-1}~(_=R(l))&&(f=w[_]=u[_](l));let S=!l[4]&&It();return{c(){e=T("div"),t=T("button"),n=O("Enter Seed"),o=L(),s=T("button"),i=O("Select Stats"),h=L(),f&&f.c(),p=L(),S&&S.c(),d=ie(),this.h()},l(k){e=N(k,"DIV",{class:!0});var I=J(e);t=N(I,"BUTTON",{class:!0});var D=J(t);n=j(D,"Enter Seed"),D.forEach(g),o=U(I),s=N(I,"BUTTON",{class:!0});var K=J(s);i=j(K,"Select Stats"),K.forEach(g),I.forEach(g),h=U(k),f&&f.l(k),p=U(k),S&&S.l(k),d=ie(),this.h()},h(){y(t,"class","selection-button svelte-1hfl6nn"),Ce(t,"selected",l[5]==="seed"),y(s,"class","selection-button svelte-1hfl6nn"),Ce(s,"selected",l[5]==="stats"),y(e,"class","mt-4 w-full flex flex-row")},m(k,I){P(k,e,I),v(e,t),v(t,n),v(e,o),v(e,s),v(s,i),P(k,h,I),~_&&w[_].m(k,I),P(k,p,I),S&&S.m(k,I),P(k,d,I),a=!0,r||(c=[te(t,"click",l[29]),te(s,"click",l[30])],r=!0)},p(k,I){I[0]&32&&Ce(t,"selected",k[5]==="seed"),I[0]&32&&Ce(s,"selected",k[5]==="stats");let D=_;_=R(k),_===D?~_&&w[_].p(k,I):(f&&(Le(),Z(w[D],1,1,()=>{w[D]=null}),Ue()),~_?(f=w[_],f?f.p(k,I):(f=w[_]=u[_](k),f.c()),G(f,1),f.m(p.parentNode,p)):f=null),k[4]?S&&(S.d(1),S=null):S||(S=It(),S.c(),S.m(d.parentNode,d))},i(k){a||(G(f),a=!0)},o(k){Z(f),a=!1},d(k){k&&g(e),k&&g(h),~_&&w[_].d(k),k&&g(p),S&&S.d(k),k&&g(d),r=!1,Ke(c)}}}function wl(l){let e,t,n,o,s,i,h,_,f={items:l[13]};s=new Qe({props:f}),l[32](s),s.$on("select",l[20]);let p=l[1].size>0&&_t(l);return{c(){e=T("div"),t=T("h3"),n=O("Add Stat"),o=L(),be(s.$$.fragment),i=L(),p&&p.c(),h=ie(),this.h()},l(d){e=N(d,"DIV",{class:!0});var a=J(e);t=N(a,"H3",{class:!0});var r=J(t);n=j(r,"Add Stat"),r.forEach(g),o=U(a),ve(s.$$.fragment,a),a.forEach(g),i=U(d),p&&p.l(d),h=ie(),this.h()},h(){y(t,"class","mb-2"),y(e,"class","mt-4")},m(d,a){P(d,e,a),v(e,t),v(t,n),v(e,o),ke(s,e,null),P(d,i,a),p&&p.m(d,a),P(d,h,a),_=!0},p(d,a){const r={};a[0]&8192&&(r.items=d[13]),s.$set(r),d[1].size>0?p?p.p(d,a):(p=_t(d),p.c(),p.m(h.parentNode,h)):p&&(p.d(1),p=null)},i(d){_||(G(s.$$.fragment,d),_=!0)},o(d){Z(s.$$.fragment,d),_=!1},d(d){d&&g(e),l[32](null),Se(s),d&&g(i),p&&p.d(d),d&&g(h)}}}function gl(l){let e,t,n,o,s,i,h,_,f,p,d=(l[3]<window.TimelessJewelSeedRanges[l[0].value].min||l[3]>window.TimelessJewelSeedRanges[l[0].value].max)&&yt(l);return{c(){e=T("div"),t=T("h3"),n=O("Seed"),o=L(),s=T("input"),_=L(),d&&d.c(),this.h()},l(a){e=N(a,"DIV",{class:!0});var r=J(e);t=N(r,"H3",{class:!0});var c=J(t);n=j(c,"Seed"),c.forEach(g),o=U(r),s=N(r,"INPUT",{type:!0,class:!0,min:!0,max:!0}),_=U(r),d&&d.l(r),r.forEach(g),this.h()},h(){y(t,"class","mb-2"),y(s,"type","number"),y(s,"class","seed"),y(s,"min",i=window.TimelessJewelSeedRanges[l[0].value].min),y(s,"max",h=window.TimelessJewelSeedRanges[l[0].value].max),y(e,"class","mt-4")},m(a,r){P(a,e,r),v(e,t),v(t,n),v(e,o),v(e,s),xe(s,l[3]),v(e,_),d&&d.m(e,null),f||(p=[te(s,"input",l[31]),te(s,"blur",l[17])],f=!0)},p(a,r){r[0]&1&&i!==(i=window.TimelessJewelSeedRanges[a[0].value].min)&&y(s,"min",i),r[0]&1&&h!==(h=window.TimelessJewelSeedRanges[a[0].value].max)&&y(s,"max",h),r[0]&8&&Ct(s.value)!==a[3]&&xe(s,a[3]),a[3]<window.TimelessJewelSeedRanges[a[0].value].min||a[3]>window.TimelessJewelSeedRanges[a[0].value].max?d?d.p(a,r):(d=yt(a),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i:ge,o:ge,d(a){a&&g(e),d&&d.d(),f=!1,Ke(p)}}}function _t(l){let e,t,n,o,s,i,h,_=[...l[1]],f=[];for(let c=0;c<_.length;c+=1)f[c]=pt(dt(l,_,c));function p(c,u){return c[7]?vl:bl}let d=p(l),a=d(l),r=l[9]&&wt(l);return{c(){e=T("div");for(let c=0;c<f.length;c+=1)f[c].c();t=L(),n=T("button"),a.c(),o=L(),r&&r.c(),s=ie(),this.h()},l(c){e=N(c,"DIV",{class:!0});var u=J(e);for(let R=0;R<f.length;R+=1)f[R].l(u);u.forEach(g),t=U(c),n=N(c,"BUTTON",{class:!0});var w=J(n);a.l(w),w.forEach(g),o=U(c),r&&r.l(c),s=ie(),this.h()},h(){y(e,"class","mt-4 flex flex-col overflow-auto min-h-[50px]"),y(n,"class","p-2 px-4 bg-green-500/40 rounded mt-2 disabled:bg-green-700/40"),n.disabled=l[7]},m(c,u){P(c,e,u);for(let w=0;w<f.length;w+=1)f[w].m(e,null);P(c,t,u),P(c,n,u),a.m(n,null),P(c,o,u),r&&r.m(c,u),P(c,s,u),i||(h=te(n,"click",l[34]),i=!0)},p(c,u){if(u[0]&2621442){_=[...c[1]];let w;for(w=0;w<_.length;w+=1){const R=dt(c,_,w);f[w]?f[w].p(R,u):(f[w]=pt(R),f[w].c(),f[w].m(e,null))}for(;w<f.length;w+=1)f[w].d(1);f.length=_.length}d===(d=p(c))&&a?a.p(c,u):(a.d(1),a=d(c),a&&(a.c(),a.m(n,null))),u[0]&128&&(n.disabled=c[7]),c[9]?r?r.p(c,u):(r=wt(c),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(c){c&&g(e),Re(f,c),c&&g(t),c&&g(n),a.d(),c&&g(o),r&&r.d(c),c&&g(s),i=!1,h()}}}function pt(l){let e,t,n,o,s,i=l[19](l[51])+"",h,_,f,p;function d(){return l[33](l[51])}return{c(){e=T("div"),t=T("button"),n=O("-"),o=L(),s=T("span"),h=O(i),_=L(),this.h()},l(a){e=N(a,"DIV",{class:!0});var r=J(e);t=N(r,"BUTTON",{class:!0});var c=J(t);n=j(c,"-"),c.forEach(g),o=U(r),s=N(r,"SPAN",{});var u=J(s);h=j(u,i),u.forEach(g),_=U(r),r.forEach(g),this.h()},h(){y(t,"class","p-2 px-4 bg-red-500/40 rounded mr-2"),y(e,"class","mb-2 flex flex-row items-center")},m(a,r){P(a,e,r),v(e,t),v(t,n),v(e,o),v(e,s),v(s,h),v(e,_),f||(p=te(t,"click",d),f=!0)},p(a,r){l=a,r[0]&2&&i!==(i=l[19](l[51])+"")&&ne(h,i)},d(a){a&&g(e),f=!1,p()}}}function bl(l){let e;return{c(){e=O("Search")},l(t){e=j(t,"Search")},m(t,n){P(t,e,n)},p:ge,d(t){t&&g(e)}}}function vl(l){let e,t,n=window.TimelessJewelSeedRanges[l[0].value].max+"",o;return{c(){e=O(l[8]),t=O(" / "),o=O(n)},l(s){e=j(s,l[8]),t=j(s," / "),o=j(s,n)},m(s,i){P(s,e,i),P(s,t,i),P(s,o,i)},p(s,i){i[0]&256&&ne(e,s[8]),i[0]&1&&n!==(n=window.TimelessJewelSeedRanges[s[0].value].max+"")&&ne(o,n)},d(s){s&&g(e),s&&g(t),s&&g(o)}}}function wt(l){let e,t=Object.keys(l[10]).sort().reverse(),n=[];for(let o=0;o<t.length;o+=1)n[o]=St(at(l,t,o));return{c(){e=T("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=N(o,"DIV",{class:!0});var s=J(e);for(let i=0;i<n.length;i+=1)n[i].l(s);s.forEach(g),this.h()},h(){y(e,"class","mt-4 flex flex-col overflow-auto")},m(o,s){P(o,e,s);for(let i=0;i<n.length;i+=1)n[i].m(e,null)},p(o,s){if(s[0]&17304576){t=Object.keys(o[10]).sort().reverse();let i;for(i=0;i<t.length;i+=1){const h=at(o,t,i);n[i]?n[i].p(h,s):(n[i]=St(h),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(o){o&&g(e),Re(n,o)}}}function gt(l){let e,t=l[10][l[39]],n=[];for(let o=0;o<t.length;o+=1)n[o]=kt(ft(l,t,o));return{c(){e=T("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=N(o,"DIV",{class:!0});var s=J(e);for(let i=0;i<n.length;i+=1)n[i].l(s);s.forEach(g),this.h()},h(){y(e,"class","flex flex-col")},m(o,s){P(o,e,s);for(let i=0;i<n.length;i+=1)n[i].m(e,null)},p(o,s){if(s[0]&17302528){t=o[10][o[39]];let i;for(i=0;i<t.length;i+=1){const h=ft(o,t,i);n[i]?n[i].p(h,s):(n[i]=kt(h),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(o){o&&g(e),Re(n,o)}}}function bt(l){let e,t=l[19](l[48],l[45].stats[l[48]])+"",n;return{c(){e=T("li"),n=O(t)},l(o){e=N(o,"LI",{});var s=J(e);n=j(s,t),s.forEach(g)},m(o,s){P(o,e,s),v(e,n)},p(o,s){s[0]&1024&&t!==(t=o[19](o[48],o[45].stats[o[48]])+"")&&ne(n,t)},d(o){o&&g(e)}}}function vt(l){let e,t,n=_e.nodes[l[45].passive].name+"",o,s,i=l[45].passive+"",h,_,f,p,d=Object.keys(l[45].stats),a=[];for(let r=0;r<d.length;r+=1)a[r]=bt(ct(l,d,r));return{c(){e=T("div"),t=T("span"),o=O(n),s=O(" ("),h=O(i),_=O(")"),f=L(),p=T("ul");for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){e=N(r,"DIV",{class:!0});var c=J(e);t=N(c,"SPAN",{});var u=J(t);o=j(u,n),s=j(u," ("),h=j(u,i),_=j(u,")"),u.forEach(g),f=U(c),p=N(c,"UL",{class:!0});var w=J(p);for(let R=0;R<a.length;R+=1)a[R].l(w);w.forEach(g),c.forEach(g),this.h()},h(){y(p,"class","list-disc pl-6 font-bold"),y(e,"class","mt-2")},m(r,c){P(r,e,c),v(e,t),v(t,o),v(t,s),v(t,h),v(t,_),v(e,f),v(e,p);for(let u=0;u<a.length;u+=1)a[u].m(p,null)},p(r,c){if(c[0]&1024&&n!==(n=_e.nodes[r[45].passive].name+"")&&ne(o,n),c[0]&1024&&i!==(i=r[45].passive+"")&&ne(h,i),c[0]&525312){d=Object.keys(r[45].stats);let u;for(u=0;u<d.length;u+=1){const w=ct(r,d,u);a[u]?a[u].p(w,c):(a[u]=bt(w),a[u].c(),a[u].m(p,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=d.length}},d(r){r&&g(e),Re(a,r)}}}function kt(l){let e,t,n,o=l[42].seed+"",s,i,h,_,f,p=l[42].skills,d=[];for(let r=0;r<p.length;r+=1)d[r]=vt(ut(l,p,r));function a(){return l[36](l[42])}return{c(){e=T("div"),t=T("div"),n=O("Seed "),s=O(o),i=L();for(let r=0;r<d.length;r+=1)d[r].c();h=L(),this.h()},l(r){e=N(r,"DIV",{class:!0});var c=J(e);t=N(c,"DIV",{class:!0});var u=J(t);n=j(u,"Seed "),s=j(u,o),u.forEach(g),i=U(c);for(let w=0;w<d.length;w+=1)d[w].l(c);h=U(c),c.forEach(g),this.h()},h(){y(t,"class","font-bold text-orange-500 text-center"),y(e,"class","my-2 border-white/50 border p-2 flex flex-col cursor-pointer")},m(r,c){P(r,e,c),v(e,t),v(t,n),v(t,s),v(e,i);for(let u=0;u<d.length;u+=1)d[u].m(e,null);v(e,h),_||(f=te(e,"click",a),_=!0)},p(r,c){if(l=r,c[0]&1024&&o!==(o=l[42].seed+"")&&ne(s,o),c[0]&525312){p=l[42].skills;let u;for(u=0;u<p.length;u+=1){const w=ut(l,p,u);d[u]?d[u].p(w,c):(d[u]=vt(w),d[u].c(),d[u].m(e,h))}for(;u<d.length;u+=1)d[u].d(1);d.length=p.length}},d(r){r&&g(e),Re(d,r),_=!1,f()}}}function St(l){let e,t,n,o=l[39]+"",s,i,h=l[10][l[39]].length+"",_,f,p,d,a=l[11]===l[39]?"^":"V",r,c,u,w,R;function S(){return l[35](l[39])}let k=l[11]===l[39]&&gt(l);return{c(){e=T("div"),t=T("button"),n=T("span"),s=O(o),i=O(" Matches ["),_=O(h),f=O("]"),p=L(),d=T("span"),r=O(a),c=L(),k&&k.c(),u=L(),this.h()},l(I){e=N(I,"DIV",{class:!0});var D=J(e);t=N(D,"BUTTON",{class:!0});var K=J(t);n=N(K,"SPAN",{});var C=J(n);s=j(C,o),i=j(C," Matches ["),_=j(C,h),f=j(C,"]"),C.forEach(g),p=U(K),d=N(K,"SPAN",{});var Y=J(d);r=j(Y,a),Y.forEach(g),K.forEach(g),c=U(D),k&&k.l(D),u=U(D),D.forEach(g),this.h()},h(){y(t,"class","text-lg w-full p-2 px-4 bg-neutral-500/30 rounded flex flex-row justify-between"),y(e,"class","mb-2")},m(I,D){P(I,e,D),v(e,t),v(t,n),v(n,s),v(n,i),v(n,_),v(n,f),v(t,p),v(t,d),v(d,r),v(e,c),k&&k.m(e,null),v(e,u),w||(R=te(t,"click",S),w=!0)},p(I,D){l=I,D[0]&1024&&o!==(o=l[39]+"")&&ne(s,o),D[0]&1024&&h!==(h=l[10][l[39]].length+"")&&ne(_,h),D[0]&3072&&a!==(a=l[11]===l[39]?"^":"V")&&ne(r,a),l[11]===l[39]?k?k.p(l,D):(k=gt(l),k.c(),k.m(e,u)):k&&(k.d(1),k=null)},d(I){I&&g(e),k&&k.d(),w=!1,R()}}}function yt(l){let e,t,n=window.TimelessJewelSeedRanges[l[0].value].min+"",o,s,i=window.TimelessJewelSeedRanges[l[0].value].max+"",h;return{c(){e=T("div"),t=O("Seed must be between "),o=O(n),s=O(`
                  and `),h=O(i),this.h()},l(_){e=N(_,"DIV",{class:!0});var f=J(e);t=j(f,"Seed must be between "),o=j(f,n),s=j(f,`
                  and `),h=j(f,i),f.forEach(g),this.h()},h(){y(e,"class","mt-2")},m(_,f){P(_,e,f),v(e,t),v(e,o),v(e,s),v(e,h)},p(_,f){f[0]&1&&n!==(n=window.TimelessJewelSeedRanges[_[0].value].min+"")&&ne(o,n),f[0]&1&&i!==(i=window.TimelessJewelSeedRanges[_[0].value].max+"")&&ne(h,i)},d(_){_&&g(e)}}}function It(l){let e,t;return{c(){e=T("h2"),t=O("Click on a jewel socket"),this.h()},l(n){e=N(n,"H2",{class:!0});var o=J(e);t=j(o,"Click on a jewel socket"),o.forEach(g),this.h()},h(){y(e,"class","mt-4")},m(n,o){P(n,e,o),v(e,t)},d(n){n&&g(e)}}}function kl(l){let e,t,n,o,s,i,h,_,f;function p(r){l[27](r)}let d={items:l[15]};l[0]!==void 0&&(d.value=l[0]),i=new Qe({props:d}),Ne.push(()=>Jt(i,"value",p)),i.$on("select",l[22]);let a=l[0]&&ht(l);return{c(){e=T("div"),t=T("div"),n=T("h3"),o=O("Timeless Jewel"),s=L(),be(i.$$.fragment),_=L(),a&&a.c(),this.h()},l(r){e=N(r,"DIV",{class:!0});var c=J(e);t=N(c,"DIV",{class:!0});var u=J(t);n=N(u,"H3",{class:!0});var w=J(n);o=j(w,"Timeless Jewel"),w.forEach(g),s=U(u),ve(i.$$.fragment,u),_=U(u),a&&a.l(u),u.forEach(g),c.forEach(g),this.h()},h(){y(n,"class","mb-2"),y(t,"class","p-4 max-h-screen flex flex-col"),y(e,"class","w-1/2 lg:w-1/3 xl:w-1/4 2xl:w-1/5 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen")},m(r,c){P(r,e,c),v(e,t),v(t,n),v(n,o),v(t,s),ke(i,t,null),v(t,_),a&&a.m(t,null),f=!0},p(r,c){const u={};!h&&c[0]&1&&(h=!0,u.value=r[0],At(()=>h=!1)),i.$set(u),r[0]?a?(a.p(r,c),c[0]&1&&G(a,1)):(a=ht(r),a.c(),G(a,1),a.m(t,null)):a&&(Le(),Z(a,1,1,()=>{a=null}),Ue())},i(r){f||(G(i.$$.fragment,r),G(a),f=!0)},o(r){Z(i.$$.fragment,r),Z(a),f=!1},d(r){r&&g(e),Se(i),a&&a.d()}}}function Sl(l){var n,o;let e,t;return e=new pl({props:{clickNode:l[16],circledNode:l[4],selectedJewel:(n=l[0])==null?void 0:n.value,selectedConqueror:(o=l[2])==null?void 0:o.value,highlighted:l[12],seed:l[3],$$slots:{default:[kl]},$$scope:{ctx:l}}}),{c(){be(e.$$.fragment)},l(s){ve(e.$$.fragment,s)},m(s,i){ke(e,s,i),t=!0},p(s,i){var _,f;const h={};i[0]&16&&(h.circledNode=s[4]),i[0]&1&&(h.selectedJewel=(_=s[0])==null?void 0:_.value),i[0]&4&&(h.selectedConqueror=(f=s[2])==null?void 0:f.value),i[0]&4096&&(h.highlighted=s[12]),i[0]&8&&(h.seed=s[3]),i[0]&28671|i[1]&8388608&&(h.$$scope={dirty:i,ctx:s}),e.$set(h)},i(s){t||(G(e.$$.fragment,s),t=!0)},o(s){Z(e.$$.fragment,s),t=!1},d(s){Se(e,s)}}}function yl(l,e,t){let n,o,s,i;Mt(l,tl,b=>t(37,i=b));const h=i.url.searchParams,_=Object.keys(window.TimelessJewels).map(b=>({value:parseInt(b),label:window.TimelessJewels[b]}));let f=h.has("jewel")?_.find(b=>b.value==h.get("jewel")):void 0,p=h.has("conqueror")?{value:h.get("conqueror"),label:h.get("conqueror")}:void 0,d=h.has("seed")?parseInt(h.get("seed")):0,a=h.has("location")?parseInt(h.get("location")):void 0;const r=b=>{b.isJewelSocket&&(t(4,a=b.skill),c())},c=()=>{{const b=new URL(window.location.origin+window.location.pathname);f&&b.searchParams.append("jewel",f.value.toString()),p&&b.searchParams.append("conqueror",p.value),d&&b.searchParams.append("seed",d.toString()),a&&b.searchParams.append("location",a.toString()),u&&b.searchParams.append("mode",u),S.forEach(A=>{b.searchParams.append("stat",A.toString())}),el(b.toString())}};let u=h.has("mode")?h.get("mode"):"";const w=b=>{t(5,u=b),c()};let R;R=JSON.parse(window.PossibleStats);let S=new Set;h.has("stat")&&h.getAll("stat").forEach(b=>S.add(parseInt(b)));const k=(b,A)=>{const E=Kt(b),q=Ge[E.id];if(A)return We(q,A);let z=E.text||E.id;return q&&q.English&&q.English.length&&(z=q.English[0].string,q.English[0].format.forEach((le,oe)=>{z=z.replace(`{${oe}}`,le)})),z};let I;const D=b=>{t(1,S=S.add(b.detail.value)),I.handleClear(),c()},K=b=>{S.delete(b),t(1,S),c()},C=()=>{S.clear(),c()};let Y=!1,fe=0,F,re,ce="";const ye=()=>{if(!a)return;t(7,Y=!0),t(9,F=void 0);const A=[Qt(_e.nodes[a]).filter(E=>!E.isJewelSocket&&!E.isMastery).map(E=>window.TreeToPassive[E.skill]),[...S],f.value,p.value];Zt.search(A,$t(E=>t(8,fe=E))).then(E=>{t(9,F=E),t(7,Y=!1),t(10,re={}),Object.keys(F).forEach(q=>{const z=Object.keys(F[q]).map(oe=>({passive:xt[oe],stats:F[q][oe]})),le=Object.keys(F[q]).length;t(10,re[le]=[...re[le]||[],{skills:z,seed:parseInt(q)}],re)}),t(11,ce=Object.keys(re).sort().reverse()[0])})};let Ie=[];const pe=(b,A)=>{t(3,d=b),t(12,Ie=A.map(E=>E.passive)),c()};function Ye(b){f=b,t(0,f)}function Fe(b){p=b,t(2,p)}const Be=()=>w("seed"),ze=()=>w("stats");function Me(){d=Ct(this.value),t(3,d)}function Je(b){Ne[b?"unshift":"push"](()=>{I=b,t(6,I)})}const Ae=b=>K(b),Ee=()=>ye(),m=b=>t(11,ce=ce===b?"":b),B=b=>pe(b.seed,b.skills);return l.$$.update=()=>{l.$$.dirty[0]&1&&t(14,n=f?window.TimelessJewelConquerors[f.value].map(b=>({value:b,label:b})):[]),l.$$.dirty[0]&33554433&&t(26,o=f?Object.keys(R[f.value]):[]),l.$$.dirty[0]&67108866&&t(13,s=o.map(b=>{const A=parseInt(b);return{label:k(A),value:A}}).filter(b=>!S.has(b.value)))},[f,S,p,d,a,u,I,Y,fe,F,re,ce,Ie,s,n,_,r,c,w,k,D,K,C,ye,pe,R,o,Ye,Fe,Be,ze,Me,Je,Ae,Ee,m,B]}class Rl extends je{constructor(e){super(),De(this,e,yl,Sl,Ve,{},null,[-1,-1])}}export{Rl as default};
