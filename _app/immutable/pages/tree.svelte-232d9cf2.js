import{a7 as Nt,O as re,a8 as At,S as Ee,i as Ie,s as Pe,F as it,e as B,k as te,c as U,a as V,d as I,m as se,b as J,f as ke,g as O,a9 as Ct,G as nt,H as rt,I as ot,q as D,o as K,r as Rt,v as qt,aa as lt,K as Se,E as Oe,a6 as Jt,w as he,x as _e,y as pe,J as H,B as me,l as fe,n as at,p as ft,R as ct,T as dt,ab as jt,L as ut,t as Me,h as Ne,M as ht,N as We,P as _t}from"../chunks/index-40c9b43b.js";import{r as Ot}from"../chunks/index-d169ac0d.js";import{S as pt,g as Tt,p as Lt}from"../chunks/stores-5cbfde2c.js";import"../chunks/singletons-d1fb5791.js";const Yt=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function Ft(){const n=Nt();return t=>{const s=Yt.map(c=>re(t,c,_=>At(n,_)));return{destroy:()=>s.forEach(c=>c())}}}class zt{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:t,render:s}){return t&&(this.setups.set(this.currentLayerId,t),this.needsSetup=!0),this.renderers.set(this.currentLayerId,s),this.needsRedraw=!0,this.currentLayerId++}unregister(t){this.renderers.delete(t),this.needsRedraw=!0}render({autoclear:t,pixelRatio:s,context:c,width:_,height:i}){const d={context:c,width:_,height:i};if(this.needsResize&&(c.setTransform(s,0,0,s,0,0),this.needsResize=!1),this.needsSetup){for(const[f,p]of this.setups)p(d),this.setups.delete(f);this.needsSetup=!1}if(this.needsRedraw){t&&c.clearRect(0,0,_,i);for(const f of this.layerSequence)this.renderers.get(f)(d);this.needsRedraw=!1}}}function Dt(n){let t,s,c,_,i,d,f,p,u;const h=n[13].default,a=it(h,n,n[12],null);return{c(){t=B("canvas"),i=te(),d=B("div"),a&&a.c(),this.h()},l(l){t=U(l,"CANVAS",{style:!0,width:!0,height:!0}),V(t).forEach(I),i=se(l),d=U(l,"DIV",{style:!0});var r=V(d);a&&a.l(r),r.forEach(I),this.h()},h(){J(t,"style",s="display: block; width: "+n[1]+"px; height: "+n[2]+"px;"+(n[3]?` ${n[3]}`:"")),J(t,"width",c=n[1]*n[0]),J(t,"height",_=n[2]*n[0]),ke(d,"display","none")},m(l,r){O(l,t,r),n[14](t),O(l,i,r),O(l,d,r),a&&a.m(d,null),n[15](d),f=!0,p||(u=Ct(n[6].call(null,t)),p=!0)},p(l,[r]){(!f||r&14&&s!==(s="display: block; width: "+l[1]+"px; height: "+l[2]+"px;"+(l[3]?` ${l[3]}`:"")))&&J(t,"style",s),(!f||r&3&&c!==(c=l[1]*l[0]))&&J(t,"width",c),(!f||r&5&&_!==(_=l[2]*l[0]))&&J(t,"height",_),a&&a.p&&(!f||r&4096)&&nt(a,h,l,l[12],f?ot(h,l[12],r,null):rt(l[12]),null)},i(l){f||(D(a,l),f=!0)},o(l){K(a,l),f=!1},d(l){l&&I(t),n[14](null),l&&I(i),l&&I(d),a&&a.d(l),n[15](null),p=!1,u()}}}const mt={};function Ht(n,t,s){let{$$slots:c={},$$scope:_}=t,{width:i=640,height:d=640,pixelRatio:f=void 0,style:p=null,autoclear:u=!0}=t,h,a,l,r,g;const E=Ft(),m=new zt;function Q(){m.redraw()}function W(){return h}function Ae(){return a}f===void 0&&(typeof window=="undefined"?f=2:f=window.devicePixelRatio);function we(){m.render({context:a,width:i,height:d,pixelRatio:f,autoclear:u}),l=window.requestAnimationFrame(we)}Rt(mt,{register:m.register,unregister:m.unregister,redraw:m.redraw}),qt(()=>{a=h.getContext("2d"),g=new MutationObserver(S),g.observe(r,{childList:!0}),S(),we();function S(){const ge=[...r.children].map(oe=>+oe.dataset.layerId);s(11,m.layerSequence=ge,m),m.redraw()}}),lt(()=>{typeof window!="undefined"&&(window.cancelAnimationFrame(l),g.disconnect())});function M(S){Se[S?"unshift":"push"](()=>{h=S,s(4,h)})}function x(S){Se[S?"unshift":"push"](()=>{r=S,s(5,r)})}return n.$$set=S=>{"width"in S&&s(1,i=S.width),"height"in S&&s(2,d=S.height),"pixelRatio"in S&&s(0,f=S.pixelRatio),"style"in S&&s(3,p=S.style),"autoclear"in S&&s(7,u=S.autoclear),"$$scope"in S&&s(12,_=S.$$scope)},n.$$.update=()=>{n.$$.dirty&2183&&m.resize()},[f,i,d,p,h,r,E,u,Q,W,Ae,m,_,c,M,x]}class Xt extends Ee{constructor(t){super(),Ie(this,t,Ht,Dt,Pe,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function Gt(n){let t;return{c(){t=B("div"),this.h()},l(s){t=U(s,"DIV",{"data-layer-id":!0}),V(t).forEach(I),this.h()},h(){J(t,"data-layer-id",n[0])},m(s,c){O(s,t,c)},p:Oe,i:Oe,o:Oe,d(s){s&&I(t)}}}function Bt(n,t,s){const{register:c,unregister:_,redraw:i}=Jt(mt);let{setup:d=void 0,render:f=()=>{}}=t;if(typeof d!="function"&&d!==void 0)throw new Error("setup must be a function");if(typeof f!="function")throw new Error("render must be a function");const p=c({setup:d,render:f});return lt(()=>_(p)),n.$$set=u=>{"setup"in u&&s(1,d=u.setup),"render"in u&&s(2,f=u.render)},n.$$.update=()=>{n.$$.dirty&4&&i()},[p,d,f]}class Ut extends Ee{constructor(t){super(),Ie(this,t,Bt,Gt,Pe,{setup:1,render:2})}}let Qe;const wt=Date.now();function gt(n){return n(Date.now()-wt),Qe=window.requestAnimationFrame(()=>gt(n)),()=>window.cancelAnimationFrame(Qe)}function Kt(){}var Vt=Ot(Date.now()-wt,typeof window=="undefined"?Kt:gt);const{window:Te}=jt;function Ze(n){let t,s,c,_,i,d;s=new Xt({props:{width:n[0],height:n[1],$$slots:{default:[Wt]},$$scope:{ctx:n}}}),s.$on("pointerdown",n[4]),s.$on("wheel",n[7]);const f=n[24].default,p=it(f,n,n[25],null);return{c(){t=B("div"),he(s.$$.fragment),c=te(),p&&p.c(),this.h()},l(u){t=U(u,"DIV",{style:!0});var h=V(t);_e(s.$$.fragment,h),c=se(h),p&&p.l(h),h.forEach(I),this.h()},h(){ke(t,"touch-action","none"),ke(t,"cursor",n[2])},m(u,h){O(u,t,h),pe(s,t,null),H(t,c),p&&p.m(t,null),_=!0,i||(d=re(t,"resize",n[8]),i=!0)},p(u,h){const a={};h[0]&1&&(a.width=u[0]),h[0]&2&&(a.height=u[1]),h[0]&33554440&&(a.$$scope={dirty:h,ctx:u}),s.$set(a),p&&p.p&&(!_||h[0]&33554432)&&nt(p,f,u,u[25],_?ot(f,u[25],h,null):rt(u[25]),null),(!_||h[0]&4)&&ke(t,"cursor",u[2])},i(u){_||(D(s.$$.fragment,u),D(p,u),_=!0)},o(u){K(s.$$.fragment,u),K(p,u),_=!1},d(u){u&&I(t),me(s),p&&p.d(u),i=!1,d()}}}function Wt(n){let t,s;return t=new Ut({props:{render:n[3]}}),{c(){he(t.$$.fragment)},l(c){_e(t.$$.fragment,c)},m(c,_){pe(t,c,_),s=!0},p(c,_){const i={};_[0]&8&&(i.render=c[3]),t.$set(i)},i(c){s||(D(t.$$.fragment,c),s=!0)},o(c){K(t.$$.fragment,c),s=!1},d(c){me(t,c)}}}function Qt(n){let t,s,c,_,i=n[0]&&n[1]&&Ze(n);return{c(){i&&i.c(),t=fe()},l(d){i&&i.l(d),t=fe()},m(d,f){i&&i.m(d,f),O(d,t,f),s=!0,c||(_=[re(Te,"pointerup",n[5]),re(Te,"pointermove",n[6]),re(Te,"resize",n[8])],c=!0)},p(d,f){d[0]&&d[1]?i?(i.p(d,f),f[0]&3&&D(i,1)):(i=Ze(d),i.c(),D(i,1),i.m(t.parentNode,t)):i&&(at(),K(i,1,1,()=>{i=null}),ft())},i(d){s||(D(i),s=!0)},o(d){K(i),s=!1},d(d){i&&i.d(d),d&&I(t),c=!1,ct(_)}}}const xe="25px Roboto Mono",$e="17px Roboto Mono",ae=2.6;function Zt(n,t,s){let c,_,i;dt(n,Vt,e=>s(23,i=e));let{$$slots:d={},$$scope:f}=t,{clickNode:p}=t,{circledNode:u}=t,{selectedJewel:h}=t,{selectedConqueror:a}=t,{seed:l}=t,r;const g={},E={},m={},Q={},W={},Ae={negate:-1,times_twenty:1/20,canonical_stat:1,per_minute_to_per_second:60,milliseconds_to_seconds:1e3,display_indexable_support:1,divide_by_one_hundred:100,milliseconds_to_seconds_2dp_if_required:1e3,deciseconds_to_seconds:10,old_leech_percent:1,old_leech_permyriad:1e4,times_one_point_five:1/1.5,"30%_of_value":100/30,divide_by_one_thousand:1e3,divide_by_twelve:12,divide_by_six:6,per_minute_to_per_second_2dp_if_required:60,"60%_of_value":100/60,double:1/2,negate_and_double:1/-2,multiply_by_four:1/4,per_minute_to_per_second_0dp:60,milliseconds_to_seconds_0dp:1e3,mod_value_to_item_class:1,milliseconds_to_seconds_2dp:1e3,multiplicative_damage_modifier:1,divide_by_one_hundred_2dp:100,per_minute_to_per_second_1dp:60,divide_by_one_hundred_2dp_if_required:100,divide_by_ten_1dp_if_required:10,milliseconds_to_seconds_1dp:1e3,divide_by_fifty:50,per_minute_to_per_second_2dp:60,divide_by_ten_0dp:10,divide_by_one_hundred_and_negate:-100,tree_expansion_jewel_passive:1,passive_hash:1,divide_by_ten_1dp:10,affliction_reward_type:1,divide_by_five:5,metamorphosis_reward_description:1,divide_by_two_0dp:2,divide_by_fifteen_0dp:15,divide_by_three:3,divide_by_twenty_then_double_0dp:10,divide_by_four:4};r=JSON.parse(window.SkillTree),Object.keys(r.groups).forEach(o=>{const w=r.groups[o];w.nodes.forEach(y=>{const b=r.nodes[y];b.isProxy||"classStartIndex"in b||b.expansionJewel&&b.expansionJewel.parent||b.isBlighted||b.ascendancyName||(s(15,g[o]=w,g),s(16,E[y]=b,E))})}),r.skillSprites.keystoneInactive.forEach(o=>Object.keys(o.coords).forEach(w=>m[w]=o)),r.skillSprites.notableInactive.forEach(o=>Object.keys(o.coords).forEach(w=>m[w]=o)),r.skillSprites.normalInactive.forEach(o=>Object.keys(o.coords).forEach(w=>m[w]=o)),r.skillSprites.masteryInactive.forEach(o=>Object.keys(o.coords).forEach(w=>m[w]=o)),r.skillSprites.keystoneActive.forEach(o=>Object.keys(o.coords).forEach(w=>Q[w]=o)),r.skillSprites.notableActive.forEach(o=>Object.keys(o.coords).forEach(w=>Q[w]=o)),r.skillSprites.normalActive.forEach(o=>Object.keys(o.coords).forEach(w=>Q[w]=o)),r.skillSprites.masteryInactive.forEach(o=>Object.keys(o.coords).forEach(w=>Q[w]=o)),JSON.parse(PassiveTranslations).forEach(o=>{o.ids.forEach(w=>{s(17,W[w]=o,W)})});const we=[427,320,226,227,323,422,329];let M=10,x=0,S=0;const ge=new Set,oe=(e,o)=>({x:(Math.abs(r.min_x)+e+x)/M,y:(Math.abs(r.min_y)+o+S)/M}),bt=(e,o,w)=>{const y=Math.PI/180*w,b=Math.cos(y),k=Math.sin(y),N=b*(o.x-e.x)+k*(o.y-e.y)+e.x,F=b*(o.y-e.y)-k*(o.x-e.x)+e.y;return{x:N,y:F}},Le=[0,30,45,60,90,120,135,150,180,210,225,240,270,300,315,330],Ye=[0,10,20,30,40,45,50,60,70,80,90,100,110,120,130,135,140,150,160,170,180,190,200,210,220,225,230,240,250,260,270,280,290,300,310,315,320,330,340,350],Ce=(e,o)=>{const w=r.constants.skillsPerOrbit[e];return w==16?Le[Le.length-o]||0:w==40?Ye[Ye.length-o]||0:360-360/w*o},le=e=>{const o=r.groups[e.group],w=Ce(e.orbit,e.orbitIndex),y=oe(o.x,o.y),b=oe(o.x,o.y-r.constants.orbitRadii[e.orbit]);return bt(y,b,w)},ce={},T=e=>(e in ce||(ce[e]=new Image,ce[e].src=r.assets[e]["0.3835"]),ce[e]),Re=(e,o)=>Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2)),X=(e,o,w)=>{const y=o.width/M*ae,b=o.height/M*ae,k=w.x-y/2,N=w.y-b/2;e.drawImage(o,k,N,y,b)},yt=(e,o,w)=>{const y=o.width/M*ae,b=o.height/M*ae,k=w.x-y/2,N=w.y-b/2,F=N-b/2;e.drawImage(o,k,F,y,b),e.save(),e.translate(k,N),e.rotate(Math.PI),e.drawImage(o,-y,-(b/2),y,-b),e.restore()},be={},ye={},ve=(e,o,w,y=!1)=>{let b=y?Q[o]:m[o];!b&&y&&(b=m[o]);const k=b.filename;k in(y?ye:be)||((y?ye:be)[k]=new Image,(y?ye:be)[k].src=k);const N=b.coords[o],F=N.w/M*ae,$=N.h/M*ae,R=w.x-F/2,v=w.y-$/2;e.drawImage((y?ye:be)[k],N.x,N.y,N.w,N.h,R,v,F,$)},vt=(e,o,w)=>{const y=[];let b="";return e.split(" ").forEach(k=>{o.measureText(b+k).width<w?b+=" "+k:(y.push(b.trim()),b=k)}),b.length>0&&y.push(b.trim()),y},Fe=(e,o)=>{let w=-1;for(let k=0;k<e.English.length;k++){const N=e.English[k];let F=!0;if(N.condition.length>0){const $=N.condition[0];for(let R of Object.keys($)){if(R=="min"&&o<$.min){F=!1;break}if(R=="max"&&o>$.max){F=!1;break}}}if(F){w=k;break}}if(w==-1)return;const y=e.English[w];let b=o;return y.index_handlers.length>0&&y.index_handlers[0].forEach(k=>{b=b/(Ae[k]||1)}),y.string.replace("{0}",y.format[0].replace("#",b.toString()))};let L={x:Number.MIN_VALUE,y:Number.MIN_VALUE},qe="unset",Y,ze=0,De=0,He=0,Xe=0,Je=!1;const kt=e=>{Je=!0,ze=e.offsetX,De=e.offsetY,He=x,Xe=S,s(19,L={x:e.offsetX,y:e.offsetY}),Y&&p(Y)},St=e=>{e.type==="pointerup"&&(Je=!1),s(19,L={x:e.offsetX,y:e.offsetY})},Et=e=>{Je&&(x=He-(ze-e.offsetX)*M,S=Xe-(De-e.offsetY)*M),s(19,L={x:e.offsetX,y:e.offsetY})},It=e=>{e.deltaY>0?M<30&&(x+=e.offsetX,S+=e.offsetY):M>3&&(x-=e.offsetX,S-=e.offsetY),s(18,M=Math.min(30,Math.max(3,M+e.deltaY/100))),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()};let Ge=0,Be=0;const Ue=()=>{s(0,Ge=window.innerWidth),s(1,Be=window.innerHeight)};let je=!1;return n.$$set=e=>{"clickNode"in e&&s(9,p=e.clickNode),"circledNode"in e&&s(10,u=e.circledNode),"selectedJewel"in e&&s(11,h=e.selectedJewel),"selectedConqueror"in e&&s(12,a=e.selectedConqueror),"seed"in e&&s(13,l=e.seed),"$$scope"in e&&s(25,f=e.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&262144&&s(22,c=1800/M),n.$$.dirty[0]&4210688&&ge.size==0&&r.jewelSlots.forEach(e=>{if(e!=31683)return;const o=r.nodes[e];if(o.expansionJewel&&o.expansionJewel.parent)return;const w=le(o);Object.keys(r.nodes).forEach(y=>{const b=r.nodes[y];if(!r.groups[b.group])return;const N=le(b);Re(N,w)<c&&ge.add(y)})}),n.$$.dirty[0]&14679040&&s(3,_=({context:e,width:o,height:w})=>{const y=window.performance.now();e.clearRect(0,0,o,w),e.fillStyle="#080c11",e.fillRect(0,0,o,w);const b={};Object.keys(g).forEach(R=>{e.strokeStyle=`hsl(${i/20}, 100%, 50%)`;const v=r.groups[R],P=oe(v.x,v.y),q=Math.max(...v.orbits);we.indexOf(parseInt(R))>=0||(q==1?X(e,T("PSGroupBackground1"),P):q==2?X(e,T("PSGroupBackground2"),P):(q==3||v.orbits.length>1)&&yt(e,T("PSGroupBackground3"),P))}),Object.keys(E).forEach(R=>{var A;const v=r.nodes[R],P=Ce(v.orbit,v.orbitIndex),q=le(v);(A=v.out)==null||A.forEach(ie=>{if(!E[parseInt(ie)])return;const Z=Math.min(parseInt(ie),parseInt(R)),de=Math.max(parseInt(ie),parseInt(R)),C=Z+":"+de;if(C in b)return;b[C]=!0;const j=r.nodes[parseInt(ie)];if(j.isMastery)return;const ne=Ce(j.orbit,j.orbitIndex),ee=le(j);if(e.beginPath(),v.group!=j.group||v.orbit!=j.orbit)e.moveTo(q.x,q.y),e.lineTo(ee.x,ee.y);else{let G=Math.PI/180-Math.PI/180*P,z=Math.PI/180-Math.PI/180*ne;G-=Math.PI/2,z-=Math.PI/2;const ue=Math.abs(Math.max(G,z)-Math.min(G,z)),Pt=ue>Math.PI?Math.max(G,z):Math.min(G,z),Mt=ue>Math.PI?Math.min(G,z):Math.max(G,z),Ke=r.groups[v.group],Ve=oe(Ke.x,Ke.y);e.arc(Ve.x,Ve.y,r.constants.orbitRadii[v.orbit]/M+1,Pt,Mt)}e.lineWidth=6/M,e.strokeStyle="#524518",e.stroke()})});let k;u&&(k=le(r.nodes[u]),e.strokeStyle="#ad2b2b");let N=!1,F;if(Object.keys(E).forEach(R=>{const v=r.nodes[R],P=le(v);let q=0,A=!1;u&&Re(P,k)<c&&(A=!0),v.isKeystone?(q=110,ve(e,v.icon,P,A),A?X(e,T("KeystoneFrameAllocated"),P):X(e,T("KeystoneFrameUnallocated"),P)):v.isNotable?(q=70,ve(e,v.icon,P,A),A?X(e,T("NotableFrameAllocated"),P):X(e,T("NotableFrameUnallocated"),P)):v.isJewelSocket?(q=70,v.expansionJewel?X(e,T("JewelSocketAltNormal"),P):A?X(e,T("JewelFrameAllocated"),P):X(e,T("JewelFrameUnallocated"),P)):v.isMastery?ve(e,v.inactiveIcon,P,A):(q=50,ve(e,v.icon,P,A),A?X(e,T("PSSkillFrameActive"),P):X(e,T("PSSkillFrame"),P)),Re(P,L)<q/M&&(F=v,N=A)}),s(20,Y=F),u&&(e.strokeStyle="#ad2b2b",e.beginPath(),e.arc(k.x,k.y,c,0,Math.PI*2),e.stroke()),Y){let R=Y.name,v=(Y.stats||[]).map(C=>({text:C,special:!1}));if(!Y.isJewelSocket&&N&&Y.skill&&l&&h&&a){const C=Calculate(TreeToPassive[Y.skill],l,h,a);if(C){if("alternatePassiveSkill"in C){const j=GetAlternatePassiveSkillByIndex(C.alternatePassiveSkill);v=[],R=j.name,"statsKeys"in j&&j.statsKeys.forEach((ne,ee)=>{const G=GetStatByIndex(ne),z=W[G.id]||"";z&&v.push({text:Fe(z,C.statRolls[ee])||G.id,special:!0})})}"alternatePassiveAdditionInformations"in C&&C.alternatePassiveAdditionInformations.length>0&&C.alternatePassiveAdditionInformations.forEach(j=>{const ne=GetAlternatePassiveAdditionByIndex(j.alternatePassiveSkillAddition);"statsKeys"in ne&&ne.statsKeys.forEach((ee,G)=>{const z=GetStatByIndex(ee),ue=W[z.id]||"";ue&&v.push({text:Fe(ue,j.statRolls[G])||z.id,special:!0})})})}}e.font=xe;const P=e.measureText(R),q=Math.max(P.width+50,600);e.font=$e;const A=[],ie=30;let Z=85;v&&v.length>0?v.forEach(C=>{A.length>0&&(Z+=5),C.text.split(`
`).forEach(j=>{A.length>0&&(Z+=10),vt(j,e,q-ie).forEach(ee=>{A.push({text:ee,offset:Z,special:C.special}),Z+=20})})}):Y.isJewelSocket&&(A.push({text:"Click to select this socket",offset:Z,special:!0}),Z+=20);const de=55;e.fillStyle="rgba(75,63,24,0.9)",e.fillRect(L.x,L.y,q,de),e.fillStyle="#ffffff",e.font=xe,e.textAlign="center",e.fillText(R,L.x+q/2,L.y+35),e.fillStyle="rgba(0,0,0,0.8)",e.fillRect(L.x,L.y+de,q,Z-de),e.font=$e,e.textAlign="left",A.forEach(C=>{C.special?e.fillStyle="#8cf34c":e.fillStyle="#ffffff",e.fillText(C.text,L.x+ie/2,L.y+C.offset)})}Y&&Y.isJewelSocket?s(2,qe="pointer"):s(2,qe="unset"),e.fillStyle="#ffffff",e.textAlign="right",e.font="12px Roboto Mono";const $=window.performance.now();e.fillText(`${($-y).toFixed(1)}ms`,o-5,17)}),n.$$.dirty[0]&2375680&&(je||(s(21,je=!0),x=r.min_x+window.innerWidth/2*M,S=r.min_y+window.innerHeight/2*M,Ue()))},[Ge,Be,qe,_,kt,St,Et,It,Ue,p,u,h,a,l,r,g,E,W,M,L,Y,je,c,i,d,f]}class xt extends Ee{constructor(t){super(),Ie(this,t,Zt,Qt,Pe,{clickNode:9,circledNode:10,selectedJewel:11,selectedConqueror:12,seed:13},null,[-1,-1])}}function et(n){let t,s,c,_,i,d,f,p=n[1]&&TimelessJewelConquerors[n[0].value].indexOf(n[1].value)>=0,u,h;function a(g){n[9](g)}let l={items:n[4]};n[1]!==void 0&&(l.value=n[1]),i=new pt({props:l}),Se.push(()=>ut(i,"value",a)),i.$on("select",n[7]);let r=p&&tt(n);return{c(){t=B("div"),s=B("h3"),c=Me("Conqueror"),_=te(),he(i.$$.fragment),f=te(),r&&r.c(),u=fe(),this.h()},l(g){t=U(g,"DIV",{class:!0});var E=V(t);s=U(E,"H3",{class:!0});var m=V(s);c=Ne(m,"Conqueror"),m.forEach(I),_=se(E),_e(i.$$.fragment,E),E.forEach(I),f=se(g),r&&r.l(g),u=fe(),this.h()},h(){J(s,"class","mb-2"),J(t,"class","mt-4")},m(g,E){O(g,t,E),H(t,s),H(s,c),H(t,_),pe(i,t,null),O(g,f,E),r&&r.m(g,E),O(g,u,E),h=!0},p(g,E){const m={};E&16&&(m.items=g[4]),!d&&E&2&&(d=!0,m.value=g[1],ht(()=>d=!1)),i.$set(m),E&3&&(p=g[1]&&TimelessJewelConquerors[g[0].value].indexOf(g[1].value)>=0),p?r?r.p(g,E):(r=tt(g),r.c(),r.m(u.parentNode,u)):r&&(r.d(1),r=null)},i(g){h||(D(i.$$.fragment,g),h=!0)},o(g){K(i.$$.fragment,g),h=!1},d(g){g&&I(t),me(i),g&&I(f),r&&r.d(g),g&&I(u)}}}function tt(n){let t,s,c,_,i,d,f,p,u,h=!n[3]&&st();return{c(){t=B("div"),s=B("h3"),c=Me("Seed"),_=te(),i=B("input"),d=te(),h&&h.c(),f=fe(),this.h()},l(a){t=U(a,"DIV",{class:!0});var l=V(t);s=U(l,"H3",{class:!0});var r=V(s);c=Ne(r,"Seed"),r.forEach(I),_=se(l),i=U(l,"INPUT",{type:!0,class:!0}),l.forEach(I),d=se(a),h&&h.l(a),f=fe(),this.h()},h(){J(s,"class","mb-2"),J(i,"type","number"),J(i,"class","seed"),J(t,"class","mt-4")},m(a,l){O(a,t,l),H(t,s),H(s,c),H(t,_),H(t,i),We(i,n[2]),O(a,d,l),h&&h.m(a,l),O(a,f,l),p||(u=[re(i,"input",n[10]),re(i,"blur",n[7])],p=!0)},p(a,l){l&4&&_t(i.value)!==a[2]&&We(i,a[2]),a[3]?h&&(h.d(1),h=null):h||(h=st(),h.c(),h.m(f.parentNode,f))},d(a){a&&I(t),a&&I(d),h&&h.d(a),a&&I(f),p=!1,ct(u)}}}function st(n){let t,s;return{c(){t=B("h2"),s=Me("Click on a jewel socket"),this.h()},l(c){t=U(c,"H2",{class:!0});var _=V(t);s=Ne(_,"Click on a jewel socket"),_.forEach(I),this.h()},h(){J(t,"class","mt-4")},m(c,_){O(c,t,_),H(t,s)},d(c){c&&I(t)}}}function $t(n){let t,s,c,_,i,d,f,p;function u(l){n[8](l)}let h={items:n[5]};n[0]!==void 0&&(h.value=n[0]),i=new pt({props:h}),Se.push(()=>ut(i,"value",u)),i.$on("select",n[7]);let a=n[0]&&et(n);return{c(){t=B("div"),s=B("h3"),c=Me("Timeless Jewel"),_=te(),he(i.$$.fragment),f=te(),a&&a.c(),this.h()},l(l){t=U(l,"DIV",{class:!0});var r=V(t);s=U(r,"H3",{class:!0});var g=V(s);c=Ne(g,"Timeless Jewel"),g.forEach(I),_=se(r),_e(i.$$.fragment,r),f=se(r),a&&a.l(r),r.forEach(I),this.h()},h(){J(s,"class","mb-2"),J(t,"class","w-screen md:w-1/2 lg:w-1/3 xl:w-1/4 2xl:w-1/5 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed p-4 rounded-br-lg")},m(l,r){O(l,t,r),H(t,s),H(s,c),H(t,_),pe(i,t,null),H(t,f),a&&a.m(t,null),p=!0},p(l,r){const g={};!d&&r&1&&(d=!0,g.value=l[0],ht(()=>d=!1)),i.$set(g),l[0]?a?(a.p(l,r),r&1&&D(a,1)):(a=et(l),a.c(),D(a,1),a.m(t,null)):a&&(at(),K(a,1,1,()=>{a=null}),ft())},i(l){p||(D(i.$$.fragment,l),D(a),p=!0)},o(l){K(i.$$.fragment,l),K(a),p=!1},d(l){l&&I(t),me(i),a&&a.d()}}}function es(n){var c,_;let t,s;return t=new xt({props:{clickNode:n[6],circledNode:n[3],selectedJewel:(c=n[0])==null?void 0:c.value,selectedConqueror:(_=n[1])==null?void 0:_.value,seed:n[2],$$slots:{default:[$t]},$$scope:{ctx:n}}}),{c(){he(t.$$.fragment)},l(i){_e(t.$$.fragment,i)},m(i,d){pe(t,i,d),s=!0},p(i,[d]){var p,u;const f={};d&8&&(f.circledNode=i[3]),d&1&&(f.selectedJewel=(p=i[0])==null?void 0:p.value),d&2&&(f.selectedConqueror=(u=i[1])==null?void 0:u.value),d&4&&(f.seed=i[2]),d&8223&&(f.$$scope={dirty:d,ctx:i}),t.$set(f)},i(i){s||(D(t.$$.fragment,i),s=!0)},o(i){K(t.$$.fragment,i),s=!1},d(i){me(t,i)}}}function ts(n,t,s){let c,_;dt(n,Lt,m=>s(11,_=m));const i=_.url.searchParams,d=Object.keys(TimelessJewels).map(m=>({value:parseInt(m),label:TimelessJewels[m]}));let f=i.has("jewel")?d.find(m=>m.value==i.get("jewel")):void 0,p=i.has("conqueror")?{value:i.get("conqueror"),label:i.get("conqueror")}:void 0,u=i.has("seed")?parseInt(i.get("seed")):0,h=i.has("location")?parseInt(i.get("location")):void 0;const a=m=>{m.isJewelSocket&&(s(3,h=m.skill),l())},l=()=>{{const m={};f&&(m.jewel=f.value),p&&(m.conqueror=p.value),u&&(m.seed=u),h&&(m.location=h);const Q=Object.keys(m).map(W=>W+"="+encodeURIComponent(m[W])).join("&");Tt(_.url.pathname+"?"+Q)}};function r(m){f=m,s(0,f)}function g(m){p=m,s(1,p)}function E(){u=_t(this.value),s(2,u)}return n.$$.update=()=>{n.$$.dirty&1&&s(4,c=f?TimelessJewelConquerors[f.value].map(m=>({value:m,label:m})):[])},[f,p,u,h,c,d,a,l,r,g,E]}class os extends Ee{constructor(t){super(),Ie(this,t,ts,es,Pe,{})}}export{os as default};
