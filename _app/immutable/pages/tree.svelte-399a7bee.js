import{a9 as zl,R as se,aa as Nl,S as et,i as tt,s as lt,I as dt,e as T,k as L,c as y,a as R,d as p,m as U,b as v,f as Tt,g as j,ab as Cl,J as ht,K as mt,L as _t,q,o as K,r as Ml,v as bl,ac as Rt,N as rt,E as Ke,a8 as Ol,w as ze,x as Ne,y as Ce,M as b,B as Me,l as we,n as je,p as Je,G as st,V as Ee,ad as Dl,t as J,h as V,j as ge,U as gt,a2 as jl,a3 as Jl,X as Vl,W as nt,P as vl,T as Be,O as Sl,Q as Ge}from"../chunks/index-7969860d.js";import{r as Ll,d as Ul}from"../chunks/index-3d8bec42.js";import{g as Re,b as ql,a as $e,d as At,t as Dt,c as xe,o as jt,e as It,f as Jt,i as Vt,h as Lt,j as Fl,k as Ut,m as ot,n as kl,p as Bl,s as Gl,q as Kl}from"../chunks/worker-3ca473bf.js";import{g as Hl,S as zt,p as Wl}from"../chunks/stores-0b2c0e1d.js";import"../chunks/singletons-cdeec3fd.js";const Yl=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function Xl(){const l=zl();return e=>{const t=Yl.map(i=>se(e,i,n=>Nl(l,n)));return{destroy:()=>t.forEach(i=>i())}}}class Ql{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:e,render:t}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,t),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.needsRedraw=!0}render({autoclear:e,pixelRatio:t,context:i,width:n,height:s}){const r={context:i,width:n,height:s};if(this.needsResize&&(i.setTransform(t,0,0,t,0,0),this.needsResize=!1),this.needsSetup){for(const[f,o]of this.setups)o(r),this.setups.delete(f);this.needsSetup=!1}if(this.needsRedraw){e&&i.clearRect(0,0,n,s);for(const f of this.layerSequence)this.renderers.get(f)(r);this.needsRedraw=!1}}}function Zl(l){let e,t,i,n,s,r,f,o,a;const m=l[13].default,_=dt(m,l,l[12],null);return{c(){e=T("canvas"),s=L(),r=T("div"),_&&_.c(),this.h()},l(d){e=y(d,"CANVAS",{style:!0,width:!0,height:!0}),R(e).forEach(p),s=U(d),r=y(d,"DIV",{style:!0});var h=R(r);_&&_.l(h),h.forEach(p),this.h()},h(){v(e,"style",t="display: block; width: "+l[1]+"px; height: "+l[2]+"px;"+(l[3]?` ${l[3]}`:"")),v(e,"width",i=l[1]*l[0]),v(e,"height",n=l[2]*l[0]),Tt(r,"display","none")},m(d,h){j(d,e,h),l[14](e),j(d,s,h),j(d,r,h),_&&_.m(r,null),l[15](r),f=!0,o||(a=Cl(l[6].call(null,e)),o=!0)},p(d,[h]){(!f||h&14&&t!==(t="display: block; width: "+d[1]+"px; height: "+d[2]+"px;"+(d[3]?` ${d[3]}`:"")))&&v(e,"style",t),(!f||h&3&&i!==(i=d[1]*d[0]))&&v(e,"width",i),(!f||h&5&&n!==(n=d[2]*d[0]))&&v(e,"height",n),_&&_.p&&(!f||h&4096)&&ht(_,m,d,d[12],f?_t(m,d[12],h,null):mt(d[12]),null)},i(d){f||(q(_,d),f=!0)},o(d){K(_,d),f=!1},d(d){d&&p(e),l[14](null),d&&p(s),d&&p(r),_&&_.d(d),l[15](null),o=!1,a()}}}const Il={};function xl(l,e,t){let{$$slots:i={},$$scope:n}=e,{width:s=640,height:r=640,pixelRatio:f=void 0,style:o=null,autoclear:a=!0}=e,m,_,d,h,u;const c=Xl(),w=new Ql;function N(){w.redraw()}function C(){return m}function z(){return _}f===void 0&&(typeof window=="undefined"?f=2:f=window.devicePixelRatio);function M(){w.render({context:_,width:s,height:r,pixelRatio:f,autoclear:a}),d=window.requestAnimationFrame(M)}Ml(Il,{register:w.register,unregister:w.unregister,redraw:w.redraw}),bl(()=>{_=m.getContext("2d"),u=new MutationObserver(I),u.observe(h,{childList:!0}),I(),M();function I(){const P=[...h.children].map(B=>+B.dataset.layerId);t(11,w.layerSequence=P,w),w.redraw()}}),Rt(()=>{typeof window!="undefined"&&(window.cancelAnimationFrame(d),u.disconnect())});function S(I){rt[I?"unshift":"push"](()=>{m=I,t(4,m)})}function A(I){rt[I?"unshift":"push"](()=>{h=I,t(5,h)})}return l.$$set=I=>{"width"in I&&t(1,s=I.width),"height"in I&&t(2,r=I.height),"pixelRatio"in I&&t(0,f=I.pixelRatio),"style"in I&&t(3,o=I.style),"autoclear"in I&&t(7,a=I.autoclear),"$$scope"in I&&t(12,n=I.$$scope)},l.$$.update=()=>{l.$$.dirty&2183&&w.resize()},[f,s,r,o,m,h,c,a,N,C,z,w,n,i,S,A]}class $l extends et{constructor(e){super(),tt(this,e,xl,Zl,lt,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function es(l){let e;return{c(){e=T("div"),this.h()},l(t){e=y(t,"DIV",{"data-layer-id":!0}),R(e).forEach(p),this.h()},h(){v(e,"data-layer-id",l[0])},m(t,i){j(t,e,i)},p:Ke,i:Ke,o:Ke,d(t){t&&p(e)}}}function ts(l,e,t){const{register:i,unregister:n,redraw:s}=Ol(Il);let{setup:r=void 0,render:f=()=>{}}=e;if(typeof r!="function"&&r!==void 0)throw new Error("setup must be a function");if(typeof f!="function")throw new Error("render must be a function");const o=i({setup:r,render:f});return Rt(()=>n(o)),l.$$set=a=>{"setup"in a&&t(1,r=a.setup),"render"in a&&t(2,f=a.render)},l.$$.update=()=>{l.$$.dirty&4&&s()},[o,r,f]}class ls extends et{constructor(e){super(),tt(this,e,ts,es,lt,{setup:1,render:2})}}let qt;const El=Date.now();function Tl(l){return l(Date.now()-El),qt=window.requestAnimationFrame(()=>Tl(l)),()=>window.cancelAnimationFrame(qt)}function ss(){}var is=Ll(Date.now()-El,typeof window=="undefined"?ss:Tl);const{window:Pt}=Dl;function Ft(l){let e,t,i,n,s,r;t=new $l({props:{width:l[0],height:l[1],$$slots:{default:[ns]},$$scope:{ctx:l}}}),t.$on("pointerdown",l[17]),t.$on("wheel",l[20]);const f=l[49].default,o=dt(f,l,l[50],null);return{c(){e=T("div"),ze(t.$$.fragment),i=L(),o&&o.c(),this.h()},l(a){e=y(a,"DIV",{style:!0});var m=R(e);Ne(t.$$.fragment,m),i=U(m),o&&o.l(m),m.forEach(p),this.h()},h(){Tt(e,"touch-action","none"),Tt(e,"cursor",l[2])},m(a,m){j(a,e,m),Ce(t,e,null),b(e,i),o&&o.m(e,null),n=!0,s||(r=se(e,"resize",l[21]),s=!0)},p(a,m){const _={};m[0]&1&&(_.width=a[0]),m[0]&2&&(_.height=a[1]),m[0]&8|m[1]&524288&&(_.$$scope={dirty:m,ctx:a}),t.$set(_),o&&o.p&&(!n||m[1]&524288)&&ht(o,f,a,a[50],n?_t(f,a[50],m,null):mt(a[50]),null),(!n||m[0]&4)&&Tt(e,"cursor",a[2])},i(a){n||(q(t.$$.fragment,a),q(o,a),n=!0)},o(a){K(t.$$.fragment,a),K(o,a),n=!1},d(a){a&&p(e),Me(t),o&&o.d(a),s=!1,r()}}}function ns(l){let e,t;return e=new ls({props:{render:l[3]}}),{c(){ze(e.$$.fragment)},l(i){Ne(e.$$.fragment,i)},m(i,n){Ce(e,i,n),t=!0},p(i,n){const s={};n[0]&8&&(s.render=i[3]),e.$set(s)},i(i){t||(q(e.$$.fragment,i),t=!0)},o(i){K(e.$$.fragment,i),t=!1},d(i){Me(e,i)}}}function rs(l){let e,t,i,n,s=l[0]&&l[1]&&Ft(l);return{c(){s&&s.c(),e=we()},l(r){s&&s.l(r),e=we()},m(r,f){s&&s.m(r,f),j(r,e,f),t=!0,i||(n=[se(Pt,"pointerup",l[18]),se(Pt,"pointermove",l[19]),se(Pt,"resize",l[21])],i=!0)},p(r,f){r[0]&&r[1]?s?(s.p(r,f),f[0]&3&&q(s,1)):(s=Ft(r),s.c(),q(s,1),s.m(e.parentNode,e)):s&&(je(),K(s,1,1,()=>{s=null}),Je())},i(r){t||(q(s),t=!0)},o(r){K(s),t=!1},d(r){s&&s.d(r),r&&p(e),i=!1,st(n)}}}const Bt="25px Roboto Mono",Gt="17px Roboto Mono",it=2.6;function os(l,e,t){let i,n,s,r,f,o,a,m,_,d,h,u,c,w,N,{$$slots:C={},$$scope:z}=e,{clickNode:M}=e,{circledNode:S}=e,{selectedJewel:A}=e,{selectedConqueror:I}=e,{seed:P}=e,{highlighted:B=[]}=e,{disabled:H=[]}=e;const fe=Ul(is,g=>!B||!B.length?0:Math.round(g/40));Ee(l,fe,g=>t(36,s=g));const Z=[427,320,226,227,323,422,329];let D=10,x=0,ee=0;const Y=(g,ce,ye)=>{const ae=ce.width/D*it,ne=ce.height/D*it,de=ye.x-ae/2,ke=ye.y-ne/2;g.drawImage(ce,de,ke,ae,ne)},W=(g,ce,ye)=>{const ae=ce.width/D*it,ne=ce.height/D*it,de=ye.x-ae/2,ke=ye.y-ne/2,Xe=ke-ne/2;g.drawImage(ce,de,Xe,ae,ne),g.save(),g.translate(de,ke),g.rotate(Math.PI),g.drawImage(ce,-ae,-(ne/2),ae,-ne),g.restore()},ue={},pe={},le=(g,ce,ye,ae=!1)=>{let ne=ae?Fl[ce]:Ut[ce];!ne&&ae&&(ne=Ut[ce]);const de=ne.filename;de in(ae?pe:ue)||((ae?pe:ue)[de]=new Image,(ae?pe:ue)[de].src=de);const ke=ne.coords[ce],Xe=ke.w/D*it,kt=ke.h/D*it,Ie=ye.x-Xe/2,G=ye.y-kt/2;g.drawImage((ae?pe:ue)[de],ke.x,ke.y,ke.w,ke.h,Ie,G,Xe,kt)},O=(g,ce,ye)=>{const ae=[];let ne="";return g.split(" ").forEach(de=>{ce.measureText(ne+de).width<ye?ne+=" "+de:(ae.push(ne.trim()),ne=de)}),ne.length>0&&ae.push(ne.trim()),ae};let F={x:Number.MIN_VALUE,y:Number.MIN_VALUE},X="unset";const E=Re("PSGroupBackground1");Ee(l,E,g=>t(48,N=g));const $=Re("PSGroupBackground2");Ee(l,$,g=>t(47,w=g));const oe=Re("PSGroupBackground3");Ee(l,oe,g=>t(46,c=g));const ie=Re("KeystoneFrameAllocated");Ee(l,ie,g=>t(45,u=g));const me=Re("KeystoneFrameUnallocated");Ee(l,me,g=>t(44,h=g));const Oe=Re("NotableFrameAllocated");Ee(l,Oe,g=>t(43,d=g));const be=Re("NotableFrameUnallocated");Ee(l,be,g=>t(42,_=g));const De=Re("JewelSocketAltNormal");Ee(l,De,g=>t(41,m=g));const He=Re("JewelFrameAllocated");Ee(l,He,g=>t(40,a=g));const We=Re("JewelFrameUnallocated");Ee(l,We,g=>t(39,o=g));const Ue=Re("PSSkillFrameActive");Ee(l,Ue,g=>t(38,f=g));const wt=Re("PSSkillFrame");Ee(l,wt,g=>t(37,r=g));let Se,pt=0,bt=0,vt=0,St=0,k=!1;const Q=g=>{k=!0,pt=g.offsetX,bt=g.offsetY,vt=x,St=ee,t(32,F={x:g.offsetX,y:g.offsetY}),Se&&M(Se)},Te=g=>{g.type==="pointerup"&&(k=!1),t(32,F={x:g.offsetX,y:g.offsetY})},qe=g=>{k&&(t(30,x=vt-(pt-g.offsetX)*D),t(31,ee=St-(bt-g.offsetY)*D)),t(32,F={x:g.offsetX,y:g.offsetY})},Ye=g=>{g.deltaY>0?D<30&&(t(30,x+=g.offsetX),t(31,ee+=g.offsetY)):D>3&&(t(30,x-=g.offsetX),t(31,ee-=g.offsetY)),t(29,D=Math.min(30,Math.max(3,D+g.deltaY/100))),g.preventDefault(),g.stopPropagation(),g.stopImmediatePropagation()};let at=0,Nt=0;const Ct=()=>{t(0,at=window.innerWidth),t(1,Nt=window.innerHeight)};let yt=!1;return l.$$set=g=>{"clickNode"in g&&t(22,M=g.clickNode),"circledNode"in g&&t(23,S=g.circledNode),"selectedJewel"in g&&t(24,A=g.selectedJewel),"selectedConqueror"in g&&t(25,I=g.selectedConqueror),"seed"in g&&t(26,P=g.seed),"highlighted"in g&&t(27,B=g.highlighted),"disabled"in g&&t(28,H=g.disabled),"$$scope"in g&&t(50,z=g.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&536870912&&t(35,i=ql/D),l.$$.dirty[0]&536870912|l.$$.dirty[1]&8&&(!yt&&$e&&(t(34,yt=!0),t(30,x=$e.min_x+window.innerWidth/2*D),t(31,ee=$e.min_y+window.innerHeight/2*D)),Ct()),l.$$.dirty[0]&2139095040|l.$$.dirty[1]&262135&&t(3,n=({context:g,width:ce,height:ye})=>{const ae=window.performance.now();g.clearRect(0,0,ce,ye),g.fillStyle="#080c11",g.fillRect(0,0,ce,ye);const ne={};Object.keys(At).forEach(Ie=>{const G=At[Ie],te=Dt(G.x,G.y,x,ee,D),_e=Math.max(...G.orbits);Z.indexOf(parseInt(Ie))>=0||(_e==1?Y(g,N,te):_e==2?Y(g,w,te):(_e==3||G.orbits.length>1)&&W(g,c,te))}),Object.keys(xe).forEach(Ie=>{var re;const G=xe[Ie],te=jt(G.orbit,G.orbitIndex),_e=It(G,x,ee,D);(re=G.out)==null||re.forEach(Qe=>{if(!xe[parseInt(Qe)])return;const Ve=Math.min(parseInt(Qe),parseInt(Ie)),ft=Math.max(parseInt(Qe),parseInt(Ie)),he=Ve+":"+ft;if(he in ne)return;ne[he]=!0;const ve=xe[parseInt(Qe)];if(!ve||ve.isMastery)return;const Ze=jt(ve.orbit,ve.orbitIndex),Fe=It(ve,x,ee,D);if(g.beginPath(),G.group!=ve.group||G.orbit!=ve.orbit)g.moveTo(_e.x,_e.y),g.lineTo(Fe.x,Fe.y);else{let Pe=Math.PI/180-Math.PI/180*te,Ae=Math.PI/180-Math.PI/180*Ze;Pe-=Math.PI/2,Ae-=Math.PI/2;const ut=Math.abs(Math.max(Pe,Ae)-Math.min(Pe,Ae)),Pl=ut>Math.PI?Math.max(Pe,Ae):Math.min(Pe,Ae),Rl=ut>Math.PI?Math.min(Pe,Ae):Math.max(Pe,Ae),Mt=At[G.group],Ot=Dt(Mt.x,Mt.y,x,ee,D);g.arc(Ot.x,Ot.y,$e.constants.orbitRadii[G.orbit]/D+1,Pl,Rl)}g.lineWidth=6/D,g.strokeStyle="#524518",g.stroke()})});let de;S&&(de=It(xe[S],x,ee,D),g.strokeStyle="#ad2b2b");let ke=!1,Xe;if(Object.keys(xe).forEach(Ie=>{const G=xe[Ie],te=It(G,x,ee,D);let _e=0,re=!1;S&&Jt(te,de)<i&&(re=!0),H.indexOf(G.skill)>=0&&(re=!1),G.isKeystone?(_e=110,le(g,G.icon,te,re),re?Y(g,u,te):Y(g,h,te)):G.isNotable?(_e=70,le(g,G.icon,te,re),re?Y(g,d,te):Y(g,_,te)):G.isJewelSocket?(_e=70,G.expansionJewel?Y(g,m,te):re?Y(g,a,te):Y(g,o,te)):G.isMastery?le(g,G.inactiveIcon,te,re):(_e=50,le(g,G.icon,te,re),re?Y(g,f,te):Y(g,r,te)),B.indexOf(G.skill)>=0&&(g.strokeStyle=`hsl(${s}, 100%, 50%)`,g.lineWidth=3,g.beginPath(),g.arc(te.x,te.y,(_e+30)/D,0,Math.PI*2),g.stroke()),Jt(te,F)<_e/D&&(Xe=G,ke=re)}),t(33,Se=Xe),S&&(g.strokeStyle="#ad2b2b",g.lineWidth=1,g.beginPath(),g.arc(de.x,de.y,i,0,Math.PI*2),g.stroke()),Se){let Ie=Se.name,G=(Se.stats||[]).map(he=>({text:he,special:!1}));if(!Se.isJewelSocket&&ke&&Se.skill&&P&&A&&I){const he=Calculate(TreeToPassive[Se.skill],P,A,I);if(he){if("alternatePassiveSkill"in he){const ve=GetAlternatePassiveSkillByIndex(he.alternatePassiveSkill);G=[],Ie=ve.name,"statsKeys"in ve&&ve.statsKeys.forEach((Ze,Fe)=>{const Pe=GetStatByIndex(Ze),Ae=Vt[Pe.id]||"";Ae&&G.push({text:Lt(Ae,he.statRolls[Fe])||Pe.id,special:!0})})}"alternatePassiveAdditionInformations"in he&&he.alternatePassiveAdditionInformations.length>0&&he.alternatePassiveAdditionInformations.forEach(ve=>{const Ze=GetAlternatePassiveAdditionByIndex(ve.alternatePassiveSkillAddition);"statsKeys"in Ze&&Ze.statsKeys.forEach((Fe,Pe)=>{const Ae=GetStatByIndex(Fe),ut=Vt[Ae.id]||"";ut&&G.push({text:Lt(ut,ve.statRolls[Pe])||Ae.id,special:!0})})})}}g.font=Bt;const te=g.measureText(Ie),_e=Math.max(te.width+50,600);g.font=Gt;const re=[],Qe=30;let Ve=85;G&&G.length>0?G.forEach(he=>{re.length>0&&(Ve+=5),he.text.split(`
`).forEach(ve=>{re.length>0&&(Ve+=10),O(ve,g,_e-Qe).forEach(Fe=>{re.push({text:Fe,offset:Ve,special:he.special}),Ve+=20})})}):Se.isJewelSocket&&(re.push({text:"Click to select this socket",offset:Ve,special:!0}),Ve+=20);const ft=55;g.fillStyle="rgba(75,63,24,0.9)",g.fillRect(F.x,F.y,_e,ft),g.fillStyle="#ffffff",g.font=Bt,g.textAlign="center",g.fillText(Ie,F.x+_e/2,F.y+35),g.fillStyle="rgba(0,0,0,0.8)",g.fillRect(F.x,F.y+ft,_e,Ve-ft),g.font=Gt,g.textAlign="left",re.forEach(he=>{he.special?g.fillStyle="#8cf34c":g.fillStyle="#ffffff",g.fillText(he.text,F.x+Qe/2,F.y+he.offset)})}Se&&Se.isJewelSocket?t(2,X="pointer"):t(2,X="unset"),g.fillStyle="#ffffff",g.textAlign="right",g.font="12px Roboto Mono";const kt=window.performance.now();g.fillText(`${(kt-ae).toFixed(1)}ms`,ce-5,17)})},[at,Nt,X,n,fe,E,$,oe,ie,me,Oe,be,De,He,We,Ue,wt,Q,Te,qe,Ye,Ct,M,S,A,I,P,B,H,D,x,ee,F,Se,yt,i,s,r,f,o,a,m,_,d,h,u,c,w,N,C,z]}class as extends et{constructor(e){super(),tt(this,e,os,rs,lt,{clickNode:22,circledNode:23,selectedJewel:24,selectedConqueror:25,seed:26,highlighted:27,disabled:28},null,[-1,-1,-1])}}function Kt(l,e,t){const i=l.slice();return i[6]=e[t],i}function Ht(l,e,t){const i=l.slice();return i[9]=e[t],i}function Wt(l){let e,t=ot(l[9],l[6].stats[l[9]])+"",i;return{c(){e=T("li"),i=J(t)},l(n){e=y(n,"LI",{});var s=R(e);i=V(s,t),s.forEach(p)},m(n,s){j(n,e,s),b(e,i)},p(n,s){s&2&&t!==(t=ot(n[9],n[6].stats[n[9]])+"")&&ge(i,t)},d(n){n&&p(e)}}}function Yt(l){let e,t,i=$e.nodes[l[6].passive].name+"",n,s,r=l[6].passive+"",f,o,a,m,_,d=Object.keys(l[6].stats),h=[];for(let u=0;u<d.length;u+=1)h[u]=Wt(Ht(l,d,u));return{c(){e=T("div"),t=T("span"),n=J(i),s=J(" ("),f=J(r),o=J(")"),a=L(),m=T("ul");for(let u=0;u<h.length;u+=1)h[u].c();_=L(),this.h()},l(u){e=y(u,"DIV",{class:!0});var c=R(e);t=y(c,"SPAN",{});var w=R(t);n=V(w,i),s=V(w," ("),f=V(w,r),o=V(w,")"),w.forEach(p),a=U(c),m=y(c,"UL",{class:!0});var N=R(m);for(let C=0;C<h.length;C+=1)h[C].l(N);N.forEach(p),_=U(c),c.forEach(p),this.h()},h(){v(m,"class","list-disc pl-6 font-bold"),v(e,"class","mt-2")},m(u,c){j(u,e,c),b(e,t),b(t,n),b(t,s),b(t,f),b(t,o),b(e,a),b(e,m);for(let w=0;w<h.length;w+=1)h[w].m(m,null);b(e,_)},p(u,c){if(c&2&&i!==(i=$e.nodes[u[6].passive].name+"")&&ge(n,i),c&2&&r!==(r=u[6].passive+"")&&ge(f,r),c&2){d=Object.keys(u[6].stats);let w;for(w=0;w<d.length;w+=1){const N=Ht(u,d,w);h[w]?h[w].p(N,c):(h[w]=Wt(N),h[w].c(),h[w].m(m,null))}for(;w<h.length;w+=1)h[w].d(1);h.length=d.length}},d(u){u&&p(e),gt(h,u)}}}function fs(l){let e,t,i,n,s,r,f,o=l[1].seed+"",a,m,_=l[1].weight+"",d,h,u,c,w,N,C,z,M=l[1].skills,S=[];for(let A=0;A<M.length;A+=1)S[A]=Yt(Kt(l,M,A));return{c(){e=T("div"),t=T("div"),i=T("button"),n=J("Trade"),s=L(),r=T("div"),f=J("Seed "),a=J(o),m=J(" (weight "),d=J(_),h=J(")"),u=L(),c=T("button"),w=J("Trade"),N=L();for(let A=0;A<S.length;A+=1)S[A].c();this.h()},l(A){e=y(A,"DIV",{class:!0});var I=R(e);t=y(I,"DIV",{class:!0});var P=R(t);i=y(P,"BUTTON",{class:!0});var B=R(i);n=V(B,"Trade"),B.forEach(p),s=U(P),r=y(P,"DIV",{class:!0});var H=R(r);f=V(H,"Seed "),a=V(H,o),m=V(H," (weight "),d=V(H,_),h=V(H,")"),H.forEach(p),u=U(P),c=y(P,"BUTTON",{class:!0});var fe=R(c);w=V(fe,"Trade"),fe.forEach(p),P.forEach(p),N=U(I);for(let Z=0;Z<S.length;Z+=1)S[Z].l(I);I.forEach(p),this.h()},h(){v(i,"class","px-3 invisible"),v(r,"class","font-bold text-orange-500 text-center"),v(c,"class","px-3 bg-blue-500/40 rounded"),v(t,"class","flex flex-row justify-between"),v(e,"class","my-2 border-white/50 border p-2 flex flex-col cursor-pointer")},m(A,I){j(A,e,I),b(e,t),b(t,i),b(i,n),b(t,s),b(t,r),b(r,f),b(r,a),b(r,m),b(r,d),b(r,h),b(t,u),b(t,c),b(c,w),b(e,N);for(let P=0;P<S.length;P+=1)S[P].m(e,null);C||(z=[se(c,"click",l[4]),se(e,"click",l[5])],C=!0)},p(A,[I]){if(I&2&&o!==(o=A[1].seed+"")&&ge(a,o),I&2&&_!==(_=A[1].weight+"")&&ge(d,_),I&2){M=A[1].skills;let P;for(P=0;P<M.length;P+=1){const B=Kt(A,M,P);S[P]?S[P].p(B,I):(S[P]=Yt(B),S[P].c(),S[P].m(e,null))}for(;P<S.length;P+=1)S[P].d(1);S.length=M.length}},i:Ke,o:Ke,d(A){A&&p(e),gt(S,A),C=!1,st(z)}}}function us(l,e,t){let{highlight:i}=e,{set:n}=e,{jewel:s}=e,{conqueror:r}=e;const f=()=>kl(s,r,[n]),o=()=>i(n.seed,n.skills.map(a=>a.passive));return l.$$set=a=>{"highlight"in a&&t(0,i=a.highlight),"set"in a&&t(1,n=a.set),"jewel"in a&&t(2,s=a.jewel),"conqueror"in a&&t(3,r=a.conqueror)},[i,n,s,r,f,o]}class yl extends et{constructor(e){super(),tt(this,e,us,fs,lt,{highlight:0,set:1,jewel:2,conqueror:3})}}const Et={AUTO:"auto",START:"start",CENTER:"center",END:"end"},Le={HORIZONTAL:"horizontal",VERTICAL:"vertical"},ct={OBSERVED:0,REQUESTED:1},cs={[Le.VERTICAL]:"top",[Le.HORIZONTAL]:"left"},Xt={[Le.VERTICAL]:"scrollTop",[Le.HORIZONTAL]:"scrollLeft"};class ds{constructor({itemSize:e,itemCount:t,estimatedItemSize:i}){this.itemSize=e,this.itemCount=t,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:t,estimatedItemSize:i}){t!=null&&(this.itemCount=t),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:t}=this;return typeof t=="function"?t(e):Array.isArray(t)?t[e]:t}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.itemCount;t++){const i=this.getSize(t),n=e;e+=i,this.itemSizeAndPositionData[t]={offset:n,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let i=t.offset+t.size;for(let n=this.lastMeasuredIndex+1;n<=e;n++){const s=this.getSize(n);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${n} of value ${s}`);this.itemSizeAndPositionData[n]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=Et.START,containerSize:t,currentOffset:i,targetIndex:n}){if(t<=0)return 0;const s=this.getSizeAndPositionForIndex(n),r=s.offset,f=r-t+s.size;let o;switch(e){case Et.END:o=f;break;case Et.CENTER:o=r-(t-s.size)/2;break;case Et.START:o=r;break;default:o=Math.max(f,Math.min(r,i))}const a=this.getTotalSize();return Math.max(0,Math.min(a-t,o))}getVisibleRange({containerSize:e=0,offset:t,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=t+e;let r=this.findNearestItem(t);if(r===void 0)throw Error(`Invalid offset ${t} specified`);const f=this.getSizeAndPositionForIndex(r);t=f.offset+f.size;let o=r;for(;t<s&&o<this.itemCount-1;)o++,t+=this.getSizeAndPositionForIndex(o).size;return i&&(r=Math.max(0,r-i),o=Math.min(o+i,this.itemCount-1)),{start:r,stop:o}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:t,offset:i}){let n=0,s=0;for(;e<=t;){if(n=e+Math.floor((t-e)/2),s=this.getSizeAndPositionForIndex(n).offset,s===i)return n;s<i?e=n+1:s>i&&(t=n-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:t}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<t;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:t})}}const hs=l=>({}),Qt=l=>({});function Zt(l,e,t){const i=l.slice();return i[37]=e[t],i}const ms=l=>({style:l[0]&4,index:l[0]&4}),xt=l=>({style:l[37].style,index:l[37].index}),_s=l=>({}),$t=l=>({});function el(l,e){let t,i;const n=e[21].item,s=dt(n,e,e[20],xt);return{key:l,first:null,c(){t=we(),s&&s.c(),this.h()},l(r){t=we(),s&&s.l(r),this.h()},h(){this.first=t},m(r,f){j(r,t,f),s&&s.m(r,f),i=!0},p(r,f){e=r,s&&s.p&&(!i||f[0]&1048580)&&ht(s,n,e,e[20],i?_t(n,e[20],f,ms):mt(e[20]),xt)},i(r){i||(q(s,r),i=!0)},o(r){K(s,r),i=!1},d(r){r&&p(t),s&&s.d(r)}}}function gs(l){let e,t,i,n=[],s=new Map,r,f;const o=l[21].header,a=dt(o,l,l[20],$t);let m=l[2];const _=u=>u[0]?u[0](u[37].index):u[37].index;for(let u=0;u<m.length;u+=1){let c=Zt(l,m,u),w=_(c);s.set(w,n[u]=el(w,c))}const d=l[21].footer,h=dt(d,l,l[20],Qt);return{c(){e=T("div"),a&&a.c(),t=L(),i=T("div");for(let u=0;u<n.length;u+=1)n[u].c();r=L(),h&&h.c(),this.h()},l(u){e=y(u,"DIV",{class:!0,style:!0});var c=R(e);a&&a.l(c),t=U(c),i=y(c,"DIV",{class:!0,style:!0});var w=R(i);for(let N=0;N<n.length;N+=1)n[N].l(w);w.forEach(p),r=U(c),h&&h.l(c),c.forEach(p),this.h()},h(){v(i,"class","virtual-list-inner svelte-1d4hv8l"),v(i,"style",l[4]),v(e,"class","virtual-list-wrapper svelte-1d4hv8l"),v(e,"style",l[3])},m(u,c){j(u,e,c),a&&a.m(e,null),b(e,t),b(e,i);for(let w=0;w<n.length;w+=1)n[w].m(i,null);b(e,r),h&&h.m(e,null),l[22](e),f=!0},p(u,c){a&&a.p&&(!f||c[0]&1048576)&&ht(a,o,u,u[20],f?_t(o,u[20],c,_s):mt(u[20]),$t),c[0]&1048581&&(m=u[2],je(),n=jl(n,c,_,1,u,m,s,i,Jl,el,null,Zt),Je()),(!f||c[0]&16)&&v(i,"style",u[4]),h&&h.p&&(!f||c[0]&1048576)&&ht(h,d,u,u[20],f?_t(d,u[20],c,hs):mt(u[20]),Qt),(!f||c[0]&8)&&v(e,"style",u[3])},i(u){if(!f){q(a,u);for(let c=0;c<m.length;c+=1)q(n[c]);q(h,u),f=!0}},o(u){K(a,u);for(let c=0;c<n.length;c+=1)K(n[c]);K(h,u),f=!1},d(u){u&&p(e),a&&a.d(u);for(let c=0;c<n.length;c+=1)n[c].d();h&&h.d(u),l[22](null)}}}const ws=(()=>{let l=!1;try{const e=Object.defineProperty({},"passive",{get(){return l={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return l})();function ps(l,e,t){let{$$slots:i={},$$scope:n}=e,{height:s}=e,{width:r="100%"}=e,{itemCount:f}=e,{itemSize:o}=e,{estimatedItemSize:a=null}=e,{stickyIndices:m=null}=e,{getKey:_=null}=e,{scrollDirection:d=Le.VERTICAL}=e,{scrollOffset:h=null}=e,{scrollToIndex:u=null}=e,{scrollToAlignment:c=null}=e,{scrollToBehaviour:w="instant"}=e,{overscanCount:N=3}=e;const C=Vl(),z=new ds({itemCount:f,itemSize:o,estimatedItemSize:O()});let M=!1,S,A=[],I={offset:h||u!=null&&A.length&&ue(u)||0,scrollChangeReason:ct.REQUESTED},P=I,B={scrollToIndex:u,scrollToAlignment:c,scrollOffset:h,itemCount:f,itemSize:o,estimatedItemSize:a},H={},fe="",Z="";ee(),bl(()=>{t(18,M=!0),S.addEventListener("scroll",pe,ws),h!=null?Y(h):u!=null&&Y(ue(u))}),Rt(()=>{M&&S.removeEventListener("scroll",pe)});function D(){if(!M)return;const E=B.scrollToIndex!==u||B.scrollToAlignment!==c,$=B.itemCount!==f||B.itemSize!==o||B.estimatedItemSize!==a;$&&(z.updateConfig({itemSize:o,itemCount:f,estimatedItemSize:O()}),W()),B.scrollOffset!==h?t(19,I={offset:h||0,scrollChangeReason:ct.REQUESTED}):typeof u=="number"&&(E||$)&&t(19,I={offset:ue(u,c,f),scrollChangeReason:ct.REQUESTED}),B={scrollToIndex:u,scrollToAlignment:c,scrollOffset:h,itemCount:f,itemSize:o,estimatedItemSize:a}}function x(){if(!M)return;const{offset:E,scrollChangeReason:$}=I;(P.offset!==E||P.scrollChangeReason!==$)&&ee(),P.offset!==E&&$===ct.REQUESTED&&Y(E),P=I}function ee(){const{offset:E}=I,{start:$,stop:oe}=z.getVisibleRange({containerSize:d===Le.VERTICAL?s:r,offset:E,overscanCount:N});let ie=[];const me=z.getTotalSize();d===Le.VERTICAL?(t(3,fe=`height:${s}px;width:${r};`),t(4,Z=`flex-direction:column;height:${me}px;`)):(t(3,fe=`height:${s};width:${r}px`),t(4,Z=`min-height:100%;width:${me}px;`));const Oe=m!=null&&m.length!==0;if(Oe)for(let be=0;be<m.length;be++){const De=m[be];ie.push({index:De,style:F(De,!0)})}if($!==void 0&&oe!==void 0){for(let be=$;be<=oe;be++)Oe&&m.includes(be)||ie.push({index:be,style:F(be,!1)});C("itemsUpdated",{start:$,end:oe})}t(2,A=ie)}function Y(E){"scroll"in S?S.scroll({[cs[d]]:E,behavior:w}):t(1,S[Xt[d]]=E,S)}function W(E=0){H={},z.resetItem(E),ee()}function ue(E,$=c,oe=f){return(E<0||E>=oe)&&(E=0),z.getUpdatedOffsetForIndex({align:$,containerSize:d===Le.VERTICAL?s:r,currentOffset:I.offset||0,targetIndex:E})}function pe(E){const $=le();$<0||I.offset===$||E.target!==S||(t(19,I={offset:$,scrollChangeReason:ct.OBSERVED}),C("afterScroll",{offset:$,event:E}))}function le(){return S[Xt[d]]}function O(){return a||typeof o=="number"&&o||50}function F(E,$){if(H[E])return H[E];const{size:oe,offset:ie}=z.getSizeAndPositionForIndex(E);let me;return d===Le.VERTICAL?(me=`left:0;width:100%;height:${oe}px;`,$?me+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${ie}px;margin-bottom:${-(ie+oe)}px;`:me+=`position:absolute;top:${ie}px;`):(me=`top:0;width:${oe}px;`,$?me+=`position:sticky;z-index:1;left:0;margin-left:${ie}px;margin-right:${-(ie+oe)}px;`:me+=`position:absolute;height:100%;left:${ie}px;`),H[E]=me}function X(E){rt[E?"unshift":"push"](()=>{S=E,t(1,S)})}return l.$$set=E=>{"height"in E&&t(5,s=E.height),"width"in E&&t(6,r=E.width),"itemCount"in E&&t(7,f=E.itemCount),"itemSize"in E&&t(8,o=E.itemSize),"estimatedItemSize"in E&&t(9,a=E.estimatedItemSize),"stickyIndices"in E&&t(10,m=E.stickyIndices),"getKey"in E&&t(0,_=E.getKey),"scrollDirection"in E&&t(11,d=E.scrollDirection),"scrollOffset"in E&&t(12,h=E.scrollOffset),"scrollToIndex"in E&&t(13,u=E.scrollToIndex),"scrollToAlignment"in E&&t(14,c=E.scrollToAlignment),"scrollToBehaviour"in E&&t(15,w=E.scrollToBehaviour),"overscanCount"in E&&t(16,N=E.overscanCount),"$$scope"in E&&t(20,n=E.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&29568&&D(),l.$$.dirty[0]&524288&&x(),l.$$.dirty[0]&263264&&M&&W(0)},[_,S,A,fe,Z,s,r,f,o,a,m,d,h,u,c,w,N,W,M,I,n,i,X]}class Al extends et{constructor(e){super(),tt(this,e,ps,gs,lt,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get recomputeSizes(){return this.$$.ctx[17]}}function tl(l,e,t){const i=l.slice();return i[9]=e[t],i}function bs(l){let e,t,i;return t=new Al({props:{height:"auto",overscanCount:15,itemCount:l[0].raw.length,itemSize:l[0].raw.map(l[6]),$$slots:{item:[Ss,({style:n,index:s})=>({12:n,13:s}),({style:n,index:s})=>(n?4096:0)|(s?8192:0)]},$$scope:{ctx:l}}}),{c(){e=T("div"),ze(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{class:!0});var s=R(e);Ne(t.$$.fragment,s),s.forEach(p),this.h()},h(){v(e,"class","mt-4 flex flex-col overflow-auto")},m(n,s){j(n,e,s),Ce(t,e,null),i=!0},p(n,s){const r={};s&1&&(r.itemCount=n[0].raw.length),s&1&&(r.itemSize=n[0].raw.map(n[6])),s&28699&&(r.$$scope={dirty:s,ctx:n}),t.$set(r)},i(n){i||(q(t.$$.fragment,n),i=!0)},o(n){K(t.$$.fragment,n),i=!1},d(n){n&&p(e),Me(t)}}}function vs(l){let e,t,i=Object.keys(l[0].grouped).map(l[7]).sort(il).reverse(),n=[];for(let r=0;r<i.length;r+=1)n[r]=sl(tl(l,i,r));const s=r=>K(n[r],1,1,()=>{n[r]=null});return{c(){e=T("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=y(r,"DIV",{class:!0});var f=R(e);for(let o=0;o<n.length;o+=1)n[o].l(f);f.forEach(p),this.h()},h(){v(e,"class","flex flex-col overflow-auto")},m(r,f){j(r,e,f);for(let o=0;o<n.length;o+=1)n[o].m(e,null);t=!0},p(r,f){if(f&12411){i=Object.keys(r[0].grouped).map(r[7]).sort(il).reverse();let o;for(o=0;o<i.length;o+=1){const a=tl(r,i,o);n[o]?(n[o].p(a,f),q(n[o],1)):(n[o]=sl(a),n[o].c(),q(n[o],1),n[o].m(e,null))}for(je(),o=i.length;o<n.length;o+=1)s(o);Je()}},i(r){if(!t){for(let f=0;f<i.length;f+=1)q(n[f]);t=!0}},o(r){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)K(n[f]);t=!1},d(r){r&&p(e),gt(n,r)}}}function Ss(l){let e,t,i,n;return t=new yl({props:{set:l[0].raw[l[13]],highlight:l[1],jewel:l[3],conqueror:l[4]}}),{c(){e=T("div"),ze(t.$$.fragment),this.h()},l(s){e=y(s,"DIV",{slot:!0,style:!0});var r=R(e);Ne(t.$$.fragment,r),r.forEach(p),this.h()},h(){v(e,"slot","item"),v(e,"style",i=l[12])},m(s,r){j(s,e,r),Ce(t,e,null),n=!0},p(s,r){const f={};r&8193&&(f.set=s[0].raw[s[13]]),r&2&&(f.highlight=s[1]),r&8&&(f.jewel=s[3]),r&16&&(f.conqueror=s[4]),t.$set(f),(!n||r&4096&&i!==(i=s[12]))&&v(e,"style",i)},i(s){n||(q(t.$$.fragment,s),n=!0)},o(s){K(t.$$.fragment,s),n=!1},d(s){s&&p(e),Me(t)}}}function ll(l){let e,t,i,n;return t=new Al({props:{height:"auto",overscanCount:10,itemCount:l[0].grouped[l[9]].length,itemSize:l[0].grouped[l[9]].map(l[6]),$$slots:{item:[ks,({style:s,index:r})=>({12:s,13:r}),({style:s,index:r})=>(s?4096:0)|(r?8192:0)]},$$scope:{ctx:l}}}),{c(){e=T("div"),ze(t.$$.fragment),i=L(),this.h()},l(s){e=y(s,"DIV",{class:!0});var r=R(e);Ne(t.$$.fragment,r),i=U(r),r.forEach(p),this.h()},h(){v(e,"class","flex flex-col overflow-auto min-h-[200px] mb-2")},m(s,r){j(s,e,r),Ce(t,e,null),b(e,i),n=!0},p(s,r){const f={};r&1&&(f.itemCount=s[0].grouped[s[9]].length),r&1&&(f.itemSize=s[0].grouped[s[9]].map(s[6])),r&28699&&(f.$$scope={dirty:r,ctx:s}),t.$set(f)},i(s){n||(q(t.$$.fragment,s),n=!0)},o(s){K(t.$$.fragment,s),n=!1},d(s){s&&p(e),Me(t)}}}function ks(l){let e,t,i,n;return t=new yl({props:{set:l[0].grouped[l[9]][l[13]],highlight:l[1],jewel:l[3],conqueror:l[4]}}),{c(){e=T("div"),ze(t.$$.fragment),this.h()},l(s){e=y(s,"DIV",{slot:!0,style:!0});var r=R(e);Ne(t.$$.fragment,r),r.forEach(p),this.h()},h(){v(e,"slot","item"),v(e,"style",i=l[12])},m(s,r){j(s,e,r),Ce(t,e,null),n=!0},p(s,r){const f={};r&8193&&(f.set=s[0].grouped[s[9]][s[13]]),r&2&&(f.highlight=s[1]),r&8&&(f.jewel=s[3]),r&16&&(f.conqueror=s[4]),t.$set(f),(!n||r&4096&&i!==(i=s[12]))&&v(e,"style",i)},i(s){n||(q(t.$$.fragment,s),n=!0)},o(s){K(t.$$.fragment,s),n=!1},d(s){s&&p(e),Me(t)}}}function sl(l){let e,t,i=l[9]+"",n,s,r=l[9]>1?"es":"",f,o,a=l[0].grouped[l[9]].length+"",m,_,d,h,u=l[5]===l[9]?"^":"V",c,w,N,C,z,M;function S(){return l[8](l[9])}let A=l[5]===l[9]&&ll(l);return{c(){e=T("button"),t=T("span"),n=J(i),s=J(" Match"),f=J(r),o=J(" ["),m=J(a),_=J("]"),d=L(),h=T("span"),c=J(u),w=L(),A&&A.c(),N=we(),this.h()},l(I){e=y(I,"BUTTON",{class:!0});var P=R(e);t=y(P,"SPAN",{});var B=R(t);n=V(B,i),s=V(B," Match"),f=V(B,r),o=V(B," ["),m=V(B,a),_=V(B,"]"),B.forEach(p),d=U(P),h=y(P,"SPAN",{});var H=R(h);c=V(H,u),H.forEach(p),P.forEach(p),w=U(I),A&&A.l(I),N=we(),this.h()},h(){v(e,"class","text-lg w-full p-2 px-4 bg-neutral-500/30 rounded flex flex-row justify-between mb-2")},m(I,P){j(I,e,P),b(e,t),b(t,n),b(t,s),b(t,f),b(t,o),b(t,m),b(t,_),b(e,d),b(e,h),b(h,c),j(I,w,P),A&&A.m(I,P),j(I,N,P),C=!0,z||(M=se(e,"click",S),z=!0)},p(I,P){l=I,(!C||P&1)&&i!==(i=l[9]+"")&&ge(n,i),(!C||P&1)&&r!==(r=l[9]>1?"es":"")&&ge(f,r),(!C||P&1)&&a!==(a=l[0].grouped[l[9]].length+"")&&ge(m,a),(!C||P&33)&&u!==(u=l[5]===l[9]?"^":"V")&&ge(c,u),l[5]===l[9]?A?(A.p(l,P),P&33&&q(A,1)):(A=ll(l),A.c(),q(A,1),A.m(N.parentNode,N)):A&&(je(),K(A,1,1,()=>{A=null}),Je())},i(I){C||(q(A),C=!0)},o(I){K(A),C=!1},d(I){I&&p(e),I&&p(w),A&&A.d(I),I&&p(N),z=!1,M()}}}function Is(l){let e,t,i,n;const s=[vs,bs],r=[];function f(o,a){return o[2]?0:1}return e=f(l),t=r[e]=s[e](l),{c(){t.c(),i=we()},l(o){t.l(o),i=we()},m(o,a){r[e].m(o,a),j(o,i,a),n=!0},p(o,[a]){let m=e;e=f(o),e===m?r[e].p(o,a):(je(),K(r[m],1,1,()=>{r[m]=null}),Je(),t=r[e],t?t.p(o,a):(t=r[e]=s[e](o),t.c()),q(t,1),t.m(i.parentNode,i))},i(o){n||(q(t),n=!0)},o(o){K(t),n=!1},d(o){r[e].d(o),o&&p(i)}}}const il=(l,e)=>l-e;function Es(l,e,t){let{searchResults:i}=e,{highlight:n}=e,{groupResults:s=!0}=e,{jewel:r}=e,{conqueror:f}=e;const o=d=>8+48+d.skills.reduce((h,u)=>h+32+Object.keys(u.stats).length*24,0);let a="";const m=d=>parseInt(d),_=d=>t(5,a=a===d?"":d);return l.$$set=d=>{"searchResults"in d&&t(0,i=d.searchResults),"highlight"in d&&t(1,n=d.highlight),"groupResults"in d&&t(2,s=d.groupResults),"jewel"in d&&t(3,r=d.jewel),"conqueror"in d&&t(4,f=d.conqueror)},[i,n,s,r,f,a,o,m,_]}class Ts extends et{constructor(e){super(),tt(this,e,Es,Is,lt,{searchResults:0,highlight:1,groupResults:2,jewel:3,conqueror:4})}}function nl(l,e,t){const i=l.slice();return i[57]=e[t],i[58]=e,i[59]=t,i}function rl(l,e,t){const i=l.slice();return i[54]=e[t],i}function ol(l){let e,t,i,n=l[17]?"Config":"Results",s,r,f,o=l[17]&&al(l);return{c(){e=T("div"),o&&o.c(),t=L(),i=T("button"),s=J(n),this.h()},l(a){e=y(a,"DIV",{class:!0});var m=R(e);o&&o.l(m),t=U(m),i=y(m,"BUTTON",{class:!0});var _=R(i);s=V(_,n),_.forEach(p),m.forEach(p),this.h()},h(){v(i,"class","bg-neutral-100/20 px-4 p-1 rounded"),v(e,"class","flex flex-row")},m(a,m){j(a,e,m),o&&o.m(e,null),b(e,t),b(e,i),b(i,s),r||(f=se(i,"click",l[38]),r=!0)},p(a,m){a[17]?o?o.p(a,m):(o=al(a),o.c(),o.m(e,t)):o&&(o.d(1),o=null),m[0]&131072&&n!==(n=a[17]?"Config":"Results")&&ge(s,n)},d(a){a&&p(e),o&&o.d(),r=!1,f()}}}function al(l){let e,t,i,n,s,r,f,o,a;return{c(){e=T("button"),t=J("Trade"),n=L(),s=T("button"),r=J("Grouped"),this.h()},l(m){e=y(m,"BUTTON",{class:!0});var _=R(e);t=V(_,"Trade"),_.forEach(p),n=U(m),s=y(m,"BUTTON",{class:!0});var d=R(s);r=V(d,"Grouped"),d.forEach(p),this.h()},h(){v(e,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2"),e.disabled=i=!l[12],v(s,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2 svelte-cwnj7u"),s.disabled=f=!l[12],nt(s,"grouped",l[16])},m(m,_){j(m,e,_),b(e,t),j(m,n,_),j(m,s,_),b(s,r),o||(a=[se(e,"click",l[36]),se(s,"click",l[37])],o=!0)},p(m,_){_[0]&4096&&i!==(i=!m[12])&&(e.disabled=i),_[0]&4096&&f!==(f=!m[12])&&(s.disabled=f),_[0]&65536&&nt(s,"grouped",m[16])},d(m){m&&p(e),m&&p(n),m&&p(s),o=!1,st(a)}}}function fl(l){let e,t,i,n,s;function r(a){l[39](a)}let f={items:l[21]};l[0]!==void 0&&(f.value=l[0]),e=new zt({props:f}),rt.push(()=>Sl(e,"value",r)),e.$on("select",l[27]);let o=l[0]&&ul(l);return{c(){ze(e.$$.fragment),i=L(),o&&o.c(),n=we()},l(a){Ne(e.$$.fragment,a),i=U(a),o&&o.l(a),n=we()},m(a,m){Ce(e,a,m),j(a,i,m),o&&o.m(a,m),j(a,n,m),s=!0},p(a,m){const _={};!t&&m[0]&1&&(t=!0,_.value=a[0],vl(()=>t=!1)),e.$set(_),a[0]?o?(o.p(a,m),m[0]&1&&q(o,1)):(o=ul(a),o.c(),q(o,1),o.m(n.parentNode,n)):o&&(je(),K(o,1,1,()=>{o=null}),Je())},i(a){s||(q(e.$$.fragment,a),q(o),s=!0)},o(a){K(e.$$.fragment,a),K(o),s=!1},d(a){Me(e,a),a&&p(i),o&&o.d(a),a&&p(n)}}}function ul(l){let e,t,i,n,s,r,f,o=l[1]&&window.TimelessJewelConquerors[l[0].value].indexOf(l[1].value)>=0,a,m;function _(u){l[40](u)}let d={items:l[20]};l[1]!==void 0&&(d.value=l[1]),s=new zt({props:d}),rt.push(()=>Sl(s,"value",_)),s.$on("select",l[23]);let h=o&&cl(l);return{c(){e=T("div"),t=T("h3"),i=J("Conqueror"),n=L(),ze(s.$$.fragment),f=L(),h&&h.c(),a=we(),this.h()},l(u){e=y(u,"DIV",{class:!0});var c=R(e);t=y(c,"H3",{class:!0});var w=R(t);i=V(w,"Conqueror"),w.forEach(p),n=U(c),Ne(s.$$.fragment,c),c.forEach(p),f=U(u),h&&h.l(u),a=we(),this.h()},h(){v(t,"class","mb-2"),v(e,"class","mt-4")},m(u,c){j(u,e,c),b(e,t),b(t,i),b(e,n),Ce(s,e,null),j(u,f,c),h&&h.m(u,c),j(u,a,c),m=!0},p(u,c){const w={};c[0]&1048576&&(w.items=u[20]),!r&&c[0]&2&&(r=!0,w.value=u[1],vl(()=>r=!1)),s.$set(w),c[0]&3&&(o=u[1]&&window.TimelessJewelConquerors[u[0].value].indexOf(u[1].value)>=0),o?h?(h.p(u,c),c[0]&3&&q(h,1)):(h=cl(u),h.c(),q(h,1),h.m(a.parentNode,a)):h&&(je(),K(h,1,1,()=>{h=null}),Je())},i(u){m||(q(s.$$.fragment,u),q(h),m=!0)},o(u){K(s.$$.fragment,u),K(h),m=!1},d(u){u&&p(e),Me(s),u&&p(f),h&&h.d(u),u&&p(a)}}}function cl(l){let e,t,i,n,s,r,f,o,a,m,_,d,h,u;const c=[As,ys],w=[];function N(z,M){return z[7]==="seed"?0:z[7]==="stats"?1:-1}~(o=N(l))&&(a=w[o]=c[o](l));let C=!l[3]&&wl();return{c(){e=T("div"),t=T("button"),i=J("Enter Seed"),n=L(),s=T("button"),r=J("Select Stats"),f=L(),a&&a.c(),m=L(),C&&C.c(),_=we(),this.h()},l(z){e=y(z,"DIV",{class:!0});var M=R(e);t=y(M,"BUTTON",{class:!0});var S=R(t);i=V(S,"Enter Seed"),S.forEach(p),n=U(M),s=y(M,"BUTTON",{class:!0});var A=R(s);r=V(A,"Select Stats"),A.forEach(p),M.forEach(p),f=U(z),a&&a.l(z),m=U(z),C&&C.l(z),_=we(),this.h()},h(){v(t,"class","selection-button svelte-cwnj7u"),nt(t,"selected",l[7]==="seed"),v(s,"class","selection-button svelte-cwnj7u"),nt(s,"selected",l[7]==="stats"),v(e,"class","mt-4 w-full flex flex-row")},m(z,M){j(z,e,M),b(e,t),b(t,i),b(e,n),b(e,s),b(s,r),j(z,f,M),~o&&w[o].m(z,M),j(z,m,M),C&&C.m(z,M),j(z,_,M),d=!0,h||(u=[se(t,"click",l[41]),se(s,"click",l[42])],h=!0)},p(z,M){M[0]&128&&nt(t,"selected",z[7]==="seed"),M[0]&128&&nt(s,"selected",z[7]==="stats");let S=o;o=N(z),o===S?~o&&w[o].p(z,M):(a&&(je(),K(w[S],1,1,()=>{w[S]=null}),Je()),~o?(a=w[o],a?a.p(z,M):(a=w[o]=c[o](z),a.c()),q(a,1),a.m(m.parentNode,m)):a=null),z[3]?C&&(C.d(1),C=null):C||(C=wl(),C.c(),C.m(_.parentNode,_))},i(z){d||(q(a),d=!0)},o(z){K(a),d=!1},d(z){z&&p(e),z&&p(f),~o&&w[o].d(z),z&&p(m),C&&C.d(z),z&&p(_),h=!1,st(u)}}}function ys(l){let e,t,i,n,s,r,f=Object.keys(l[4]).length>0,o,a,m={items:l[18]};s=new zt({props:m}),l[45](s),s.$on("select",l[25]);let _=f&&dl(l);return{c(){e=T("div"),t=T("h3"),i=J("Add Stat"),n=L(),ze(s.$$.fragment),r=L(),_&&_.c(),o=we(),this.h()},l(d){e=y(d,"DIV",{class:!0});var h=R(e);t=y(h,"H3",{class:!0});var u=R(t);i=V(u,"Add Stat"),u.forEach(p),n=U(h),Ne(s.$$.fragment,h),h.forEach(p),r=U(d),_&&_.l(d),o=we(),this.h()},h(){v(t,"class","mb-2"),v(e,"class","mt-4")},m(d,h){j(d,e,h),b(e,t),b(t,i),b(e,n),Ce(s,e,null),j(d,r,h),_&&_.m(d,h),j(d,o,h),a=!0},p(d,h){const u={};h[0]&262144&&(u.items=d[18]),s.$set(u),h[0]&16&&(f=Object.keys(d[4]).length>0),f?_?_.p(d,h):(_=dl(d),_.c(),_.m(o.parentNode,o)):_&&(_.d(1),_=null)},i(d){a||(q(s.$$.fragment,d),a=!0)},o(d){K(s.$$.fragment,d),a=!1},d(d){d&&p(e),l[45](null),Me(s),d&&p(r),_&&_.d(d),d&&p(o)}}}function As(l){let e,t,i,n,s,r,f,o,a,m,_,d,h=(l[2]<window.TimelessJewelSeedRanges[l[0].value].min||l[2]>window.TimelessJewelSeedRanges[l[0].value].max)&&ml(l),u=l[2]>=window.TimelessJewelSeedRanges[l[0].value].min&&l[2]<=window.TimelessJewelSeedRanges[l[0].value].max&&_l(l);return{c(){e=T("div"),t=T("h3"),i=J("Seed"),n=L(),s=T("input"),o=L(),h&&h.c(),a=L(),u&&u.c(),m=we(),this.h()},l(c){e=y(c,"DIV",{class:!0});var w=R(e);t=y(w,"H3",{class:!0});var N=R(t);i=V(N,"Seed"),N.forEach(p),n=U(w),s=y(w,"INPUT",{type:!0,min:!0,max:!0}),o=U(w),h&&h.l(w),w.forEach(p),a=U(c),u&&u.l(c),m=we(),this.h()},h(){v(t,"class","mb-2"),v(s,"type","number"),v(s,"min",r=window.TimelessJewelSeedRanges[l[0].value].min),v(s,"max",f=window.TimelessJewelSeedRanges[l[0].value].max),v(e,"class","mt-4")},m(c,w){j(c,e,w),b(e,t),b(t,i),b(e,n),b(e,s),Ge(s,l[2]),b(e,o),h&&h.m(e,null),j(c,a,w),u&&u.m(c,w),j(c,m,w),_||(d=[se(s,"input",l[43]),se(s,"blur",l[23])],_=!0)},p(c,w){w[0]&1&&r!==(r=window.TimelessJewelSeedRanges[c[0].value].min)&&v(s,"min",r),w[0]&1&&f!==(f=window.TimelessJewelSeedRanges[c[0].value].max)&&v(s,"max",f),w[0]&4&&Be(s.value)!==c[2]&&Ge(s,c[2]),c[2]<window.TimelessJewelSeedRanges[c[0].value].min||c[2]>window.TimelessJewelSeedRanges[c[0].value].max?h?h.p(c,w):(h=ml(c),h.c(),h.m(e,null)):h&&(h.d(1),h=null),c[2]>=window.TimelessJewelSeedRanges[c[0].value].min&&c[2]<=window.TimelessJewelSeedRanges[c[0].value].max?u?u.p(c,w):(u=_l(c),u.c(),u.m(m.parentNode,m)):u&&(u.d(1),u=null)},i:Ke,o:Ke,d(c){c&&p(e),h&&h.d(),c&&p(a),u&&u.d(c),c&&p(m),_=!1,st(d)}}}function dl(l){let e,t,i,n,s,r,f,o,a,m,_,d,h,u,c,w,N,C,z,M,S,A,I,P,B,H,fe,Z,D,x,ee,Y=Object.keys(l[4]),W=[];for(let O=0;O<Y.length;O+=1)W[O]=hl(nl(l,Y,O));function ue(O,F){return O[10]?Rs:Ps}let pe=ue(l),le=pe(l);return{c(){e=T("div");for(let O=0;O<W.length;O+=1)W[O].c();t=L(),i=T("div"),n=T("div"),s=T("div"),r=J("Min Total Weight:"),f=L(),o=T("input"),a=L(),m=T("div"),_=T("div"),d=T("button"),h=J("Select All"),c=L(),w=T("button"),N=J("Notables"),z=L(),M=T("button"),S=J("Passives"),I=L(),P=T("button"),B=J("Deselect"),fe=L(),Z=T("div"),D=T("button"),le.c(),this.h()},l(O){e=y(O,"DIV",{class:!0});var F=R(e);for(let Ue=0;Ue<W.length;Ue+=1)W[Ue].l(F);F.forEach(p),t=U(O),i=y(O,"DIV",{class:!0});var X=R(i);n=y(X,"DIV",{class:!0});var E=R(n);s=y(E,"DIV",{class:!0});var $=R(s);r=V($,"Min Total Weight:"),$.forEach(p),f=U(E),o=y(E,"INPUT",{type:!0,min:!0}),E.forEach(p),X.forEach(p),a=U(O),m=y(O,"DIV",{class:!0});var oe=R(m);_=y(oe,"DIV",{class:!0});var ie=R(_);d=y(ie,"BUTTON",{class:!0});var me=R(d);h=V(me,"Select All"),me.forEach(p),c=U(ie),w=y(ie,"BUTTON",{class:!0});var Oe=R(w);N=V(Oe,"Notables"),Oe.forEach(p),z=U(ie),M=y(ie,"BUTTON",{class:!0});var be=R(M);S=V(be,"Passives"),be.forEach(p),I=U(ie),P=y(ie,"BUTTON",{class:!0});var De=R(P);B=V(De,"Deselect"),De.forEach(p),ie.forEach(p),fe=U(oe),Z=y(oe,"DIV",{class:!0});var He=R(Z);D=y(He,"BUTTON",{class:!0});var We=R(D);le.l(We),We.forEach(p),He.forEach(p),oe.forEach(p),this.h()},h(){v(e,"class","mt-4 flex flex-col overflow-auto min-h-[100px]"),v(s,"class","mr-2 min-w-fit"),v(o,"type","number"),v(o,"min","0"),v(n,"class","flex flex-row items-center"),v(i,"class","flex flex-col mt-2"),v(d,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),d.disabled=u=l[10]||l[6].size==0,v(w,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),w.disabled=C=l[10]||l[6].size==0,v(M,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),M.disabled=A=l[10]||l[6].size==0,v(P,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 flex-grow"),P.disabled=H=l[10]||l[6].size>=l[5].length,v(_,"class","flex flex-row"),v(D,"class","p-2 px-3 bg-green-500/40 rounded disabled:bg-green-900/40 flex-grow"),D.disabled=l[10],v(Z,"class","flex flex-row mt-2"),v(m,"class","flex flex-col mt-4")},m(O,F){j(O,e,F);for(let X=0;X<W.length;X+=1)W[X].m(e,null);j(O,t,F),j(O,i,F),b(i,n),b(n,s),b(s,r),b(n,f),b(n,o),Ge(o,l[9]),j(O,a,F),j(O,m,F),b(m,_),b(_,d),b(d,h),b(_,c),b(_,w),b(w,N),b(_,z),b(_,M),b(M,S),b(_,I),b(_,P),b(P,B),b(m,fe),b(m,Z),b(Z,D),le.m(D,null),x||(ee=[se(o,"input",l[49]),se(d,"click",l[30]),se(w,"click",l[31]),se(M,"click",l[32]),se(P,"click",l[33]),se(D,"click",l[50])],x=!0)},p(O,F){if(F[0]&67108880){Y=Object.keys(O[4]);let X;for(X=0;X<Y.length;X+=1){const E=nl(O,Y,X);W[X]?W[X].p(E,F):(W[X]=hl(E),W[X].c(),W[X].m(e,null))}for(;X<W.length;X+=1)W[X].d(1);W.length=Y.length}F[0]&512&&Be(o.value)!==O[9]&&Ge(o,O[9]),F[0]&1088&&u!==(u=O[10]||O[6].size==0)&&(d.disabled=u),F[0]&1088&&C!==(C=O[10]||O[6].size==0)&&(w.disabled=C),F[0]&1088&&A!==(A=O[10]||O[6].size==0)&&(M.disabled=A),F[0]&1120&&H!==(H=O[10]||O[6].size>=O[5].length)&&(P.disabled=H),pe===(pe=ue(O))&&le?le.p(O,F):(le.d(1),le=pe(O),le&&(le.c(),le.m(D,null))),F[0]&1024&&(D.disabled=O[10])},d(O){O&&p(e),gt(W,O),O&&p(t),O&&p(i),O&&p(a),O&&p(m),le.d(),x=!1,st(ee)}}}function hl(l){let e,t,i,n,s,r,f=ot(l[4][l[57]].id)+"",o,a,m,_,d,h,u,c,w,N,C,z,M,S,A,I,P;function B(){return l[46](l[57])}function H(){l[47].call(c,l[57])}function fe(){l[48].call(S,l[57])}return{c(){e=T("div"),t=T("div"),i=T("button"),n=J("-"),s=L(),r=T("span"),o=J(f),a=L(),m=T("div"),_=T("div"),d=T("div"),h=J("Min:"),u=L(),c=T("input"),w=L(),N=T("div"),C=T("div"),z=J("Weight:"),M=L(),S=T("input"),A=L(),this.h()},l(Z){e=y(Z,"DIV",{class:!0});var D=R(e);t=y(D,"DIV",{});var x=R(t);i=y(x,"BUTTON",{class:!0});var ee=R(i);n=V(ee,"-"),ee.forEach(p),s=U(x),r=y(x,"SPAN",{});var Y=R(r);o=V(Y,f),Y.forEach(p),x.forEach(p),a=U(D),m=y(D,"DIV",{class:!0});var W=R(m);_=y(W,"DIV",{class:!0});var ue=R(_);d=y(ue,"DIV",{class:!0});var pe=R(d);h=V(pe,"Min:"),pe.forEach(p),u=U(ue),c=y(ue,"INPUT",{type:!0,min:!0}),ue.forEach(p),w=U(W),N=y(W,"DIV",{class:!0});var le=R(N);C=y(le,"DIV",{class:!0});var O=R(C);z=V(O,"Weight:"),O.forEach(p),M=U(le),S=y(le,"INPUT",{type:!0,min:!0}),le.forEach(p),W.forEach(p),A=U(D),D.forEach(p),this.h()},h(){v(i,"class","p-2 px-4 bg-red-500/40 rounded mr-2"),v(d,"class","mr-2"),v(c,"type","number"),v(c,"min","0"),v(_,"class","mr-4 flex flex-row items-center"),v(C,"class","mr-2"),v(S,"type","number"),v(S,"min","0"),v(N,"class","flex flex-row items-center"),v(m,"class","mt-2 flex flex-row"),v(e,"class","mb-4 flex flex-row items-start flex-col border-neutral-100/40 border-b pb-4")},m(Z,D){j(Z,e,D),b(e,t),b(t,i),b(i,n),b(t,s),b(t,r),b(r,o),b(e,a),b(e,m),b(m,_),b(_,d),b(d,h),b(_,u),b(_,c),Ge(c,l[4][l[57]].min),b(m,w),b(m,N),b(N,C),b(C,z),b(N,M),b(N,S),Ge(S,l[4][l[57]].weight),b(e,A),I||(P=[se(i,"click",B),se(c,"input",H),se(S,"input",fe)],I=!0)},p(Z,D){l=Z,D[0]&16&&f!==(f=ot(l[4][l[57]].id)+"")&&ge(o,f),D[0]&16&&Be(c.value)!==l[4][l[57]].min&&Ge(c,l[4][l[57]].min),D[0]&16&&Be(S.value)!==l[4][l[57]].weight&&Ge(S,l[4][l[57]].weight)},d(Z){Z&&p(e),I=!1,st(P)}}}function Ps(l){let e;return{c(){e=J("Search")},l(t){e=V(t,"Search")},m(t,i){j(t,e,i)},p:Ke,d(t){t&&p(e)}}}function Rs(l){let e,t,i=window.TimelessJewelSeedRanges[l[0].value].max+"",n;return{c(){e=J(l[11]),t=J(" / "),n=J(i)},l(s){e=V(s,l[11]),t=V(s," / "),n=V(s,i)},m(s,r){j(s,e,r),j(s,t,r),j(s,n,r)},p(s,r){r[0]&2048&&ge(e,s[11]),r[0]&1&&i!==(i=window.TimelessJewelSeedRanges[s[0].value].max+"")&&ge(n,i)},d(s){s&&p(e),s&&p(t),s&&p(n)}}}function ml(l){let e,t,i=window.TimelessJewelSeedRanges[l[0].value].min+"",n,s,r=window.TimelessJewelSeedRanges[l[0].value].max+"",f;return{c(){e=T("div"),t=J("Seed must be between "),n=J(i),s=J(`
                    and `),f=J(r),this.h()},l(o){e=y(o,"DIV",{class:!0});var a=R(e);t=V(a,"Seed must be between "),n=V(a,i),s=V(a,`
                    and `),f=V(a,r),a.forEach(p),this.h()},h(){v(e,"class","mt-2")},m(o,a){j(o,e,a),b(e,t),b(e,n),b(e,s),b(e,f)},p(o,a){a[0]&1&&i!==(i=window.TimelessJewelSeedRanges[o[0].value].min+"")&&ge(n,i),a[0]&1&&r!==(r=window.TimelessJewelSeedRanges[o[0].value].max+"")&&ge(f,r)},d(o){o&&p(e)}}}function _l(l){let e,t=l[34](l[19]),i=[];for(let n=0;n<t.length;n+=1)i[n]=gl(rl(l,t,n));return{c(){e=T("ul");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){e=y(n,"UL",{class:!0});var s=R(e);for(let r=0;r<i.length;r+=1)i[r].l(s);s.forEach(p),this.h()},h(){v(e,"class","mt-4 overflow-auto")},m(n,s){j(n,e,s);for(let r=0;r<i.length;r+=1)i[r].m(e,null)},p(n,s){if(s[0]&537395204|s[1]&8){t=n[34](n[19]);let r;for(r=0;r<t.length;r+=1){const f=rl(n,t,r);i[r]?i[r].p(f,s):(i[r]=gl(f),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(n){n&&p(e),gt(i,n)}}}function gl(l){let e,t,i,n=l[54].passives.length+"",s,r,f,o=l[54].stat+"",a,m,_,d;function h(){return l[44](l[54])}return{c(){e=T("li"),t=T("span"),i=J("("),s=J(n),r=J(")"),f=L(),a=J(o),m=L(),this.h()},l(u){e=y(u,"LI",{class:!0});var c=R(e);t=y(c,"SPAN",{class:!0});var w=R(t);i=V(w,"("),s=V(w,n),r=V(w,")"),w.forEach(p),f=U(c),a=V(c,o),m=U(c),c.forEach(p),this.h()},h(){v(t,"class","font-bold"),v(e,"class","cursor-pointer")},m(u,c){j(u,e,c),b(e,t),b(t,i),b(t,s),b(t,r),b(e,f),b(e,a),b(e,m),_||(d=se(e,"click",h),_=!0)},p(u,c){l=u,c[0]&524288&&n!==(n=l[54].passives.length+"")&&ge(s,n),c[0]&524288&&o!==(o=l[54].stat+"")&&ge(a,o)},d(u){u&&p(e),_=!1,d()}}}function wl(l){let e,t;return{c(){e=T("h2"),t=J("Click on a jewel socket"),this.h()},l(i){e=y(i,"H2",{class:!0});var n=R(e);t=V(n,"Click on a jewel socket"),n.forEach(p),this.h()},h(){v(e,"class","mt-4")},m(i,n){j(i,e,n),b(e,t)},d(i){i&&p(e)}}}function pl(l){let e,t;return e=new Ts({props:{searchResults:l[12],groupResults:l[16],highlight:l[29],jewel:l[13],conqueror:l[14]}}),{c(){ze(e.$$.fragment)},l(i){Ne(e.$$.fragment,i)},m(i,n){Ce(e,i,n),t=!0},p(i,n){const s={};n[0]&4096&&(s.searchResults=i[12]),n[0]&65536&&(s.groupResults=i[16]),n[0]&8192&&(s.jewel=i[13]),n[0]&16384&&(s.conqueror=i[14]),e.$set(s)},i(i){t||(q(e.$$.fragment,i),t=!0)},o(i){K(e.$$.fragment,i),t=!1},d(i){Me(e,i)}}}function zs(l){let e,t,i,n,s=l[17]?"Results":"Timeless Jewel",r,f,o,a,m,_=l[12]&&ol(l),d=!l[17]&&fl(l),h=l[12]&&l[17]&&pl(l);return{c(){e=T("div"),t=T("div"),i=T("div"),n=T("h3"),r=J(s),f=L(),_&&_.c(),o=L(),d&&d.c(),a=L(),h&&h.c(),this.h()},l(u){e=y(u,"DIV",{class:!0});var c=R(e);t=y(c,"DIV",{class:!0});var w=R(t);i=y(w,"DIV",{class:!0});var N=R(i);n=y(N,"H3",{class:!0});var C=R(n);r=V(C,s),C.forEach(p),f=U(N),_&&_.l(N),N.forEach(p),o=U(w),d&&d.l(w),a=U(w),h&&h.l(w),w.forEach(p),c.forEach(p),this.h()},h(){v(n,"class","flex-grow"),v(i,"class","flex flex-row justify-between mb-2"),v(t,"class","p-4 max-h-screen flex flex-col"),v(e,"class","w-1/2 xl:w-1/3 2xl:w-1/4 3xl:w-1/5 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen")},m(u,c){j(u,e,c),b(e,t),b(t,i),b(i,n),b(n,r),b(i,f),_&&_.m(i,null),b(t,o),d&&d.m(t,null),b(t,a),h&&h.m(t,null),m=!0},p(u,c){(!m||c[0]&131072)&&s!==(s=u[17]?"Results":"Timeless Jewel")&&ge(r,s),u[12]?_?_.p(u,c):(_=ol(u),_.c(),_.m(i,null)):_&&(_.d(1),_=null),u[17]?d&&(je(),K(d,1,1,()=>{d=null}),Je()):d?(d.p(u,c),c[0]&131072&&q(d,1)):(d=fl(u),d.c(),q(d,1),d.m(t,a)),u[12]&&u[17]?h?(h.p(u,c),c[0]&135168&&q(h,1)):(h=pl(u),h.c(),q(h,1),h.m(t,null)):h&&(je(),K(h,1,1,()=>{h=null}),Je())},i(u){m||(q(d),q(h),m=!0)},o(u){K(d),K(h),m=!1},d(u){u&&p(e),_&&_.d(),d&&d.d(),h&&h.d()}}}function Ns(l){var i,n;let e,t;return e=new as({props:{clickNode:l[22],circledNode:l[3],selectedJewel:(i=l[0])==null?void 0:i.value,selectedConqueror:(n=l[1])==null?void 0:n.value,highlighted:l[15],seed:l[2],disabled:[...l[6]],$$slots:{default:[zs]},$$scope:{ctx:l}}}),{c(){ze(e.$$.fragment)},l(s){Ne(e.$$.fragment,s)},m(s,r){Ce(e,s,r),t=!0},p(s,r){var o,a;const f={};r[0]&8&&(f.circledNode=s[3]),r[0]&1&&(f.selectedJewel=(o=s[0])==null?void 0:o.value),r[0]&2&&(f.selectedConqueror=(a=s[1])==null?void 0:a.value),r[0]&32768&&(f.highlighted=s[15]),r[0]&4&&(f.seed=s[2]),r[0]&64&&(f.disabled=[...s[6]]),r[0]&2064383|r[1]&536870912&&(f.$$scope={dirty:r,ctx:s}),e.$set(f)},i(s){t||(q(e.$$.fragment,s),t=!0)},o(s){K(e.$$.fragment,s),t=!1},d(s){Me(e,s)}}}function Cs(l,e,t){let i,n,s,r,f,o;Ee(l,Wl,k=>t(51,o=k));const a=o.url.searchParams,m=Object.keys(window.TimelessJewels).map(k=>({value:parseInt(k),label:window.TimelessJewels[k]}));let _=a.has("jewel")?m.find(k=>k.value==a.get("jewel")):void 0,d=a.has("conqueror")?{value:a.get("conqueror"),label:a.get("conqueror")}:void 0,h=a.has("seed")?parseInt(a.get("seed")):0,u=a.has("location")?parseInt(a.get("location")):void 0,c=new Set;const w=k=>{k.isJewelSocket?(t(3,u=k.skill),N()):k.isMastery||(c.has(k.skill)?c.delete(k.skill):c.add(k.skill),t(6,c))},N=()=>{const k=new URL(window.location.origin+window.location.pathname);_&&k.searchParams.append("jewel",_.value.toString()),d&&k.searchParams.append("conqueror",d.value),h&&k.searchParams.append("seed",h.toString()),u&&k.searchParams.append("location",u.toString()),C&&k.searchParams.append("mode",C),Object.keys(S).forEach(Q=>{k.searchParams.append("stat",Q.toString())}),Hl(k.toString())};let C=a.has("mode")?a.get("mode"):"";const z=k=>{t(7,C=k),N()};let M=JSON.parse(window.PossibleStats),S={};a.has("stat")&&a.getAll("stat").map(k=>{const Q=parseInt(k);t(4,S[Q]={weight:1,min:0,id:Q},S)});let A;const I=k=>{t(4,S[k.detail.value]={weight:1,min:0,id:k.detail.value},S),t(4,S),A.handleClear(),N()},P=k=>{delete S[k],t(4,S),N()},B=()=>{t(4,S={}),N()};let H=0,fe=!1,Z=0,D,x=1,ee="";const Y=()=>{if(!u)return;t(13,x=_.value),t(14,ee=d.value),t(10,fe=!0),t(12,D=void 0);const k={jewel:_.value,conqueror:d.value,nodes:n.filter(Q=>!c.has(Q.skill)).map(Q=>window.TreeToPassive[Q.skill]),stats:Object.keys(S).map(Q=>S[Q]),minTotalWeight:H};Gl.search(k,Kl(Q=>t(11,Z=Q))).then(Q=>{t(12,D=Q),t(10,fe=!1),t(17,E=!0)})};let W=[];const ue=(k,Q)=>{t(2,h=k),t(15,W=Q),N()},pe=()=>{c.clear(),t(6,c)},le=()=>{n.forEach(k=>{k.isNotable&&c.delete(k.skill)}),t(6,c)},O=()=>{n.forEach(k=>{k.isNotable||c.delete(k.skill)}),t(6,c)},F=()=>{n.filter(k=>!k.isJewelSocket&&!k.isMastery).forEach(k=>c.add(k.skill)),t(6,c)};let X=!0,E=!1;const $=k=>{const Q={};return k.forEach(Te=>{if("alternatePassiveSkill"in Te.result){const qe=GetAlternatePassiveSkillByIndex(Te.result.alternatePassiveSkill);"statsKeys"in qe&&qe.statsKeys.forEach(Ye=>{Q[Ye]=[...Q[Ye]||[],Te.node]})}"alternatePassiveAdditionInformations"in Te.result&&Te.result.alternatePassiveAdditionInformations.forEach(qe=>{const Ye=GetAlternatePassiveAdditionByIndex(qe.alternatePassiveSkillAddition);"statsKeys"in Ye&&Ye.statsKeys.forEach(at=>{Q[at]=[...Q[at]||[],Te.node]})})}),Object.keys(Q).map(Te=>({stat:ot(parseInt(Te)),passives:Q[Te]})).sort((Te,qe)=>qe.passives.length-Te.passives.length)},oe=()=>kl(x,ee,D.raw),ie=()=>t(16,X=!X),me=()=>t(17,E=!E);function Oe(k){_=k,t(0,_)}function be(k){d=k,t(1,d)}const De=()=>z("seed"),He=()=>z("stats");function We(){h=Be(this.value),t(2,h)}const Ue=k=>ue(h,k.passives);function wt(k){rt[k?"unshift":"push"](()=>{A=k,t(8,A)})}const Se=k=>P(S[k].id);function pt(k){S[k].min=Be(this.value),t(4,S)}function bt(k){S[k].weight=Be(this.value),t(4,S)}function vt(){H=Be(this.value),t(9,H)}const St=()=>Y();return l.$$.update=()=>{l.$$.dirty[0]&1&&t(20,i=_?window.TimelessJewelConquerors[_.value].map(k=>({value:k,label:k})):[]),l.$$.dirty[0]&8&&t(5,n=u?Bl($e.nodes[u]).filter(k=>!k.isJewelSocket&&!k.isMastery):[]),l.$$.dirty[0]&39&&t(19,s=!h||!_||!d||window.TimelessJewelConquerors[_.value].indexOf(d.value)<0?[]:n.map(k=>({node:k.skill,result:Calculate(TreeToPassive[k.skill],h,_.value,d.value)}))),l.$$.dirty[0]&1&&t(35,r=_?Object.keys(M[_.value]):[]),l.$$.dirty[0]&16|l.$$.dirty[1]&16&&t(18,f=r.map(k=>{const Q=parseInt(k);return{label:ot(Q),value:Q}}).filter(k=>!(k.value in S)))},[_,d,h,u,S,n,c,C,A,H,fe,Z,D,x,ee,W,X,E,f,s,i,m,w,N,z,I,P,B,Y,ue,pe,le,O,F,$,r,oe,ie,me,Oe,be,De,He,We,Ue,wt,Se,pt,bt,vt,St]}class Vs extends et{constructor(e){super(),tt(this,e,Cs,Ns,lt,{},null,[-1,-1])}}export{Vs as default};
