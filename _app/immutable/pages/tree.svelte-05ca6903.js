import{a7 as Mt,O as oe,a8 as Rt,S as Ee,i as Pe,s as Me,F as nt,e as B,k as x,c as U,a as W,d as E,m as $,b as R,f as ke,g as O,a9 as Jt,G as rt,H as lt,I as ot,q as X,o as Q,r as Nt,v as Tt,aa as at,K as Se,E as Ae,a6 as At,w as he,x as _e,y as me,J as A,B as pe,l as ue,n as ft,p as ut,R as dt,T as ct,ab as Ct,L as ht,t as te,h as se,M as _t,N as Xe,P as mt,j as Be}from"../chunks/index-40c9b43b.js";import{r as qt}from"../chunks/index-d169ac0d.js";import{S as pt,g as jt,p as Ot}from"../chunks/stores-5cbfde2c.js";import"../chunks/singletons-d1fb5791.js";const Lt=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function Ft(){const s=Mt();return e=>{const t=Lt.map(r=>oe(e,r,f=>Rt(s,f)));return{destroy:()=>t.forEach(r=>r())}}}class Yt{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:e,render:t}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,t),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.needsRedraw=!0}render({autoclear:e,pixelRatio:t,context:r,width:f,height:i}){const o={context:r,width:f,height:i};if(this.needsResize&&(r.setTransform(t,0,0,t,0,0),this.needsResize=!1),this.needsSetup){for(const[l,c]of this.setups)c(o),this.setups.delete(l);this.needsSetup=!1}if(this.needsRedraw){e&&r.clearRect(0,0,f,i);for(const l of this.layerSequence)this.renderers.get(l)(o);this.needsRedraw=!1}}}function Dt(s){let e,t,r,f,i,o,l,c,a;const p=s[13].default,m=nt(p,s,s[12],null);return{c(){e=B("canvas"),i=x(),o=B("div"),m&&m.c(),this.h()},l(h){e=U(h,"CANVAS",{style:!0,width:!0,height:!0}),W(e).forEach(E),i=$(h),o=U(h,"DIV",{style:!0});var u=W(o);m&&m.l(u),u.forEach(E),this.h()},h(){R(e,"style",t="display: block; width: "+s[1]+"px; height: "+s[2]+"px;"+(s[3]?` ${s[3]}`:"")),R(e,"width",r=s[1]*s[0]),R(e,"height",f=s[2]*s[0]),ke(o,"display","none")},m(h,u){O(h,e,u),s[14](e),O(h,i,u),O(h,o,u),m&&m.m(o,null),s[15](o),l=!0,c||(a=Jt(s[6].call(null,e)),c=!0)},p(h,[u]){(!l||u&14&&t!==(t="display: block; width: "+h[1]+"px; height: "+h[2]+"px;"+(h[3]?` ${h[3]}`:"")))&&R(e,"style",t),(!l||u&3&&r!==(r=h[1]*h[0]))&&R(e,"width",r),(!l||u&5&&f!==(f=h[2]*h[0]))&&R(e,"height",f),m&&m.p&&(!l||u&4096)&&rt(m,p,h,h[12],l?ot(p,h[12],u,null):lt(h[12]),null)},i(h){l||(X(m,h),l=!0)},o(h){Q(m,h),l=!1},d(h){h&&E(e),s[14](null),h&&E(i),h&&E(o),m&&m.d(h),s[15](null),c=!1,a()}}}const wt={};function Ht(s,e,t){let{$$slots:r={},$$scope:f}=e,{width:i=640,height:o=640,pixelRatio:l=void 0,style:c=null,autoclear:a=!0}=e,p,m,h,u,_;const w=Ft(),d=new Yt;function V(){d.redraw()}function ae(){return p}function S(){return m}l===void 0&&(typeof window=="undefined"?l=2:l=window.devicePixelRatio);function q(){d.render({context:m,width:i,height:o,pixelRatio:l,autoclear:a}),h=window.requestAnimationFrame(q)}Nt(wt,{register:d.register,unregister:d.unregister,redraw:d.redraw}),Tt(()=>{m=p.getContext("2d"),_=new MutationObserver(b),_.observe(u,{childList:!0}),b(),q();function b(){const F=[...u.children].map(Re=>+Re.dataset.layerId);t(11,d.layerSequence=F,d),d.redraw()}}),at(()=>{typeof window!="undefined"&&(window.cancelAnimationFrame(h),_.disconnect())});function L(b){Se[b?"unshift":"push"](()=>{p=b,t(4,p)})}function ie(b){Se[b?"unshift":"push"](()=>{u=b,t(5,u)})}return s.$$set=b=>{"width"in b&&t(1,i=b.width),"height"in b&&t(2,o=b.height),"pixelRatio"in b&&t(0,l=b.pixelRatio),"style"in b&&t(3,c=b.style),"autoclear"in b&&t(7,a=b.autoclear),"$$scope"in b&&t(12,f=b.$$scope)},s.$$.update=()=>{s.$$.dirty&2183&&d.resize()},[l,i,o,c,p,u,w,a,V,ae,S,d,f,r,L,ie]}class zt extends Ee{constructor(e){super(),Pe(this,e,Ht,Dt,Me,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function Gt(s){let e;return{c(){e=B("div"),this.h()},l(t){e=U(t,"DIV",{"data-layer-id":!0}),W(e).forEach(E),this.h()},h(){R(e,"data-layer-id",s[0])},m(t,r){O(t,e,r)},p:Ae,i:Ae,o:Ae,d(t){t&&E(e)}}}function Xt(s,e,t){const{register:r,unregister:f,redraw:i}=At(wt);let{setup:o=void 0,render:l=()=>{}}=e;if(typeof o!="function"&&o!==void 0)throw new Error("setup must be a function");if(typeof l!="function")throw new Error("render must be a function");const c=r({setup:o,render:l});return at(()=>f(c)),s.$$set=a=>{"setup"in a&&t(1,o=a.setup),"render"in a&&t(2,l=a.render)},s.$$.update=()=>{s.$$.dirty&4&&i()},[c,o,l]}class Bt extends Ee{constructor(e){super(),Pe(this,e,Xt,Gt,Me,{setup:1,render:2})}}let Ue;const gt=Date.now();function bt(s){return s(Date.now()-gt),Ue=window.requestAnimationFrame(()=>bt(s)),()=>window.cancelAnimationFrame(Ue)}function Ut(){}var Vt=qt(Date.now()-gt,typeof window=="undefined"?Ut:bt);let I;const Kt=()=>{I=JSON.parse(window.SkillTree)},Wt={negate:-1,times_twenty:1/20,canonical_stat:1,per_minute_to_per_second:60,milliseconds_to_seconds:1e3,display_indexable_support:1,divide_by_one_hundred:100,milliseconds_to_seconds_2dp_if_required:1e3,deciseconds_to_seconds:10,old_leech_percent:1,old_leech_permyriad:1e4,times_one_point_five:1/1.5,"30%_of_value":100/30,divide_by_one_thousand:1e3,divide_by_twelve:12,divide_by_six:6,per_minute_to_per_second_2dp_if_required:60,"60%_of_value":100/60,double:1/2,negate_and_double:1/-2,multiply_by_four:1/4,per_minute_to_per_second_0dp:60,milliseconds_to_seconds_0dp:1e3,mod_value_to_item_class:1,milliseconds_to_seconds_2dp:1e3,multiplicative_damage_modifier:1,divide_by_one_hundred_2dp:100,per_minute_to_per_second_1dp:60,divide_by_one_hundred_2dp_if_required:100,divide_by_ten_1dp_if_required:10,milliseconds_to_seconds_1dp:1e3,divide_by_fifty:50,per_minute_to_per_second_2dp:60,divide_by_ten_0dp:10,divide_by_one_hundred_and_negate:-100,tree_expansion_jewel_passive:1,passive_hash:1,divide_by_ten_1dp:10,affliction_reward_type:1,divide_by_five:5,metamorphosis_reward_description:1,divide_by_two_0dp:2,divide_by_fifteen_0dp:15,divide_by_three:3,divide_by_twenty_then_double_0dp:10,divide_by_four:4},Ie=(s,e,t,r,f)=>({x:(Math.abs(I.min_x)+s+t)/f,y:(Math.abs(I.min_y)+e+r)/f}),Qt=(s,e,t)=>{const r=Math.PI/180*t,f=Math.cos(r),i=Math.sin(r),o=f*(e.x-s.x)+i*(e.y-s.y)+s.x,l=f*(e.y-s.y)-i*(e.x-s.x)+s.y;return{x:o,y:l}},Ve=[0,30,45,60,90,120,135,150,180,210,225,240,270,300,315,330],Ke=[0,10,20,30,40,45,50,60,70,80,90,100,110,120,130,135,140,150,160,170,180,190,200,210,220,225,230,240,250,260,270,280,290,300,310,315,320,330,340,350],qe=(s,e)=>{const t=I.constants.skillsPerOrbit[s];return t==16?Ve[Ve.length-e]||0:t==40?Ke[Ke.length-e]||0:360-360/t*e},ve=(s,e,t,r)=>{if(s.group===void 0||s.orbit===void 0||s.orbitIndex===void 0)return{x:0,y:0};const f=I.groups[s.group],i=qe(s.orbit,s.orbitIndex),o=Ie(f.x,f.y,e,t,r),l=Ie(f.x,f.y-I.constants.orbitRadii[s.orbit],e,t,r);return Qt(o,l,i)},We=(s,e)=>Math.sqrt(Math.pow(s.x-e.x,2)+Math.pow(s.y-e.y,2)),Qe=(s,e)=>{let t=-1;for(let i=0;i<s.English.length;i++){const o=s.English[i];let l=!0;if(o.condition.length>0){const c=o.condition[0];for(const a of Object.keys(c)){const p=c[a];if(a=="min"&&e<p){l=!1;break}if(a=="max"&&e>p){l=!1;break}}}if(l){t=i;break}}if(t==-1)return;const r=s.English[t];let f=e;return r.index_handlers.length>0&&r.index_handlers[0].forEach(i=>{f=f/(Wt[i]||1)}),r.string.replace("{0}",r.format[0].replace("#",f.toString()))},{window:Ce}=Ct;function Ze(s){let e,t,r,f,i,o;t=new zt({props:{width:s[0],height:s[1],$$slots:{default:[Zt]},$$scope:{ctx:s}}}),t.$on("pointerdown",s[4]),t.$on("wheel",s[7]);const l=s[25].default,c=nt(l,s,s[26],null);return{c(){e=B("div"),he(t.$$.fragment),r=x(),c&&c.c(),this.h()},l(a){e=U(a,"DIV",{style:!0});var p=W(e);_e(t.$$.fragment,p),r=$(p),c&&c.l(p),p.forEach(E),this.h()},h(){ke(e,"touch-action","none"),ke(e,"cursor",s[2])},m(a,p){O(a,e,p),me(t,e,null),A(e,r),c&&c.m(e,null),f=!0,i||(o=oe(e,"resize",s[8]),i=!0)},p(a,p){const m={};p[0]&1&&(m.width=a[0]),p[0]&2&&(m.height=a[1]),p[0]&67108872&&(m.$$scope={dirty:p,ctx:a}),t.$set(m),c&&c.p&&(!f||p[0]&67108864)&&rt(c,l,a,a[26],f?ot(l,a[26],p,null):lt(a[26]),null),(!f||p[0]&4)&&ke(e,"cursor",a[2])},i(a){f||(X(t.$$.fragment,a),X(c,a),f=!0)},o(a){Q(t.$$.fragment,a),Q(c,a),f=!1},d(a){a&&E(e),pe(t),c&&c.d(a),i=!1,o()}}}function Zt(s){let e,t;return e=new Bt({props:{render:s[3]}}),{c(){he(e.$$.fragment)},l(r){_e(e.$$.fragment,r)},m(r,f){me(e,r,f),t=!0},p(r,f){const i={};f[0]&8&&(i.render=r[3]),e.$set(i)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){Q(e.$$.fragment,r),t=!1},d(r){pe(e,r)}}}function xt(s){let e,t,r,f,i=s[0]&&s[1]&&Ze(s);return{c(){i&&i.c(),e=ue()},l(o){i&&i.l(o),e=ue()},m(o,l){i&&i.m(o,l),O(o,e,l),t=!0,r||(f=[oe(Ce,"pointerup",s[5]),oe(Ce,"pointermove",s[6]),oe(Ce,"resize",s[8])],r=!0)},p(o,l){o[0]&&o[1]?i?(i.p(o,l),l[0]&3&&X(i,1)):(i=Ze(o),i.c(),X(i,1),i.m(e.parentNode,e)):i&&(ft(),Q(i,1,1,()=>{i=null}),ut())},i(o){t||(X(i),t=!0)},o(o){Q(i),t=!1},d(o){i&&i.d(o),o&&E(e),r=!1,dt(f)}}}const xe="25px Roboto Mono",$e="17px Roboto Mono",fe=2.6;function $t(s,e,t){let r,f,i;ct(s,Vt,n=>t(24,i=n));let{$$slots:o={},$$scope:l}=e,{clickNode:c}=e,{circledNode:a}=e,{selectedJewel:p}=e,{selectedConqueror:m}=e,{seed:h}=e;const u={},_={},w={},d={},V={};Kt(),Object.keys(I.groups).forEach(g=>{const y=I.groups[g];y.nodes.forEach(M=>{const k=I.nodes[M];k.isProxy||"classStartIndex"in k||k.expansionJewel&&k.expansionJewel.parent||k.isBlighted||k.ascendancyName||(t(14,u[g]=y,u),t(15,_[M]=k,_))})}),I.skillSprites.keystoneInactive.forEach(g=>Object.keys(g.coords).forEach(y=>w[y]=g)),I.skillSprites.notableInactive.forEach(g=>Object.keys(g.coords).forEach(y=>w[y]=g)),I.skillSprites.normalInactive.forEach(g=>Object.keys(g.coords).forEach(y=>w[y]=g)),I.skillSprites.masteryInactive.forEach(g=>Object.keys(g.coords).forEach(y=>w[y]=g)),I.skillSprites.keystoneActive.forEach(g=>Object.keys(g.coords).forEach(y=>d[y]=g)),I.skillSprites.notableActive.forEach(g=>Object.keys(g.coords).forEach(y=>d[y]=g)),I.skillSprites.normalActive.forEach(g=>Object.keys(g.coords).forEach(y=>d[y]=g)),I.skillSprites.masteryInactive.forEach(g=>Object.keys(g.coords).forEach(y=>d[y]=g)),JSON.parse(PassiveTranslations).forEach(g=>{g.ids.forEach(y=>{t(16,V[y]=g,V)})});const ae=[427,320,226,227,323,422,329];let S=10,q=0,L=0;const ie={},b=n=>(n in ie||(ie[n]=new Image,ie[n].src=I.assets[n]["0.3835"]),ie[n]),F=(n,g,y)=>{const M=g.width/S*fe,k=g.height/S*fe,N=y.x-M/2,Y=y.y-k/2;n.drawImage(g,N,Y,M,k)},Re=(n,g,y)=>{const M=g.width/S*fe,k=g.height/S*fe,N=y.x-M/2,Y=y.y-k/2,ne=Y-k/2;n.drawImage(g,N,ne,M,k),n.save(),n.translate(N,Y),n.rotate(Math.PI),n.drawImage(g,-M,-(k/2),M,-k),n.restore()},we={},ge={},be=(n,g,y,M=!1)=>{let k=M?d[g]:w[g];!k&&M&&(k=w[g]);const N=k.filename;N in(M?ge:we)||((M?ge:we)[N]=new Image,(M?ge:we)[N].src=N);const Y=k.coords[g],ne=Y.w/S*fe,ye=Y.h/S*fe,D=y.x-ne/2,v=y.y-ye/2;n.drawImage((M?ge:we)[N],Y.x,Y.y,Y.w,Y.h,D,v,ne,ye)},yt=(n,g,y)=>{const M=[];let k="";return n.split(" ").forEach(N=>{g.measureText(k+N).width<y?k+=" "+N:(M.push(k.trim()),k=N)}),k.length>0&&M.push(k.trim()),M};let H={x:Number.MIN_VALUE,y:Number.MIN_VALUE},Je="unset",z,je=0,Oe=0,Le=0,Fe=0,Ne=!1;const vt=n=>{Ne=!0,je=n.offsetX,Oe=n.offsetY,Le=q,Fe=L,t(20,H={x:n.offsetX,y:n.offsetY}),z&&c(z)},kt=n=>{n.type==="pointerup"&&(Ne=!1),t(20,H={x:n.offsetX,y:n.offsetY})},St=n=>{Ne&&(t(18,q=Le-(je-n.offsetX)*S),t(19,L=Fe-(Oe-n.offsetY)*S)),t(20,H={x:n.offsetX,y:n.offsetY})},It=n=>{n.deltaY>0?S<30&&(t(18,q+=n.offsetX),t(19,L+=n.offsetY)):S>3&&(t(18,q-=n.offsetX),t(19,L-=n.offsetY)),t(17,S=Math.min(30,Math.max(3,S+n.deltaY/100))),n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation()};let Ye=0,De=0;const He=()=>{t(0,Ye=window.innerWidth),t(1,De=window.innerHeight)};let Te=!1;return s.$$set=n=>{"clickNode"in n&&t(9,c=n.clickNode),"circledNode"in n&&t(10,a=n.circledNode),"selectedJewel"in n&&t(11,p=n.selectedJewel),"selectedConqueror"in n&&t(12,m=n.selectedConqueror),"seed"in n&&t(13,h=n.seed),"$$scope"in n&&t(26,l=n.$$scope)},s.$$.update=()=>{s.$$.dirty[0]&131072&&t(23,r=1800/S),s.$$.dirty[0]&4325376&&(Te||(t(22,Te=!0),t(18,q=I.min_x+window.innerWidth/2*S),t(19,L=I.min_y+window.innerHeight/2*S),He())),s.$$.dirty[0]&29359104&&t(3,f=({context:n,width:g,height:y})=>{const M=window.performance.now();n.clearRect(0,0,g,y),n.fillStyle="#080c11",n.fillRect(0,0,g,y);const k={};Object.keys(u).forEach(D=>{n.strokeStyle=`hsl(${i/20}, 100%, 50%)`;const v=I.groups[D],P=Ie(v.x,v.y,q,L,S),C=Math.max(...v.orbits);ae.indexOf(parseInt(D))>=0||(C==1?F(n,b("PSGroupBackground1"),P):C==2?F(n,b("PSGroupBackground2"),P):(C==3||v.orbits.length>1)&&Re(n,b("PSGroupBackground3"),P))}),Object.keys(_).forEach(D=>{var J;const v=I.nodes[D],P=qe(v.orbit,v.orbitIndex),C=ve(v,q,L,S);(J=v.out)==null||J.forEach(re=>{if(!_[parseInt(re)])return;const Z=Math.min(parseInt(re),parseInt(D)),de=Math.max(parseInt(re),parseInt(D)),T=Z+":"+de;if(T in k)return;k[T]=!0;const j=I.nodes[parseInt(re)];if(j.isMastery)return;const le=qe(j.orbit,j.orbitIndex),ee=ve(j,q,L,S);if(n.beginPath(),v.group!=j.group||v.orbit!=j.orbit)n.moveTo(C.x,C.y),n.lineTo(ee.x,ee.y);else{let K=Math.PI/180-Math.PI/180*P,G=Math.PI/180-Math.PI/180*le;K-=Math.PI/2,G-=Math.PI/2;const ce=Math.abs(Math.max(K,G)-Math.min(K,G)),Et=ce>Math.PI?Math.max(K,G):Math.min(K,G),Pt=ce>Math.PI?Math.min(K,G):Math.max(K,G),ze=I.groups[v.group],Ge=Ie(ze.x,ze.y,q,L,S);n.arc(Ge.x,Ge.y,I.constants.orbitRadii[v.orbit]/S+1,Et,Pt)}n.lineWidth=6/S,n.strokeStyle="#524518",n.stroke()})});let N;a&&(N=ve(I.nodes[a],q,L,S),n.strokeStyle="#ad2b2b");let Y=!1,ne;if(Object.keys(_).forEach(D=>{const v=I.nodes[D],P=ve(v,q,L,S);let C=0,J=!1;a&&We(P,N)<r&&(J=!0),v.isKeystone?(C=110,be(n,v.icon,P,J),J?F(n,b("KeystoneFrameAllocated"),P):F(n,b("KeystoneFrameUnallocated"),P)):v.isNotable?(C=70,be(n,v.icon,P,J),J?F(n,b("NotableFrameAllocated"),P):F(n,b("NotableFrameUnallocated"),P)):v.isJewelSocket?(C=70,v.expansionJewel?F(n,b("JewelSocketAltNormal"),P):J?F(n,b("JewelFrameAllocated"),P):F(n,b("JewelFrameUnallocated"),P)):v.isMastery?be(n,v.inactiveIcon,P,J):(C=50,be(n,v.icon,P,J),J?F(n,b("PSSkillFrameActive"),P):F(n,b("PSSkillFrame"),P)),We(P,H)<C/S&&(ne=v,Y=J)}),t(21,z=ne),a&&(n.strokeStyle="#ad2b2b",n.beginPath(),n.arc(N.x,N.y,r,0,Math.PI*2),n.stroke()),z){let D=z.name,v=(z.stats||[]).map(T=>({text:T,special:!1}));if(!z.isJewelSocket&&Y&&z.skill&&h&&p&&m){const T=Calculate(TreeToPassive[z.skill],h,p,m);if(T){if("alternatePassiveSkill"in T){const j=GetAlternatePassiveSkillByIndex(T.alternatePassiveSkill);v=[],D=j.name,"statsKeys"in j&&j.statsKeys.forEach((le,ee)=>{const K=GetStatByIndex(le),G=V[K.id]||"";G&&v.push({text:Qe(G,T.statRolls[ee])||K.id,special:!0})})}"alternatePassiveAdditionInformations"in T&&T.alternatePassiveAdditionInformations.length>0&&T.alternatePassiveAdditionInformations.forEach(j=>{const le=GetAlternatePassiveAdditionByIndex(j.alternatePassiveSkillAddition);"statsKeys"in le&&le.statsKeys.forEach((ee,K)=>{const G=GetStatByIndex(ee),ce=V[G.id]||"";ce&&v.push({text:Qe(ce,j.statRolls[K])||G.id,special:!0})})})}}n.font=xe;const P=n.measureText(D),C=Math.max(P.width+50,600);n.font=$e;const J=[],re=30;let Z=85;v&&v.length>0?v.forEach(T=>{J.length>0&&(Z+=5),T.text.split(`
`).forEach(j=>{J.length>0&&(Z+=10),yt(j,n,C-re).forEach(ee=>{J.push({text:ee,offset:Z,special:T.special}),Z+=20})})}):z.isJewelSocket&&(J.push({text:"Click to select this socket",offset:Z,special:!0}),Z+=20);const de=55;n.fillStyle="rgba(75,63,24,0.9)",n.fillRect(H.x,H.y,C,de),n.fillStyle="#ffffff",n.font=xe,n.textAlign="center",n.fillText(D,H.x+C/2,H.y+35),n.fillStyle="rgba(0,0,0,0.8)",n.fillRect(H.x,H.y+de,C,Z-de),n.font=$e,n.textAlign="left",J.forEach(T=>{T.special?n.fillStyle="#8cf34c":n.fillStyle="#ffffff",n.fillText(T.text,H.x+re/2,H.y+T.offset)})}z&&z.isJewelSocket?t(2,Je="pointer"):t(2,Je="unset"),n.fillStyle="#ffffff",n.textAlign="right",n.font="12px Roboto Mono";const ye=window.performance.now();n.fillText(`${(ye-M).toFixed(1)}ms`,g-5,17)})},[Ye,De,Je,f,vt,kt,St,It,He,c,a,p,m,h,u,_,V,S,q,L,H,z,Te,r,i,o,l]}class es extends Ee{constructor(e){super(),Pe(this,e,$t,xt,Me,{clickNode:9,circledNode:10,selectedJewel:11,selectedConqueror:12,seed:13},null,[-1,-1])}}function et(s){let e,t,r,f,i,o,l,c=s[1]&&TimelessJewelConquerors[s[0].value].indexOf(s[1].value)>=0,a,p;function m(_){s[9](_)}let h={items:s[4]};s[1]!==void 0&&(h.value=s[1]),i=new pt({props:h}),Se.push(()=>ht(i,"value",m)),i.$on("select",s[7]);let u=c&&tt(s);return{c(){e=B("div"),t=B("h3"),r=te("Conqueror"),f=x(),he(i.$$.fragment),l=x(),u&&u.c(),a=ue(),this.h()},l(_){e=U(_,"DIV",{class:!0});var w=W(e);t=U(w,"H3",{class:!0});var d=W(t);r=se(d,"Conqueror"),d.forEach(E),f=$(w),_e(i.$$.fragment,w),w.forEach(E),l=$(_),u&&u.l(_),a=ue(),this.h()},h(){R(t,"class","mb-2"),R(e,"class","mt-4")},m(_,w){O(_,e,w),A(e,t),A(t,r),A(e,f),me(i,e,null),O(_,l,w),u&&u.m(_,w),O(_,a,w),p=!0},p(_,w){const d={};w&16&&(d.items=_[4]),!o&&w&2&&(o=!0,d.value=_[1],_t(()=>o=!1)),i.$set(d),w&3&&(c=_[1]&&TimelessJewelConquerors[_[0].value].indexOf(_[1].value)>=0),c?u?u.p(_,w):(u=tt(_),u.c(),u.m(a.parentNode,a)):u&&(u.d(1),u=null)},i(_){p||(X(i.$$.fragment,_),p=!0)},o(_){Q(i.$$.fragment,_),p=!1},d(_){_&&E(e),pe(i),_&&E(l),u&&u.d(_),_&&E(a)}}}function tt(s){let e,t,r,f,i,o,l,c,a,p,m,h,u=(s[2]<TimelessJewelSeedRanges[s[0].value].min||s[2]>TimelessJewelSeedRanges[s[0].value].max)&&st(s),_=!s[3]&&it();return{c(){e=B("div"),t=B("h3"),r=te("Seed"),f=x(),i=B("input"),c=x(),u&&u.c(),a=x(),_&&_.c(),p=ue(),this.h()},l(w){e=U(w,"DIV",{class:!0});var d=W(e);t=U(d,"H3",{class:!0});var V=W(t);r=se(V,"Seed"),V.forEach(E),f=$(d),i=U(d,"INPUT",{type:!0,class:!0,min:!0,max:!0}),c=$(d),u&&u.l(d),d.forEach(E),a=$(w),_&&_.l(w),p=ue(),this.h()},h(){R(t,"class","mb-2"),R(i,"type","number"),R(i,"class","seed"),R(i,"min",o=TimelessJewelSeedRanges[s[0].value].min),R(i,"max",l=TimelessJewelSeedRanges[s[0].value].max),R(e,"class","mt-4")},m(w,d){O(w,e,d),A(e,t),A(t,r),A(e,f),A(e,i),Xe(i,s[2]),A(e,c),u&&u.m(e,null),O(w,a,d),_&&_.m(w,d),O(w,p,d),m||(h=[oe(i,"input",s[10]),oe(i,"blur",s[7])],m=!0)},p(w,d){d&1&&o!==(o=TimelessJewelSeedRanges[w[0].value].min)&&R(i,"min",o),d&1&&l!==(l=TimelessJewelSeedRanges[w[0].value].max)&&R(i,"max",l),d&4&&mt(i.value)!==w[2]&&Xe(i,w[2]),w[2]<TimelessJewelSeedRanges[w[0].value].min||w[2]>TimelessJewelSeedRanges[w[0].value].max?u?u.p(w,d):(u=st(w),u.c(),u.m(e,null)):u&&(u.d(1),u=null),w[3]?_&&(_.d(1),_=null):_||(_=it(),_.c(),_.m(p.parentNode,p))},d(w){w&&E(e),u&&u.d(),w&&E(a),_&&_.d(w),w&&E(p),m=!1,dt(h)}}}function st(s){let e,t,r=TimelessJewelSeedRanges[s[0].value].min+"",f,i,o=TimelessJewelSeedRanges[s[0].value].max+"",l;return{c(){e=B("div"),t=te("Seed must be between "),f=te(r),i=te(" and "),l=te(o),this.h()},l(c){e=U(c,"DIV",{class:!0});var a=W(e);t=se(a,"Seed must be between "),f=se(a,r),i=se(a," and "),l=se(a,o),a.forEach(E),this.h()},h(){R(e,"class","mt-2")},m(c,a){O(c,e,a),A(e,t),A(e,f),A(e,i),A(e,l)},p(c,a){a&1&&r!==(r=TimelessJewelSeedRanges[c[0].value].min+"")&&Be(f,r),a&1&&o!==(o=TimelessJewelSeedRanges[c[0].value].max+"")&&Be(l,o)},d(c){c&&E(e)}}}function it(s){let e,t;return{c(){e=B("h2"),t=te("Click on a jewel socket"),this.h()},l(r){e=U(r,"H2",{class:!0});var f=W(e);t=se(f,"Click on a jewel socket"),f.forEach(E),this.h()},h(){R(e,"class","mt-4")},m(r,f){O(r,e,f),A(e,t)},d(r){r&&E(e)}}}function ts(s){let e,t,r,f,i,o,l,c;function a(h){s[8](h)}let p={items:s[5]};s[0]!==void 0&&(p.value=s[0]),i=new pt({props:p}),Se.push(()=>ht(i,"value",a)),i.$on("select",s[7]);let m=s[0]&&et(s);return{c(){e=B("div"),t=B("h3"),r=te("Timeless Jewel"),f=x(),he(i.$$.fragment),l=x(),m&&m.c(),this.h()},l(h){e=U(h,"DIV",{class:!0});var u=W(e);t=U(u,"H3",{class:!0});var _=W(t);r=se(_,"Timeless Jewel"),_.forEach(E),f=$(u),_e(i.$$.fragment,u),l=$(u),m&&m.l(u),u.forEach(E),this.h()},h(){R(t,"class","mb-2"),R(e,"class","w-screen md:w-1/2 lg:w-1/3 xl:w-1/4 2xl:w-1/5 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed p-4 rounded-br-lg")},m(h,u){O(h,e,u),A(e,t),A(t,r),A(e,f),me(i,e,null),A(e,l),m&&m.m(e,null),c=!0},p(h,u){const _={};!o&&u&1&&(o=!0,_.value=h[0],_t(()=>o=!1)),i.$set(_),h[0]?m?(m.p(h,u),u&1&&X(m,1)):(m=et(h),m.c(),X(m,1),m.m(e,null)):m&&(ft(),Q(m,1,1,()=>{m=null}),ut())},i(h){c||(X(i.$$.fragment,h),X(m),c=!0)},o(h){Q(i.$$.fragment,h),Q(m),c=!1},d(h){h&&E(e),pe(i),m&&m.d()}}}function ss(s){var r,f;let e,t;return e=new es({props:{clickNode:s[6],circledNode:s[3],selectedJewel:(r=s[0])==null?void 0:r.value,selectedConqueror:(f=s[1])==null?void 0:f.value,seed:s[2],$$slots:{default:[ts]},$$scope:{ctx:s}}}),{c(){he(e.$$.fragment)},l(i){_e(e.$$.fragment,i)},m(i,o){me(e,i,o),t=!0},p(i,[o]){var c,a;const l={};o&8&&(l.circledNode=i[3]),o&1&&(l.selectedJewel=(c=i[0])==null?void 0:c.value),o&2&&(l.selectedConqueror=(a=i[1])==null?void 0:a.value),o&4&&(l.seed=i[2]),o&8223&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){t||(X(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){pe(e,i)}}}function is(s,e,t){let r,f;ct(s,Ot,d=>t(11,f=d));const i=f.url.searchParams,o=Object.keys(TimelessJewels).map(d=>({value:parseInt(d),label:TimelessJewels[d]}));let l=i.has("jewel")?o.find(d=>d.value==i.get("jewel")):void 0,c=i.has("conqueror")?{value:i.get("conqueror"),label:i.get("conqueror")}:void 0,a=i.has("seed")?parseInt(i.get("seed")):0,p=i.has("location")?parseInt(i.get("location")):void 0;const m=d=>{d.isJewelSocket&&(t(3,p=d.skill),h())},h=()=>{{const d={};l&&(d.jewel=l.value),c&&(d.conqueror=c.value),a&&(d.seed=a),p&&(d.location=p);const V=Object.keys(d).map(ae=>ae+"="+encodeURIComponent(d[ae])).join("&");jt(f.url.pathname+"?"+V)}};function u(d){l=d,t(0,l)}function _(d){c=d,t(1,c)}function w(){a=mt(this.value),t(2,a)}return s.$$.update=()=>{s.$$.dirty&1&&t(4,r=l?TimelessJewelConquerors[l.value].map(d=>({value:d,label:d})):[])},[l,c,a,p,r,o,m,h,u,_,w]}class as extends Ee{constructor(e){super(),Pe(this,e,is,ss,Me,{})}}export{as as default};
