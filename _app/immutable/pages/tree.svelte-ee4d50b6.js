import{a9 as Nl,R as ne,aa as Ml,S as $e,i as et,s as tt,I as ut,e as z,k as L,c as C,a as M,d as w,m as j,b as I,f as Et,g as D,ab as Ol,J as ct,K as dt,L as ht,q as U,o as H,r as Dl,v as Il,ac as Ot,N as xe,E as it,a8 as Vl,w as Ce,x as Ne,y as Me,M as b,B as Oe,l as pe,n as De,p as Ve,G as lt,V as Ee,ad as Jl,t as V,h as J,j as be,U as mt,a2 as Ll,a3 as jl,X as Ul,W as ze,P as Dt,T as Fe,O as Vt,Q as Be}from"../chunks/index-7969860d.js";import{r as ql,d as Fl}from"../chunks/index-3d8bec42.js";import{g as Pe,b as Bl,a as Ze,d as Nt,t as jt,c as Qe,o as Ut,e as It,f as qt,i as Ft,h as Bt,j as Gl,k as Gt,m as nt,n as yl,p as Kl,s as Hl,q as Wl}from"../chunks/worker-3ca473bf.js";import{g as Yl,S as At,p as Xl}from"../chunks/stores-0b2c0e1d.js";import"../chunks/singletons-cdeec3fd.js";const Ql=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function Zl(){const l=Nl();return e=>{const t=Ql.map(i=>ne(e,i,r=>Ml(l,r)));return{destroy:()=>t.forEach(i=>i())}}}class xl{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:e,render:t}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,t),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.needsRedraw=!0}render({autoclear:e,pixelRatio:t,context:i,width:r,height:s}){const n={context:i,width:r,height:s};if(this.needsResize&&(i.setTransform(t,0,0,t,0,0),this.needsResize=!1),this.needsSetup){for(const[f,o]of this.setups)o(n),this.setups.delete(f);this.needsSetup=!1}if(this.needsRedraw){e&&i.clearRect(0,0,r,s);for(const f of this.layerSequence)this.renderers.get(f)(n);this.needsRedraw=!1}}}function $l(l){let e,t,i,r,s,n,f,o,a;const h=l[13].default,m=ut(h,l,l[12],null);return{c(){e=z("canvas"),s=L(),n=z("div"),m&&m.c(),this.h()},l(d){e=C(d,"CANVAS",{style:!0,width:!0,height:!0}),M(e).forEach(w),s=j(d),n=C(d,"DIV",{style:!0});var g=M(n);m&&m.l(g),g.forEach(w),this.h()},h(){I(e,"style",t="display: block; width: "+l[1]+"px; height: "+l[2]+"px;"+(l[3]?` ${l[3]}`:"")),I(e,"width",i=l[1]*l[0]),I(e,"height",r=l[2]*l[0]),Et(n,"display","none")},m(d,g){D(d,e,g),l[14](e),D(d,s,g),D(d,n,g),m&&m.m(n,null),l[15](n),f=!0,o||(a=Ol(l[6].call(null,e)),o=!0)},p(d,[g]){(!f||g&14&&t!==(t="display: block; width: "+d[1]+"px; height: "+d[2]+"px;"+(d[3]?` ${d[3]}`:"")))&&I(e,"style",t),(!f||g&3&&i!==(i=d[1]*d[0]))&&I(e,"width",i),(!f||g&5&&r!==(r=d[2]*d[0]))&&I(e,"height",r),m&&m.p&&(!f||g&4096)&&ct(m,h,d,d[12],f?ht(h,d[12],g,null):dt(d[12]),null)},i(d){f||(U(m,d),f=!0)},o(d){H(m,d),f=!1},d(d){d&&w(e),l[14](null),d&&w(s),d&&w(n),m&&m.d(d),l[15](null),o=!1,a()}}}const El={};function es(l,e,t){let{$$slots:i={},$$scope:r}=e,{width:s=640,height:n=640,pixelRatio:f=void 0,style:o=null,autoclear:a=!0}=e,h,m,d,g,u;const c=Zl(),_=new xl;function S(){_.redraw()}function y(){return h}function P(){return m}f===void 0&&(typeof window=="undefined"?f=2:f=window.devicePixelRatio);function R(){_.render({context:m,width:s,height:n,pixelRatio:f,autoclear:a}),d=window.requestAnimationFrame(R)}Dl(El,{register:_.register,unregister:_.unregister,redraw:_.redraw}),Il(()=>{m=h.getContext("2d"),u=new MutationObserver(k),u.observe(g,{childList:!0}),k(),R();function k(){const T=[...g.children].map(q=>+q.dataset.layerId);t(11,_.layerSequence=T,_),_.redraw()}}),Ot(()=>{typeof window!="undefined"&&(window.cancelAnimationFrame(d),u.disconnect())});function v(k){xe[k?"unshift":"push"](()=>{h=k,t(4,h)})}function E(k){xe[k?"unshift":"push"](()=>{g=k,t(5,g)})}return l.$$set=k=>{"width"in k&&t(1,s=k.width),"height"in k&&t(2,n=k.height),"pixelRatio"in k&&t(0,f=k.pixelRatio),"style"in k&&t(3,o=k.style),"autoclear"in k&&t(7,a=k.autoclear),"$$scope"in k&&t(12,r=k.$$scope)},l.$$.update=()=>{l.$$.dirty&2183&&_.resize()},[f,s,n,o,h,g,c,a,S,y,P,_,r,i,v,E]}class ts extends $e{constructor(e){super(),et(this,e,es,$l,tt,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function ls(l){let e;return{c(){e=z("div"),this.h()},l(t){e=C(t,"DIV",{"data-layer-id":!0}),M(e).forEach(w),this.h()},h(){I(e,"data-layer-id",l[0])},m(t,i){D(t,e,i)},p:it,i:it,o:it,d(t){t&&w(e)}}}function ss(l,e,t){const{register:i,unregister:r,redraw:s}=Vl(El);let{setup:n=void 0,render:f=()=>{}}=e;if(typeof n!="function"&&n!==void 0)throw new Error("setup must be a function");if(typeof f!="function")throw new Error("render must be a function");const o=i({setup:n,render:f});return Ot(()=>r(o)),l.$$set=a=>{"setup"in a&&t(1,n=a.setup),"render"in a&&t(2,f=a.render)},l.$$.update=()=>{l.$$.dirty&4&&s()},[o,n,f]}class is extends $e{constructor(e){super(),et(this,e,ss,ls,tt,{setup:1,render:2})}}let Kt;const Tl=Date.now();function Al(l){return l(Date.now()-Tl),Kt=window.requestAnimationFrame(()=>Al(l)),()=>window.cancelAnimationFrame(Kt)}function ns(){}var rs=ql(Date.now()-Tl,typeof window=="undefined"?ns:Al);const{window:Mt}=Jl;function Ht(l){let e,t,i,r,s,n;t=new ts({props:{width:l[0],height:l[1],$$slots:{default:[os]},$$scope:{ctx:l}}}),t.$on("pointerdown",l[17]),t.$on("wheel",l[20]);const f=l[50].default,o=ut(f,l,l[51],null);return{c(){e=z("div"),Ce(t.$$.fragment),i=L(),o&&o.c(),this.h()},l(a){e=C(a,"DIV",{style:!0});var h=M(e);Ne(t.$$.fragment,h),i=j(h),o&&o.l(h),h.forEach(w),this.h()},h(){Et(e,"touch-action","none"),Et(e,"cursor",l[2])},m(a,h){D(a,e,h),Me(t,e,null),b(e,i),o&&o.m(e,null),r=!0,s||(n=ne(e,"resize",l[21]),s=!0)},p(a,h){const m={};h[0]&1&&(m.width=a[0]),h[0]&2&&(m.height=a[1]),h[0]&8|h[1]&1048576&&(m.$$scope={dirty:h,ctx:a}),t.$set(m),o&&o.p&&(!r||h[1]&1048576)&&ct(o,f,a,a[51],r?ht(f,a[51],h,null):dt(a[51]),null),(!r||h[0]&4)&&Et(e,"cursor",a[2])},i(a){r||(U(t.$$.fragment,a),U(o,a),r=!0)},o(a){H(t.$$.fragment,a),H(o,a),r=!1},d(a){a&&w(e),Oe(t),o&&o.d(a),s=!1,n()}}}function os(l){let e,t;return e=new is({props:{render:l[3]}}),{c(){Ce(e.$$.fragment)},l(i){Ne(e.$$.fragment,i)},m(i,r){Me(e,i,r),t=!0},p(i,r){const s={};r[0]&8&&(s.render=i[3]),e.$set(s)},i(i){t||(U(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){Oe(e,i)}}}function as(l){let e,t,i,r,s=l[0]&&l[1]&&Ht(l);return{c(){s&&s.c(),e=pe()},l(n){s&&s.l(n),e=pe()},m(n,f){s&&s.m(n,f),D(n,e,f),t=!0,i||(r=[ne(Mt,"pointerup",l[18]),ne(Mt,"pointermove",l[19]),ne(Mt,"resize",l[21])],i=!0)},p(n,f){n[0]&&n[1]?s?(s.p(n,f),f[0]&3&&U(s,1)):(s=Ht(n),s.c(),U(s,1),s.m(e.parentNode,e)):s&&(De(),H(s,1,1,()=>{s=null}),Ve())},i(n){t||(U(s),t=!0)},o(n){H(s),t=!1},d(n){s&&s.d(n),n&&w(e),i=!1,lt(r)}}}const Wt="25px Roboto Mono",Yt="17px Roboto Mono",st=2.6;function fs(l,e,t){let i,r,s,n,f,o,a,h,m,d,g,u,c,_,S,{$$slots:y={},$$scope:P}=e,{clickNode:R}=e,{circledNode:v}=e,{selectedJewel:E}=e,{selectedConqueror:k}=e,{seed:T}=e,{highlighted:q=[]}=e,{disabled:Y=[]}=e,{highlightJewels:fe=!1}=e;const Q=Fl(rs,p=>(!q||!q.length)&&!fe?0:Math.round(p/40));Ee(l,Q,p=>t(37,s=p));const x=[427,320,226,227,323,422,329];let F=10,le=0,$=0;const B=(p,oe,X)=>{const K=oe.width/F*st,Z=oe.height/F*st,ae=X.x-K/2,Ie=X.y-Z/2;p.drawImage(oe,ae,Ie,K,Z)},ve=(p,oe,X)=>{const K=oe.width/F*st,Z=oe.height/F*st,ae=X.x-K/2,Ie=X.y-Z/2,We=Ie-Z/2;p.drawImage(oe,ae,We,K,Z),p.save(),p.translate(ae,Ie),p.rotate(Math.PI),p.drawImage(oe,-K,-(Z/2),K,-Z),p.restore()},we={},re={},O=(p,oe,X,K=!1)=>{let Z=K?Gl[oe]:Gt[oe];!Z&&K&&(Z=Gt[oe]);const ae=Z.filename;ae in(K?re:we)||((K?re:we)[ae]=new Image,(K?re:we)[ae].src=ae);const Ie=Z.coords[oe],We=Ie.w/F*st,kt=Ie.h/F*st,ye=X.x-We/2,W=X.y-kt/2;p.drawImage((K?re:we)[ae],Ie.x,Ie.y,Ie.w,Ie.h,ye,W,We,kt)},se=(p,oe,X)=>{const K=[];let Z="";return p.split(" ").forEach(ae=>{oe.measureText(Z+ae).width<X?Z+=" "+ae:(K.push(Z.trim()),Z=ae)}),Z.length>0&&K.push(Z.trim()),K};let G={x:Number.MIN_VALUE,y:Number.MIN_VALUE},N="unset";const ee=Pe("PSGroupBackground1");Ee(l,ee,p=>t(49,S=p));const de=Pe("PSGroupBackground2");Ee(l,de,p=>t(48,_=p));const ue=Pe("PSGroupBackground3");Ee(l,ue,p=>t(47,c=p));const me=Pe("KeystoneFrameAllocated");Ee(l,me,p=>t(46,u=p));const Te=Pe("KeystoneFrameUnallocated");Ee(l,Te,p=>t(45,g=p));const he=Pe("NotableFrameAllocated");Ee(l,he,p=>t(44,d=p));const Je=Pe("NotableFrameUnallocated");Ee(l,Je,p=>t(43,m=p));const Ge=Pe("JewelSocketAltNormal");Ee(l,Ge,p=>t(42,h=p));const Ke=Pe("JewelFrameAllocated");Ee(l,Ke,p=>t(41,a=p));const Ue=Pe("JewelFrameUnallocated");Ee(l,Ue,p=>t(40,o=p));const _t=Pe("PSSkillFrameActive");Ee(l,_t,p=>t(39,f=p));const gt=Pe("PSSkillFrame");Ee(l,gt,p=>t(38,n=p));let ke,pt=0,wt=0,bt=0,vt=0,rt=!1;const Rt=p=>{rt=!0,pt=p.offsetX,wt=p.offsetY,bt=le,vt=$,t(33,G={x:p.offsetX,y:p.offsetY}),ke&&R(ke)},Pt=p=>{p.type==="pointerup"&&(rt=!1),t(33,G={x:p.offsetX,y:p.offsetY})},zt=p=>{rt&&(t(31,le=bt-(pt-p.offsetX)*F),t(32,$=vt-(wt-p.offsetY)*F)),t(33,G={x:p.offsetX,y:p.offsetY})},Ct=p=>{p.deltaY>0?F<30&&(t(31,le+=p.offsetX),t(32,$+=p.offsetY)):F>3&&(t(31,le-=p.offsetX),t(32,$-=p.offsetY)),t(30,F=Math.min(30,Math.max(3,F+p.deltaY/100))),p.preventDefault(),p.stopPropagation(),p.stopImmediatePropagation()};let St=0,A=0;const te=()=>{t(0,St=window.innerWidth),t(1,A=window.innerHeight)};let He=!1;return l.$$set=p=>{"clickNode"in p&&t(22,R=p.clickNode),"circledNode"in p&&t(23,v=p.circledNode),"selectedJewel"in p&&t(24,E=p.selectedJewel),"selectedConqueror"in p&&t(25,k=p.selectedConqueror),"seed"in p&&t(26,T=p.seed),"highlighted"in p&&t(27,q=p.highlighted),"disabled"in p&&t(28,Y=p.disabled),"highlightJewels"in p&&t(29,fe=p.highlightJewels),"$$scope"in p&&t(51,P=p.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&1073741824&&t(36,i=Bl/F),l.$$.dirty[0]&1073741824|l.$$.dirty[1]&16&&(!He&&Ze&&(t(35,He=!0),t(31,le=Ze.min_x+window.innerWidth/2*F),t(32,$=Ze.min_y+window.innerHeight/2*F)),te()),l.$$.dirty[0]&2139095040|l.$$.dirty[1]&524271&&t(3,r=({context:p,width:oe,height:X})=>{const K=window.performance.now();p.clearRect(0,0,oe,X),p.fillStyle="#080c11",p.fillRect(0,0,oe,X);const Z={};Object.keys(Nt).forEach(ye=>{const W=Nt[ye],ie=jt(W.x,W.y,le,$,F),ge=Math.max(...W.orbits);x.indexOf(parseInt(ye))>=0||(ge==1?B(p,S,ie):ge==2?B(p,_,ie):(ge==3||W.orbits.length>1)&&ve(p,c,ie))}),Object.keys(Qe).forEach(ye=>{var ce;const W=Qe[ye],ie=Ut(W.orbit,W.orbitIndex),ge=It(W,le,$,F);(ce=W.out)==null||ce.forEach(Ye=>{if(!Qe[parseInt(Ye)])return;const Le=Math.min(parseInt(Ye),parseInt(ye)),ot=Math.max(parseInt(Ye),parseInt(ye)),_e=Le+":"+ot;if(_e in Z)return;Z[_e]=!0;const Se=Qe[parseInt(Ye)];if(!Se||Se.isMastery)return;const Xe=Ut(Se.orbit,Se.orbitIndex),qe=It(Se,le,$,F);if(p.beginPath(),W.group!=Se.group||W.orbit!=Se.orbit)p.moveTo(ge.x,ge.y),p.lineTo(qe.x,qe.y);else{let Re=Math.PI/180-Math.PI/180*ie,Ae=Math.PI/180-Math.PI/180*Xe;Re-=Math.PI/2,Ae-=Math.PI/2;const at=Math.abs(Math.max(Re,Ae)-Math.min(Re,Ae)),zl=at>Math.PI?Math.max(Re,Ae):Math.min(Re,Ae),Cl=at>Math.PI?Math.min(Re,Ae):Math.max(Re,Ae),Jt=Nt[W.group],Lt=jt(Jt.x,Jt.y,le,$,F);p.arc(Lt.x,Lt.y,Ze.constants.orbitRadii[W.orbit]/F+1,zl,Cl)}p.lineWidth=6/F,p.strokeStyle="#524518",p.stroke()})});let ae;v&&(ae=It(Qe[v],le,$,F),p.strokeStyle="#ad2b2b");let Ie=!1,We;if(Object.keys(Qe).forEach(ye=>{const W=Qe[ye],ie=It(W,le,$,F);let ge=0,ce=!1;v&&qt(ie,ae)<i&&(ce=!0),Y.indexOf(W.skill)>=0&&(ce=!1),W.isKeystone?(ge=110,O(p,W.icon,ie,ce),ce?B(p,u,ie):B(p,g,ie)):W.isNotable?(ge=70,O(p,W.icon,ie,ce),ce?B(p,d,ie):B(p,m,ie)):W.isJewelSocket?(ge=70,W.expansionJewel?B(p,h,ie):ce?B(p,a,ie):B(p,o,ie)):W.isMastery?O(p,W.inactiveIcon,ie,ce):(ge=50,O(p,W.icon,ie,ce),ce?B(p,f,ie):B(p,n,ie)),(q.indexOf(W.skill)>=0||fe&&W.isJewelSocket)&&(p.strokeStyle=`hsl(${s}, 100%, 50%)`,p.lineWidth=3,p.beginPath(),p.arc(ie.x,ie.y,(ge+30)/F,0,Math.PI*2),p.stroke()),qt(ie,G)<ge/F&&(We=W,Ie=ce)}),t(34,ke=We),v&&(p.strokeStyle="#ad2b2b",p.lineWidth=1,p.beginPath(),p.arc(ae.x,ae.y,i,0,Math.PI*2),p.stroke()),ke){let ye=ke.name,W=(ke.stats||[]).map(_e=>({text:_e,special:!1}));if(!ke.isJewelSocket&&Ie&&ke.skill&&T&&E&&k){const _e=Calculate(TreeToPassive[ke.skill],T,E,k);if(_e){if("alternatePassiveSkill"in _e){const Se=GetAlternatePassiveSkillByIndex(_e.alternatePassiveSkill);W=[],ye=Se.name,"statsKeys"in Se&&Se.statsKeys.forEach((Xe,qe)=>{const Re=GetStatByIndex(Xe),Ae=Ft[Re.id]||"";Ae&&W.push({text:Bt(Ae,_e.statRolls[qe])||Re.id,special:!0})})}"alternatePassiveAdditionInformations"in _e&&_e.alternatePassiveAdditionInformations.length>0&&_e.alternatePassiveAdditionInformations.forEach(Se=>{const Xe=GetAlternatePassiveAdditionByIndex(Se.alternatePassiveSkillAddition);"statsKeys"in Xe&&Xe.statsKeys.forEach((qe,Re)=>{const Ae=GetStatByIndex(qe),at=Ft[Ae.id]||"";at&&W.push({text:Bt(at,Se.statRolls[Re])||Ae.id,special:!0})})})}}p.font=Wt;const ie=p.measureText(ye),ge=Math.max(ie.width+50,600);p.font=Yt;const ce=[],Ye=30;let Le=85;W&&W.length>0?W.forEach(_e=>{ce.length>0&&(Le+=5),_e.text.split(`
`).forEach(Se=>{ce.length>0&&(Le+=10),se(Se,p,ge-Ye).forEach(qe=>{ce.push({text:qe,offset:Le,special:_e.special}),Le+=20})})}):ke.isJewelSocket&&(ce.push({text:"Click to select this socket",offset:Le,special:!0}),Le+=20);const ot=55;p.fillStyle="rgba(75,63,24,0.9)",p.fillRect(G.x,G.y,ge,ot),p.fillStyle="#ffffff",p.font=Wt,p.textAlign="center",p.fillText(ye,G.x+ge/2,G.y+35),p.fillStyle="rgba(0,0,0,0.8)",p.fillRect(G.x,G.y+ot,ge,Le-ot),p.font=Yt,p.textAlign="left",ce.forEach(_e=>{_e.special?p.fillStyle="#8cf34c":p.fillStyle="#ffffff",p.fillText(_e.text,G.x+Ye/2,G.y+_e.offset)})}ke&&ke.isJewelSocket?t(2,N="pointer"):t(2,N="unset"),p.fillStyle="#ffffff",p.textAlign="right",p.font="12px Roboto Mono";const kt=window.performance.now();p.fillText(`${(kt-K).toFixed(1)}ms`,oe-5,17)})},[St,A,N,r,Q,ee,de,ue,me,Te,he,Je,Ge,Ke,Ue,_t,gt,Rt,Pt,zt,Ct,te,R,v,E,k,T,q,Y,fe,F,le,$,G,ke,He,i,s,n,f,o,a,h,m,d,g,u,c,_,S,y,P]}class us extends $e{constructor(e){super(),et(this,e,fs,as,tt,{clickNode:22,circledNode:23,selectedJewel:24,selectedConqueror:25,seed:26,highlighted:27,disabled:28,highlightJewels:29},null,[-1,-1,-1])}}function Xt(l,e,t){const i=l.slice();return i[6]=e[t],i}function Qt(l,e,t){const i=l.slice();return i[9]=e[t],i}function Zt(l){let e,t=nt(l[9],l[6].stats[l[9]])+"",i;return{c(){e=z("li"),i=V(t)},l(r){e=C(r,"LI",{});var s=M(e);i=J(s,t),s.forEach(w)},m(r,s){D(r,e,s),b(e,i)},p(r,s){s&2&&t!==(t=nt(r[9],r[6].stats[r[9]])+"")&&be(i,t)},d(r){r&&w(e)}}}function xt(l){let e,t,i=Ze.nodes[l[6].passive].name+"",r,s,n=l[6].passive+"",f,o,a,h,m,d=Object.keys(l[6].stats),g=[];for(let u=0;u<d.length;u+=1)g[u]=Zt(Qt(l,d,u));return{c(){e=z("div"),t=z("span"),r=V(i),s=V(" ("),f=V(n),o=V(")"),a=L(),h=z("ul");for(let u=0;u<g.length;u+=1)g[u].c();m=L(),this.h()},l(u){e=C(u,"DIV",{class:!0});var c=M(e);t=C(c,"SPAN",{});var _=M(t);r=J(_,i),s=J(_," ("),f=J(_,n),o=J(_,")"),_.forEach(w),a=j(c),h=C(c,"UL",{class:!0});var S=M(h);for(let y=0;y<g.length;y+=1)g[y].l(S);S.forEach(w),m=j(c),c.forEach(w),this.h()},h(){I(h,"class","list-disc pl-6 font-bold"),I(e,"class","mt-2")},m(u,c){D(u,e,c),b(e,t),b(t,r),b(t,s),b(t,f),b(t,o),b(e,a),b(e,h);for(let _=0;_<g.length;_+=1)g[_].m(h,null);b(e,m)},p(u,c){if(c&2&&i!==(i=Ze.nodes[u[6].passive].name+"")&&be(r,i),c&2&&n!==(n=u[6].passive+"")&&be(f,n),c&2){d=Object.keys(u[6].stats);let _;for(_=0;_<d.length;_+=1){const S=Qt(u,d,_);g[_]?g[_].p(S,c):(g[_]=Zt(S),g[_].c(),g[_].m(h,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=d.length}},d(u){u&&w(e),mt(g,u)}}}function cs(l){let e,t,i,r,s,n,f,o=l[1].seed+"",a,h,m=l[1].weight+"",d,g,u,c,_,S,y,P,R=l[1].skills,v=[];for(let E=0;E<R.length;E+=1)v[E]=xt(Xt(l,R,E));return{c(){e=z("div"),t=z("div"),i=z("button"),r=V("Trade"),s=L(),n=z("div"),f=V("Seed "),a=V(o),h=V(" (weight "),d=V(m),g=V(")"),u=L(),c=z("button"),_=V("Trade"),S=L();for(let E=0;E<v.length;E+=1)v[E].c();this.h()},l(E){e=C(E,"DIV",{class:!0});var k=M(e);t=C(k,"DIV",{class:!0});var T=M(t);i=C(T,"BUTTON",{class:!0});var q=M(i);r=J(q,"Trade"),q.forEach(w),s=j(T),n=C(T,"DIV",{class:!0});var Y=M(n);f=J(Y,"Seed "),a=J(Y,o),h=J(Y," (weight "),d=J(Y,m),g=J(Y,")"),Y.forEach(w),u=j(T),c=C(T,"BUTTON",{class:!0});var fe=M(c);_=J(fe,"Trade"),fe.forEach(w),T.forEach(w),S=j(k);for(let Q=0;Q<v.length;Q+=1)v[Q].l(k);k.forEach(w),this.h()},h(){I(i,"class","px-3 invisible"),I(n,"class","font-bold text-orange-500 text-center"),I(c,"class","px-3 bg-blue-500/40 rounded"),I(t,"class","flex flex-row justify-between"),I(e,"class","my-2 border-white/50 border p-2 flex flex-col cursor-pointer")},m(E,k){D(E,e,k),b(e,t),b(t,i),b(i,r),b(t,s),b(t,n),b(n,f),b(n,a),b(n,h),b(n,d),b(n,g),b(t,u),b(t,c),b(c,_),b(e,S);for(let T=0;T<v.length;T+=1)v[T].m(e,null);y||(P=[ne(c,"click",l[4]),ne(e,"click",l[5])],y=!0)},p(E,[k]){if(k&2&&o!==(o=E[1].seed+"")&&be(a,o),k&2&&m!==(m=E[1].weight+"")&&be(d,m),k&2){R=E[1].skills;let T;for(T=0;T<R.length;T+=1){const q=Xt(E,R,T);v[T]?v[T].p(q,k):(v[T]=xt(q),v[T].c(),v[T].m(e,null))}for(;T<v.length;T+=1)v[T].d(1);v.length=R.length}},i:it,o:it,d(E){E&&w(e),mt(v,E),y=!1,lt(P)}}}function ds(l,e,t){let{highlight:i}=e,{set:r}=e,{jewel:s}=e,{conqueror:n}=e;const f=()=>yl(s,n,[r]),o=()=>i(r.seed,r.skills.map(a=>a.passive));return l.$$set=a=>{"highlight"in a&&t(0,i=a.highlight),"set"in a&&t(1,r=a.set),"jewel"in a&&t(2,s=a.jewel),"conqueror"in a&&t(3,n=a.conqueror)},[i,r,s,n,f,o]}class Rl extends $e{constructor(e){super(),et(this,e,ds,cs,tt,{highlight:0,set:1,jewel:2,conqueror:3})}}const yt={AUTO:"auto",START:"start",CENTER:"center",END:"end"},je={HORIZONTAL:"horizontal",VERTICAL:"vertical"},ft={OBSERVED:0,REQUESTED:1},hs={[je.VERTICAL]:"top",[je.HORIZONTAL]:"left"},$t={[je.VERTICAL]:"scrollTop",[je.HORIZONTAL]:"scrollLeft"};class ms{constructor({itemSize:e,itemCount:t,estimatedItemSize:i}){this.itemSize=e,this.itemCount=t,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:t,estimatedItemSize:i}){t!=null&&(this.itemCount=t),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:t}=this;return typeof t=="function"?t(e):Array.isArray(t)?t[e]:t}computeTotalSizeAndPositionData(){let e=0;for(let t=0;t<this.itemCount;t++){const i=this.getSize(t),r=e;e+=i,this.itemSizeAndPositionData[t]={offset:r,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const t=this.getSizeAndPositionOfLastMeasuredItem();let i=t.offset+t.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const s=this.getSize(r);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${r} of value ${s}`);this.itemSizeAndPositionData[r]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=yt.START,containerSize:t,currentOffset:i,targetIndex:r}){if(t<=0)return 0;const s=this.getSizeAndPositionForIndex(r),n=s.offset,f=n-t+s.size;let o;switch(e){case yt.END:o=f;break;case yt.CENTER:o=n-(t-s.size)/2;break;case yt.START:o=n;break;default:o=Math.max(f,Math.min(n,i))}const a=this.getTotalSize();return Math.max(0,Math.min(a-t,o))}getVisibleRange({containerSize:e=0,offset:t,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=t+e;let n=this.findNearestItem(t);if(n===void 0)throw Error(`Invalid offset ${t} specified`);const f=this.getSizeAndPositionForIndex(n);t=f.offset+f.size;let o=n;for(;t<s&&o<this.itemCount-1;)o++,t+=this.getSizeAndPositionForIndex(o).size;return i&&(n=Math.max(0,n-i),o=Math.min(o+i,this.itemCount-1)),{start:n,stop:o}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const t=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:t,offset:i}){let r=0,s=0;for(;e<=t;){if(r=e+Math.floor((t-e)/2),s=this.getSizeAndPositionForIndex(r).offset,s===i)return r;s<i?e=r+1:s>i&&(t=r-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:t}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<t;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:t})}}const _s=l=>({}),el=l=>({});function tl(l,e,t){const i=l.slice();return i[37]=e[t],i}const gs=l=>({style:l[0]&4,index:l[0]&4}),ll=l=>({style:l[37].style,index:l[37].index}),ps=l=>({}),sl=l=>({});function il(l,e){let t,i;const r=e[21].item,s=ut(r,e,e[20],ll);return{key:l,first:null,c(){t=pe(),s&&s.c(),this.h()},l(n){t=pe(),s&&s.l(n),this.h()},h(){this.first=t},m(n,f){D(n,t,f),s&&s.m(n,f),i=!0},p(n,f){e=n,s&&s.p&&(!i||f[0]&1048580)&&ct(s,r,e,e[20],i?ht(r,e[20],f,gs):dt(e[20]),ll)},i(n){i||(U(s,n),i=!0)},o(n){H(s,n),i=!1},d(n){n&&w(t),s&&s.d(n)}}}function ws(l){let e,t,i,r=[],s=new Map,n,f;const o=l[21].header,a=ut(o,l,l[20],sl);let h=l[2];const m=u=>u[0]?u[0](u[37].index):u[37].index;for(let u=0;u<h.length;u+=1){let c=tl(l,h,u),_=m(c);s.set(_,r[u]=il(_,c))}const d=l[21].footer,g=ut(d,l,l[20],el);return{c(){e=z("div"),a&&a.c(),t=L(),i=z("div");for(let u=0;u<r.length;u+=1)r[u].c();n=L(),g&&g.c(),this.h()},l(u){e=C(u,"DIV",{class:!0,style:!0});var c=M(e);a&&a.l(c),t=j(c),i=C(c,"DIV",{class:!0,style:!0});var _=M(i);for(let S=0;S<r.length;S+=1)r[S].l(_);_.forEach(w),n=j(c),g&&g.l(c),c.forEach(w),this.h()},h(){I(i,"class","virtual-list-inner svelte-1d4hv8l"),I(i,"style",l[4]),I(e,"class","virtual-list-wrapper svelte-1d4hv8l"),I(e,"style",l[3])},m(u,c){D(u,e,c),a&&a.m(e,null),b(e,t),b(e,i);for(let _=0;_<r.length;_+=1)r[_].m(i,null);b(e,n),g&&g.m(e,null),l[22](e),f=!0},p(u,c){a&&a.p&&(!f||c[0]&1048576)&&ct(a,o,u,u[20],f?ht(o,u[20],c,ps):dt(u[20]),sl),c[0]&1048581&&(h=u[2],De(),r=Ll(r,c,m,1,u,h,s,i,jl,il,null,tl),Ve()),(!f||c[0]&16)&&I(i,"style",u[4]),g&&g.p&&(!f||c[0]&1048576)&&ct(g,d,u,u[20],f?ht(d,u[20],c,_s):dt(u[20]),el),(!f||c[0]&8)&&I(e,"style",u[3])},i(u){if(!f){U(a,u);for(let c=0;c<h.length;c+=1)U(r[c]);U(g,u),f=!0}},o(u){H(a,u);for(let c=0;c<r.length;c+=1)H(r[c]);H(g,u),f=!1},d(u){u&&w(e),a&&a.d(u);for(let c=0;c<r.length;c+=1)r[c].d();g&&g.d(u),l[22](null)}}}const bs=(()=>{let l=!1;try{const e=Object.defineProperty({},"passive",{get(){return l={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return l})();function vs(l,e,t){let{$$slots:i={},$$scope:r}=e,{height:s}=e,{width:n="100%"}=e,{itemCount:f}=e,{itemSize:o}=e,{estimatedItemSize:a=null}=e,{stickyIndices:h=null}=e,{getKey:m=null}=e,{scrollDirection:d=je.VERTICAL}=e,{scrollOffset:g=null}=e,{scrollToIndex:u=null}=e,{scrollToAlignment:c=null}=e,{scrollToBehaviour:_="instant"}=e,{overscanCount:S=3}=e;const y=Ul(),P=new ms({itemCount:f,itemSize:o,estimatedItemSize:O()});let R=!1,v,E=[],k={offset:g||u!=null&&E.length&&ve(u)||0,scrollChangeReason:ft.REQUESTED},T=k,q={scrollToIndex:u,scrollToAlignment:c,scrollOffset:g,itemCount:f,itemSize:o,estimatedItemSize:a},Y={},fe="",Q="";le(),Il(()=>{t(18,R=!0),v.addEventListener("scroll",we,bs),g!=null?$(g):u!=null&&$(ve(u))}),Ot(()=>{R&&v.removeEventListener("scroll",we)});function x(){if(!R)return;const N=q.scrollToIndex!==u||q.scrollToAlignment!==c,ee=q.itemCount!==f||q.itemSize!==o||q.estimatedItemSize!==a;ee&&(P.updateConfig({itemSize:o,itemCount:f,estimatedItemSize:O()}),B()),q.scrollOffset!==g?t(19,k={offset:g||0,scrollChangeReason:ft.REQUESTED}):typeof u=="number"&&(N||ee)&&t(19,k={offset:ve(u,c,f),scrollChangeReason:ft.REQUESTED}),q={scrollToIndex:u,scrollToAlignment:c,scrollOffset:g,itemCount:f,itemSize:o,estimatedItemSize:a}}function F(){if(!R)return;const{offset:N,scrollChangeReason:ee}=k;(T.offset!==N||T.scrollChangeReason!==ee)&&le(),T.offset!==N&&ee===ft.REQUESTED&&$(N),T=k}function le(){const{offset:N}=k,{start:ee,stop:de}=P.getVisibleRange({containerSize:d===je.VERTICAL?s:n,offset:N,overscanCount:S});let ue=[];const me=P.getTotalSize();d===je.VERTICAL?(t(3,fe=`height:${s}px;width:${n};`),t(4,Q=`flex-direction:column;height:${me}px;`)):(t(3,fe=`height:${s};width:${n}px`),t(4,Q=`min-height:100%;width:${me}px;`));const Te=h!=null&&h.length!==0;if(Te)for(let he=0;he<h.length;he++){const Je=h[he];ue.push({index:Je,style:se(Je,!0)})}if(ee!==void 0&&de!==void 0){for(let he=ee;he<=de;he++)Te&&h.includes(he)||ue.push({index:he,style:se(he,!1)});y("itemsUpdated",{start:ee,end:de})}t(2,E=ue)}function $(N){"scroll"in v?v.scroll({[hs[d]]:N,behavior:_}):t(1,v[$t[d]]=N,v)}function B(N=0){Y={},P.resetItem(N),le()}function ve(N,ee=c,de=f){return(N<0||N>=de)&&(N=0),P.getUpdatedOffsetForIndex({align:ee,containerSize:d===je.VERTICAL?s:n,currentOffset:k.offset||0,targetIndex:N})}function we(N){const ee=re();ee<0||k.offset===ee||N.target!==v||(t(19,k={offset:ee,scrollChangeReason:ft.OBSERVED}),y("afterScroll",{offset:ee,event:N}))}function re(){return v[$t[d]]}function O(){return a||typeof o=="number"&&o||50}function se(N,ee){if(Y[N])return Y[N];const{size:de,offset:ue}=P.getSizeAndPositionForIndex(N);let me;return d===je.VERTICAL?(me=`left:0;width:100%;height:${de}px;`,ee?me+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${ue}px;margin-bottom:${-(ue+de)}px;`:me+=`position:absolute;top:${ue}px;`):(me=`top:0;width:${de}px;`,ee?me+=`position:sticky;z-index:1;left:0;margin-left:${ue}px;margin-right:${-(ue+de)}px;`:me+=`position:absolute;height:100%;left:${ue}px;`),Y[N]=me}function G(N){xe[N?"unshift":"push"](()=>{v=N,t(1,v)})}return l.$$set=N=>{"height"in N&&t(5,s=N.height),"width"in N&&t(6,n=N.width),"itemCount"in N&&t(7,f=N.itemCount),"itemSize"in N&&t(8,o=N.itemSize),"estimatedItemSize"in N&&t(9,a=N.estimatedItemSize),"stickyIndices"in N&&t(10,h=N.stickyIndices),"getKey"in N&&t(0,m=N.getKey),"scrollDirection"in N&&t(11,d=N.scrollDirection),"scrollOffset"in N&&t(12,g=N.scrollOffset),"scrollToIndex"in N&&t(13,u=N.scrollToIndex),"scrollToAlignment"in N&&t(14,c=N.scrollToAlignment),"scrollToBehaviour"in N&&t(15,_=N.scrollToBehaviour),"overscanCount"in N&&t(16,S=N.overscanCount),"$$scope"in N&&t(20,r=N.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&29568&&x(),l.$$.dirty[0]&524288&&F(),l.$$.dirty[0]&263264&&R&&B(0)},[m,v,E,fe,Q,s,n,f,o,a,h,d,g,u,c,_,S,B,R,k,r,i,G]}class Pl extends $e{constructor(e){super(),et(this,e,vs,ws,tt,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get recomputeSizes(){return this.$$.ctx[17]}}function nl(l,e,t){const i=l.slice();return i[9]=e[t],i}function Ss(l){let e,t,i;return t=new Pl({props:{height:"auto",overscanCount:15,itemCount:l[0].raw.length,itemSize:l[0].raw.map(l[6]),$$slots:{item:[Is,({style:r,index:s})=>({12:r,13:s}),({style:r,index:s})=>(r?4096:0)|(s?8192:0)]},$$scope:{ctx:l}}}),{c(){e=z("div"),Ce(t.$$.fragment),this.h()},l(r){e=C(r,"DIV",{class:!0});var s=M(e);Ne(t.$$.fragment,s),s.forEach(w),this.h()},h(){I(e,"class","mt-4 flex flex-col overflow-auto")},m(r,s){D(r,e,s),Me(t,e,null),i=!0},p(r,s){const n={};s&1&&(n.itemCount=r[0].raw.length),s&1&&(n.itemSize=r[0].raw.map(r[6])),s&28699&&(n.$$scope={dirty:s,ctx:r}),t.$set(n)},i(r){i||(U(t.$$.fragment,r),i=!0)},o(r){H(t.$$.fragment,r),i=!1},d(r){r&&w(e),Oe(t)}}}function ks(l){let e,t,i=Object.keys(l[0].grouped).map(l[7]).sort(al).reverse(),r=[];for(let n=0;n<i.length;n+=1)r[n]=ol(nl(l,i,n));const s=n=>H(r[n],1,1,()=>{r[n]=null});return{c(){e=z("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=C(n,"DIV",{class:!0});var f=M(e);for(let o=0;o<r.length;o+=1)r[o].l(f);f.forEach(w),this.h()},h(){I(e,"class","flex flex-col overflow-auto")},m(n,f){D(n,e,f);for(let o=0;o<r.length;o+=1)r[o].m(e,null);t=!0},p(n,f){if(f&12411){i=Object.keys(n[0].grouped).map(n[7]).sort(al).reverse();let o;for(o=0;o<i.length;o+=1){const a=nl(n,i,o);r[o]?(r[o].p(a,f),U(r[o],1)):(r[o]=ol(a),r[o].c(),U(r[o],1),r[o].m(e,null))}for(De(),o=i.length;o<r.length;o+=1)s(o);Ve()}},i(n){if(!t){for(let f=0;f<i.length;f+=1)U(r[f]);t=!0}},o(n){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)H(r[f]);t=!1},d(n){n&&w(e),mt(r,n)}}}function Is(l){let e,t,i,r;return t=new Rl({props:{set:l[0].raw[l[13]],highlight:l[1],jewel:l[3],conqueror:l[4]}}),{c(){e=z("div"),Ce(t.$$.fragment),this.h()},l(s){e=C(s,"DIV",{slot:!0,style:!0});var n=M(e);Ne(t.$$.fragment,n),n.forEach(w),this.h()},h(){I(e,"slot","item"),I(e,"style",i=l[12])},m(s,n){D(s,e,n),Me(t,e,null),r=!0},p(s,n){const f={};n&8193&&(f.set=s[0].raw[s[13]]),n&2&&(f.highlight=s[1]),n&8&&(f.jewel=s[3]),n&16&&(f.conqueror=s[4]),t.$set(f),(!r||n&4096&&i!==(i=s[12]))&&I(e,"style",i)},i(s){r||(U(t.$$.fragment,s),r=!0)},o(s){H(t.$$.fragment,s),r=!1},d(s){s&&w(e),Oe(t)}}}function rl(l){let e,t,i,r;return t=new Pl({props:{height:"auto",overscanCount:10,itemCount:l[0].grouped[l[9]].length,itemSize:l[0].grouped[l[9]].map(l[6]),$$slots:{item:[ys,({style:s,index:n})=>({12:s,13:n}),({style:s,index:n})=>(s?4096:0)|(n?8192:0)]},$$scope:{ctx:l}}}),{c(){e=z("div"),Ce(t.$$.fragment),i=L(),this.h()},l(s){e=C(s,"DIV",{class:!0});var n=M(e);Ne(t.$$.fragment,n),i=j(n),n.forEach(w),this.h()},h(){I(e,"class","flex flex-col overflow-auto min-h-[200px] mb-2")},m(s,n){D(s,e,n),Me(t,e,null),b(e,i),r=!0},p(s,n){const f={};n&1&&(f.itemCount=s[0].grouped[s[9]].length),n&1&&(f.itemSize=s[0].grouped[s[9]].map(s[6])),n&28699&&(f.$$scope={dirty:n,ctx:s}),t.$set(f)},i(s){r||(U(t.$$.fragment,s),r=!0)},o(s){H(t.$$.fragment,s),r=!1},d(s){s&&w(e),Oe(t)}}}function ys(l){let e,t,i,r;return t=new Rl({props:{set:l[0].grouped[l[9]][l[13]],highlight:l[1],jewel:l[3],conqueror:l[4]}}),{c(){e=z("div"),Ce(t.$$.fragment),this.h()},l(s){e=C(s,"DIV",{slot:!0,style:!0});var n=M(e);Ne(t.$$.fragment,n),n.forEach(w),this.h()},h(){I(e,"slot","item"),I(e,"style",i=l[12])},m(s,n){D(s,e,n),Me(t,e,null),r=!0},p(s,n){const f={};n&8193&&(f.set=s[0].grouped[s[9]][s[13]]),n&2&&(f.highlight=s[1]),n&8&&(f.jewel=s[3]),n&16&&(f.conqueror=s[4]),t.$set(f),(!r||n&4096&&i!==(i=s[12]))&&I(e,"style",i)},i(s){r||(U(t.$$.fragment,s),r=!0)},o(s){H(t.$$.fragment,s),r=!1},d(s){s&&w(e),Oe(t)}}}function ol(l){let e,t,i=l[9]+"",r,s,n=l[9]>1?"es":"",f,o,a=l[0].grouped[l[9]].length+"",h,m,d,g,u=l[5]===l[9]?"^":"V",c,_,S,y,P,R;function v(){return l[8](l[9])}let E=l[5]===l[9]&&rl(l);return{c(){e=z("button"),t=z("span"),r=V(i),s=V(" Match"),f=V(n),o=V(" ["),h=V(a),m=V("]"),d=L(),g=z("span"),c=V(u),_=L(),E&&E.c(),S=pe(),this.h()},l(k){e=C(k,"BUTTON",{class:!0});var T=M(e);t=C(T,"SPAN",{});var q=M(t);r=J(q,i),s=J(q," Match"),f=J(q,n),o=J(q," ["),h=J(q,a),m=J(q,"]"),q.forEach(w),d=j(T),g=C(T,"SPAN",{});var Y=M(g);c=J(Y,u),Y.forEach(w),T.forEach(w),_=j(k),E&&E.l(k),S=pe(),this.h()},h(){I(e,"class","text-lg w-full p-2 px-4 bg-neutral-500/30 rounded flex flex-row justify-between mb-2")},m(k,T){D(k,e,T),b(e,t),b(t,r),b(t,s),b(t,f),b(t,o),b(t,h),b(t,m),b(e,d),b(e,g),b(g,c),D(k,_,T),E&&E.m(k,T),D(k,S,T),y=!0,P||(R=ne(e,"click",v),P=!0)},p(k,T){l=k,(!y||T&1)&&i!==(i=l[9]+"")&&be(r,i),(!y||T&1)&&n!==(n=l[9]>1?"es":"")&&be(f,n),(!y||T&1)&&a!==(a=l[0].grouped[l[9]].length+"")&&be(h,a),(!y||T&33)&&u!==(u=l[5]===l[9]?"^":"V")&&be(c,u),l[5]===l[9]?E?(E.p(l,T),T&33&&U(E,1)):(E=rl(l),E.c(),U(E,1),E.m(S.parentNode,S)):E&&(De(),H(E,1,1,()=>{E=null}),Ve())},i(k){y||(U(E),y=!0)},o(k){H(E),y=!1},d(k){k&&w(e),k&&w(_),E&&E.d(k),k&&w(S),P=!1,R()}}}function Es(l){let e,t,i,r;const s=[ks,Ss],n=[];function f(o,a){return o[2]?0:1}return e=f(l),t=n[e]=s[e](l),{c(){t.c(),i=pe()},l(o){t.l(o),i=pe()},m(o,a){n[e].m(o,a),D(o,i,a),r=!0},p(o,[a]){let h=e;e=f(o),e===h?n[e].p(o,a):(De(),H(n[h],1,1,()=>{n[h]=null}),Ve(),t=n[e],t?t.p(o,a):(t=n[e]=s[e](o),t.c()),U(t,1),t.m(i.parentNode,i))},i(o){r||(U(t),r=!0)},o(o){H(t),r=!1},d(o){n[e].d(o),o&&w(i)}}}const al=(l,e)=>l-e;function Ts(l,e,t){let{searchResults:i}=e,{highlight:r}=e,{groupResults:s=!0}=e,{jewel:n}=e,{conqueror:f}=e;const o=d=>8+48+d.skills.reduce((g,u)=>g+32+Object.keys(u.stats).length*24,0);let a="";const h=d=>parseInt(d),m=d=>t(5,a=a===d?"":d);return l.$$set=d=>{"searchResults"in d&&t(0,i=d.searchResults),"highlight"in d&&t(1,r=d.highlight),"groupResults"in d&&t(2,s=d.groupResults),"jewel"in d&&t(3,n=d.jewel),"conqueror"in d&&t(4,f=d.conqueror)},[i,r,s,n,f,a,o,h,m]}class As extends $e{constructor(e){super(),et(this,e,Ts,Es,tt,{searchResults:0,highlight:1,groupResults:2,jewel:3,conqueror:4})}}const Tt={25:1,26:1,42:1,49:1,56:1,63:1,70:2,95:4,117:1,124:4,134:1,150:2,216:1,434:1,482:1,483:1,484:1,488:1,554:1,556:1,593:3,594:3,595:3,619:1,943:1,944:1,945:1,946:1,2133:4,3108:3,3109:4,3110:4,3111:4,5815:4,8835:1,9091:1,9772:1,14775:2,209:1,447:1,573:2,1294:1,1361:1,2031:5,8177:2,448:2,486:1,579:2,1404:1,2030:5,9090:1,9711:2,9712:2,9713:2,9714:2,9716:1,9717:1,9718:1,9721:1,9722:1,9723:1,9724:1,186:2,490:1,1251:3,1654:1,3392:1,6042:1,6048:1,6049:1,6050:1,6136:1,7499:2};function fl(l,e,t){const i=l.slice();return i[64]=e[t],i[65]=e,i[66]=t,i}function ul(l,e,t){const i=l.slice();return i[61]=e[t],i}function cl(l){let e,t,i,r=l[19]?"Config":"Results",s,n,f,o=l[19]&&dl(l);return{c(){e=z("div"),o&&o.c(),t=L(),i=z("button"),s=V(r),this.h()},l(a){e=C(a,"DIV",{class:!0});var h=M(e);o&&o.l(h),t=j(h),i=C(h,"BUTTON",{class:!0});var m=M(i);s=J(m,r),m.forEach(w),h.forEach(w),this.h()},h(){I(i,"class","bg-neutral-100/20 px-4 p-1 rounded"),I(e,"class","flex flex-row")},m(a,h){D(a,e,h),o&&o.m(e,null),b(e,t),b(e,i),b(i,s),n||(f=ne(i,"click",l[42]),n=!0)},p(a,h){a[19]?o?o.p(a,h):(o=dl(a),o.c(),o.m(e,t)):o&&(o.d(1),o=null),h[0]&524288&&r!==(r=a[19]?"Config":"Results")&&be(s,r)},d(a){a&&w(e),o&&o.d(),n=!1,f()}}}function dl(l){let e,t,i,r,s,n,f,o,a;return{c(){e=z("button"),t=V("Trade"),r=L(),s=z("button"),n=V("Grouped"),this.h()},l(h){e=C(h,"BUTTON",{class:!0});var m=M(e);t=J(m,"Trade"),m.forEach(w),r=j(h),s=C(h,"BUTTON",{class:!0});var d=M(s);n=J(d,"Grouped"),d.forEach(w),this.h()},h(){I(e,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2"),e.disabled=i=!l[15],I(s,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2 svelte-lpk64y"),s.disabled=f=!l[15],ze(s,"grouped",l[5])},m(h,m){D(h,e,m),b(e,t),D(h,r,m),D(h,s,m),b(s,n),o||(a=[ne(e,"click",l[40]),ne(s,"click",l[41])],o=!0)},p(h,m){m[0]&32768&&i!==(i=!h[15])&&(e.disabled=i),m[0]&32768&&f!==(f=!h[15])&&(s.disabled=f),m[0]&32&&ze(s,"grouped",h[5])},d(h){h&&w(e),h&&w(r),h&&w(s),o=!1,lt(a)}}}function hl(l){let e,t,i,r,s;function n(a){l[43](a)}let f={items:l[23]};l[0]!==void 0&&(f.value=l[0]),e=new At({props:f}),xe.push(()=>Vt(e,"value",n)),e.$on("select",l[29]);let o=l[0]&&ml(l);return{c(){Ce(e.$$.fragment),i=L(),o&&o.c(),r=pe()},l(a){Ne(e.$$.fragment,a),i=j(a),o&&o.l(a),r=pe()},m(a,h){Me(e,a,h),D(a,i,h),o&&o.m(a,h),D(a,r,h),s=!0},p(a,h){const m={};!t&&h[0]&1&&(t=!0,m.value=a[0],Dt(()=>t=!1)),e.$set(m),a[0]?o?(o.p(a,h),h[0]&1&&U(o,1)):(o=ml(a),o.c(),U(o,1),o.m(r.parentNode,r)):o&&(De(),H(o,1,1,()=>{o=null}),Ve())},i(a){s||(U(e.$$.fragment,a),U(o),s=!0)},o(a){H(e.$$.fragment,a),H(o),s=!1},d(a){Oe(e,a),a&&w(i),o&&o.d(a),a&&w(r)}}}function ml(l){let e,t,i,r,s,n,f,o=l[1]&&window.TimelessJewelConquerors[l[0].value].indexOf(l[1].value)>=0,a,h;function m(u){l[44](u)}let d={items:l[22]};l[1]!==void 0&&(d.value=l[1]),s=new At({props:d}),xe.push(()=>Vt(s,"value",m)),s.$on("select",l[25]);let g=o&&_l(l);return{c(){e=z("div"),t=z("h3"),i=V("Conqueror"),r=L(),Ce(s.$$.fragment),f=L(),g&&g.c(),a=pe(),this.h()},l(u){e=C(u,"DIV",{class:!0});var c=M(e);t=C(c,"H3",{class:!0});var _=M(t);i=J(_,"Conqueror"),_.forEach(w),r=j(c),Ne(s.$$.fragment,c),c.forEach(w),f=j(u),g&&g.l(u),a=pe(),this.h()},h(){I(t,"class","mb-2"),I(e,"class","mt-4")},m(u,c){D(u,e,c),b(e,t),b(t,i),b(e,r),Me(s,e,null),D(u,f,c),g&&g.m(u,c),D(u,a,c),h=!0},p(u,c){const _={};c[0]&4194304&&(_.items=u[22]),!n&&c[0]&2&&(n=!0,_.value=u[1],Dt(()=>n=!1)),s.$set(_),c[0]&3&&(o=u[1]&&window.TimelessJewelConquerors[u[0].value].indexOf(u[1].value)>=0),o?g?(g.p(u,c),c[0]&3&&U(g,1)):(g=_l(u),g.c(),U(g,1),g.m(a.parentNode,a)):g&&(De(),H(g,1,1,()=>{g=null}),Ve())},i(u){h||(U(s.$$.fragment,u),U(g),h=!0)},o(u){H(s.$$.fragment,u),H(g),h=!1},d(u){u&&w(e),Oe(s),u&&w(f),g&&g.d(u),u&&w(a)}}}function _l(l){let e,t,i,r,s,n,f,o,a,h,m,d,g,u;const c=[Ps,Rs],_=[];function S(P,R){return P[10]==="seed"?0:P[10]==="stats"?1:-1}~(o=S(l))&&(a=_[o]=c[o](l));let y=!l[3]&&Sl();return{c(){e=z("div"),t=z("button"),i=V("Enter Seed"),r=L(),s=z("button"),n=V("Select Stats"),f=L(),a&&a.c(),h=L(),y&&y.c(),m=pe(),this.h()},l(P){e=C(P,"DIV",{class:!0});var R=M(e);t=C(R,"BUTTON",{class:!0});var v=M(t);i=J(v,"Enter Seed"),v.forEach(w),r=j(R),s=C(R,"BUTTON",{class:!0});var E=M(s);n=J(E,"Select Stats"),E.forEach(w),R.forEach(w),f=j(P),a&&a.l(P),h=j(P),y&&y.l(P),m=pe(),this.h()},h(){I(t,"class","selection-button svelte-lpk64y"),ze(t,"selected",l[10]==="seed"),I(s,"class","selection-button svelte-lpk64y"),ze(s,"selected",l[10]==="stats"),I(e,"class","mt-4 w-full flex flex-row")},m(P,R){D(P,e,R),b(e,t),b(t,i),b(e,r),b(e,s),b(s,n),D(P,f,R),~o&&_[o].m(P,R),D(P,h,R),y&&y.m(P,R),D(P,m,R),d=!0,g||(u=[ne(t,"click",l[45]),ne(s,"click",l[46])],g=!0)},p(P,R){R[0]&1024&&ze(t,"selected",P[10]==="seed"),R[0]&1024&&ze(s,"selected",P[10]==="stats");let v=o;o=S(P),o===v?~o&&_[o].p(P,R):(a&&(De(),H(_[v],1,1,()=>{_[v]=null}),Ve()),~o?(a=_[o],a?a.p(P,R):(a=_[o]=c[o](P),a.c()),U(a,1),a.m(h.parentNode,h)):a=null),P[3]?y&&(y.d(1),y=null):y||(y=Sl(),y.c(),y.m(m.parentNode,m))},i(P){d||(U(a),d=!0)},o(P){H(a),d=!1},d(P){P&&w(e),P&&w(f),~o&&_[o].d(P),P&&w(h),y&&y.d(P),P&&w(m),g=!1,lt(u)}}}function Rs(l){let e,t,i,r,s,n,f=Object.keys(l[4]).length>0,o,a,h={items:l[20]};s=new At({props:h}),l[51](s),s.$on("select",l[27]);let m=f&&gl(l);return{c(){e=z("div"),t=z("h3"),i=V("Add Stat"),r=L(),Ce(s.$$.fragment),n=L(),m&&m.c(),o=pe(),this.h()},l(d){e=C(d,"DIV",{class:!0});var g=M(e);t=C(g,"H3",{class:!0});var u=M(t);i=J(u,"Add Stat"),u.forEach(w),r=j(g),Ne(s.$$.fragment,g),g.forEach(w),n=j(d),m&&m.l(d),o=pe(),this.h()},h(){I(t,"class","mb-2"),I(e,"class","mt-4")},m(d,g){D(d,e,g),b(e,t),b(t,i),b(e,r),Me(s,e,null),D(d,n,g),m&&m.m(d,g),D(d,o,g),a=!0},p(d,g){const u={};g[0]&1048576&&(u.items=d[20]),s.$set(u),g[0]&16&&(f=Object.keys(d[4]).length>0),f?m?m.p(d,g):(m=gl(d),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null)},i(d){a||(U(s.$$.fragment,d),a=!0)},o(d){H(s.$$.fragment,d),a=!1},d(d){d&&w(e),l[51](null),Oe(s),d&&w(n),m&&m.d(d),d&&w(o)}}}function Ps(l){let e,t,i,r,s,n,f,o,a,h,m,d,g,u=(l[2]<window.TimelessJewelSeedRanges[l[0].value].min||l[2]>window.TimelessJewelSeedRanges[l[0].value].max)&&wl(l),c=l[2]>=window.TimelessJewelSeedRanges[l[0].value].min&&l[2]<=window.TimelessJewelSeedRanges[l[0].value].max&&bl(l);return{c(){e=z("div"),t=z("h3"),i=V("Seed"),r=L(),s=z("input"),o=L(),u&&u.c(),a=L(),c&&c.c(),h=pe(),this.h()},l(_){e=C(_,"DIV",{class:!0});var S=M(e);t=C(S,"H3",{class:!0});var y=M(t);i=J(y,"Seed"),y.forEach(w),r=j(S),s=C(S,"INPUT",{type:!0,min:!0,max:!0}),o=j(S),u&&u.l(S),S.forEach(w),a=j(_),c&&c.l(_),h=pe(),this.h()},h(){I(t,"class","mb-2"),I(s,"type","number"),I(s,"min",n=window.TimelessJewelSeedRanges[l[0].value].min),I(s,"max",f=window.TimelessJewelSeedRanges[l[0].value].max),I(e,"class","mt-4")},m(_,S){D(_,e,S),b(e,t),b(t,i),b(e,r),b(e,s),Be(s,l[2]),b(e,o),u&&u.m(e,null),D(_,a,S),c&&c.m(_,S),D(_,h,S),m=!0,d||(g=[ne(s,"input",l[47]),ne(s,"blur",l[25])],d=!0)},p(_,S){(!m||S[0]&1&&n!==(n=window.TimelessJewelSeedRanges[_[0].value].min))&&I(s,"min",n),(!m||S[0]&1&&f!==(f=window.TimelessJewelSeedRanges[_[0].value].max))&&I(s,"max",f),S[0]&4&&Fe(s.value)!==_[2]&&Be(s,_[2]),_[2]<window.TimelessJewelSeedRanges[_[0].value].min||_[2]>window.TimelessJewelSeedRanges[_[0].value].max?u?u.p(_,S):(u=wl(_),u.c(),u.m(e,null)):u&&(u.d(1),u=null),_[2]>=window.TimelessJewelSeedRanges[_[0].value].min&&_[2]<=window.TimelessJewelSeedRanges[_[0].value].max?c?(c.p(_,S),S[0]&5&&U(c,1)):(c=bl(_),c.c(),U(c,1),c.m(h.parentNode,h)):c&&(De(),H(c,1,1,()=>{c=null}),Ve())},i(_){m||(U(c),m=!0)},o(_){H(c),m=!1},d(_){_&&w(e),u&&u.d(),_&&w(a),c&&c.d(_),_&&w(h),d=!1,lt(g)}}}function gl(l){let e,t,i,r,s,n,f,o,a,h,m,d,g,u,c,_,S,y,P,R,v,E,k,T,q,Y,fe,Q,x,F,le,$=Object.keys(l[4]),B=[];for(let O=0;O<$.length;O+=1)B[O]=pl(fl(l,$,O));function ve(O,se){return O[13]?Cs:zs}let we=ve(l),re=we(l);return{c(){e=z("div");for(let O=0;O<B.length;O+=1)B[O].c();t=L(),i=z("div"),r=z("div"),s=z("div"),n=V("Min Total Weight:"),f=L(),o=z("input"),a=L(),h=z("div"),m=z("div"),d=z("button"),g=V("Select All"),c=L(),_=z("button"),S=V("Notables"),P=L(),R=z("button"),v=V("Passives"),k=L(),T=z("button"),q=V("Deselect"),fe=L(),Q=z("div"),x=z("button"),re.c(),this.h()},l(O){e=C(O,"DIV",{class:!0});var se=M(e);for(let Ue=0;Ue<B.length;Ue+=1)B[Ue].l(se);se.forEach(w),t=j(O),i=C(O,"DIV",{class:!0});var G=M(i);r=C(G,"DIV",{class:!0});var N=M(r);s=C(N,"DIV",{class:!0});var ee=M(s);n=J(ee,"Min Total Weight:"),ee.forEach(w),f=j(N),o=C(N,"INPUT",{type:!0,min:!0}),N.forEach(w),G.forEach(w),a=j(O),h=C(O,"DIV",{class:!0});var de=M(h);m=C(de,"DIV",{class:!0});var ue=M(m);d=C(ue,"BUTTON",{class:!0});var me=M(d);g=J(me,"Select All"),me.forEach(w),c=j(ue),_=C(ue,"BUTTON",{class:!0});var Te=M(_);S=J(Te,"Notables"),Te.forEach(w),P=j(ue),R=C(ue,"BUTTON",{class:!0});var he=M(R);v=J(he,"Passives"),he.forEach(w),k=j(ue),T=C(ue,"BUTTON",{class:!0});var Je=M(T);q=J(Je,"Deselect"),Je.forEach(w),ue.forEach(w),fe=j(de),Q=C(de,"DIV",{class:!0});var Ge=M(Q);x=C(Ge,"BUTTON",{class:!0});var Ke=M(x);re.l(Ke),Ke.forEach(w),Ge.forEach(w),de.forEach(w),this.h()},h(){I(e,"class","mt-4 flex flex-col overflow-auto min-h-[100px]"),I(s,"class","mr-2 min-w-fit"),I(o,"type","number"),I(o,"min","0"),I(r,"class","flex flex-row items-center"),I(i,"class","flex flex-col mt-2"),I(d,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),d.disabled=u=l[13]||l[9].size==0,I(_,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),_.disabled=y=l[13]||l[9].size==0,I(R,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),R.disabled=E=l[13]||l[9].size==0,I(T,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 flex-grow"),T.disabled=Y=l[13]||l[9].size>=l[8].length,I(m,"class","flex flex-row"),I(x,"class","p-2 px-3 bg-green-500/40 rounded disabled:bg-green-900/40 flex-grow"),x.disabled=l[13],I(Q,"class","flex flex-row mt-2"),I(h,"class","flex flex-col mt-4")},m(O,se){D(O,e,se);for(let G=0;G<B.length;G+=1)B[G].m(e,null);D(O,t,se),D(O,i,se),b(i,r),b(r,s),b(s,n),b(r,f),b(r,o),Be(o,l[12]),D(O,a,se),D(O,h,se),b(h,m),b(m,d),b(d,g),b(m,c),b(m,_),b(_,S),b(m,P),b(m,R),b(R,v),b(m,k),b(m,T),b(T,q),b(h,fe),b(h,Q),b(Q,x),re.m(x,null),F||(le=[ne(o,"input",l[55]),ne(d,"click",l[32]),ne(_,"click",l[33]),ne(R,"click",l[34]),ne(T,"click",l[35]),ne(x,"click",l[56])],F=!0)},p(O,se){if(se[0]&268435472){$=Object.keys(O[4]);let G;for(G=0;G<$.length;G+=1){const N=fl(O,$,G);B[G]?B[G].p(N,se):(B[G]=pl(N),B[G].c(),B[G].m(e,null))}for(;G<B.length;G+=1)B[G].d(1);B.length=$.length}se[0]&4096&&Fe(o.value)!==O[12]&&Be(o,O[12]),se[0]&8704&&u!==(u=O[13]||O[9].size==0)&&(d.disabled=u),se[0]&8704&&y!==(y=O[13]||O[9].size==0)&&(_.disabled=y),se[0]&8704&&E!==(E=O[13]||O[9].size==0)&&(R.disabled=E),se[0]&8960&&Y!==(Y=O[13]||O[9].size>=O[8].length)&&(T.disabled=Y),we===(we=ve(O))&&re?re.p(O,se):(re.d(1),re=we(O),re&&(re.c(),re.m(x,null))),se[0]&8192&&(x.disabled=O[13])},d(O){O&&w(e),mt(B,O),O&&w(t),O&&w(i),O&&w(a),O&&w(h),re.d(),F=!1,lt(le)}}}function pl(l){let e,t,i,r,s,n,f=nt(l[4][l[64]].id)+"",o,a,h,m,d,g,u,c,_,S,y,P,R,v,E,k,T;function q(){return l[52](l[64])}function Y(){l[53].call(c,l[64])}function fe(){l[54].call(v,l[64])}return{c(){e=z("div"),t=z("div"),i=z("button"),r=V("-"),s=L(),n=z("span"),o=V(f),a=L(),h=z("div"),m=z("div"),d=z("div"),g=V("Min:"),u=L(),c=z("input"),_=L(),S=z("div"),y=z("div"),P=V("Weight:"),R=L(),v=z("input"),E=L(),this.h()},l(Q){e=C(Q,"DIV",{class:!0});var x=M(e);t=C(x,"DIV",{});var F=M(t);i=C(F,"BUTTON",{class:!0});var le=M(i);r=J(le,"-"),le.forEach(w),s=j(F),n=C(F,"SPAN",{});var $=M(n);o=J($,f),$.forEach(w),F.forEach(w),a=j(x),h=C(x,"DIV",{class:!0});var B=M(h);m=C(B,"DIV",{class:!0});var ve=M(m);d=C(ve,"DIV",{class:!0});var we=M(d);g=J(we,"Min:"),we.forEach(w),u=j(ve),c=C(ve,"INPUT",{type:!0,min:!0}),ve.forEach(w),_=j(B),S=C(B,"DIV",{class:!0});var re=M(S);y=C(re,"DIV",{class:!0});var O=M(y);P=J(O,"Weight:"),O.forEach(w),R=j(re),v=C(re,"INPUT",{type:!0,min:!0}),re.forEach(w),B.forEach(w),E=j(x),x.forEach(w),this.h()},h(){I(i,"class","p-2 px-4 bg-red-500/40 rounded mr-2"),I(d,"class","mr-2"),I(c,"type","number"),I(c,"min","0"),I(m,"class","mr-4 flex flex-row items-center"),I(y,"class","mr-2"),I(v,"type","number"),I(v,"min","0"),I(S,"class","flex flex-row items-center"),I(h,"class","mt-2 flex flex-row"),I(e,"class","mb-4 flex flex-row items-start flex-col border-neutral-100/40 border-b pb-4")},m(Q,x){D(Q,e,x),b(e,t),b(t,i),b(i,r),b(t,s),b(t,n),b(n,o),b(e,a),b(e,h),b(h,m),b(m,d),b(d,g),b(m,u),b(m,c),Be(c,l[4][l[64]].min),b(h,_),b(h,S),b(S,y),b(y,P),b(S,R),b(S,v),Be(v,l[4][l[64]].weight),b(e,E),k||(T=[ne(i,"click",q),ne(c,"input",Y),ne(v,"input",fe)],k=!0)},p(Q,x){l=Q,x[0]&16&&f!==(f=nt(l[4][l[64]].id)+"")&&be(o,f),x[0]&16&&Fe(c.value)!==l[4][l[64]].min&&Be(c,l[4][l[64]].min),x[0]&16&&Fe(v.value)!==l[4][l[64]].weight&&Be(v,l[4][l[64]].weight)},d(Q){Q&&w(e),k=!1,lt(T)}}}function zs(l){let e;return{c(){e=V("Search")},l(t){e=J(t,"Search")},m(t,i){D(t,e,i)},p:it,d(t){t&&w(e)}}}function Cs(l){let e,t,i=window.TimelessJewelSeedRanges[l[0].value].max+"",r;return{c(){e=V(l[14]),t=V(" / "),r=V(i)},l(s){e=J(s,l[14]),t=J(s," / "),r=J(s,i)},m(s,n){D(s,e,n),D(s,t,n),D(s,r,n)},p(s,n){n[0]&16384&&be(e,s[14]),n[0]&1&&i!==(i=window.TimelessJewelSeedRanges[s[0].value].max+"")&&be(r,i)},d(s){s&&w(e),s&&w(t),s&&w(r)}}}function wl(l){let e,t,i=window.TimelessJewelSeedRanges[l[0].value].min+"",r,s,n=window.TimelessJewelSeedRanges[l[0].value].max+"",f;return{c(){e=z("div"),t=V("Seed must be between "),r=V(i),s=V(`
                    and `),f=V(n),this.h()},l(o){e=C(o,"DIV",{class:!0});var a=M(e);t=J(a,"Seed must be between "),r=J(a,i),s=J(a,`
                    and `),f=J(a,n),a.forEach(w),this.h()},h(){I(e,"class","mt-2")},m(o,a){D(o,e,a),b(e,t),b(e,r),b(e,s),b(e,f)},p(o,a){a[0]&1&&i!==(i=window.TimelessJewelSeedRanges[o[0].value].min+"")&&be(r,i),a[0]&1&&n!==(n=window.TimelessJewelSeedRanges[o[0].value].max+"")&&be(f,n)},d(o){o&&w(e)}}}function bl(l){let e,t,i,r,s,n,f,o,a,h,m,d,g,u,c,_;function S(v){l[48](v)}let y={items:l[37]};l[6]!==void 0&&(y.value=l[6]),n=new At({props:y}),xe.push(()=>Vt(n,"value",S));let P=l[36](l[21],l[6].value,l[7]),R=[];for(let v=0;v<P.length;v+=1)R[v]=vl(ul(l,P,v));return{c(){e=z("div"),t=z("div"),i=z("h3"),r=V("Sort Order"),s=L(),Ce(n.$$.fragment),o=L(),a=z("div"),h=z("button"),m=V("Colors"),d=L(),g=z("ul");for(let v=0;v<R.length;v+=1)R[v].c();this.h()},l(v){e=C(v,"DIV",{class:!0});var E=M(e);t=C(E,"DIV",{class:!0});var k=M(t);i=C(k,"H3",{class:!0});var T=M(i);r=J(T,"Sort Order"),T.forEach(w),s=j(k),Ne(n.$$.fragment,k),k.forEach(w),o=j(E),a=C(E,"DIV",{class:!0});var q=M(a);h=C(q,"BUTTON",{class:!0});var Y=M(h);m=J(Y,"Colors"),Y.forEach(w),q.forEach(w),E.forEach(w),d=j(v),g=C(v,"UL",{class:!0});var fe=M(g);for(let Q=0;Q<R.length;Q+=1)R[Q].l(fe);fe.forEach(w),this.h()},h(){I(i,"class","mb-2"),I(t,"class","flex-grow"),I(h,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-lpk64y"),ze(h,"selected",l[7]),I(a,"class","ml-2"),I(e,"class","flex flex-row mt-4 items-end"),I(g,"class","mt-4 overflow-auto svelte-lpk64y"),ze(g,"rainbow",l[7])},m(v,E){D(v,e,E),b(e,t),b(t,i),b(i,r),b(t,s),Me(n,t,null),b(e,o),b(e,a),b(a,h),b(h,m),D(v,d,E),D(v,g,E);for(let k=0;k<R.length;k+=1)R[k].m(g,null);u=!0,c||(_=ne(h,"click",l[49]),c=!0)},p(v,E){const k={};if(!f&&E[0]&64&&(f=!0,k.value=v[6],Dt(()=>f=!1)),n.$set(k),E[0]&128&&ze(h,"selected",v[7]),E[0]&2097348|E[1]&33){P=v[36](v[21],v[6].value,v[7]);let T;for(T=0;T<P.length;T+=1){const q=ul(v,P,T);R[T]?R[T].p(q,E):(R[T]=vl(q),R[T].c(),R[T].m(g,null))}for(;T<R.length;T+=1)R[T].d(1);R.length=P.length}E[0]&128&&ze(g,"rainbow",v[7])},i(v){u||(U(n.$$.fragment,v),u=!0)},o(v){H(n.$$.fragment,v),u=!1},d(v){v&&w(e),Oe(n),v&&w(d),v&&w(g),mt(R,v),c=!1,_()}}}function vl(l){let e,t,i,r=l[61].passives.length+"",s,n,f,o,a=l[61].stat+"",h,m,d;function g(){return l[50](l[61])}return{c(){e=z("li"),t=z("span"),i=V("("),s=V(r),n=V(")"),f=L(),o=z("span"),h=L(),this.h()},l(u){e=C(u,"LI",{class:!0});var c=M(e);t=C(c,"SPAN",{class:!0});var _=M(t);i=J(_,"("),s=J(_,r),n=J(_,")"),_.forEach(w),f=j(c),o=C(c,"SPAN",{class:!0});var S=M(o);S.forEach(w),h=j(c),c.forEach(w),this.h()},h(){I(t,"class","font-bold"),ze(t,"text-white",(Tt[l[61].id]||0)<3),I(o,"class","text-white"),I(e,"class","cursor-pointer")},m(u,c){D(u,e,c),b(e,t),b(t,i),b(t,s),b(t,n),b(e,f),b(e,o),o.innerHTML=a,b(e,h),m||(d=ne(e,"click",g),m=!0)},p(u,c){l=u,c[0]&2097344&&r!==(r=l[61].passives.length+"")&&be(s,r),c[0]&2097344|c[1]&32&&ze(t,"text-white",(Tt[l[61].id]||0)<3),c[0]&2097344&&a!==(a=l[61].stat+"")&&(o.innerHTML=a)},d(u){u&&w(e),m=!1,d()}}}function Sl(l){let e,t;return{c(){e=z("h2"),t=V("Click on a jewel socket"),this.h()},l(i){e=C(i,"H2",{class:!0});var r=M(e);t=J(r,"Click on a jewel socket"),r.forEach(w),this.h()},h(){I(e,"class","mt-4")},m(i,r){D(i,e,r),b(e,t)},d(i){i&&w(e)}}}function kl(l){let e,t;return e=new As({props:{searchResults:l[15],groupResults:l[5],highlight:l[31],jewel:l[16],conqueror:l[17]}}),{c(){Ce(e.$$.fragment)},l(i){Ne(e.$$.fragment,i)},m(i,r){Me(e,i,r),t=!0},p(i,r){const s={};r[0]&32768&&(s.searchResults=i[15]),r[0]&32&&(s.groupResults=i[5]),r[0]&65536&&(s.jewel=i[16]),r[0]&131072&&(s.conqueror=i[17]),e.$set(s)},i(i){t||(U(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){Oe(e,i)}}}function Ns(l){let e,t,i,r,s=l[19]?"Results":"Timeless Jewel",n,f,o,a,h,m,d,g,u,c=l[15]&&cl(l),_=!l[19]&&hl(l),S=l[15]&&l[19]&&kl(l);return{c(){e=z("div"),t=z("div"),i=z("div"),r=z("h3"),n=V(s),f=L(),c&&c.c(),o=L(),_&&_.c(),a=L(),S&&S.c(),h=L(),m=z("div"),d=z("a"),g=V("Source (Github)"),this.h()},l(y){e=C(y,"DIV",{class:!0});var P=M(e);t=C(P,"DIV",{class:!0});var R=M(t);i=C(R,"DIV",{class:!0});var v=M(i);r=C(v,"H3",{class:!0});var E=M(r);n=J(E,s),E.forEach(w),f=j(v),c&&c.l(v),v.forEach(w),o=j(R),_&&_.l(R),a=j(R),S&&S.l(R),R.forEach(w),P.forEach(w),h=j(y),m=C(y,"DIV",{class:!0});var k=M(m);d=C(k,"A",{href:!0,target:!0,rel:!0});var T=M(d);g=J(T,"Source (Github)"),T.forEach(w),k.forEach(w),this.h()},h(){I(r,"class","flex-grow"),I(i,"class","flex flex-row justify-between mb-2"),I(t,"class","p-4 max-h-screen flex flex-col"),I(e,"class","w-1/2 xl:w-1/3 2xl:w-1/4 3xl:w-1/5 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen"),I(d,"href","https://github.com/Vilsol/timeless-jewels"),I(d,"target","_blank"),I(d,"rel","noopener"),I(m,"class","text-orange-500 absolute bottom-0 right-0 m-2")},m(y,P){D(y,e,P),b(e,t),b(t,i),b(i,r),b(r,n),b(i,f),c&&c.m(i,null),b(t,o),_&&_.m(t,null),b(t,a),S&&S.m(t,null),D(y,h,P),D(y,m,P),b(m,d),b(d,g),u=!0},p(y,P){(!u||P[0]&524288)&&s!==(s=y[19]?"Results":"Timeless Jewel")&&be(n,s),y[15]?c?c.p(y,P):(c=cl(y),c.c(),c.m(i,null)):c&&(c.d(1),c=null),y[19]?_&&(De(),H(_,1,1,()=>{_=null}),Ve()):_?(_.p(y,P),P[0]&524288&&U(_,1)):(_=hl(y),_.c(),U(_,1),_.m(t,a)),y[15]&&y[19]?S?(S.p(y,P),P[0]&557056&&U(S,1)):(S=kl(y),S.c(),U(S,1),S.m(t,null)):S&&(De(),H(S,1,1,()=>{S=null}),Ve())},i(y){u||(U(_),U(S),u=!0)},o(y){H(_),H(S),u=!1},d(y){y&&w(e),c&&c.d(),_&&_.d(),S&&S.d(),y&&w(h),y&&w(m)}}}function Ms(l){var i,r;let e,t;return e=new us({props:{clickNode:l[24],circledNode:l[3],selectedJewel:(i=l[0])==null?void 0:i.value,selectedConqueror:(r=l[1])==null?void 0:r.value,highlighted:l[18],seed:l[2],highlightJewels:!l[3],disabled:[...l[9]],$$slots:{default:[Ns]},$$scope:{ctx:l}}}),{c(){Ce(e.$$.fragment)},l(s){Ne(e.$$.fragment,s)},m(s,n){Me(e,s,n),t=!0},p(s,n){var o,a;const f={};n[0]&8&&(f.circledNode=s[3]),n[0]&1&&(f.selectedJewel=(o=s[0])==null?void 0:o.value),n[0]&2&&(f.selectedConqueror=(a=s[1])==null?void 0:a.value),n[0]&262144&&(f.highlighted=s[18]),n[0]&4&&(f.seed=s[2]),n[0]&8&&(f.highlightJewels=!s[3]),n[0]&512&&(f.disabled=[...s[9]]),n[0]&8126463|n[2]&32&&(f.$$scope={dirty:n,ctx:s}),e.$set(f)},i(s){t||(U(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){Oe(e,s)}}}function Os(l,e,t){let i,r,s,n,f,o;Ee(l,Xl,A=>t(57,o=A));const a=o.url.searchParams,h=Object.keys(window.TimelessJewels).map(A=>({value:parseInt(A),label:window.TimelessJewels[A]}));let m=a.has("jewel")?h.find(A=>A.value==a.get("jewel")):void 0,d=a.has("conqueror")?{value:a.get("conqueror"),label:a.get("conqueror")}:void 0,g=a.has("seed")?parseInt(a.get("seed")):0,u=a.has("location")?parseInt(a.get("location")):void 0,c=new Set;const _=A=>{A.isJewelSocket?(t(3,u=A.skill),S()):A.isMastery||(c.has(A.skill)?c.delete(A.skill):c.add(A.skill),t(9,c))},S=()=>{const A=new URL(window.location.origin+window.location.pathname);m&&A.searchParams.append("jewel",m.value.toString()),d&&A.searchParams.append("conqueror",d.value),g&&A.searchParams.append("seed",g.toString()),u&&A.searchParams.append("location",u.toString()),y&&A.searchParams.append("mode",y),Object.keys(v).forEach(te=>{A.searchParams.append("stat",te.toString())}),Yl(A.toString())};let y=a.has("mode")?a.get("mode"):"";const P=A=>{t(10,y=A),S()};let R=JSON.parse(window.PossibleStats),v={};a.has("stat")&&a.getAll("stat").map(A=>{const te=parseInt(A);t(4,v[te]={weight:1,min:0,id:te},v)});let E;const k=A=>{t(4,v[A.detail.value]={weight:1,min:0,id:A.detail.value},v),t(4,v),E.handleClear(),S()},T=A=>{delete v[A],t(4,v),S()},q=()=>{t(4,v={}),S()};let Y=0,fe=!1,Q=0,x,F=1,le="";const $=()=>{if(!u)return;t(16,F=m.value),t(17,le=d.value),t(13,fe=!0),t(15,x=void 0);const A={jewel:m.value,conqueror:d.value,nodes:r.filter(te=>!c.has(te.skill)).map(te=>window.TreeToPassive[te.skill]),stats:Object.keys(v).map(te=>v[te]),minTotalWeight:Y};Hl.search(A,Wl(te=>t(14,Q=te))).then(te=>{t(15,x=te),t(13,fe=!1),t(19,N=!0)})};let B=[];const ve=(A,te)=>{t(2,g=A),t(18,B=te),S()},we=()=>{c.clear(),t(9,c)},re=()=>{r.forEach(A=>{A.isNotable&&c.delete(A.skill)}),t(9,c)},O=()=>{r.forEach(A=>{A.isNotable||c.delete(A.skill)}),t(9,c)},se=()=>{r.filter(A=>!A.isJewelSocket&&!A.isMastery).forEach(A=>c.add(A.skill)),t(9,c)};let G=localStorage.getItem("groupResults")===null?!0:localStorage.getItem("groupResults")==="true",N=!1;const ee={physical:"#c79d93",cast:"#b3f8fe",fire:"#ff9a77",cold:"#93d8ff",lightning:"#f8cb76",attack:"#da814d",life:"#c96e6e",chaos:"#d8a7d3",unique:"#af6025",critical:"#b2a7d6"},de=A=>(Object.keys(ee).forEach(te=>{const He=ee[te];A=A.replace(new RegExp(`(${te}(?:$|\\s))|((?:^|\\s)${te})`,"gi"),`<span style='color: ${He}; font-weight: bold'>$1$2</span>`)}),A),ue=(A,te,He)=>{const p={};A.forEach(X=>{if("alternatePassiveSkill"in X.result){const K=GetAlternatePassiveSkillByIndex(X.result.alternatePassiveSkill);"statsKeys"in K&&K.statsKeys.forEach(Z=>{p[Z]=[...p[Z]||[],X.node]})}"alternatePassiveAdditionInformations"in X.result&&X.result.alternatePassiveAdditionInformations.forEach(K=>{const Z=GetAlternatePassiveAdditionByIndex(K.alternatePassiveSkillAddition);"statsKeys"in Z&&Z.statsKeys.forEach(ae=>{p[ae]=[...p[ae]||[],X.node]})})});const oe=Object.keys(p).map(X=>{const K=nt(parseInt(X));return{stat:He?de(K):K,rawStat:K,id:X,passives:p[X]}});switch(te){case"alphabet":return oe.sort((X,K)=>X.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase().localeCompare(K.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase()));case"count":return oe.sort((X,K)=>K.passives.length-X.passives.length);case"rarity":return oe.sort((X,K)=>R[m.value][X.id]-R[m.value][K.id]);case"value":return oe.sort((X,K)=>{const Z=Tt[X.id]||0,ae=Tt[K.id]||0;return Z!=ae?ae-Z:R[m.value][X.id]-R[m.value][K.id]})}return oe},me=[{label:"Count",value:"count"},{label:"Alphabetical",value:"alphabet"},{label:"Rarity",value:"rarity"},{label:"Value",value:"value"}];let Te=me.find(A=>A.value===(localStorage.getItem("sortOrder")||"count")),he=localStorage.getItem("colored")===null?!0:localStorage.getItem("colored")==="true";const Je=()=>yl(F,le,x.raw),Ge=()=>t(5,G=!G),Ke=()=>t(19,N=!N);function Ue(A){m=A,t(0,m)}function _t(A){d=A,t(1,d)}const gt=()=>P("seed"),ke=()=>P("stats");function pt(){g=Fe(this.value),t(2,g)}function wt(A){Te=A,t(6,Te)}const bt=()=>t(7,he=!he),vt=A=>ve(g,A.passives);function rt(A){xe[A?"unshift":"push"](()=>{E=A,t(11,E)})}const Rt=A=>T(v[A].id);function Pt(A){v[A].min=Fe(this.value),t(4,v)}function zt(A){v[A].weight=Fe(this.value),t(4,v)}function Ct(){Y=Fe(this.value),t(12,Y)}const St=()=>$();return l.$$.update=()=>{l.$$.dirty[0]&1&&t(22,i=m?window.TimelessJewelConquerors[m.value].map(A=>({value:A,label:A})):[]),l.$$.dirty[0]&8&&t(8,r=u?Kl(Ze.nodes[u]).filter(A=>!A.isJewelSocket&&!A.isMastery):[]),l.$$.dirty[0]&263&&t(21,s=!g||!m||!d||window.TimelessJewelConquerors[m.value].indexOf(d.value)<0?[]:r.map(A=>({node:A.skill,result:Calculate(TreeToPassive[A.skill],g,m.value,d.value)}))),l.$$.dirty[0]&1&&t(39,n=m?Object.keys(R[m.value]):[]),l.$$.dirty[0]&16|l.$$.dirty[1]&256&&t(20,f=n.map(A=>{const te=parseInt(A);return{label:nt(te),value:te}}).filter(A=>!(A.value in v))),l.$$.dirty[0]&32&&localStorage.setItem("groupResults",G?"true":"false"),l.$$.dirty[0]&64&&localStorage.setItem("sortOrder",Te.value),l.$$.dirty[0]&128&&localStorage.setItem("colored",he?"true":"false")},[m,d,g,u,v,G,Te,he,r,c,y,E,Y,fe,Q,x,F,le,B,N,f,s,i,h,_,S,P,k,T,q,$,ve,we,re,O,se,ue,me,ee,n,Je,Ge,Ke,Ue,_t,gt,ke,pt,wt,bt,vt,rt,Rt,Pt,zt,Ct,St]}class Us extends $e{constructor(e){super(),et(this,e,Os,Ms,tt,{colorKeys:38},null,[-1,-1,-1])}get colorKeys(){return this.$$.ctx[38]}}export{Us as default};
